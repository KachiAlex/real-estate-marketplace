{"version":3,"file":"static/js/843.4003b0f4.chunk.js","mappings":"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","sources":["components/PropertyPurchaseButton.js","pages/PropertyDetail.js","components/Breadcrumbs.js","services/inspectionService.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { FaShoppingCart, FaShieldAlt } from 'react-icons/fa';\r\nimport toast from 'react-hot-toast';\r\nimport EscrowPaymentFlow from './EscrowPaymentFlow';\r\n\r\nconst PropertyPurchaseButton = ({ property, className = '' }) => {\r\n  const { user } = useAuth();\r\n  const [showPaymentFlow, setShowPaymentFlow] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (showPaymentFlow) {\r\n      const { style } = document.body;\r\n      const previousOverflow = style.overflow;\r\n      style.overflow = 'hidden';\r\n      return () => {\r\n        style.overflow = previousOverflow;\r\n      };\r\n    }\r\n    return undefined;\r\n  }, [showPaymentFlow]);\r\n\r\n  const handlePurchaseClick = () => {\r\n    if (!user) {\r\n      toast.error('Login is temporarily unavailable while we rebuild the auth experience.');\r\n      return;\r\n    }\r\n    setShowPaymentFlow(true);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <button\r\n        onClick={handlePurchaseClick}\r\n        className={`w-full bg-brand-blue hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors flex items-center justify-center space-x-2 ${className}`}\r\n      >\r\n        <FaShoppingCart className=\"h-5 w-5\" />\r\n        <span>Buy with Escrow Protection</span>\r\n        <FaShieldAlt className=\"h-4 w-4\" />\r\n      </button>\r\n\r\n      {showPaymentFlow && (\r\n        <EscrowPaymentFlow\r\n          property={property}\r\n          onClose={() => setShowPaymentFlow(false)}\r\n          isModal={true}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PropertyPurchaseButton;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useParams, Link, useNavigate } from 'react-router-dom';\r\nimport { useProperty } from '../contexts/PropertyContext';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { FaBed, FaBath, FaRulerCombined, FaHeart, FaShare, FaPhone, FaEnvelope, FaMapMarkerAlt, FaCalendar, FaShoppingCart, FaWhatsapp, FaCreditCard, FaLock, FaArrowLeft } from 'react-icons/fa';\r\nimport toast from 'react-hot-toast';\r\nimport { createInspectionRequest } from '../services/inspectionService';\r\nimport Breadcrumbs from '../components/Breadcrumbs';\r\nimport PropertyPurchaseButton from '../components/PropertyPurchaseButton';\r\n\r\nconst PropertyDetail = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const { properties, loading, error, toggleFavorite } = useProperty();\r\n  const { user, setAuthRedirect } = useAuth();\r\n  const [property, setProperty] = useState(null);\r\n  const [activeImage, setActiveImage] = useState(0);\r\n  const [showInquiryModal, setShowInquiryModal] = useState(false);\r\n  const [inquiryMessage, setInquiryMessage] = useState('');\r\n  const [showScheduleModal, setShowScheduleModal] = useState(false);\r\n  const [preferredDate, setPreferredDate] = useState('');\r\n  const [preferredTime, setPreferredTime] = useState('');\r\n  const [isFavorite, setIsFavorite] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (properties && id) {\r\n      const foundProperty = properties.find(p => \r\n        p.id === id || \r\n        p.propertyId === id || \r\n        p.numericId === parseInt(id) ||\r\n        p.id === `prop_${id}` ||\r\n        p.id?.toString() === id?.toString()\r\n      );\r\n      \r\n      if (foundProperty) {\r\n        // Ensure location data is properly set\r\n        if (foundProperty.location && typeof foundProperty.location === 'string' && foundProperty.location.includes('undefined')) {\r\n          // If location string has undefined, reconstruct from separate properties\r\n          const parts = [\r\n            foundProperty.address,\r\n            foundProperty.city,\r\n            foundProperty.state\r\n          ].filter(part => part && part !== 'undefined' && part !== undefined && part !== null);\r\n          \r\n          if (parts.length > 0) {\r\n            foundProperty.location = parts.join(', ');\r\n          }\r\n        }\r\n        \r\n        setProperty(foundProperty);\r\n        // Reset activeImage when property changes\r\n        setActiveImage(0);\r\n      }\r\n    }\r\n  }, [properties, id]);\r\n\r\n  // Check if property is favorited\r\n  useEffect(() => {\r\n    if (property && user && user.id) {\r\n      const key = `favorites_${user.id}`;\r\n      const favorites = new Set(JSON.parse(localStorage.getItem(key) || '[]'));\r\n      setIsFavorite(favorites.has(property.id));\r\n    } else {\r\n      setIsFavorite(false);\r\n    }\r\n  }, [property, user]);\r\n\r\n  // Get the current image URL based on activeImage index\r\n  const getCurrentImage = () => {\r\n    if (!property) return 'https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=800&h=600&fit=crop';\r\n    \r\n    // Check if property has images array\r\n    if (property.images && Array.isArray(property.images) && property.images.length > 0) {\r\n      // Ensure activeImage is within bounds\r\n      const safeIndex = Math.max(0, Math.min(activeImage, property.images.length - 1));\r\n      const currentImage = property.images[safeIndex];\r\n      \r\n      // Handle both string URLs and object with url property\r\n      if (typeof currentImage === 'string') {\r\n        return currentImage;\r\n      } else if (currentImage && currentImage.url) {\r\n        return currentImage.url;\r\n      }\r\n    }\r\n    \r\n    // Fallback to property.image if available\r\n    if (property.image) {\r\n      return property.image;\r\n    }\r\n    \r\n    return 'https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=800&h=600&fit=crop';\r\n  };\r\n\r\n  // Get image URL for thumbnails\r\n  const getImageUrl = (image) => {\r\n    if (typeof image === 'string') {\r\n      return image;\r\n    } else if (image && image.url) {\r\n      return image.url;\r\n    }\r\n    return 'https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=80&h=80&fit=crop';\r\n  };\r\n\r\n  const handleToggleFavorite = async () => {\r\n    if (!user || !user.id) {\r\n      toast.error('Please login to add favorites');\r\n      // User can continue viewing the property without being forced to login\r\n      return;\r\n    }\r\n    \r\n    if (!property || !property.id) {\r\n      toast.error('Property information not available');\r\n      return;\r\n    }\r\n\r\n    const storageKey = `favorites_${user.id}`;\r\n    const wasFavorite = isFavorite;\r\n    const propertyIdStr = String(property.id);\r\n\r\n    // Optimistic UI update\r\n    setIsFavorite(!wasFavorite);\r\n    let updatedFavorites;\r\n    try {\r\n      const existing = new Set(JSON.parse(localStorage.getItem(storageKey) || '[]'));\r\n      if (wasFavorite) {\r\n        existing.delete(propertyIdStr);\r\n        toast.success('Property removed from saved properties');\r\n      } else {\r\n        existing.add(propertyIdStr);\r\n        toast.success('Property added to saved properties');\r\n      }\r\n      updatedFavorites = Array.from(existing);\r\n      localStorage.setItem(storageKey, JSON.stringify(updatedFavorites));\r\n    } catch {\r\n      // ignore localStorage errors\r\n    }\r\n\r\n    try {\r\n      const result = await toggleFavorite(propertyIdStr, property);\r\n      if (!result || result.success === undefined) {\r\n        throw new Error('Failed to toggle favorite on server');\r\n      }\r\n      \r\n      // Dispatch event to notify other components (like Dashboard)\r\n      window.dispatchEvent(new CustomEvent('favoritesUpdated', {\r\n        detail: { propertyId: propertyIdStr, favorited: !wasFavorite }\r\n      }));\r\n      \r\n      // Also trigger a storage event for cross-tab synchronization\r\n      if (updatedFavorites) {\r\n        window.dispatchEvent(new StorageEvent('storage', {\r\n          key: storageKey,\r\n          newValue: JSON.stringify(updatedFavorites)\r\n        }));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error toggling favorite:', error);\r\n\r\n      // Revert optimistic UI on error\r\n      setIsFavorite(wasFavorite);\r\n      try {\r\n        const existing = new Set(JSON.parse(localStorage.getItem(storageKey) || '[]'));\r\n        if (wasFavorite) {\r\n          existing.add(propertyIdStr);\r\n        } else {\r\n          existing.delete(propertyIdStr);\r\n        }\r\n        localStorage.setItem(storageKey, JSON.stringify(Array.from(existing)));\r\n      } catch {\r\n        // ignore localStorage errors\r\n      }\r\n\r\n      toast.error('Failed to update saved properties. Please try again.');\r\n    }\r\n  };\r\n\r\n  const handleShareProperty = async () => {\r\n    if (navigator.share) {\r\n      try {\r\n        await navigator.share({\r\n          title: property.title,\r\n          text: property.description,\r\n          url: window.location.href\r\n        });\r\n      } catch (error) {\r\n        console.log('Error sharing:', error);\r\n        handleCopyLink();\r\n      }\r\n    } else {\r\n      handleCopyLink();\r\n    }\r\n  };\r\n\r\n  const handleCopyLink = () => {\r\n    navigator.clipboard.writeText(window.location.href).then(() => {\r\n      toast.success('Property link copied to clipboard!');\r\n    }).catch(() => {\r\n      toast.error('Failed to copy link');\r\n    });\r\n  };\r\n\r\n  const createInquiry = (property, inquiryType, message = '') => {\r\n    if (!user || !user.id || !property) {\r\n      console.warn('createInquiry: Missing user or property information');\r\n      return;\r\n    }\r\n\r\n    // Check if inquiry already exists for this property and user\r\n    const existingInquiries = JSON.parse(localStorage.getItem('inquiries') || '[]');\r\n    const existingInquiry = existingInquiries.find(\r\n      inq => inq.propertyId === property.id && \r\n             (inq.userId === user.id || inq.buyerId === user.id) &&\r\n             (inq.status === 'new' || inq.status === 'pending' || inq.status === 'contacted')\r\n    );\r\n\r\n    // If inquiry already exists, don't create duplicate\r\n    if (existingInquiry) {\r\n      return existingInquiry;\r\n    }\r\n\r\n    // Create new inquiry\r\n    const inquiry = {\r\n      id: `inquiry-${Date.now()}`,\r\n      propertyId: property.id,\r\n      propertyTitle: property.title,\r\n      propertyLocation: typeof property.location === 'string' \r\n        ? property.location \r\n        : property.location?.address || property.location?.city || 'Location not specified',\r\n      propertyPrice: property.price || 0,\r\n      propertyImage: property.images?.[0]?.url || property.image || property.images?.[0] || '',\r\n      propertyBedrooms: property.bedrooms || property.details?.bedrooms || 0,\r\n      propertyBathrooms: property.bathrooms || property.details?.bathrooms || 0,\r\n      propertyArea: property.area || property.details?.sqft || 0,\r\n      userId: user.id,\r\n      buyerId: user.id,\r\n      buyerName: `${user.firstName} ${user.lastName}`,\r\n      buyerEmail: user.email,\r\n      buyerPhone: user.phone || '',\r\n      vendorId: property.vendorId || property.owner?.id || property.vendor?.id || '',\r\n      vendorName: property.owner?.firstName \r\n        ? `${property.owner.firstName} ${property.owner.lastName || ''}`.trim()\r\n        : property.vendor?.firstName \r\n        ? `${property.vendor.firstName} ${property.vendor.lastName || ''}`.trim()\r\n        : 'Property Vendor',\r\n      vendorEmail: property.owner?.email || property.vendor?.email || property.vendorEmail || '',\r\n      vendorPhone: property.owner?.phone || property.vendorPhone || property.contactPhone || property.vendor?.phone || '',\r\n      inquiryType: inquiryType, // 'call' or 'message'\r\n      message: message || `I'm interested in ${property.title}. Please contact me.`,\r\n      status: 'new',\r\n      createdAt: new Date().toISOString(),\r\n      updatedAt: new Date().toISOString(),\r\n      responses: []\r\n    };\r\n\r\n    // Save to localStorage\r\n    existingInquiries.push(inquiry);\r\n    localStorage.setItem('inquiries', JSON.stringify(existingInquiries));\r\n\r\n    // Dispatch event to notify dashboard\r\n    window.dispatchEvent(new CustomEvent('inquiriesUpdated', {\r\n      detail: { inquiry, action: 'created' }\r\n    }));\r\n    \r\n    // Also trigger a storage event for cross-tab synchronization\r\n    window.dispatchEvent(new StorageEvent('storage', {\r\n      key: 'inquiries',\r\n      newValue: JSON.stringify(existingInquiries)\r\n    }));\r\n\r\n    return inquiry;\r\n  };\r\n\r\n  const handleContactOwner = () => {\r\n    console.log('Contact Owner clicked, property:', property, 'user:', user);\r\n    \r\n    if (!user) {\r\n      toast.error('Please login to contact property vendor');\r\n      // User can continue viewing the property without being forced to login\r\n      return;\r\n    }\r\n    \r\n    // Create inquiry\r\n    createInquiry(property, 'message', `I'm interested in ${property.title}. Please contact me via WhatsApp.`);\r\n    \r\n    // Get vendor's phone number\r\n    const vendorPhone = property?.owner?.phone || property?.vendorPhone || property?.contactPhone || property?.vendor?.phone;\r\n    \r\n    if (!vendorPhone) {\r\n      toast.error('Vendor phone number not available');\r\n      return;\r\n    }\r\n    \r\n    // Format phone number for WhatsApp\r\n    // Remove all non-digit characters\r\n    let formattedPhone = vendorPhone.replace(/\\D/g, '');\r\n    \r\n    // Handle Nigerian phone numbers (country code: 234)\r\n    if (formattedPhone.startsWith('234')) {\r\n      // Already has country code, no change needed\r\n    } else if (formattedPhone.startsWith('0')) {\r\n      // Remove leading 0 and add country code\r\n      formattedPhone = '234' + formattedPhone.substring(1);\r\n    } else {\r\n      // Add country code if missing\r\n      formattedPhone = '234' + formattedPhone;\r\n    }\r\n    \r\n    // Create WhatsApp message\r\n    const propertyTitle = property?.title || 'Property';\r\n    const propertyPrice = property?.price ? `â‚¦${property.price.toLocaleString()}` : '';\r\n    const message = encodeURIComponent(\r\n      `Hi, I'm interested in your property: ${propertyTitle}${propertyPrice ? ` (${propertyPrice})` : ''}. Could you please provide more information?`\r\n    );\r\n    \r\n    // Open WhatsApp\r\n    const whatsappUrl = `https://wa.me/${formattedPhone}?text=${message}`;\r\n    window.open(whatsappUrl, '_blank');\r\n    \r\n    toast.success('Opening WhatsApp... Inquiry saved to My Inquiries.');\r\n  };\r\n\r\n  const handleSendInquiry = () => {\r\n    if (!inquiryMessage.trim()) {\r\n      toast.error('Please enter your message');\r\n      return;\r\n    }\r\n    \r\n    // Simulate sending inquiry\r\n    toast.success('Inquiry sent successfully! The vendor will contact you soon.');\r\n    setShowInquiryModal(false);\r\n    setInquiryMessage('');\r\n  };\r\n\r\n  const handleScheduleViewing = () => {\r\n    if (!user) {\r\n      toast.error('Please login to schedule a viewing');\r\n      // User can continue viewing the property without being forced to login\r\n      return;\r\n    }\r\n    // Open scheduling modal to pick date/time\r\n    setShowScheduleModal(true);\r\n  };\r\n\r\n  const handleConfirmSchedule = async () => {\r\n    if (!preferredDate || !preferredTime) {\r\n      toast.error('Please select a preferred date and time');\r\n      return;\r\n    }\r\n\r\n    if (!user || !user.id || !user.firstName || !user.lastName || !user.email) {\r\n      toast.error('User information incomplete. Please refresh and try again.');\r\n      return;\r\n    }\r\n\r\n    const viewingRequest = {\r\n      id: `viewing-${Date.now()}`,\r\n      propertyId: property.id,\r\n      propertyTitle: property.title,\r\n      propertyLocation: property.location,\r\n      userId: user.id,\r\n      userName: `${user.firstName} ${user.lastName}`,\r\n      userEmail: user.email,\r\n      status: 'pending_vendor',\r\n      requestedAt: new Date().toISOString(),\r\n      preferredDate,\r\n      preferredTime,\r\n      message: '',\r\n      agentContact: property.agent || {\r\n        name: 'Property Agent',\r\n        phone: '+234-XXX-XXXX',\r\n        email: 'agent@example.com'\r\n      },\r\n      // Map to inspection request fields expected by vendor screen\r\n      projectId: property.id,\r\n      projectName: property.title,\r\n      projectLocation: property.location?.address || property.location || '',\r\n      buyerName: `${user.firstName} ${user.lastName}`,\r\n      buyerEmail: user.email,\r\n      vendorId: property.vendorId || property.owner?.id || undefined,\r\n      vendorEmail: property.vendorEmail || property.owner?.email || undefined\r\n    };\r\n    try {\r\n      await createInspectionRequest(viewingRequest);\r\n      // Event is dispatched by createInspectionRequest service\r\n      setShowScheduleModal(false);\r\n      setPreferredDate('');\r\n      setPreferredTime('');\r\n      toast.success('Viewing scheduled! The vendor has been notified.');\r\n      toast(`Agent: ${viewingRequest.agentContact.name} | Phone: ${viewingRequest.agentContact.phone}`);\r\n    } catch (e) {\r\n      toast.error('Failed to create request');\r\n    }\r\n  };\r\n\r\n  const handleCallVendor = () => {\r\n    if (!user) {\r\n      toast.error('Please login to call property vendor');\r\n      // User can continue viewing the property without being forced to login\r\n      return;\r\n    }\r\n\r\n    // Create inquiry\r\n    createInquiry(property, 'call', `I'm interested in ${property.title}. Please contact me via phone call.`);\r\n    \r\n    // Get vendor's phone number\r\n    const vendorPhone = property?.owner?.phone || property?.vendorPhone || property?.contactPhone || property?.vendor?.phone;\r\n    \r\n    if (!vendorPhone) {\r\n      toast.error('Vendor phone number not available');\r\n      return;\r\n    }\r\n    \r\n    // Format phone number for tel: link\r\n    // Remove all non-digit characters\r\n    let formattedPhone = vendorPhone.replace(/\\D/g, '');\r\n    \r\n    // Handle Nigerian phone numbers (country code: 234)\r\n    if (formattedPhone.startsWith('234')) {\r\n      // Already has country code\r\n    } else if (formattedPhone.startsWith('0')) {\r\n      // Remove leading 0 and add country code\r\n      formattedPhone = '234' + formattedPhone.substring(1);\r\n    } else {\r\n      // Assume it's a local number, add country code\r\n      formattedPhone = '234' + formattedPhone;\r\n    }\r\n    \r\n    // Create tel: link and trigger phone dialer\r\n    window.location.href = `tel:+${formattedPhone}`;\r\n    \r\n    toast.success('Inquiry saved to My Inquiries.');\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-2xl font-bold text-red-600 mb-4\">Error Loading Property</h2>\r\n          <p className=\"text-gray-600\">{error}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!property) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n        <div className=\"text-center\">\r\n          <Breadcrumbs items={[\r\n            { label: 'Home', path: '/' },\r\n            { label: 'Properties', path: '/properties' },\r\n            { label: 'Property Not Found', path: '#' }\r\n          ]} />\r\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Property Not Found</h2>\r\n          <p className=\"text-gray-600\">The property you're looking for doesn't exist.</p>\r\n          <Link to=\"/properties\" className=\"mt-4 inline-block text-blue-600 hover:text-blue-500\">\r\n            Back to Properties\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Breadcrumb items for property detail\r\n  const breadcrumbItems = [\r\n    { label: 'Home', path: '/' },\r\n    { label: 'Properties', path: '/properties' },\r\n    { label: property?.title || 'Property Details', path: `#` }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        {/* Breadcrumb */}\r\n        <div className=\"mb-8\">\r\n          <Breadcrumbs items={breadcrumbItems} />\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n          {/* Main Content */}\r\n          <div className=\"lg:col-span-2\">\r\n            {/* Image Gallery */}\r\n            <div className=\"mb-8\">\r\n              <div className=\"relative\">\r\n                <img\r\n                  src={getCurrentImage()}\r\n                  alt={property.title}\r\n                  className=\"w-full h-96 object-cover rounded-lg\"\r\n                  key={`main-image-${activeImage}`}\r\n                />\r\n                <div className=\"absolute top-4 right-4 flex gap-2\">\r\n                  <span className=\"bg-blue-600 text-white px-3 py-1 rounded-full text-sm font-medium\">\r\n                    â‚¦{property.price?.toLocaleString()}\r\n                  </span>\r\n                  <button\r\n                    onClick={handleToggleFavorite}\r\n                    className={`bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition-colors ${\r\n                      isFavorite ? 'text-red-500' : ''\r\n                    }`}\r\n                    title={isFavorite ? 'Remove from favorites' : 'Add to favorites'}\r\n                  >\r\n                    <FaHeart className={isFavorite ? 'fill-current' : ''} />\r\n                  </button>\r\n                  <button\r\n                    onClick={handleShareProperty}\r\n                    className=\"bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition-colors\"\r\n                  >\r\n                    <FaShare />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              \r\n              {/* Thumbnail Images */}\r\n              {property.images && Array.isArray(property.images) && property.images.length > 1 && (\r\n                <div className=\"mt-4 flex space-x-2 overflow-x-auto pb-2\">\r\n                  {property.images.map((image, index) => (\r\n                    <button\r\n                      key={`thumb-${index}`}\r\n                      type=\"button\"\r\n                      onClick={(e) => {\r\n                        e.preventDefault();\r\n                        setActiveImage(index);\r\n                      }}\r\n                      className={`flex-shrink-0 w-20 h-20 rounded-md overflow-hidden border-2 transition-all ${\r\n                        activeImage === index \r\n                          ? 'border-blue-500 ring-2 ring-blue-300 ring-offset-2' \r\n                          : 'border-gray-200 hover:border-gray-300'\r\n                      }`}\r\n                    >\r\n                      <img\r\n                        src={getImageUrl(image)}\r\n                        alt={`${property.title} ${index + 1}`}\r\n                        className=\"w-full h-full object-cover\"\r\n                      />\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Property Details */}\r\n            <div className=\"bg-white rounded-lg shadow p-6 mb-8\">\r\n              <h1 className=\"text-3xl font-bold text-gray-900 mb-4\">{property.title}</h1>\r\n              <p className=\"text-lg text-gray-600 mb-6\">\r\n                {(() => {\r\n                  if (typeof property.location === 'string') {\r\n                    return property.location;\r\n                  }\r\n                  if (property.location && typeof property.location === 'object') {\r\n                    const address = property.location.address || '';\r\n                    const city = property.location.city || '';\r\n                    const state = property.location.state || '';\r\n                    const result = [address, city, state].filter(Boolean).join(', ');\r\n                    return result || 'Location not specified';\r\n                  }\r\n                  return 'Location not specified';\r\n                })()}\r\n              </p>\r\n              \r\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6\">\r\n                <div className=\"text-center\">\r\n                  <div className=\"text-2xl font-bold text-blue-600 flex items-center justify-center\">\r\n                    <FaBed className=\"mr-2\" />\r\n                    {property.bedrooms || property.details?.bedrooms || 0}\r\n                  </div>\r\n                  <div className=\"text-sm text-gray-500\">Bedrooms</div>\r\n                </div>\r\n                <div className=\"text-center\">\r\n                  <div className=\"text-2xl font-bold text-blue-600 flex items-center justify-center\">\r\n                    <FaBath className=\"mr-2\" />\r\n                    {property.bathrooms || property.details?.bathrooms || 0}\r\n                  </div>\r\n                  <div className=\"text-sm text-gray-500\">Bathrooms</div>\r\n                </div>\r\n                <div className=\"text-center\">\r\n                  <div className=\"text-2xl font-bold text-blue-600 flex items-center justify-center\">\r\n                    <FaRulerCombined className=\"mr-2\" />\r\n                    {property.area || property.details?.sqft || 0}\r\n                  </div>\r\n                  <div className=\"text-sm text-gray-500\">Sq Ft</div>\r\n                </div>\r\n                <div className=\"text-center\">\r\n                  <div className=\"text-2xl font-bold text-blue-600 capitalize\">\r\n                    {property.type}\r\n                  </div>\r\n                  <div className=\"text-sm text-gray-500\">Type</div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"border-t pt-6\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Description</h3>\r\n                <p className=\"text-gray-600 leading-relaxed\">{property.description}</p>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Amenities */}\r\n            {property.amenities && property.amenities.length > 0 && (\r\n              <div className=\"bg-white rounded-lg shadow p-6 mb-8\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Amenities</h3>\r\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\r\n                  {property.amenities.map((amenity, index) => (\r\n                    <div key={index} className=\"flex items-center\">\r\n                      <svg className=\"w-5 h-5 text-green-500 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\r\n                      </svg>\r\n                      <span className=\"text-gray-700\">{amenity}</span>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Sidebar */}\r\n          <div className=\"lg:col-span-1\">\r\n            {/* Quick Actions */}\r\n            <div className=\"bg-white rounded-lg shadow p-6 mb-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Quick Actions</h3>\r\n              <div className=\"space-y-3\">\r\n                <button\r\n                  onClick={handleContactOwner}\r\n                  className=\"w-full bg-green-600 text-white py-3 px-4 rounded-md hover:bg-green-700 transition-colors flex items-center justify-center\"\r\n                >\r\n                  <FaWhatsapp className=\"mr-2\" />\r\n                  Contact Vendor\r\n                </button>\r\n                <button\r\n                  onClick={handleScheduleViewing}\r\n                  className=\"w-full bg-green-600 text-white py-3 px-4 rounded-md hover:bg-green-700 transition-colors flex items-center justify-center\"\r\n                >\r\n                  <FaCalendar className=\"mr-2\" />\r\n                  Schedule Viewing\r\n                </button>\r\n                <button\r\n                  onClick={handleCallVendor}\r\n                  className=\"w-full bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700 transition-colors flex items-center justify-center\"\r\n                >\r\n                  <FaPhone className=\"mr-2\" />\r\n                  Call Vendor\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Vendor Information */}\r\n            <div className=\"bg-white rounded-lg shadow p-6 mb-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Property Vendor</h3>\r\n              <div className=\"space-y-3\">\r\n                <div className=\"flex items-center\">\r\n                  <div className=\"w-12 h-12 bg-gray-300 rounded-full flex items-center justify-center mr-3\">\r\n                    <span className=\"text-gray-600 font-semibold\">\r\n                      {property.owner?.firstName?.[0] || property.vendor?.firstName?.[0] || 'V'}\r\n                      {property.owner?.lastName?.[0] || property.vendor?.lastName?.[0] || 'D'}\r\n                    </span>\r\n                  </div>\r\n                  <div>\r\n                    <div className=\"font-semibold text-gray-900\">\r\n                      {property.owner?.firstName || property.vendor?.firstName || 'Vendor'} {property.owner?.lastName || property.vendor?.lastName || ''}\r\n                    </div>\r\n                    <div className=\"text-sm text-gray-500\">Property Vendor</div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"pt-3 border-t\">\r\n                  <div className=\"flex items-start text-gray-600 mb-3\">\r\n                    <FaMapMarkerAlt className=\"mr-2 mt-0.5 flex-shrink-0\" />\r\n                    <span className=\"text-sm\">\r\n                      {(() => {\r\n                        // First, try to get location from separate address, city, state properties (most reliable)\r\n                        const address = property.address || '';\r\n                        const city = property.city || '';\r\n                        const state = property.state || '';\r\n                        const zipCode = property.zipCode || '';\r\n                        \r\n                        if (address || city || state) {\r\n                          const parts = [address, city, state, zipCode].filter(part => part && part !== '' && part !== null && part !== undefined && part !== 'undefined');\r\n                          if (parts.length > 0) {\r\n                            return parts.join(', ');\r\n                          }\r\n                        }\r\n                        \r\n                        // Handle object location - check if fields exist and are not undefined\r\n                        if (property.location && typeof property.location === 'object') {\r\n                          const objAddress = property.location.address;\r\n                          const objCity = property.location.city;\r\n                          const objState = property.location.state;\r\n                          const objZipCode = property.location.zipCode;\r\n                          \r\n                          const parts = [objAddress, objCity, objState, objZipCode].filter(part => part && part !== '' && part !== null && part !== undefined && part !== 'undefined');\r\n                          if (parts.length > 0) {\r\n                            return parts.join(', ');\r\n                          }\r\n                        }\r\n                        \r\n                        // Handle string location (from transformed properties) - but check it doesn't contain \"undefined\"\r\n                        if (typeof property.location === 'string' && property.location.trim() !== '' && !property.location.includes('undefined')) {\r\n                          return property.location;\r\n                        }\r\n                        \r\n                        return 'Location not specified';\r\n                      })()}\r\n                    </span>\r\n                  </div>\r\n                  \r\n                  {/* Listing Date */}\r\n                  {property.createdAt && (\r\n                    <div className=\"flex items-center text-gray-600 mb-3 text-sm\">\r\n                      <FaCalendar className=\"mr-2\" />\r\n                      <span>\r\n                        Listed: {(() => {\r\n                          const date = new Date(property.createdAt);\r\n                          if (isNaN(date.getTime())) {\r\n                            return property.createdAt;\r\n                          }\r\n                          return date.toLocaleDateString('en-US', { \r\n                            year: 'numeric', \r\n                            month: 'long', \r\n                            day: 'numeric' \r\n                          });\r\n                        })()}\r\n                      </span>\r\n                    </div>\r\n                  )}\r\n                  \r\n                  <div className=\"flex items-center text-gray-600 text-sm\">\r\n                    <span>Views: {property.views || 0}</span>\r\n                    <span className=\"mx-2\">â€¢</span>\r\n                    <span>\r\n                      {property.isVerified ? 'âœ… Verified' : 'â³ Pending Verification'}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Purchase Information */}\r\n            <div className=\"bg-white rounded-lg shadow p-6 mb-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Purchase Information</h3>\r\n              <div className=\"space-y-3\">\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">Property Value:</span>\r\n                  <span className=\"font-semibold\">â‚¦{property.price?.toLocaleString()}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">Property Type:</span>\r\n                  <span className=\"font-semibold capitalize\">{property.status?.replace('-', ' ')}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">Escrow Fee (0.5%):</span>\r\n                  <span className=\"font-semibold\">â‚¦{Math.round((property.price || 0) * 0.005).toLocaleString()}</span>\r\n                </div>\r\n                <div className=\"flex justify-between border-t pt-3\">\r\n                  <span className=\"text-gray-900 font-semibold\">Total Amount:</span>\r\n                  <span className=\"font-bold text-lg\">â‚¦{Math.round((property.price || 0) * 1.005).toLocaleString()}</span>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"mt-4 space-y-2\">\r\n                <PropertyPurchaseButton\r\n                  property={property}\r\n                  className=\"bg-green-600 hover:bg-green-700\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Property Info */}\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Property Information</h3>\r\n              <div className=\"space-y-3\">\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">Property ID:</span>\r\n                  <span className=\"font-medium\">{property.id}</span>\r\n                </div>\r\n                {property.createdAt && (\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Listed:</span>\r\n                    <span className=\"font-medium\">\r\n                      {(() => {\r\n                        const date = new Date(property.createdAt);\r\n                        if (isNaN(date.getTime())) {\r\n                          return property.createdAt || property.dateListed || 'N/A';\r\n                        }\r\n                        return date.toLocaleDateString('en-US', { \r\n                          year: 'numeric', \r\n                          month: 'short', \r\n                          day: 'numeric' \r\n                        });\r\n                      })()}\r\n                    </span>\r\n                  </div>\r\n                )}\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">Status:</span>\r\n                  <span className=\"font-medium text-green-600\">Available</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">Vendor:</span>\r\n                  <span className=\"font-medium\">{property.ownerName || `${property.owner?.firstName || property.vendor?.firstName || ''} ${property.owner?.lastName || property.vendor?.lastName || ''}`.trim() || 'Vendor'}</span>\r\n                </div>\r\n                \r\n                {/* Location link */}\r\n                {property.location?.googleMapsUrl && (\r\n                  <div className=\"border-t pt-4 mt-4\">\r\n                    <h4 className=\"text-sm font-semibold text-gray-700 mb-3\">Location</h4>\r\n                    <div className=\"space-y-2\">\r\n                      <a\r\n                        href={property.location.googleMapsUrl}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        className=\"inline-flex items-center w-full px-3 py-2 bg-blue-50 text-blue-700 rounded-md hover:bg-blue-100 transition-colors text-sm\"\r\n                      >\r\n                        <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                        </svg>\r\n                        Show on Google map\r\n                      </a>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Inquiry Modal */}\r\n      {showInquiryModal && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n          <div className=\"bg-white rounded-lg max-w-md w-full p-6\">\r\n            <div className=\"flex justify-between items-center mb-4\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900\">Send Inquiry</h3>\r\n              <button\r\n                onClick={() => setShowInquiryModal(false)}\r\n                className=\"text-gray-400 hover:text-gray-600\"\r\n              >\r\n                <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                </svg>\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"mb-4\">\r\n              <p className=\"text-sm text-gray-600\">\r\n                Send a message to the property vendor about <strong>{property.title}</strong>\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Your Message</label>\r\n                <textarea\r\n                  value={inquiryMessage}\r\n                  onChange={(e) => setInquiryMessage(e.target.value)}\r\n                  rows={4}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                  placeholder=\"I'm interested in this property. Could you please provide more information about...\"\r\n                />\r\n              </div>\r\n              \r\n              <div className=\"flex gap-3\">\r\n                <button\r\n                  onClick={() => setShowInquiryModal(false)}\r\n                  className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  onClick={handleSendInquiry}\r\n                  className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors\"\r\n                >\r\n                  Send Message\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Schedule Viewing Modal */}\r\n      {showScheduleModal && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n          <div className=\"bg-white rounded-lg max-w-md w-full p-6\">\r\n            <div className=\"flex justify-between items-center mb-4\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900\">Schedule Viewing</h3>\r\n              <button\r\n                onClick={() => setShowScheduleModal(false)}\r\n                className=\"text-gray-400 hover:text-gray-600\"\r\n              >\r\n                <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                </svg>\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Preferred Date</label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={preferredDate}\r\n                  onChange={(e) => setPreferredDate(e.target.value)}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Preferred Time</label>\r\n                <input\r\n                  type=\"time\"\r\n                  value={preferredTime}\r\n                  onChange={(e) => setPreferredTime(e.target.value)}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"flex gap-3 pt-2\">\r\n                <button\r\n                  onClick={() => setShowScheduleModal(false)}\r\n                  className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  onClick={handleConfirmSchedule}\r\n                  className=\"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors\"\r\n                >\r\n                  Confirm\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PropertyDetail;","import React from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport { FaChevronRight, FaHome } from 'react-icons/fa';\n\nconst Breadcrumbs = ({ items }) => {\n  const location = useLocation();\n  \n  // Auto-generate breadcrumbs from route if items not provided\n  const pathnames = location.pathname.split('/').filter((x) => x);\n  \n  const breadcrumbItems = items || [\n    { label: 'Home', path: '/' },\n    ...pathnames.map((name, index) => {\n      const routeTo = `/${pathnames.slice(0, index + 1).join('/')}`;\n      const label = name\n        .split('-')\n        .map(word => word.charAt(0).toUpperCase() + word.slice(1))\n        .join(' ');\n      return { label, path: routeTo };\n    })\n  ];\n\n  return (\n    <nav className=\"flex items-center space-x-2 text-sm text-gray-600 mb-4\" aria-label=\"Breadcrumb\">\n      <ol className=\"flex items-center space-x-2\">\n        {breadcrumbItems.map((item, index) => {\n          const isLast = index === breadcrumbItems.length - 1;\n          \n          return (\n            <li key={item.path || index} className=\"flex items-center\">\n              {index === 0 && (\n                <FaHome className=\"h-4 w-4 text-gray-400 mr-2\" aria-hidden=\"true\" />\n              )}\n              {isLast ? (\n                <span className=\"text-gray-900 font-medium\" aria-current=\"page\">\n                  {item.label}\n                </span>\n              ) : (\n                <>\n                  <Link \n                    to={item.path} \n                    className=\"hover:text-blue-600 transition-colors\"\n                    aria-label={`Navigate to ${item.label}`}\n                  >\n                    {item.label}\n                  </Link>\n                  <FaChevronRight className=\"h-3 w-3 text-gray-400 mx-2\" aria-hidden=\"true\" />\n                </>\n              )}\n            </li>\n          );\n        })}\n      </ol>\n    </nav>\n  );\n};\n\nexport default Breadcrumbs;\n\n","import notificationService from './notificationService';\r\n\r\nconst COLLECTION = 'inspectionRequests';\r\nconst VIEWING_REQUESTS_KEY = 'viewingRequests';\r\nconst INSPECTION_ACTIVITY_KEY = 'inspectionActivityLog';\r\nconst ANALYTICS_EVENT = 'inspectionAnalyticsUpdated';\r\nconst ACTIVITY_EVENT = 'inspectionActivity';\r\n\r\nconst defaultAnalytics = {\r\n  totalRequests: 0,\r\n  pendingResponses: 0,\r\n  confirmed: 0,\r\n  vendorProposals: 0,\r\n  buyerReschedules: 0,\r\n  cancelledByBuyer: 0,\r\n  cancelledByVendor: 0,\r\n  timeline: []\r\n};\r\n\r\nconst safeWindowDispatch = (eventName, detail) => {\r\n  if (typeof window === 'undefined') return;\r\n  if (eventName === 'storage') {\r\n    try {\r\n      window.dispatchEvent(new StorageEvent('storage', detail));\r\n    } catch {\r\n      window.dispatchEvent(new CustomEvent('storage', { detail }));\r\n    }\r\n    return;\r\n  }\r\n  if (typeof window.dispatchEvent === 'function') {\r\n    window.dispatchEvent(new CustomEvent(eventName, { detail }));\r\n  }\r\n};\r\n\r\nconst getStoredRequests = () => {\r\n  try {\r\n    return JSON.parse(localStorage.getItem(VIEWING_REQUESTS_KEY) || '[]');\r\n  } catch {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst saveStoredRequests = (requests) => {\r\n  localStorage.setItem(VIEWING_REQUESTS_KEY, JSON.stringify(requests));\r\n};\r\n\r\nconst getActivityLog = () => {\r\n  try {\r\n    return JSON.parse(localStorage.getItem(INSPECTION_ACTIVITY_KEY) || '[]');\r\n  } catch {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst saveActivityLog = (log) => {\r\n  localStorage.setItem(INSPECTION_ACTIVITY_KEY, JSON.stringify(log));\r\n};\r\n\r\nconst buildActivityPayload = (action, request) => ({\r\n  action,\r\n  requestId: request.id,\r\n  propertyTitle: request.propertyTitle || request.projectTitle || request.projectName || request.title || 'Property',\r\n  buyerId: request.buyerId || request.userId,\r\n  vendorId: request.vendorId,\r\n  vendorEmail: request.vendorEmail,\r\n  status: request.status,\r\n  timestamp: new Date().toISOString()\r\n});\r\n\r\nconst formatDateTimeLabel = (date, time) => {\r\n  if (!date && !time) return '';\r\n  if (!time) return date;\r\n  if (!date) return time;\r\n  return `${date} ${time}`;\r\n};\r\n\r\nconst buildInspectionNotificationEntries = (action, request, payload) => {\r\n  const entries = [];\r\n  const propertyTitle = payload.propertyTitle;\r\n  const buyerName = request.buyerName || request.userName || 'Buyer';\r\n  const vendorName = request.vendorName || request.vendor || request.owner || 'Vendor';\r\n  const preferredLabel = formatDateTimeLabel(request.preferredDate, request.preferredTime);\r\n  const confirmedLabel = formatDateTimeLabel(request.confirmedDate, request.confirmedTime);\r\n  const proposedLabel = formatDateTimeLabel(request.proposedDate, request.proposedTime);\r\n\r\n  const pushForVendor = (title, message) => {\r\n    if (request.vendorId || request.vendorEmail) {\r\n      entries.push({\r\n        recipientId: request.vendorId,\r\n        recipientEmail: request.vendorEmail,\r\n        roles: ['vendor'],\r\n        type: action,\r\n        title,\r\n        message,\r\n        priority: 'medium',\r\n        metadata: { requestId: request.id, propertyTitle, buyerName, vendorName }\r\n      });\r\n    }\r\n  };\r\n\r\n  const pushForBuyer = (title, message) => {\r\n    if (request.buyerId || request.userId || request.buyerEmail || request.userEmail) {\r\n      entries.push({\r\n        recipientId: request.buyerId || request.userId,\r\n        recipientEmail: request.buyerEmail || request.userEmail,\r\n        roles: ['buyer'],\r\n        type: action,\r\n        title,\r\n        message,\r\n        priority: 'medium',\r\n        metadata: { requestId: request.id, propertyTitle, buyerName, vendorName }\r\n      });\r\n    }\r\n  };\r\n\r\n  switch (action) {\r\n    case 'inspection_requested':\r\n      pushForVendor('New inspection request', `${buyerName} requested to view ${propertyTitle} ${preferredLabel ? `on ${preferredLabel}` : ''}`.trim());\r\n      break;\r\n    case 'inspection_confirmed':\r\n      pushForBuyer('Inspection confirmed', `${vendorName} confirmed ${propertyTitle} ${confirmedLabel ? `for ${confirmedLabel}` : ''}`.trim());\r\n      break;\r\n    case 'vendor_proposed_new_time':\r\n      pushForBuyer('Vendor proposed new time', `${vendorName} suggested ${proposedLabel || 'another slot'} for ${propertyTitle}`);\r\n      break;\r\n    case 'buyer_rescheduled':\r\n      pushForVendor('Buyer requested new time', `${buyerName} rescheduled ${propertyTitle} ${preferredLabel ? `to ${preferredLabel}` : ''}`.trim());\r\n      break;\r\n    case 'inspection_cancelled_by_buyer':\r\n      pushForVendor('Inspection cancelled by buyer', `${buyerName} cancelled ${propertyTitle}`);\r\n      break;\r\n    case 'inspection_cancelled_by_vendor':\r\n      pushForBuyer('Inspection cancelled by vendor', `${vendorName} cancelled ${propertyTitle}`);\r\n      break;\r\n    case 'inspection_declined':\r\n      pushForBuyer('Inspection declined', `${vendorName} declined the request for ${propertyTitle}`);\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n\r\n  return entries;\r\n};\r\n\r\nconst persistInspectionNotifications = (entries = []) => {\r\n  if (!entries.length || typeof window === 'undefined') return;\r\n  const payloads = entries\r\n    .filter((entry) => entry.recipientId)\r\n    .map((entry) => ({\r\n      recipientId: entry.recipientId,\r\n      type: entry.type,\r\n      title: entry.title,\r\n      message: entry.message,\r\n      priority: entry.priority || 'medium',\r\n      metadata: {\r\n        ...(entry.metadata || {}),\r\n        source: entry.metadata?.source || 'inspection_client_sync'\r\n      },\r\n      data: entry.metadata || {}\r\n    }));\r\n\r\n  if (!payloads.length) return;\r\n\r\n  notificationService.createInspectionNotifications(payloads)\r\n    .then((result) => {\r\n      if (!result?.success) {\r\n        console.warn('Failed to persist inspection notifications', result);\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error persisting inspection notifications:', error);\r\n    });\r\n};\r\n\r\nconst logInspectionActivity = (action, request) => {\r\n  if (!action || !request) return;\r\n  const payload = buildActivityPayload(action, request);\r\n  const log = getActivityLog();\r\n  log.unshift(payload);\r\n  if (log.length > 200) {\r\n    log.pop();\r\n  }\r\n  saveActivityLog(log);\r\n  safeWindowDispatch(ACTIVITY_EVENT, payload);\r\n  safeWindowDispatch(ANALYTICS_EVENT, payload);\r\n  const notifications = buildInspectionNotificationEntries(action, request, payload);\r\n  if (notifications.length) {\r\n    safeWindowDispatch('inspectionNotification', { action, payload, notifications, request });\r\n    persistInspectionNotifications(notifications);\r\n  }\r\n};\r\n\r\nconst deriveActionFromStatus = (previous, next, updates = {}) => {\r\n  const status = (next?.status || updates.status || '').toLowerCase();\r\n  if (!status && (updates.proposedDate || updates.proposedTime)) {\r\n    return 'vendor_proposed_new_time';\r\n  }\r\n  switch (status) {\r\n    case 'accepted':\r\n    case 'confirmed':\r\n      return 'inspection_confirmed';\r\n    case 'proposed_new_time':\r\n      return 'vendor_proposed_new_time';\r\n    case 'buyer_rescheduled':\r\n      return 'buyer_rescheduled';\r\n    case 'cancelled_by_buyer':\r\n      return 'inspection_cancelled_by_buyer';\r\n    case 'cancelled_by_vendor':\r\n      return 'inspection_cancelled_by_vendor';\r\n    case 'declined':\r\n      return 'inspection_declined';\r\n    default:\r\n      if (previous && previous.status !== next?.status) {\r\n        return `inspection_status_${next?.status || 'updated'}`;\r\n      }\r\n      return null;\r\n  }\r\n};\r\n\r\nconst getDateKey = (isoDate) => {\r\n  const date = isoDate ? new Date(isoDate) : new Date();\r\n  return date.toISOString().slice(0, 10);\r\n};\r\n\r\nconst matchesBuyer = (request, buyerId) => {\r\n  if (!buyerId) return false;\r\n  return request?.buyerId === buyerId || request?.userId === buyerId;\r\n};\r\n\r\nconst matchesVendor = (request, vendorId, vendorEmail) => {\r\n  if (!vendorId && !vendorEmail) return false;\r\n  return (vendorId && request?.vendorId === vendorId) || (vendorEmail && request?.vendorEmail === vendorEmail);\r\n};\r\n\r\nexport const getInspectionAnalytics = ({ role = 'buyer', userId, vendorId, vendorEmail } = {}) => {\r\n  if (typeof window === 'undefined') return { ...defaultAnalytics };\r\n  if (role === 'buyer' && !userId) return { ...defaultAnalytics };\r\n  if (role === 'vendor' && !vendorId && !vendorEmail) return { ...defaultAnalytics };\r\n\r\n  const requests = getStoredRequests();\r\n  const relevant = requests.filter((req) =>\r\n    role === 'buyer' ? matchesBuyer(req, userId) : matchesVendor(req, vendorId || req.vendorId, vendorEmail)\r\n  );\r\n\r\n  const analytics = {\r\n    totalRequests: relevant.length,\r\n    pendingResponses: 0,\r\n    confirmed: 0,\r\n    vendorProposals: 0,\r\n    buyerReschedules: 0,\r\n    cancelledByBuyer: 0,\r\n    cancelledByVendor: 0,\r\n    timeline: []\r\n  };\r\n\r\n  const pendingStatuses = ['pending', 'pending_vendor', 'pending_vendor_confirmation'];\r\n  const log = getActivityLog();\r\n  const activityFilter = (entry) =>\r\n    role === 'buyer' ? entry?.buyerId === userId : matchesVendor(entry, vendorId, vendorEmail);\r\n\r\n  relevant.forEach((req) => {\r\n    const status = (req.status || '').toLowerCase();\r\n    if (pendingStatuses.includes(status)) {\r\n      analytics.pendingResponses += 1;\r\n    }\r\n    if (['accepted', 'confirmed'].includes(status)) {\r\n      analytics.confirmed += 1;\r\n    }\r\n    if (status === 'proposed_new_time') {\r\n      analytics.vendorProposals += 1;\r\n    }\r\n    if (status === 'buyer_rescheduled') {\r\n      analytics.buyerReschedules += 1;\r\n    }\r\n    if (status === 'cancelled_by_buyer') {\r\n      analytics.cancelledByBuyer += 1;\r\n    }\r\n    if (['cancelled_by_vendor', 'declined'].includes(status)) {\r\n      analytics.cancelledByVendor += 1;\r\n    }\r\n  });\r\n\r\n  const lastSevenDays = Array.from({ length: 7 }).map((_, idx) => {\r\n    const date = new Date();\r\n    date.setDate(date.getDate() - (6 - idx));\r\n    const dateKey = date.toISOString().slice(0, 10);\r\n    const dailyCount = log.filter((entry) => activityFilter(entry) && getDateKey(entry.timestamp) === dateKey).length;\r\n    return { date: dateKey, count: dailyCount };\r\n  });\r\n\r\n  analytics.timeline = lastSevenDays;\r\n  return analytics;\r\n};\r\n\r\nexport const createInspectionRequest = async (requestData) => {\r\n  try {\r\n    // Skip API call for now since it's returning 404, go directly to localStorage\r\n    console.log('Using localStorage for creating inspection requests (API unavailable)');\r\n    \r\n    // Fallback to localStorage\r\n    const existing = getStoredRequests();\r\n    const newRequest = {\r\n      id: `viewing-${Date.now()}`,\r\n      ...requestData,\r\n      createdAt: new Date().toISOString(),\r\n      status: 'pending'\r\n    };\r\n    existing.push(newRequest);\r\n    saveStoredRequests(existing);\r\n    \r\n    // Dispatch event to notify Dashboard and other components\r\n    safeWindowDispatch('viewingsUpdated', {\r\n      viewingRequest: newRequest,\r\n      action: 'created'\r\n    });\r\n    \r\n    // Also trigger a storage event for cross-tab synchronization\r\n    safeWindowDispatch('storage', {\r\n      key: VIEWING_REQUESTS_KEY,\r\n      newValue: JSON.stringify(existing)\r\n    });\r\n    logInspectionActivity('inspection_requested', newRequest);\r\n    \r\n    return newRequest;\r\n  } catch (error) {\r\n    console.error('Error creating inspection request:', error);\r\n    // Final fallback to localStorage\r\n    const existing = getStoredRequests();\r\n    const newRequest = {\r\n      id: `viewing-${Date.now()}`,\r\n      ...requestData,\r\n      createdAt: new Date().toISOString(),\r\n      status: 'pending'\r\n    };\r\n    existing.push(newRequest);\r\n    saveStoredRequests(existing);\r\n    \r\n    // Dispatch event to notify Dashboard and other components\r\n    safeWindowDispatch('viewingsUpdated', {\r\n      viewingRequest: newRequest,\r\n      action: 'created'\r\n    });\r\n    \r\n    // Also trigger a storage event for cross-tab synchronization\r\n    safeWindowDispatch('storage', {\r\n      key: VIEWING_REQUESTS_KEY,\r\n      newValue: JSON.stringify(existing)\r\n    });\r\n    logInspectionActivity('inspection_requested', newRequest);\r\n    \r\n    return newRequest;\r\n  }\r\n};\r\n\r\nexport const listInspectionRequestsByVendor = async (vendorId, vendorEmail) => {\r\n  try {\r\n    // Skip API call for now since it's returning 404, go directly to localStorage\r\n    console.log('Using localStorage for inspection requests (API unavailable)');\r\n    \r\n    // Fallback to localStorage\r\n    const local = getStoredRequests();\r\n    \r\n    // Filter by vendorId or vendorEmail\r\n    const filtered = local.filter((r) => \r\n      (vendorId && r.vendorId === vendorId) || \r\n      (vendorEmail && r.vendorEmail === vendorEmail)\r\n    );\r\n    \r\n    // Sort newest first\r\n    filtered.sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));\r\n    \r\n    return filtered;\r\n  } catch (error) {\r\n    console.error('Error listing inspection requests:', error);\r\n    // Final fallback to localStorage\r\n    const local = getStoredRequests();\r\n    const filtered = local.filter((r) => \r\n      (vendorId && r.vendorId === vendorId) || \r\n      (vendorEmail && r.vendorEmail === vendorEmail)\r\n    );\r\n    return filtered.sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));\r\n  }\r\n};\r\n\r\nexport const listInspectionRequestsByBuyer = async (buyerId) => {\r\n  try {\r\n    // Skip API call for now since it's returning 404, go directly to localStorage\r\n    console.log('Using localStorage for buyer inspection requests (API unavailable)');\r\n    \r\n    // Fallback to localStorage\r\n    const local = getStoredRequests();\r\n    const filtered = local.filter((r) => r.buyerId === buyerId);\r\n    return filtered.sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));\r\n  } catch (error) {\r\n    console.error('Error listing buyer inspection requests:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\nexport const updateInspectionRequest = async (requestId, updates) => {\r\n  try {\r\n    // Skip API call for now since it's returning 404, go directly to localStorage\r\n    console.log('Using localStorage for updating inspection requests (API unavailable)');\r\n    \r\n    // Fallback to localStorage\r\n    const all = getStoredRequests();\r\n    let nextRecord = null;\r\n    const updated = all.map((r) => {\r\n      if (r.id === requestId) {\r\n        nextRecord = { ...r, ...updates, updatedAt: new Date().toISOString() };\r\n        return nextRecord;\r\n      }\r\n      return r;\r\n    });\r\n    if (!nextRecord) {\r\n      saveStoredRequests(all);\r\n      return false;\r\n    }\r\n    saveStoredRequests(updated);\r\n    \r\n    // Dispatch event to notify Dashboard and other components when status changes\r\n    safeWindowDispatch('viewingsUpdated', {\r\n      requestId,\r\n      updates,\r\n      action: 'updated'\r\n    });\r\n    \r\n    // Also trigger a storage event for cross-tab synchronization\r\n    safeWindowDispatch('storage', {\r\n      key: VIEWING_REQUESTS_KEY,\r\n      newValue: JSON.stringify(updated)\r\n    });\r\n    const action = deriveActionFromStatus(all.find((r) => r.id === requestId), nextRecord, updates);\r\n    if (action) {\r\n      logInspectionActivity(action, nextRecord);\r\n    }\r\n    \r\n    return true;\r\n  } catch (error) {\r\n    console.error('Error updating inspection request:', error);\r\n    // Final fallback to localStorage\r\n    const all = getStoredRequests();\r\n    let nextRecord = null;\r\n    const updated = all.map((r) => {\r\n      if (r.id === requestId) {\r\n        nextRecord = { ...r, ...updates, updatedAt: new Date().toISOString() };\r\n        return nextRecord;\r\n      }\r\n      return r;\r\n    });\r\n    if (!nextRecord) {\r\n      saveStoredRequests(all);\r\n      return false;\r\n    }\r\n    saveStoredRequests(updated);\r\n    \r\n    // Dispatch event to notify Dashboard and other components when status changes\r\n    safeWindowDispatch('viewingsUpdated', {\r\n      requestId,\r\n      updates,\r\n      action: 'updated'\r\n    });\r\n    \r\n    // Also trigger a storage event for cross-tab synchronization\r\n    safeWindowDispatch('storage', {\r\n      key: VIEWING_REQUESTS_KEY,\r\n      newValue: JSON.stringify(updated)\r\n    });\r\n    const action = deriveActionFromStatus(all.find((r) => r.id === requestId), nextRecord, updates);\r\n    if (action) {\r\n      logInspectionActivity(action, nextRecord);\r\n    }\r\n    \r\n    return true;\r\n  }\r\n};\r\n\r\nexport const syncLocalInspectionRequests = async () => {\r\n  try {\r\n    // Try to sync with API if available\r\n    const local = getStoredRequests();\r\n    console.log('Inspection requests stored locally:', local.length);\r\n    return { synced: local.length };\r\n  } catch (error) {\r\n    console.error('syncLocalInspectionRequests failed:', error);\r\n    return { synced: 0 };\r\n  }\r\n};\r\n\r\nexport default {\r\n  createInspectionRequest,\r\n  listInspectionRequestsByVendor,\r\n  listInspectionRequestsByBuyer,\r\n  updateInspectionRequest,\r\n  syncLocalInspectionRequests,\r\n  getInspectionAnalytics\r\n};"],"names":["_ref","property","className","user","useAuth","showPaymentFlow","setShowPaymentFlow","useState","useEffect","style","document","body","previousOverflow","overflow","_jsxs","_Fragment","children","onClick","handlePurchaseClick","toast","error","_jsx","FaShoppingCart","FaShieldAlt","EscrowPaymentFlow","onClose","isModal","PropertyDetail","_property$price","_property$details4","_property$details5","_property$details6","_property$owner9","_property$owner9$firs","_property$vendor7","_property$vendor7$fir","_property$owner0","_property$owner0$last","_property$vendor8","_property$vendor8$las","_property$owner1","_property$vendor9","_property$owner10","_property$vendor0","_property$price2","_property$status","_property$owner11","_property$vendor1","_property$owner12","_property$vendor10","_property$location4","id","useParams","properties","loading","toggleFavorite","useNavigate","useProperty","setAuthRedirect","setProperty","activeImage","setActiveImage","showInquiryModal","setShowInquiryModal","inquiryMessage","setInquiryMessage","showScheduleModal","setShowScheduleModal","preferredDate","setPreferredDate","preferredTime","setPreferredTime","isFavorite","setIsFavorite","foundProperty","find","p","_p$id","propertyId","numericId","parseInt","toString","location","includes","parts","address","city","state","filter","part","undefined","length","join","key","favorites","Set","JSON","parse","localStorage","getItem","has","getImageUrl","image","url","handleCopyLink","navigator","clipboard","writeText","window","href","then","success","catch","createInquiry","inquiryType","_property$location","_property$location2","_property$images","_property$images$","_property$images2","_property$details","_property$details2","_property$details3","_property$owner","_property$vendor","_property$owner2","_property$vendor2","_property$owner3","_property$vendor3","_property$owner4","_property$vendor4","message","arguments","console","warn","existingInquiries","existingInquiry","inq","userId","buyerId","status","inquiry","Date","now","propertyTitle","title","propertyLocation","propertyPrice","price","propertyImage","images","propertyBedrooms","bedrooms","details","propertyBathrooms","bathrooms","propertyArea","area","sqft","buyerName","firstName","lastName","buyerEmail","email","buyerPhone","phone","vendorId","owner","vendor","vendorName","trim","vendorEmail","vendorPhone","contactPhone","createdAt","toISOString","updatedAt","responses","push","setItem","stringify","dispatchEvent","CustomEvent","detail","action","StorageEvent","newValue","Breadcrumbs","items","label","path","Link","to","breadcrumbItems","src","getCurrentImage","Array","isArray","safeIndex","Math","max","min","currentImage","alt","toLocaleString","async","storageKey","wasFavorite","propertyIdStr","String","updatedFavorites","existing","delete","add","from","result","Error","favorited","FaHeart","share","text","description","log","FaShare","map","index","type","e","preventDefault","Boolean","FaBed","FaBath","FaRulerCombined","amenities","amenity","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","handleContactOwner","_property$owner5","_property$vendor5","formattedPhone","replace","startsWith","substring","whatsappUrl","encodeURIComponent","open","FaWhatsapp","handleScheduleViewing","FaCalendar","handleCallVendor","_property$owner8","_property$vendor6","FaPhone","FaMapMarkerAlt","zipCode","date","isNaN","getTime","toLocaleDateString","year","month","day","views","isVerified","round","PropertyPurchaseButton","dateListed","ownerName","googleMapsUrl","target","rel","value","onChange","rows","placeholder","handleSendInquiry","_property$location3","_property$owner6","_property$owner7","viewingRequest","userName","userEmail","requestedAt","agentContact","agent","name","projectId","projectName","projectLocation","createInspectionRequest","pathnames","useLocation","pathname","split","x","routeTo","slice","word","charAt","toUpperCase","item","isLast","FaHome","FaChevronRight","VIEWING_REQUESTS_KEY","INSPECTION_ACTIVITY_KEY","defaultAnalytics","totalRequests","pendingResponses","confirmed","vendorProposals","buyerReschedules","cancelledByBuyer","cancelledByVendor","timeline","safeWindowDispatch","eventName","getStoredRequests","saveStoredRequests","requests","getActivityLog","formatDateTimeLabel","time","logInspectionActivity","request","payload","buildActivityPayload","requestId","projectTitle","timestamp","unshift","pop","saveActivityLog","notifications","buildInspectionNotificationEntries","entries","preferredLabel","confirmedLabel","confirmedDate","confirmedTime","proposedLabel","proposedDate","proposedTime","pushForVendor","recipientId","recipientEmail","roles","priority","metadata","pushForBuyer","payloads","entry","_entry$metadata","source","data","notificationService","createInspectionNotifications","persistInspectionNotifications","deriveActionFromStatus","previous","next","updates","toLowerCase","matchesVendor","getInspectionAnalytics","role","relevant","req","matchesBuyer","analytics","pendingStatuses","forEach","lastSevenDays","_","idx","setDate","getDate","dateKey","dailyCount","activityFilter","isoDate","count","newRequest","requestData","listInspectionRequestsByVendor","filtered","r","sort","a","b","updateInspectionRequest","all","nextRecord","updated"],"sourceRoot":""}