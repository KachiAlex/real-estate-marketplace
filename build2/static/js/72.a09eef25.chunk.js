"use strict";(self.webpackChunkreal_estate_marketplace=self.webpackChunkreal_estate_marketplace||[]).push([[72],{6072:(e,t,s)=>{s.r(t),s.d(t,{default:()=>b});var a=s(5043),i=s(3216),l=s(5475),n=s(5016),r=s(4345),o=s(2825),d=s(3484),c=s(5369),m=s(3768),x=s(7304),u=s(6058),g=s(579);x.t1.register(x.PP,x.kc,x.FN,x.No,x.hE,x.m_,x.s$,x.dN);const h=()=>{const[e,t]=(0,a.useState)("Lagos"),s={Lagos:{data:[{month:"Jan",victoriaIsland:45e6,lekki:38e6,ikoyi:52e6},{month:"Feb",victoriaIsland:465e5,lekki:395e5,ikoyi:538e5},{month:"Mar",victoriaIsland:48e6,lekki:41e6,ikoyi:555e5},{month:"Apr",victoriaIsland:495e5,lekki:425e5,ikoyi:572e5},{month:"May",victoriaIsland:51e6,lekki:44e6,ikoyi:59e6},{month:"Jun",victoriaIsland:525e5,lekki:455e5,ikoyi:608e5}],areas:["Victoria Island","Lekki","Ikoyi"],colors:["#10B981","#F59E0B","#3B82F6"]},Abuja:{data:[{month:"Jan",asokoro:42e6,maitama:38e6,wuse:32e6},{month:"Feb",asokoro:435e5,maitama:395e5,wuse:335e5},{month:"Mar",asokoro:45e6,maitama:41e6,wuse:35e6},{month:"Apr",asokoro:465e5,maitama:425e5,wuse:365e5},{month:"May",asokoro:48e6,maitama:44e6,wuse:38e6},{month:"Jun",asokoro:495e5,maitama:455e5,wuse:395e5}],areas:["Asokoro","Maitama","Wuse"],colors:["#EF4444","#8B5CF6","#06B6D4"]},"Port Harcourt":{data:[{month:"Jan",gra:28e6,oldGRA:25e6,rumuola:22e6},{month:"Feb",gra:29e6,oldGRA:26e6,rumuola:23e6},{month:"Mar",gra:3e7,oldGRA:27e6,rumuola:24e6},{month:"Apr",gra:31e6,oldGRA:28e6,rumuola:25e6},{month:"May",gra:32e6,oldGRA:29e6,rumuola:26e6},{month:"Jun",gra:33e6,oldGRA:3e7,rumuola:27e6}],areas:["GRA","Old GRA","Rumuola"],colors:["#F97316","#84CC16","#EC4899"]},Kano:{data:[{month:"Jan",nassarawa:18e6,dala:15e6,fagge:12e6},{month:"Feb",nassarawa:185e5,dala:155e5,fagge:125e5},{month:"Mar",nassarawa:19e6,dala:16e6,fagge:13e6},{month:"Apr",nassarawa:195e5,dala:165e5,fagge:135e5},{month:"May",nassarawa:2e7,dala:17e6,fagge:14e6},{month:"Jun",nassarawa:205e5,dala:175e5,fagge:145e5}],areas:["Nassarawa","Dala","Fagge"],colors:["#6B7280","#14B8A6","#F59E0B"]}},i=s[e],l={labels:i.data.map(e=>e.month),datasets:i.areas.map((e,t)=>{const s=e.toLowerCase().replace(/\s+/g,"");return{label:e,data:i.data.map(e=>e[s]/1e6),borderColor:i.colors[t],backgroundColor:`${i.colors[t]}20`,borderWidth:3,fill:!0,tension:.4,pointBackgroundColor:i.colors[t],pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:5,pointHoverRadius:7}})},n={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{usePointStyle:!0,padding:20,font:{size:12,weight:"500"}}},title:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"white",bodyColor:"white",borderColor:"rgba(255, 255, 255, 0.2)",borderWidth:1,cornerRadius:8,displayColors:!0,callbacks:{title:function(t){return`${t[0].label} ${e}`},label:function(e){return`${e.dataset.label}: \u20a6${e.parsed.y}M`}}}},scales:{y:{beginAtZero:!1,title:{display:!0,text:"Price (\u20a6M)",font:{size:12,weight:"bold"}},grid:{color:"rgba(0, 0, 0, 0.1)"},ticks:{color:"rgba(0, 0, 0, 0.7)",font:{size:11},callback:function(e){return`\u20a6${e}M`}}},x:{title:{display:!0,text:"Month",font:{size:12,weight:"bold"}},grid:{color:"rgba(0, 0, 0, 0.1)"},ticks:{color:"rgba(0, 0, 0, 0.7)",font:{size:11}}}},interaction:{mode:"index",intersect:!1},animation:{duration:1500,easing:"easeInOutQuart"}};return(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,g.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Price Trends in ",e]}),(0,g.jsx)("div",{className:"flex space-x-2",children:Object.keys(s).map(s=>(0,g.jsx)("button",{onClick:()=>t(s),className:"px-3 py-1 rounded-full text-xs font-medium transition-colors "+(e===s?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:s},s))})]}),(0,g.jsx)("div",{className:"relative h-80 w-full",children:(0,g.jsx)(u.N1,{data:l,options:n})}),(0,g.jsxs)("div",{className:"mt-4 flex justify-between text-xs text-gray-500",children:[(0,g.jsx)("span",{children:"Jan 2024"}),(0,g.jsx)("span",{className:"text-center font-medium",children:"6-Month Price Trend"}),(0,g.jsx)("span",{children:"Jun 2024"})]}),(0,g.jsxs)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-2 text-blue-800",children:[(0,g.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,g.jsx)("span",{className:"text-sm font-medium",children:"Market Analysis"})]}),(0,g.jsxs)("p",{className:"text-xs text-blue-600 mt-1",children:["Average price increase in ",e,": ","Lagos"===e?"+12.5%":"Abuja"===e?"+11.8%":"Port Harcourt"===e?"+9.7%":"+8.9%"," over 6 months"]})]})]})};var p=s(6809),v=s(1876);const b=()=>{const{user:e,setAuthRedirect:t}=(0,n.As)(),x=(0,i.Zp)(),u=(0,i.zy)(),{properties:b,loading:j,toggleFavorite:f}=(0,r.NC)(),{userInvestments:y,getUserInvestmentSummary:N}=(0,o.H)(),{getUserMortgages:w,getPaymentSummary:k,getUserApplications:I,getApplicationsByStatus:S}=(0,d.Q)(),[P,A]=(0,a.useState)(new Set),C=b.slice(0,3),M=(0,a.useCallback)(()=>{if(e&&e.id){const t=`favorites_${e.id}`,s=JSON.parse(localStorage.getItem(t)||"[]").map(e=>String(e));return A(new Set(s)),s.length}return 0},[e]);(0,a.useEffect)(()=>{M()},[e,M]);const[L,E]=(0,a.useState)({totalProperties:0,savedProperties:0,activeInquiries:0,scheduledViewings:0,completedViewings:0,totalInvested:0,activeInvestments:0,escrowTransactions:0,pendingPayments:0,totalEarnings:0,monthlyBudget:5e6}),T=(0,a.useCallback)(()=>{if(!e||!e.id)return void console.warn("refreshDashboardStats: No user available, skipping load");const t=`favorites_${e.id}`,s=JSON.parse(localStorage.getItem(t)||"[]"),a=Array.isArray(s)?s.length:0,i=JSON.parse(localStorage.getItem("viewingRequests")||"[]").filter(t=>t.userId===e.id||t.buyerId===e.id),l=i.filter(e=>{var t;const s=null===(t=e.status)||void 0===t?void 0:t.toLowerCase();return"pending"===s||"pending_vendor_confirmation"===s||"accepted"===s||"confirmed"===s||"proposed_new_time"===s}).length,n=i.filter(e=>{var t;const s=null===(t=e.status)||void 0===t?void 0:t.toLowerCase();return"completed"===s||"viewed"===s||"declined"===s}).length,r=JSON.parse(localStorage.getItem("inquiries")||"[]").filter(t=>t.userId===e.id||t.buyerId===e.id).filter(e=>"new"===e.status||"pending"===e.status||"contacted"===e.status).length,o=JSON.parse(localStorage.getItem("escrowTransactions")||"[]").filter(t=>t.buyerId===e.id||t.sellerId===e.id||t.buyerId===e.uid||t.sellerId===e.uid),d=o.length,c=o.filter(e=>{var t;const s=null===(t=e.status)||void 0===t?void 0:t.toLowerCase();return"pending_payment"===s||"pending"===s||"funded"===s}).length,m=N(),x=m.totalInvested||0,u=m.activeInvestments||0,g=m.totalDividends||0,h=(I(),S("pending").length,S("under_review").length,S("approved").length,b.length||0);E(t=>({...t,totalProperties:h,savedProperties:a,activeInquiries:r,scheduledViewings:l,completedViewings:n,totalInvested:x,activeInvestments:u,escrowTransactions:d,pendingPayments:c,totalEarnings:g,monthlyBudget:(null===e||void 0===e?void 0:e.monthlyBudget)||5e6,mortgageApplications:I().length,pendingMortgageApps:S("pending").length,underReviewMortgageApps:S("under_review").length,approvedMortgageApps:S("approved").length}))},[e,b.length,N,I,S]);(0,a.useEffect)(()=>{if(!e)return;const t=()=>{M(),setTimeout(()=>{T()},100)},s=()=>{setTimeout(()=>{T()},100)},a=()=>{setTimeout(()=>{T()},100)},i=()=>{setTimeout(()=>{T()},100)},l=()=>{setTimeout(()=>{T()},100)},n=n=>{if(e&&e.id){const r=`favorites_${e.id}`;n.key===r?t():"inquiries"===n.key?s():"viewingRequests"===n.key?a():n.key===`userInvestments_${e.id}`?i():"escrowTransactions"===n.key&&l()}else"inquiries"===n.key?s():"viewingRequests"===n.key?a():"escrowTransactions"===n.key&&l()};return window.addEventListener("favoritesUpdated",t),window.addEventListener("inquiriesUpdated",s),window.addEventListener("viewingsUpdated",a),window.addEventListener("investmentsUpdated",i),window.addEventListener("escrowUpdated",l),window.addEventListener("storage",n),()=>{window.removeEventListener("favoritesUpdated",t),window.removeEventListener("inquiriesUpdated",s),window.removeEventListener("viewingsUpdated",a),window.removeEventListener("investmentsUpdated",i),window.removeEventListener("escrowUpdated",l),window.removeEventListener("storage",n)}},[e,M,T]),(0,a.useEffect)(()=>{e&&T()},[e,P.size,T]),(0,a.useEffect)(()=>{const t=()=>{!document.hidden&&e&&(M(),T())},s=()=>{e&&(M(),T())};return document.addEventListener("visibilitychange",t),window.addEventListener("focus",s),()=>{document.removeEventListener("visibilitychange",t),window.removeEventListener("focus",s)}},[e,M,T]);const V=e=>{x(`/property/${e}`)},[R,B]=(0,a.useState)(!1),[q,$]=(0,a.useState)(null),[D,_]=(0,a.useState)(""),[J,O]=(0,a.useState)(""),[F,U]=(0,a.useState)(""),z=t=>{if(!e)return m.Ay.error("Please login to schedule viewings"),void x("/");$(t),B(!0)};(0,a.useEffect)(()=>{(()=>{if(!e||!e.id)return void console.warn("loadDashboardStats: No user available, skipping load");const t=`favorites_${e.id}`,a=JSON.parse(localStorage.getItem(t)||"[]").length,i=JSON.parse(localStorage.getItem("viewingRequests")||"[]").filter(t=>t.userId===e.id||t.buyerId===e.id),l=i.filter(e=>"pending"===e.status||"pending_vendor_confirmation"===e.status||"accepted"===e.status||"confirmed"===e.status).length,n=i.filter(e=>"completed"===e.status||"viewed"===e.status).length,r=JSON.parse(localStorage.getItem("inquiries")||"[]").filter(t=>t.userId===e.id||t.buyerId===e.id).filter(e=>"new"===e.status||"pending"===e.status||"contacted"===e.status).length,o=JSON.parse(localStorage.getItem("escrowTransactions")||"[]").filter(t=>t.buyerId===e.id||t.sellerId===e.id),d=o.length,c=o.filter(e=>"pending"===e.status||"funded"===e.status).length,m=N(),x=m.totalInvested||0,u=m.activeInvestments||0,g=m.totalDividends||0,h=(k().totalMonthlyPayments,b.length||0);(async()=>{try{const{hasAuthToken:t}=await Promise.resolve().then(s.bind(s,6809));if(!await t())return console.log("Dashboard: No Firebase token available, using local data only"),void E({totalProperties:h,savedProperties:a,activeInquiries:r,scheduledViewings:l,completedViewings:n,totalInvested:x,activeInvestments:u,escrowTransactions:d,monthlyBudget:(null===e||void 0===e?void 0:e.monthlyBudget)||5e6,pendingPayments:c,totalEarnings:g});const i=await(0,p.Ud)((0,v.e9)("/dashboard/user"),{method:"GET"});if(i.ok){const t=await i.json();if(t.success){const s=t.data||{},i=s.investments||{},o=s.escrow||{};return void E(t=>{var m;return{...t,totalProperties:null!==(m=s.totalProperties)&&void 0!==m?m:h,savedProperties:a,activeInquiries:r||s.activeInquiries||0,scheduledViewings:l||s.scheduledViewings||0,completedViewings:n||s.completedViewings||0,totalInvested:x||i.totalInvested||0,activeInvestments:u||i.activeInvestments||0,escrowTransactions:d||o.count||0,pendingPayments:c||o.pendingPayments||0,monthlyBudget:(null===e||void 0===e?void 0:e.monthlyBudget)||5e6,totalEarnings:g||(null===e||void 0===e?void 0:e.totalEarnings)||0}})}}else 401===i.status&&console.log("Dashboard: API returned 401 - using local data only")}catch(t){console.log("Dashboard: Error fetching backend stats (using local data)",t.message)}E({totalProperties:h,savedProperties:a,activeInquiries:r,scheduledViewings:l,completedViewings:n,totalInvested:x,activeInvestments:u,escrowTransactions:d,monthlyBudget:(null===e||void 0===e?void 0:e.monthlyBudget)||5e6,pendingPayments:c,totalEarnings:g})})()})()},[e,b.length,y,N,k]),(0,a.useEffect)(()=>{"/dashboard"===u.pathname&&e&&(M(),T())},[u.pathname,e,M,T]);const Y=[{id:1,title:"Luxury Apartment in Victoria Island",price:75e6,location:"Victoria Island, Lagos",bedrooms:3,bathrooms:2,area:210,image:"https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=400&h=300&fit=crop",tag:"New Listing",tagColor:"bg-green-500"},{id:2,title:"Modern Family House in Lekki",price:12e7,location:"Lekki Phase 1, Lagos",bedrooms:4,bathrooms:3,area:350,image:"https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=400&h=300&fit=crop",tag:"Featured",tagColor:"bg-brand-orange"},{id:3,title:"Penthouse with Ocean View in Ikoyi",price:95e6,location:"Ikoyi, Lagos",bedrooms:2,bathrooms:2,area:180,image:"https://images.unsplash.com/photo-1600566753190-17f0baa2a6c3?w=400&h=300&fit=crop",tag:null,tagColor:""}];return(0,g.jsxs)("div",{className:"p-6",children:[(0,g.jsxs)("div",{className:"w-full",children:[(0,g.jsx)("div",{className:"mb-8",children:(0,g.jsxs)("div",{className:"welcome-section",children:[(0,g.jsxs)("h1",{className:"text-2xl font-bold mb-2",children:["Good Afternoon, ",(null===e||void 0===e?void 0:e.firstName)||"Oluwaseun","!"]}),(0,g.jsx)("p",{className:"text-blue-100 mb-4",children:"Welcome to your dashboard. Track your property journey, manage saved listings, and explore new opportunities in the African real estate market."}),(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,g.jsx)("div",{className:"stats-card cursor-pointer hover:bg-blue-700 transition-colors",onClick:()=>x("/saved-properties"),title:"View saved properties",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-white",children:L.savedProperties}),(0,g.jsx)("div",{className:"text-blue-200 text-sm",children:"Saved Properties"})]}),(0,g.jsx)(c.Mbv,{className:"text-blue-300 text-xl"})]})}),(0,g.jsx)("div",{className:"stats-card cursor-pointer hover:bg-blue-700 transition-colors",onClick:()=>x("/inquiries"),title:"View active inquiries",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-white",children:L.activeInquiries}),(0,g.jsx)("div",{className:"text-blue-200 text-sm",children:"Active Inquiries"})]}),(0,g.jsx)(c.jNV,{className:"text-blue-300 text-xl"})]})}),(0,g.jsx)("div",{className:"stats-card cursor-pointer hover:bg-blue-700 transition-colors",onClick:()=>x("/my-inspections"),title:"View scheduled viewings",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-white",children:L.scheduledViewings}),(0,g.jsx)("div",{className:"text-blue-200 text-sm",children:"Scheduled Viewings"})]}),(0,g.jsx)(c.itz,{className:"text-blue-300 text-xl"})]})}),(0,g.jsx)("div",{className:"stats-card cursor-pointer hover:bg-blue-700 transition-colors",onClick:()=>x("/billing"),title:"View billing and payments",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-white",children:L.totalInvested>0?`\u20a6${(L.totalInvested/1e6).toFixed(1)}M`:"\u20a60"}),(0,g.jsx)("div",{className:"text-blue-200 text-sm",children:"Total Invested"})]}),(0,g.jsx)(c.YYR,{className:"text-blue-300 text-xl"})]})})]}),(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[(0,g.jsx)("div",{className:"stats-card cursor-pointer hover:bg-blue-700 transition-colors",onClick:()=>x("/investment"),title:"View active investments",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-white",children:L.activeInvestments}),(0,g.jsx)("div",{className:"text-blue-200 text-sm",children:"Active Investments"})]}),(0,g.jsx)(c.wJQ,{className:"text-blue-300 text-xl"})]})}),(0,g.jsx)("div",{className:"stats-card cursor-pointer hover:bg-blue-700 transition-colors",onClick:()=>x("/billing"),title:"View escrow transactions",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-white",children:L.escrowTransactions}),(0,g.jsx)("div",{className:"text-blue-200 text-sm",children:"Escrow Transactions"})]}),(0,g.jsx)(c.CMH,{className:"text-blue-300 text-xl"})]})}),(0,g.jsx)("div",{className:"stats-card cursor-pointer hover:bg-blue-700 transition-colors",onClick:()=>x("/billing"),title:"View billing and payments",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{className:"text-2xl font-bold text-white",children:["\u20a6",(L.monthlyBudget/1e6).toFixed(1),"M"]}),(0,g.jsx)("div",{className:"text-blue-200 text-sm",children:"Monthly Budget"})]}),(0,g.jsx)(c.MxO,{className:"text-blue-300 text-xl"})]})})]})]})}),(0,g.jsx)("div",{className:"mb-8",children:(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Market Insights & Trends"}),(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,g.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,g.jsx)("h4",{className:"font-semibold text-blue-900",children:"Price Trends"}),(0,g.jsx)(c.YYR,{className:"text-blue-600"})]}),(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,g.jsx)("span",{className:"text-blue-700",children:"Victoria Island"}),(0,g.jsx)("span",{className:"font-semibold text-green-600",children:"+12.5%"})]}),(0,g.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,g.jsx)("span",{className:"text-blue-700",children:"Lekki"}),(0,g.jsx)("span",{className:"font-semibold text-green-600",children:"+8.3%"})]}),(0,g.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,g.jsx)("span",{className:"text-blue-700",children:"Ikoyi"}),(0,g.jsx)("span",{className:"font-semibold text-green-600",children:"+15.2%"})]})]}),(0,g.jsx)("p",{className:"text-xs text-blue-600 mt-2",children:"Average increase this quarter"})]}),(0,g.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,g.jsx)("h4",{className:"font-semibold text-green-900",children:"Investment ROI"}),(0,g.jsx)(c.wJQ,{className:"text-green-600"})]}),(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,g.jsx)("span",{className:"text-green-700",children:"Luxury Apartments"}),(0,g.jsx)("span",{className:"font-semibold text-green-600",children:"18.5%"})]}),(0,g.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,g.jsx)("span",{className:"text-green-700",children:"Commercial Properties"}),(0,g.jsx)("span",{className:"font-semibold text-green-600",children:"22.1%"})]}),(0,g.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,g.jsx)("span",{className:"text-green-700",children:"Land Development"}),(0,g.jsx)("span",{className:"font-semibold text-green-600",children:"25.3%"})]})]}),(0,g.jsx)("p",{className:"text-xs text-green-600 mt-2",children:"Average annual returns"})]}),(0,g.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-4",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,g.jsx)("h4",{className:"font-semibold text-orange-900",children:"Market Activity"}),(0,g.jsx)(c.jNV,{className:"text-orange-600"})]}),(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,g.jsx)("span",{className:"text-orange-700",children:"New Listings"}),(0,g.jsx)("span",{className:"font-semibold text-orange-600",children:"+24"})]}),(0,g.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,g.jsx)("span",{className:"text-orange-700",children:"Price Reductions"}),(0,g.jsx)("span",{className:"font-semibold text-orange-600",children:"-8"})]}),(0,g.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,g.jsx)("span",{className:"text-orange-700",children:"Sold This Month"}),(0,g.jsx)("span",{className:"font-semibold text-orange-600",children:"+31"})]})]}),(0,g.jsx)("p",{className:"text-xs text-orange-600 mt-2",children:"Last 30 days activity"})]})]})]})}),e&&(0,g.jsx)("div",{className:"mb-8",children:(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Your Investment Portfolio"}),(0,g.jsx)("button",{onClick:()=>x("/investment"),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View All \u2192"})]}),(()=>{const e=N(),t=y.slice(0,3);return(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,g.jsx)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-green-600 text-sm font-medium",children:"Total Invested"}),(0,g.jsxs)("p",{className:"text-green-900 text-xl font-bold",children:["\u20a6",(e.totalInvested||0).toLocaleString()]})]}),(0,g.jsx)(c.YYR,{className:"text-green-600 text-xl"})]})}),(0,g.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-blue-600 text-sm font-medium",children:"Dividends Earned"}),(0,g.jsxs)("p",{className:"text-blue-900 text-xl font-bold",children:["\u20a6",(e.totalDividends||0).toLocaleString()]})]}),(0,g.jsx)(c.MxO,{className:"text-blue-600 text-xl"})]})}),(0,g.jsx)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-purple-600 text-sm font-medium",children:"Active Investments"}),(0,g.jsx)("p",{className:"text-purple-900 text-xl font-bold",children:e.activeInvestments})]}),(0,g.jsx)(c.wJQ,{className:"text-purple-600 text-xl"})]})})]}),t.length>0?(0,g.jsxs)("div",{children:[(0,g.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Recent Investments"}),(0,g.jsx)("div",{className:"space-y-3",children:t.map(e=>(0,g.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("h5",{className:"font-medium text-gray-900",children:e.investmentTitle}),(0,g.jsxs)("p",{className:"text-sm text-gray-600",children:["Invested: \u20a6",(e.amount||0).toLocaleString()," \u2022 Status: ",(0,g.jsx)("span",{className:"capitalize "+("active"===e.status?"text-green-600":"pending_approval"===e.status?"text-yellow-600":"completed"===e.status?"text-blue-600":"text-gray-600"),children:e.status.replace("_"," ")})]})]}),(0,g.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,g.jsxs)("div",{className:"text-right",children:[(0,g.jsxs)("p",{className:"font-semibold text-gray-900",children:["\u20a6",(e.totalDividendsEarned||0).toLocaleString()]}),(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"Earned"})]}),e.propertyId&&(0,g.jsxs)("button",{onClick:()=>x(`/property/${e.propertyId}`),className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors text-sm flex items-center space-x-1",children:[(0,g.jsx)(c.Ny1,{className:"text-xs"}),(0,g.jsx)("span",{children:"View Property"})]})]})]},e.id))})]}):(0,g.jsxs)("div",{className:"text-center py-8",children:[(0,g.jsx)(c.YYR,{className:"text-gray-300 text-4xl mx-auto mb-3"}),(0,g.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Investments Yet"}),(0,g.jsx)("p",{className:"text-gray-600 mb-4",children:"Start building your investment portfolio today"}),(0,g.jsx)("button",{onClick:()=>x("/investment"),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Explore Opportunities"})]})]})})()]})}),e&&(()=>{const e=w(),t=k();return e.length>0?(0,g.jsx)("div",{className:"mb-8",children:(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Your Mortgage Portfolio"}),(0,g.jsx)("button",{onClick:()=>x("/mortgages"),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View All \u2192"})]}),(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,g.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-blue-600 text-sm font-medium",children:"Active Mortgages"}),(0,g.jsx)("p",{className:"text-blue-900 text-xl font-bold",children:t.activeMortgages})]}),(0,g.jsx)(c.rQ8,{className:"text-blue-600 text-xl"})]})}),(0,g.jsx)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-green-600 text-sm font-medium",children:"Monthly Payments"}),(0,g.jsxs)("p",{className:"text-green-900 text-xl font-bold",children:["\u20a6",t.totalMonthlyPayments.toLocaleString()]})]}),(0,g.jsx)(c.MxO,{className:"text-green-600 text-xl"})]})}),(0,g.jsx)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-purple-600 text-sm font-medium",children:"Total Paid"}),(0,g.jsxs)("p",{className:"text-purple-900 text-xl font-bold",children:["\u20a6",t.totalPaid.toLocaleString()]})]}),(0,g.jsx)(c.CMH,{className:"text-purple-600 text-xl"})]})})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Recent Mortgages"}),(0,g.jsx)("div",{className:"space-y-3",children:e.slice(0,2).map(e=>(0,g.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("h5",{className:"font-medium text-gray-900",children:e.propertyTitle}),(0,g.jsxs)("p",{className:"text-sm text-gray-600",children:["Monthly: \u20a6",e.monthlyPayment.toLocaleString()," \u2022 Next Due: ",new Date(e.nextPaymentDate).toLocaleDateString()]})]}),(0,g.jsxs)("div",{className:"text-right",children:[(0,g.jsxs)("p",{className:"font-semibold text-gray-900",children:[e.paymentsMade,"/",e.totalPayments]}),(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"Payments"})]})]},e.id))})]})]})]})}):null})(),(0,g.jsxs)("div",{className:"mb-8",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,g.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Continue Browsing"}),(0,g.jsx)(l.N_,{to:"/properties",className:"text-brand-blue hover:text-blue-700 text-sm font-medium",children:"View history \u2192"})]}),(0,g.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Y.map(s=>{var a,i,l;return(0,g.jsxs)("div",{className:"property-card",children:[(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsx)("img",{src:s.image,alt:s.title,className:"property-card-image"}),s.tag&&(0,g.jsx)("div",{className:`absolute top-2 left-2 tag ${s.tagColor} text-white px-2 py-1 rounded text-xs font-medium`,children:s.tag}),(0,g.jsxs)("div",{className:"absolute top-2 right-2 flex space-x-2",children:[(0,g.jsx)("button",{onClick:async()=>{const e=`${window.location.origin}/property/${s.id}`;try{navigator.share?await navigator.share({title:s.title,text:s.title,url:e}):(await navigator.clipboard.writeText(e),m.Ay.success("Link copied"))}catch(t){}},className:"text-white bg-black bg-opacity-50 p-1 rounded hover:bg-opacity-70 transition-all",children:(0,g.jsx)(c.Zzu,{className:"text-sm"})}),(0,g.jsx)("button",{onClick:async a=>{if(a.stopPropagation(),!e)return t("/dashboard"),m.Ay.error("Please login to save properties"),void x("/");try{const e=String(s.id),t=await f(e,s);if(t&&t.success){const s=new Set(P);t.favorited?(s.add(e),m.Ay.success("Property saved successfully")):(s.delete(e),m.Ay.success("Property removed from saved properties")),A(s),window.dispatchEvent(new CustomEvent("favoritesUpdated",{detail:{propertyId:e,favorited:t.favorited}})),setTimeout(()=>{M(),T()},100)}}catch(a){m.Ay.error("Failed to save property")}},className:"p-1 rounded hover:bg-opacity-70 transition-all "+(P.has(String(s.id))?"bg-red-500 bg-opacity-90":"bg-black bg-opacity-50"),title:P.has(String(s.id))?"Remove from saved properties":"Save property",children:(0,g.jsx)(c.Mbv,{className:"text-sm transition-all "+(P.has(String(s.id))?"text-red-500 fill-red-500":"text-white")})})]})]}),(0,g.jsxs)("div",{className:"property-card-content",children:[(0,g.jsxs)("div",{className:"property-price",children:["\u20a6",(s.price||0).toLocaleString()]}),(0,g.jsx)("h3",{className:"property-title",children:s.title}),(0,g.jsx)("p",{className:"property-location",children:s.location}),(0,g.jsxs)("div",{className:"property-features",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,g.jsx)(c.TiC,{}),(0,g.jsxs)("span",{children:[s.bedrooms||(null===(a=s.details)||void 0===a?void 0:a.bedrooms)||0," Bedrooms"]})]}),(0,g.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,g.jsx)(c.F6e,{}),(0,g.jsxs)("span",{children:[s.bathrooms||(null===(i=s.details)||void 0===i?void 0:i.bathrooms)||0," Bathrooms"]})]}),(0,g.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,g.jsx)(c.c7S,{}),(0,g.jsxs)("span",{children:[s.area||(null===(l=s.details)||void 0===l?void 0:l.sqft)||0,"m\xb2 Area"]})]})]}),(0,g.jsxs)("div",{className:"space-y-2 mt-4",children:[(0,g.jsx)("div",{onClick:e=>{e.stopPropagation(),V(s.id)},className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center cursor-pointer",children:"View Details \u2192"}),(0,g.jsxs)("button",{onClick:e=>{e.stopPropagation(),z(s)},className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center",title:`Schedule a viewing for ${s.title}`,children:[(0,g.jsx)(c.itz,{className:"mr-2"}),"Schedule Viewing"]})]})]})]},s.id)})})]}),(0,g.jsxs)("div",{className:"mb-8",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,g.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Recommended for You"}),(0,g.jsx)(l.N_,{to:"/properties",className:"text-brand-blue hover:text-blue-700 text-sm font-medium",children:"View all \u2192"})]}),(0,g.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:(C.length>0?C:Y).map(s=>{var a,i,l,n,r,o;return(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:[(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsx)("div",{onClick:()=>V(s.id),className:"cursor-pointer",children:(0,g.jsx)("img",{src:s.image||(null===(a=s.images)||void 0===a||null===(i=a[0])||void 0===i?void 0:i.url)||"https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=400&h=300&fit=crop",alt:s.title,className:"w-full h-48 object-cover"})}),s.tag&&(0,g.jsx)("div",{className:`absolute top-2 left-2 ${s.tagColor||"bg-orange-500"} text-white px-2 py-1 rounded text-xs font-medium`,children:s.tag}),(0,g.jsxs)("div",{className:"absolute top-2 right-2 flex space-x-2 z-10",children:[(0,g.jsx)("button",{onClick:e=>{e.stopPropagation(),m.Ay.success("Property shared!")},className:"w-8 h-8 bg-black bg-opacity-50 rounded-full flex items-center justify-center hover:bg-opacity-75 transition-colors",children:(0,g.jsx)(c.Zzu,{className:"text-white text-sm"})}),(0,g.jsx)("button",{onClick:async a=>{if(a.stopPropagation(),!e)return t("/dashboard"),m.Ay.error("Please login to save properties"),void x("/");try{const e=String(s.id),t=await f(e,s);if(t&&t.success){const s=new Set(P);t.favorited?(s.add(e),m.Ay.success("Property saved successfully")):(s.delete(e),m.Ay.success("Property removed from saved properties")),A(s),window.dispatchEvent(new CustomEvent("favoritesUpdated",{detail:{propertyId:e,favorited:t.favorited}})),setTimeout(()=>{M(),T()},100)}}catch(a){m.Ay.error("Failed to save property")}},className:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-opacity-75 transition-all "+(P.has(String(s.id))?"bg-red-500 bg-opacity-90":"bg-black bg-opacity-50"),title:P.has(String(s.id))?"Remove from saved properties":"Save property",children:(0,g.jsx)(c.Mbv,{className:"text-sm transition-all "+(P.has(String(s.id))?"text-red-500 fill-red-500":"text-white")})})]})]}),(0,g.jsxs)("div",{onClick:()=>V(s.id),className:"p-4 cursor-pointer",children:[(0,g.jsxs)("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:["\u20a6",null===(l=s.price)||void 0===l?void 0:l.toLocaleString()]}),(0,g.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:s.title}),(0,g.jsx)("p",{className:"text-gray-600 text-sm mb-3",children:(()=>{if("string"===typeof s.location)return s.location;if(s.location&&"object"===typeof s.location){if(s.location.address)return s.location.address;const e=s.location.city||"",t=s.location.state||"";return`${e}${e&&t?", ":""}${t}`.trim()}return"Location not specified"})()}),(0,g.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-3",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,g.jsx)(c.TiC,{}),(0,g.jsxs)("span",{children:[s.bedrooms||(null===(n=s.details)||void 0===n?void 0:n.bedrooms)||0," Bedrooms"]})]}),(0,g.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,g.jsx)(c.F6e,{}),(0,g.jsxs)("span",{children:[s.bathrooms||(null===(r=s.details)||void 0===r?void 0:r.bathrooms)||0," Bathrooms"]})]}),(0,g.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,g.jsx)(c.c7S,{}),(0,g.jsxs)("span",{children:[s.area||(null===(o=s.details)||void 0===o?void 0:o.sqft)||0,"m\xb2 Area"]})]})]}),(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsx)("div",{onClick:e=>{e.stopPropagation(),V(s.id)},className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center cursor-pointer",children:"View Details \u2192"}),(0,g.jsxs)("button",{onClick:e=>{e.stopPropagation(),z(s)},className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center",title:`Schedule a viewing for ${s.title}`,children:[(0,g.jsx)(c.itz,{className:"mr-2"}),"Schedule Viewing"]})]})]})]},s.id)})})]}),(0,g.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,g.jsx)(h,{}),(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Transactions"}),(0,g.jsx)("div",{className:"w-6 h-6 bg-blue-100 rounded flex items-center justify-center",children:(0,g.jsx)(c.rQ8,{className:"w-4 h-4 text-brand-blue"})})]}),(0,g.jsxs)("div",{className:"space-y-3",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,g.jsx)(c.rQ8,{className:"text-brand-blue"}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"font-medium text-gray-900",children:"3 Bedroom Apartment"}),(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"Victoria Island, Lagos"})]})]}),(0,g.jsx)("p",{className:"font-semibold text-gray-900",children:"\u20a6100M"})]}),(0,g.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,g.jsx)(c.rQ8,{className:"text-brand-blue"}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"font-medium text-gray-900",children:"2 Bedroom Penthouse"}),(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"Ikoyi, Lagos"})]})]}),(0,g.jsx)("p",{className:"font-semibold text-gray-900",children:"\u20a682M"})]}),(0,g.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,g.jsx)(c.rQ8,{className:"text-brand-blue"}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"font-medium text-gray-900",children:"4 Bedroom Duplex"}),(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"Lekki Phase 1, Lagos"})]})]}),(0,g.jsx)("p",{className:"font-semibold text-gray-900",children:"\u20a695M"})]})]})]})]})]}),R&&q&&(0,g.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,g.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[(0,g.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Schedule Property Viewing"}),(0,g.jsx)("p",{className:"text-gray-600 mb-4",children:q.title}),(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Date"}),(0,g.jsx)("input",{type:"date",value:D,onChange:e=>_(e.target.value),min:(new Date).toISOString().split("T")[0],className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Time"}),(0,g.jsxs)("select",{value:J,onChange:e=>O(e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,g.jsx)("option",{value:"",children:"Select Time"}),(0,g.jsx)("option",{value:"09:00",children:"9:00 AM"}),(0,g.jsx)("option",{value:"10:00",children:"10:00 AM"}),(0,g.jsx)("option",{value:"11:00",children:"11:00 AM"}),(0,g.jsx)("option",{value:"12:00",children:"12:00 PM"}),(0,g.jsx)("option",{value:"13:00",children:"1:00 PM"}),(0,g.jsx)("option",{value:"14:00",children:"2:00 PM"}),(0,g.jsx)("option",{value:"15:00",children:"3:00 PM"}),(0,g.jsx)("option",{value:"16:00",children:"4:00 PM"}),(0,g.jsx)("option",{value:"17:00",children:"5:00 PM"})]})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Message (Optional)"}),(0,g.jsx)("textarea",{value:F,onChange:e=>U(e.target.value),placeholder:"Any specific requirements or questions...",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]})]}),(0,g.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,g.jsx)("button",{onClick:()=>{B(!1),$(null),_(""),O(""),U("")},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,g.jsx)("button",{onClick:()=>{if(!D||!J)return void m.Ay.error("Please select both date and time");if(!e||!e.id||!e.firstName||!e.lastName)return void m.Ay.error("User information incomplete. Please refresh and try again.");const t={id:`viewing-${Date.now()}`,propertyId:q.id,propertyTitle:q.title,propertyLocation:q.location,userId:null===e||void 0===e?void 0:e.id,buyerId:null===e||void 0===e?void 0:e.id,userName:`${(null===e||void 0===e?void 0:e.firstName)||""} ${(null===e||void 0===e?void 0:e.lastName)||""}`,userEmail:(null===e||void 0===e?void 0:e.email)||"",status:"pending_vendor_confirmation",requestedAt:(new Date).toISOString(),preferredDate:D,preferredTime:J,message:F,agentContact:q.agent||{name:"Property Agent",phone:"+234-XXX-XXXX",email:"agent@example.com"},vendorResponse:null,confirmedDate:null,confirmedTime:null},s=JSON.parse(localStorage.getItem("viewingRequests")||"[]");s.push(t),localStorage.setItem("viewingRequests",JSON.stringify(s)),window.dispatchEvent(new CustomEvent("viewingsUpdated",{detail:{viewingRequest:t,action:"created"}})),m.Ay.success(`Viewing request sent for "${q.title}"! The vendor will confirm or suggest an alternative time.`),T(),B(!1),$(null),_(""),O(""),U("")},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Request Viewing"})]})]})})]})}},6809:(e,t,s)=>{s.d(t,{Ud:()=>n,hasAuthToken:()=>l});const a=async()=>(()=>{try{return localStorage.getItem("accessToken")||localStorage.getItem("token")}catch(e){return console.warn("getAuthToken: Could not read token from storage:",e),null}})(),i=async()=>{const e=await a(),t={"Content-Type":"application/json"};return e&&(t.Authorization=`Bearer ${e}`),t},l=async()=>{const e=await a();return Boolean(e)},n=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=await i(),a={...t,headers:{...s,...t.headers||{}}};return fetch(e,a)}}}]);
//# sourceMappingURL=72.a09eef25.chunk.js.map