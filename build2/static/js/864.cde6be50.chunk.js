"use strict";(self.webpackChunkreal_estate_marketplace=self.webpackChunkreal_estate_marketplace||[]).push([[864],{3864:(e,t,r)=>{r.r(t),r.d(t,{default:()=>l});var n=r(5043),s=r(3216),o=r(5016),i=r(5032),d=r(5369),a=r(3768),c=r(579);const l=()=>{var e;const{user:t}=(0,o.As)(),r=(0,s.Zp)(),[l,u]=(0,n.useState)([]),[p,m]=(0,n.useState)(null),g=(0,n.useRef)({}),[y,x]=(0,n.useState)(!1),[v,f]=(0,n.useState)(null),[b,h]=(0,n.useState)(""),[w,N]=(0,n.useState)(""),[j,I]=(0,n.useState)(""),_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{if(!("Notification"in window))return;"granted"===Notification.permission&&new Notification(e,t)}catch(r){}},D=(e,t)=>{try{return new Date(`${e}T${t}:00`)}catch{return null}},S=e=>{const t=`Property Inspection - ${e.projectName}`,r=e.confirmedDate&&e.confirmedTime?D(e.confirmedDate,e.confirmedTime):D(e.preferredDate,e.preferredTime),n=r?new Date(r.getTime()+36e5):null;return{title:t,start:r,end:n,details:`Inspection at ${e.projectLocation||""}`,location:e.projectLocation||""}},$=e=>{const t=e=>String(e).padStart(2,"0");return`${e.getUTCFullYear()}${t(e.getUTCMonth()+1)}${t(e.getUTCDate())}T${t(e.getUTCHours())}${t(e.getUTCMinutes())}00Z`},T=()=>{if(null===t||void 0===t||!t.id)return[];try{const e=JSON.parse(localStorage.getItem("viewingRequests")||"[]"),r=e.filter(e=>e.userId===t.id||e.buyerId===t.id).map(e=>({id:e.id,projectName:e.propertyTitle||e.projectName||e.title||"Property",projectLocation:e.propertyLocation||e.projectLocation||e.location||"",preferredDate:e.preferredDate,preferredTime:e.preferredTime,confirmedDate:e.confirmedDate,confirmedTime:e.confirmedTime,proposedDate:e.proposedDate,proposedTime:e.proposedTime,status:e.status||"pending_vendor",createdAt:e.requestedAt||e.createdAt||(new Date).toISOString(),...e}));return r.sort((e,t)=>{const r=new Date(e.createdAt||0);return new Date(t.createdAt||0)-r}),r}catch(e){return console.error("Error loading requests from localStorage:",e),[]}},E=e=>{u(e),(async()=>{try{if(!("Notification"in window))return;"default"===Notification.permission&&await Notification.requestPermission()}catch(e){}})();const r=g.current||{};for(const t of e){const e=r[t.id];e&&e!==t.status&&("accepted"===t.status?_("Inspection confirmed",{body:`${t.projectName} on ${t.confirmedDate} ${t.confirmedTime}`}):"proposed_new_time"===t.status?_("Vendor proposed a new time",{body:`${t.projectName}: ${t.proposedDate} ${t.proposedTime}`}):"declined"===t.status?_("Inspection declined",{body:`${t.projectName}`}):"cancelled_by_vendor"===t.status&&(_("Vendor cancelled inspection",{body:`${t.projectName} was cancelled by vendor`}),a.Ay.error(`Vendor cancelled inspection for ${t.projectName}`)))}g.current=Object.fromEntries(e.map(e=>[e.id,e.status])),t&&t.id&&m((0,i.FH)({role:"buyer",userId:t.id}))};(0,n.useEffect)(()=>{if(null===t||void 0===t||!t.id)return void u([]);const e=T();E(e);const r=setInterval(()=>{const e=T();E(e)},5e3),n=()=>{const e=T();E(e)},s=e=>{if(null===t||void 0===t||!t.id)return;const r=e.detail||e;if(null!==r&&void 0!==r&&r.buyerId&&r.buyerId!==t.id)return;const n=(0,i.FH)({role:"buyer",userId:t.id});m(n)};return window.addEventListener("viewingsUpdated",n),window.addEventListener("inspectionAnalyticsUpdated",s),window.addEventListener("storage",e=>{"viewingRequests"===e.key&&n()}),()=>{clearInterval(r),window.removeEventListener("viewingsUpdated",n),window.removeEventListener("inspectionAnalyticsUpdated",s)}},[null===t||void 0===t?void 0:t.id]),(0,n.useEffect)(()=>{null!==t&&void 0!==t&&t.id?m((0,i.FH)({role:"buyer",userId:t.id})):m(null)},[null===t||void 0===t?void 0:t.id]);return(0,c.jsxs)("div",{className:"p-6",children:[(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"My Inspection Requests"}),(0,c.jsx)("p",{className:"text-gray-600",children:"Track and respond to vendor proposals"})]}),p&&(0,c.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,c.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,c.jsxs)("div",{className:"bg-blue-50 border border-blue-100 rounded-xl p-4",children:[(0,c.jsx)("p",{className:"text-sm text-blue-600",children:"Pending Responses"}),(0,c.jsx)("p",{className:"text-3xl font-semibold text-blue-900",children:p.pendingResponses})]}),(0,c.jsxs)("div",{className:"bg-green-50 border border-green-100 rounded-xl p-4",children:[(0,c.jsx)("p",{className:"text-sm text-green-600",children:"Confirmed"}),(0,c.jsx)("p",{className:"text-3xl font-semibold text-green-900",children:p.confirmed})]}),(0,c.jsxs)("div",{className:"bg-purple-50 border border-purple-100 rounded-xl p-4",children:[(0,c.jsx)("p",{className:"text-sm text-purple-600",children:"Vendor Reschedules"}),(0,c.jsx)("p",{className:"text-3xl font-semibold text-purple-900",children:p.vendorProposals})]}),(0,c.jsxs)("div",{className:"bg-red-50 border border-red-100 rounded-xl p-4",children:[(0,c.jsx)("p",{className:"text-sm text-red-600",children:"Vendor Cancellations"}),(0,c.jsx)("p",{className:"text-3xl font-semibold text-red-900",children:p.cancelledByVendor})]})]}),(null===(e=p.timeline)||void 0===e?void 0:e.length)>0&&(0,c.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-4",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,c.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"Last 7 days activity"}),(0,c.jsxs)("span",{className:"text-xs text-gray-500",children:[p.totalRequests," total requests"]})]}),(0,c.jsx)("div",{className:"flex gap-3 overflow-x-auto text-sm",children:p.timeline.map(e=>(0,c.jsxs)("div",{className:"flex-1 min-w-[90px] text-center",children:[(0,c.jsx)("p",{className:"text-gray-500 text-xs",children:new Date(e.date).toLocaleDateString()}),(0,c.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:e.count})]},e.date))})]})]}),(0,c.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,c.jsxs)("div",{className:"p-4 border-b border-gray-200 text-sm text-gray-600",children:[l.length," request(s)"]}),(0,c.jsxs)("div",{className:"divide-y",children:[0===l.length&&(0,c.jsx)("div",{className:"p-6 text-sm text-gray-600",children:"No inspection requests yet."}),l.map(e=>{var t;return(0,c.jsxs)("div",{className:"p-4 flex items-center text-sm",children:[(0,c.jsxs)("div",{className:"w-1/5",children:[(0,c.jsx)("div",{className:"font-medium text-gray-900",children:e.projectName}),(0,c.jsx)("div",{className:"text-gray-600",children:e.projectLocation})]}),(0,c.jsxs)("div",{className:"w-1/5",children:[(0,c.jsxs)("div",{children:["Preferred: ",e.preferredDate," ",e.preferredTime]}),e.proposedDate&&e.proposedTime&&(0,c.jsxs)("div",{className:"text-xs text-gray-600",children:["Vendor proposed: ",e.proposedDate," ",e.proposedTime]})]}),(0,c.jsx)("div",{className:"w-1/5",children:(0,c.jsx)("span",{className:"px-2 py-1 rounded-full text-xs "+("pending_vendor"===e.status?"bg-yellow-100 text-yellow-800":"accepted"===e.status?"bg-green-100 text-green-800":"proposed_new_time"===e.status?"bg-blue-100 text-blue-800":"pending_vendor_confirmation"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:(null===(t=e.status)||void 0===t?void 0:t.replaceAll("_"," "))||"pending"})}),(0,c.jsxs)("div",{className:"w-2/5 flex flex-wrap gap-2 items-center",children:[(0,c.jsx)("button",{onClick:()=>(e=>{const t=e.propertyId||e.projectId;t?r(`/property/${t}`):a.Ay.error("Property information not available")})(e),className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded transition-colors",title:"View Property Details",children:(0,c.jsx)(d.Ny1,{className:"w-5 h-5"})}),"proposed_new_time"===e.status&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{onClick:()=>(async e=>{if(!e.proposedDate||!e.proposedTime)return void a.Ay.error("No proposed time from vendor");await(0,i.HK)(e.id,{status:"accepted",confirmedDate:e.proposedDate,confirmedTime:e.proposedTime})?a.Ay.success("Proposal accepted"):a.Ay.error("Failed to accept")})(e),className:"px-3 py-1 bg-green-600 text-white rounded",children:"Accept Proposal"}),(0,c.jsx)("button",{onClick:()=>(async e=>{await(0,i.HK)(e.id,{status:"declined"})?a.Ay.success("Proposal declined"):a.Ay.error("Failed to decline")})(e),className:"px-3 py-1 bg-red-600 text-white rounded",children:"Decline"})]}),"accepted"===e.status&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{onClick:()=>(e=>{const{title:t,start:r,end:n,details:s,location:o}=S(e);if(!r||!n)return;const i=e=>`${e.getUTCFullYear()}${String(e.getUTCMonth()+1).padStart(2,"0")}${String(e.getUTCDate()).padStart(2,"0")}T${String(e.getUTCHours()).padStart(2,"0")}${String(e.getUTCMinutes()).padStart(2,"0")}00Z`,d=`https://www.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(t)}&dates=${i(r)}/${i(n)}&details=${encodeURIComponent(s)}&location=${encodeURIComponent(o)}`;window.open(d,"_blank")})(e),className:"px-3 py-1 bg-gray-800 text-white rounded",children:"Google Calendar"}),(0,c.jsx)("button",{onClick:()=>(e=>{const{title:t,start:r,end:n,details:s,location:o}=S(e);if(!r||!n)return;const i=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//PropertyArk//Inspection//EN","BEGIN:VEVENT",`UID:${e.id}@propertyark`,`DTSTAMP:${$(new Date)}`,`DTSTART:${$(r)}`,`DTEND:${$(n)}`,`SUMMARY:${t}`,`DESCRIPTION:${s}`,`LOCATION:${o}`,"END:VEVENT","END:VCALENDAR"].join("\r\n"),d=new Blob([i],{type:"text/calendar;charset=utf-8"}),a=URL.createObjectURL(d),c=document.createElement("a");c.href=a,c.download=`inspection-${e.id}.ics`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(a)})(e),className:"px-3 py-1 border rounded",children:"Download .ics"})]}),"cancelled_by_buyer"!==e.status&&"declined"!==e.status&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{onClick:()=>(e=>{f(e),h(e.preferredDate||""),N(e.preferredTime||""),I(""),x(!0)})(e),className:"px-3 py-1 bg-blue-600 text-white rounded",children:"Reschedule"}),(0,c.jsx)("button",{onClick:()=>(async e=>{if(!window.confirm("Cancel this inspection request? Vendors will be notified."))return;await(0,i.HK)(e.id,{status:"cancelled_by_buyer",cancelledAt:(new Date).toISOString()})?a.Ay.success("Inspection cancelled"):a.Ay.error("Failed to cancel")})(e),className:"px-3 py-1 bg-red-100 text-red-700 rounded border border-red-300",children:"Cancel"})]})]})]},e.id)})]})]}),y&&v&&(0,c.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,c.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[(0,c.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Reschedule Inspection"}),(0,c.jsx)("p",{className:"text-sm text-gray-500",children:v.projectName})]}),(0,c.jsx)("button",{onClick:()=>x(!1),className:"text-gray-500 hover:text-gray-700",children:"\xd7"})]}),(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New date"}),(0,c.jsx)("input",{type:"date",value:b,onChange:e=>h(e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New time"}),(0,c.jsx)("input",{type:"time",value:w,onChange:e=>N(e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message to vendor (optional)"}),(0,c.jsx)("textarea",{value:j,onChange:e=>I(e.target.value),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Share context for the new time"})]})]}),(0,c.jsxs)("div",{className:"flex justify-between mt-6",children:[(0,c.jsx)("button",{onClick:()=>x(!1),className:"px-5 py-2 border rounded-lg",children:"Close"}),(0,c.jsx)("button",{onClick:async()=>{if(!v||!b||!w)return void a.Ay.error("Select your new date and time");await(0,i.HK)(v.id,{status:"buyer_rescheduled",preferredDate:b,preferredTime:w,buyerMessage:j||"",proposedDate:null,proposedTime:null})?(a.Ay.success("Reschedule request sent to vendor"),x(!1),f(null),h(""),N(""),I("")):a.Ay.error("Failed to reschedule")},className:"px-5 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Send Update"})]})]})})]})}},5032:(e,t,r)=>{r.d(t,{FH:()=>y,HK:()=>f,Ix:()=>x,o2:()=>v});var n=r(1692);const s="viewingRequests",o="inspectionActivityLog",i={totalRequests:0,pendingResponses:0,confirmed:0,vendorProposals:0,buyerReschedules:0,cancelledByBuyer:0,cancelledByVendor:0,timeline:[]},d=(e,t)=>{if("undefined"!==typeof window)if("storage"!==e)"function"===typeof window.dispatchEvent&&window.dispatchEvent(new CustomEvent(e,{detail:t}));else try{window.dispatchEvent(new StorageEvent("storage",t))}catch{window.dispatchEvent(new CustomEvent("storage",{detail:t}))}},a=()=>{try{return JSON.parse(localStorage.getItem(s)||"[]")}catch{return[]}},c=e=>{localStorage.setItem(s,JSON.stringify(e))},l=()=>{try{return JSON.parse(localStorage.getItem(o)||"[]")}catch{return[]}},u=(e,t)=>e||t?t?e?`${e} ${t}`:t:e:"",p=(e,t)=>{if(!e||!t)return;const r=((e,t)=>({action:e,requestId:t.id,propertyTitle:t.propertyTitle||t.projectTitle||t.projectName||t.title||"Property",buyerId:t.buyerId||t.userId,vendorId:t.vendorId,vendorEmail:t.vendorEmail,status:t.status,timestamp:(new Date).toISOString()}))(e,t),s=l();s.unshift(r),s.length>200&&s.pop(),(e=>{localStorage.setItem(o,JSON.stringify(e))})(s),d("inspectionActivity",r),d("inspectionAnalyticsUpdated",r);const i=((e,t,r)=>{const n=[],s=r.propertyTitle,o=t.buyerName||t.userName||"Buyer",i=t.vendorName||t.vendor||t.owner||"Vendor",d=u(t.preferredDate,t.preferredTime),a=u(t.confirmedDate,t.confirmedTime),c=u(t.proposedDate,t.proposedTime),l=(r,d)=>{(t.vendorId||t.vendorEmail)&&n.push({recipientId:t.vendorId,recipientEmail:t.vendorEmail,roles:["vendor"],type:e,title:r,message:d,priority:"medium",metadata:{requestId:t.id,propertyTitle:s,buyerName:o,vendorName:i}})},p=(r,d)=>{(t.buyerId||t.userId||t.buyerEmail||t.userEmail)&&n.push({recipientId:t.buyerId||t.userId,recipientEmail:t.buyerEmail||t.userEmail,roles:["buyer"],type:e,title:r,message:d,priority:"medium",metadata:{requestId:t.id,propertyTitle:s,buyerName:o,vendorName:i}})};switch(e){case"inspection_requested":l("New inspection request",`${o} requested to view ${s} ${d?`on ${d}`:""}`.trim());break;case"inspection_confirmed":p("Inspection confirmed",`${i} confirmed ${s} ${a?`for ${a}`:""}`.trim());break;case"vendor_proposed_new_time":p("Vendor proposed new time",`${i} suggested ${c||"another slot"} for ${s}`);break;case"buyer_rescheduled":l("Buyer requested new time",`${o} rescheduled ${s} ${d?`to ${d}`:""}`.trim());break;case"inspection_cancelled_by_buyer":l("Inspection cancelled by buyer",`${o} cancelled ${s}`);break;case"inspection_cancelled_by_vendor":p("Inspection cancelled by vendor",`${i} cancelled ${s}`);break;case"inspection_declined":p("Inspection declined",`${i} declined the request for ${s}`)}return n})(e,t,r);i.length&&(d("inspectionNotification",{action:e,payload:r,notifications:i,request:t}),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e.length||"undefined"===typeof window)return;const t=e.filter(e=>e.recipientId).map(e=>{var t;return{recipientId:e.recipientId,type:e.type,title:e.title,message:e.message,priority:e.priority||"medium",metadata:{...e.metadata||{},source:(null===(t=e.metadata)||void 0===t?void 0:t.source)||"inspection_client_sync"},data:e.metadata||{}}});t.length&&n.A.createInspectionNotifications(t).then(e=>{null!==e&&void 0!==e&&e.success||console.warn("Failed to persist inspection notifications",e)}).catch(e=>{console.error("Error persisting inspection notifications:",e)})}(i))},m=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=((null===t||void 0===t?void 0:t.status)||r.status||"").toLowerCase();if(!n&&(r.proposedDate||r.proposedTime))return"vendor_proposed_new_time";switch(n){case"accepted":case"confirmed":return"inspection_confirmed";case"proposed_new_time":return"vendor_proposed_new_time";case"buyer_rescheduled":return"buyer_rescheduled";case"cancelled_by_buyer":return"inspection_cancelled_by_buyer";case"cancelled_by_vendor":return"inspection_cancelled_by_vendor";case"declined":return"inspection_declined";default:return e&&e.status!==(null===t||void 0===t?void 0:t.status)?`inspection_status_${(null===t||void 0===t?void 0:t.status)||"updated"}`:null}},g=(e,t,r)=>!(!t&&!r)&&(t&&(null===e||void 0===e?void 0:e.vendorId)===t||r&&(null===e||void 0===e?void 0:e.vendorEmail)===r),y=function(){let{role:e="buyer",userId:t,vendorId:r,vendorEmail:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("undefined"===typeof window)return{...i};if("buyer"===e&&!t)return{...i};if("vendor"===e&&!r&&!n)return{...i};const s=a().filter(s=>{return"buyer"===e?(o=s,!!(i=t)&&((null===o||void 0===o?void 0:o.buyerId)===i||(null===o||void 0===o?void 0:o.userId)===i)):g(s,r||s.vendorId,n);var o,i}),o={totalRequests:s.length,pendingResponses:0,confirmed:0,vendorProposals:0,buyerReschedules:0,cancelledByBuyer:0,cancelledByVendor:0,timeline:[]},d=["pending","pending_vendor","pending_vendor_confirmation"],c=l();s.forEach(e=>{const t=(e.status||"").toLowerCase();d.includes(t)&&(o.pendingResponses+=1),["accepted","confirmed"].includes(t)&&(o.confirmed+=1),"proposed_new_time"===t&&(o.vendorProposals+=1),"buyer_rescheduled"===t&&(o.buyerReschedules+=1),"cancelled_by_buyer"===t&&(o.cancelledByBuyer+=1),["cancelled_by_vendor","declined"].includes(t)&&(o.cancelledByVendor+=1)});const u=Array.from({length:7}).map((s,o)=>{const i=new Date;i.setDate(i.getDate()-(6-o));const d=i.toISOString().slice(0,10),a=c.filter(s=>{return(s=>"buyer"===e?(null===s||void 0===s?void 0:s.buyerId)===t:g(s,r,n))(s)&&((o=s.timestamp)?new Date(o):new Date).toISOString().slice(0,10)===d;var o}).length;return{date:d,count:a}});return o.timeline=u,o},x=async e=>{try{console.log("Using localStorage for creating inspection requests (API unavailable)");const t=a(),r={id:`viewing-${Date.now()}`,...e,createdAt:(new Date).toISOString(),status:"pending"};return t.push(r),c(t),d("viewingsUpdated",{viewingRequest:r,action:"created"}),d("storage",{key:s,newValue:JSON.stringify(t)}),p("inspection_requested",r),r}catch(t){console.error("Error creating inspection request:",t);const r=a(),n={id:`viewing-${Date.now()}`,...e,createdAt:(new Date).toISOString(),status:"pending"};return r.push(n),c(r),d("viewingsUpdated",{viewingRequest:n,action:"created"}),d("storage",{key:s,newValue:JSON.stringify(r)}),p("inspection_requested",n),n}},v=async(e,t)=>{try{console.log("Using localStorage for inspection requests (API unavailable)");const r=a().filter(r=>e&&r.vendorId===e||t&&r.vendorEmail===t);return r.sort((e,t)=>new Date(t.createdAt||0)-new Date(e.createdAt||0)),r}catch(r){console.error("Error listing inspection requests:",r);return a().filter(r=>e&&r.vendorId===e||t&&r.vendorEmail===t).sort((e,t)=>new Date(t.createdAt||0)-new Date(e.createdAt||0))}},f=async(e,t)=>{try{console.log("Using localStorage for updating inspection requests (API unavailable)");const r=a();let n=null;const o=r.map(r=>r.id===e?(n={...r,...t,updatedAt:(new Date).toISOString()},n):r);if(!n)return c(r),!1;c(o),d("viewingsUpdated",{requestId:e,updates:t,action:"updated"}),d("storage",{key:s,newValue:JSON.stringify(o)});const i=m(r.find(t=>t.id===e),n,t);return i&&p(i,n),!0}catch(r){console.error("Error updating inspection request:",r);const n=a();let o=null;const i=n.map(r=>r.id===e?(o={...r,...t,updatedAt:(new Date).toISOString()},o):r);if(!o)return c(n),!1;c(i),d("viewingsUpdated",{requestId:e,updates:t,action:"updated"}),d("storage",{key:s,newValue:JSON.stringify(i)});const l=m(n.find(t=>t.id===e),o,t);return l&&p(l,o),!0}}}}]);
//# sourceMappingURL=864.cde6be50.chunk.js.map