{"version":3,"file":"static/js/515.85488e0e.chunk.js","mappings":"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","sources":["components/Breadcrumbs.js","services/inspectionService.js","components/SimplePaymentModal.js","components/PropertyVerificationNew.js","utils/verificationStatus.js","components/VendorInspectionRequests.js","components/NotificationDropdown.js","components/VendorViewsChart.js","components/VendorConversionChart.js","pages/VendorDashboard.js","utils/authToken.js","components/PropertyCardSkeleton.js"],"sourcesContent":["import React from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport { FaChevronRight, FaHome } from 'react-icons/fa';\n\nconst Breadcrumbs = ({ items }) => {\n  const location = useLocation();\n  \n  // Auto-generate breadcrumbs from route if items not provided\n  const pathnames = location.pathname.split('/').filter((x) => x);\n  \n  const breadcrumbItems = items || [\n    { label: 'Home', path: '/' },\n    ...pathnames.map((name, index) => {\n      const routeTo = `/${pathnames.slice(0, index + 1).join('/')}`;\n      const label = name\n        .split('-')\n        .map(word => word.charAt(0).toUpperCase() + word.slice(1))\n        .join(' ');\n      return { label, path: routeTo };\n    })\n  ];\n\n  return (\n    <nav className=\"flex items-center space-x-2 text-sm text-gray-600 mb-4\" aria-label=\"Breadcrumb\">\n      <ol className=\"flex items-center space-x-2\">\n        {breadcrumbItems.map((item, index) => {\n          const isLast = index === breadcrumbItems.length - 1;\n          \n          return (\n            <li key={item.path || index} className=\"flex items-center\">\n              {index === 0 && (\n                <FaHome className=\"h-4 w-4 text-gray-400 mr-2\" aria-hidden=\"true\" />\n              )}\n              {isLast ? (\n                <span className=\"text-gray-900 font-medium\" aria-current=\"page\">\n                  {item.label}\n                </span>\n              ) : (\n                <>\n                  <Link \n                    to={item.path} \n                    className=\"hover:text-blue-600 transition-colors\"\n                    aria-label={`Navigate to ${item.label}`}\n                  >\n                    {item.label}\n                  </Link>\n                  <FaChevronRight className=\"h-3 w-3 text-gray-400 mx-2\" aria-hidden=\"true\" />\n                </>\n              )}\n            </li>\n          );\n        })}\n      </ol>\n    </nav>\n  );\n};\n\nexport default Breadcrumbs;\n\n","import notificationService from './notificationService';\r\n\r\nconst COLLECTION = 'inspectionRequests';\r\nconst VIEWING_REQUESTS_KEY = 'viewingRequests';\r\nconst INSPECTION_ACTIVITY_KEY = 'inspectionActivityLog';\r\nconst ANALYTICS_EVENT = 'inspectionAnalyticsUpdated';\r\nconst ACTIVITY_EVENT = 'inspectionActivity';\r\n\r\nconst defaultAnalytics = {\r\n  totalRequests: 0,\r\n  pendingResponses: 0,\r\n  confirmed: 0,\r\n  vendorProposals: 0,\r\n  buyerReschedules: 0,\r\n  cancelledByBuyer: 0,\r\n  cancelledByVendor: 0,\r\n  timeline: []\r\n};\r\n\r\nconst safeWindowDispatch = (eventName, detail) => {\r\n  if (typeof window === 'undefined') return;\r\n  if (eventName === 'storage') {\r\n    try {\r\n      window.dispatchEvent(new StorageEvent('storage', detail));\r\n    } catch {\r\n      window.dispatchEvent(new CustomEvent('storage', { detail }));\r\n    }\r\n    return;\r\n  }\r\n  if (typeof window.dispatchEvent === 'function') {\r\n    window.dispatchEvent(new CustomEvent(eventName, { detail }));\r\n  }\r\n};\r\n\r\nconst getStoredRequests = () => {\r\n  try {\r\n    return JSON.parse(localStorage.getItem(VIEWING_REQUESTS_KEY) || '[]');\r\n  } catch {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst saveStoredRequests = (requests) => {\r\n  localStorage.setItem(VIEWING_REQUESTS_KEY, JSON.stringify(requests));\r\n};\r\n\r\nconst getActivityLog = () => {\r\n  try {\r\n    return JSON.parse(localStorage.getItem(INSPECTION_ACTIVITY_KEY) || '[]');\r\n  } catch {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst saveActivityLog = (log) => {\r\n  localStorage.setItem(INSPECTION_ACTIVITY_KEY, JSON.stringify(log));\r\n};\r\n\r\nconst buildActivityPayload = (action, request) => ({\r\n  action,\r\n  requestId: request.id,\r\n  propertyTitle: request.propertyTitle || request.projectTitle || request.projectName || request.title || 'Property',\r\n  buyerId: request.buyerId || request.userId,\r\n  vendorId: request.vendorId,\r\n  vendorEmail: request.vendorEmail,\r\n  status: request.status,\r\n  timestamp: new Date().toISOString()\r\n});\r\n\r\nconst formatDateTimeLabel = (date, time) => {\r\n  if (!date && !time) return '';\r\n  if (!time) return date;\r\n  if (!date) return time;\r\n  return `${date} ${time}`;\r\n};\r\n\r\nconst buildInspectionNotificationEntries = (action, request, payload) => {\r\n  const entries = [];\r\n  const propertyTitle = payload.propertyTitle;\r\n  const buyerName = request.buyerName || request.userName || 'Buyer';\r\n  const vendorName = request.vendorName || request.vendor || request.owner || 'Vendor';\r\n  const preferredLabel = formatDateTimeLabel(request.preferredDate, request.preferredTime);\r\n  const confirmedLabel = formatDateTimeLabel(request.confirmedDate, request.confirmedTime);\r\n  const proposedLabel = formatDateTimeLabel(request.proposedDate, request.proposedTime);\r\n\r\n  const pushForVendor = (title, message) => {\r\n    if (request.vendorId || request.vendorEmail) {\r\n      entries.push({\r\n        recipientId: request.vendorId,\r\n        recipientEmail: request.vendorEmail,\r\n        roles: ['vendor'],\r\n        type: action,\r\n        title,\r\n        message,\r\n        priority: 'medium',\r\n        metadata: { requestId: request.id, propertyTitle, buyerName, vendorName }\r\n      });\r\n    }\r\n  };\r\n\r\n  const pushForBuyer = (title, message) => {\r\n    if (request.buyerId || request.userId || request.buyerEmail || request.userEmail) {\r\n      entries.push({\r\n        recipientId: request.buyerId || request.userId,\r\n        recipientEmail: request.buyerEmail || request.userEmail,\r\n        roles: ['buyer'],\r\n        type: action,\r\n        title,\r\n        message,\r\n        priority: 'medium',\r\n        metadata: { requestId: request.id, propertyTitle, buyerName, vendorName }\r\n      });\r\n    }\r\n  };\r\n\r\n  switch (action) {\r\n    case 'inspection_requested':\r\n      pushForVendor('New inspection request', `${buyerName} requested to view ${propertyTitle} ${preferredLabel ? `on ${preferredLabel}` : ''}`.trim());\r\n      break;\r\n    case 'inspection_confirmed':\r\n      pushForBuyer('Inspection confirmed', `${vendorName} confirmed ${propertyTitle} ${confirmedLabel ? `for ${confirmedLabel}` : ''}`.trim());\r\n      break;\r\n    case 'vendor_proposed_new_time':\r\n      pushForBuyer('Vendor proposed new time', `${vendorName} suggested ${proposedLabel || 'another slot'} for ${propertyTitle}`);\r\n      break;\r\n    case 'buyer_rescheduled':\r\n      pushForVendor('Buyer requested new time', `${buyerName} rescheduled ${propertyTitle} ${preferredLabel ? `to ${preferredLabel}` : ''}`.trim());\r\n      break;\r\n    case 'inspection_cancelled_by_buyer':\r\n      pushForVendor('Inspection cancelled by buyer', `${buyerName} cancelled ${propertyTitle}`);\r\n      break;\r\n    case 'inspection_cancelled_by_vendor':\r\n      pushForBuyer('Inspection cancelled by vendor', `${vendorName} cancelled ${propertyTitle}`);\r\n      break;\r\n    case 'inspection_declined':\r\n      pushForBuyer('Inspection declined', `${vendorName} declined the request for ${propertyTitle}`);\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n\r\n  return entries;\r\n};\r\n\r\nconst persistInspectionNotifications = (entries = []) => {\r\n  if (!entries.length || typeof window === 'undefined') return;\r\n  const payloads = entries\r\n    .filter((entry) => entry.recipientId)\r\n    .map((entry) => ({\r\n      recipientId: entry.recipientId,\r\n      type: entry.type,\r\n      title: entry.title,\r\n      message: entry.message,\r\n      priority: entry.priority || 'medium',\r\n      metadata: {\r\n        ...(entry.metadata || {}),\r\n        source: entry.metadata?.source || 'inspection_client_sync'\r\n      },\r\n      data: entry.metadata || {}\r\n    }));\r\n\r\n  if (!payloads.length) return;\r\n\r\n  notificationService.createInspectionNotifications(payloads)\r\n    .then((result) => {\r\n      if (!result?.success) {\r\n        console.warn('Failed to persist inspection notifications', result);\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error persisting inspection notifications:', error);\r\n    });\r\n};\r\n\r\nconst logInspectionActivity = (action, request) => {\r\n  if (!action || !request) return;\r\n  const payload = buildActivityPayload(action, request);\r\n  const log = getActivityLog();\r\n  log.unshift(payload);\r\n  if (log.length > 200) {\r\n    log.pop();\r\n  }\r\n  saveActivityLog(log);\r\n  safeWindowDispatch(ACTIVITY_EVENT, payload);\r\n  safeWindowDispatch(ANALYTICS_EVENT, payload);\r\n  const notifications = buildInspectionNotificationEntries(action, request, payload);\r\n  if (notifications.length) {\r\n    safeWindowDispatch('inspectionNotification', { action, payload, notifications, request });\r\n    persistInspectionNotifications(notifications);\r\n  }\r\n};\r\n\r\nconst deriveActionFromStatus = (previous, next, updates = {}) => {\r\n  const status = (next?.status || updates.status || '').toLowerCase();\r\n  if (!status && (updates.proposedDate || updates.proposedTime)) {\r\n    return 'vendor_proposed_new_time';\r\n  }\r\n  switch (status) {\r\n    case 'accepted':\r\n    case 'confirmed':\r\n      return 'inspection_confirmed';\r\n    case 'proposed_new_time':\r\n      return 'vendor_proposed_new_time';\r\n    case 'buyer_rescheduled':\r\n      return 'buyer_rescheduled';\r\n    case 'cancelled_by_buyer':\r\n      return 'inspection_cancelled_by_buyer';\r\n    case 'cancelled_by_vendor':\r\n      return 'inspection_cancelled_by_vendor';\r\n    case 'declined':\r\n      return 'inspection_declined';\r\n    default:\r\n      if (previous && previous.status !== next?.status) {\r\n        return `inspection_status_${next?.status || 'updated'}`;\r\n      }\r\n      return null;\r\n  }\r\n};\r\n\r\nconst getDateKey = (isoDate) => {\r\n  const date = isoDate ? new Date(isoDate) : new Date();\r\n  return date.toISOString().slice(0, 10);\r\n};\r\n\r\nconst matchesBuyer = (request, buyerId) => {\r\n  if (!buyerId) return false;\r\n  return request?.buyerId === buyerId || request?.userId === buyerId;\r\n};\r\n\r\nconst matchesVendor = (request, vendorId, vendorEmail) => {\r\n  if (!vendorId && !vendorEmail) return false;\r\n  return (vendorId && request?.vendorId === vendorId) || (vendorEmail && request?.vendorEmail === vendorEmail);\r\n};\r\n\r\nexport const getInspectionAnalytics = ({ role = 'buyer', userId, vendorId, vendorEmail } = {}) => {\r\n  if (typeof window === 'undefined') return { ...defaultAnalytics };\r\n  if (role === 'buyer' && !userId) return { ...defaultAnalytics };\r\n  if (role === 'vendor' && !vendorId && !vendorEmail) return { ...defaultAnalytics };\r\n\r\n  const requests = getStoredRequests();\r\n  const relevant = requests.filter((req) =>\r\n    role === 'buyer' ? matchesBuyer(req, userId) : matchesVendor(req, vendorId || req.vendorId, vendorEmail)\r\n  );\r\n\r\n  const analytics = {\r\n    totalRequests: relevant.length,\r\n    pendingResponses: 0,\r\n    confirmed: 0,\r\n    vendorProposals: 0,\r\n    buyerReschedules: 0,\r\n    cancelledByBuyer: 0,\r\n    cancelledByVendor: 0,\r\n    timeline: []\r\n  };\r\n\r\n  const pendingStatuses = ['pending', 'pending_vendor', 'pending_vendor_confirmation'];\r\n  const log = getActivityLog();\r\n  const activityFilter = (entry) =>\r\n    role === 'buyer' ? entry?.buyerId === userId : matchesVendor(entry, vendorId, vendorEmail);\r\n\r\n  relevant.forEach((req) => {\r\n    const status = (req.status || '').toLowerCase();\r\n    if (pendingStatuses.includes(status)) {\r\n      analytics.pendingResponses += 1;\r\n    }\r\n    if (['accepted', 'confirmed'].includes(status)) {\r\n      analytics.confirmed += 1;\r\n    }\r\n    if (status === 'proposed_new_time') {\r\n      analytics.vendorProposals += 1;\r\n    }\r\n    if (status === 'buyer_rescheduled') {\r\n      analytics.buyerReschedules += 1;\r\n    }\r\n    if (status === 'cancelled_by_buyer') {\r\n      analytics.cancelledByBuyer += 1;\r\n    }\r\n    if (['cancelled_by_vendor', 'declined'].includes(status)) {\r\n      analytics.cancelledByVendor += 1;\r\n    }\r\n  });\r\n\r\n  const lastSevenDays = Array.from({ length: 7 }).map((_, idx) => {\r\n    const date = new Date();\r\n    date.setDate(date.getDate() - (6 - idx));\r\n    const dateKey = date.toISOString().slice(0, 10);\r\n    const dailyCount = log.filter((entry) => activityFilter(entry) && getDateKey(entry.timestamp) === dateKey).length;\r\n    return { date: dateKey, count: dailyCount };\r\n  });\r\n\r\n  analytics.timeline = lastSevenDays;\r\n  return analytics;\r\n};\r\n\r\nexport const createInspectionRequest = async (requestData) => {\r\n  try {\r\n    // Skip API call for now since it's returning 404, go directly to localStorage\r\n    console.log('Using localStorage for creating inspection requests (API unavailable)');\r\n    \r\n    // Fallback to localStorage\r\n    const existing = getStoredRequests();\r\n    const newRequest = {\r\n      id: `viewing-${Date.now()}`,\r\n      ...requestData,\r\n      createdAt: new Date().toISOString(),\r\n      status: 'pending'\r\n    };\r\n    existing.push(newRequest);\r\n    saveStoredRequests(existing);\r\n    \r\n    // Dispatch event to notify Dashboard and other components\r\n    safeWindowDispatch('viewingsUpdated', {\r\n      viewingRequest: newRequest,\r\n      action: 'created'\r\n    });\r\n    \r\n    // Also trigger a storage event for cross-tab synchronization\r\n    safeWindowDispatch('storage', {\r\n      key: VIEWING_REQUESTS_KEY,\r\n      newValue: JSON.stringify(existing)\r\n    });\r\n    logInspectionActivity('inspection_requested', newRequest);\r\n    \r\n    return newRequest;\r\n  } catch (error) {\r\n    console.error('Error creating inspection request:', error);\r\n    // Final fallback to localStorage\r\n    const existing = getStoredRequests();\r\n    const newRequest = {\r\n      id: `viewing-${Date.now()}`,\r\n      ...requestData,\r\n      createdAt: new Date().toISOString(),\r\n      status: 'pending'\r\n    };\r\n    existing.push(newRequest);\r\n    saveStoredRequests(existing);\r\n    \r\n    // Dispatch event to notify Dashboard and other components\r\n    safeWindowDispatch('viewingsUpdated', {\r\n      viewingRequest: newRequest,\r\n      action: 'created'\r\n    });\r\n    \r\n    // Also trigger a storage event for cross-tab synchronization\r\n    safeWindowDispatch('storage', {\r\n      key: VIEWING_REQUESTS_KEY,\r\n      newValue: JSON.stringify(existing)\r\n    });\r\n    logInspectionActivity('inspection_requested', newRequest);\r\n    \r\n    return newRequest;\r\n  }\r\n};\r\n\r\nexport const listInspectionRequestsByVendor = async (vendorId, vendorEmail) => {\r\n  try {\r\n    // Skip API call for now since it's returning 404, go directly to localStorage\r\n    console.log('Using localStorage for inspection requests (API unavailable)');\r\n    \r\n    // Fallback to localStorage\r\n    const local = getStoredRequests();\r\n    \r\n    // Filter by vendorId or vendorEmail\r\n    const filtered = local.filter((r) => \r\n      (vendorId && r.vendorId === vendorId) || \r\n      (vendorEmail && r.vendorEmail === vendorEmail)\r\n    );\r\n    \r\n    // Sort newest first\r\n    filtered.sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));\r\n    \r\n    return filtered;\r\n  } catch (error) {\r\n    console.error('Error listing inspection requests:', error);\r\n    // Final fallback to localStorage\r\n    const local = getStoredRequests();\r\n    const filtered = local.filter((r) => \r\n      (vendorId && r.vendorId === vendorId) || \r\n      (vendorEmail && r.vendorEmail === vendorEmail)\r\n    );\r\n    return filtered.sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));\r\n  }\r\n};\r\n\r\nexport const listInspectionRequestsByBuyer = async (buyerId) => {\r\n  try {\r\n    // Skip API call for now since it's returning 404, go directly to localStorage\r\n    console.log('Using localStorage for buyer inspection requests (API unavailable)');\r\n    \r\n    // Fallback to localStorage\r\n    const local = getStoredRequests();\r\n    const filtered = local.filter((r) => r.buyerId === buyerId);\r\n    return filtered.sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));\r\n  } catch (error) {\r\n    console.error('Error listing buyer inspection requests:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\nexport const updateInspectionRequest = async (requestId, updates) => {\r\n  try {\r\n    // Skip API call for now since it's returning 404, go directly to localStorage\r\n    console.log('Using localStorage for updating inspection requests (API unavailable)');\r\n    \r\n    // Fallback to localStorage\r\n    const all = getStoredRequests();\r\n    let nextRecord = null;\r\n    const updated = all.map((r) => {\r\n      if (r.id === requestId) {\r\n        nextRecord = { ...r, ...updates, updatedAt: new Date().toISOString() };\r\n        return nextRecord;\r\n      }\r\n      return r;\r\n    });\r\n    if (!nextRecord) {\r\n      saveStoredRequests(all);\r\n      return false;\r\n    }\r\n    saveStoredRequests(updated);\r\n    \r\n    // Dispatch event to notify Dashboard and other components when status changes\r\n    safeWindowDispatch('viewingsUpdated', {\r\n      requestId,\r\n      updates,\r\n      action: 'updated'\r\n    });\r\n    \r\n    // Also trigger a storage event for cross-tab synchronization\r\n    safeWindowDispatch('storage', {\r\n      key: VIEWING_REQUESTS_KEY,\r\n      newValue: JSON.stringify(updated)\r\n    });\r\n    const action = deriveActionFromStatus(all.find((r) => r.id === requestId), nextRecord, updates);\r\n    if (action) {\r\n      logInspectionActivity(action, nextRecord);\r\n    }\r\n    \r\n    return true;\r\n  } catch (error) {\r\n    console.error('Error updating inspection request:', error);\r\n    // Final fallback to localStorage\r\n    const all = getStoredRequests();\r\n    let nextRecord = null;\r\n    const updated = all.map((r) => {\r\n      if (r.id === requestId) {\r\n        nextRecord = { ...r, ...updates, updatedAt: new Date().toISOString() };\r\n        return nextRecord;\r\n      }\r\n      return r;\r\n    });\r\n    if (!nextRecord) {\r\n      saveStoredRequests(all);\r\n      return false;\r\n    }\r\n    saveStoredRequests(updated);\r\n    \r\n    // Dispatch event to notify Dashboard and other components when status changes\r\n    safeWindowDispatch('viewingsUpdated', {\r\n      requestId,\r\n      updates,\r\n      action: 'updated'\r\n    });\r\n    \r\n    // Also trigger a storage event for cross-tab synchronization\r\n    safeWindowDispatch('storage', {\r\n      key: VIEWING_REQUESTS_KEY,\r\n      newValue: JSON.stringify(updated)\r\n    });\r\n    const action = deriveActionFromStatus(all.find((r) => r.id === requestId), nextRecord, updates);\r\n    if (action) {\r\n      logInspectionActivity(action, nextRecord);\r\n    }\r\n    \r\n    return true;\r\n  }\r\n};\r\n\r\nexport const syncLocalInspectionRequests = async () => {\r\n  try {\r\n    // Try to sync with API if available\r\n    const local = getStoredRequests();\r\n    console.log('Inspection requests stored locally:', local.length);\r\n    return { synced: local.length };\r\n  } catch (error) {\r\n    console.error('syncLocalInspectionRequests failed:', error);\r\n    return { synced: 0 };\r\n  }\r\n};\r\n\r\nexport default {\r\n  createInspectionRequest,\r\n  listInspectionRequestsByVendor,\r\n  listInspectionRequestsByBuyer,\r\n  updateInspectionRequest,\r\n  syncLocalInspectionRequests,\r\n  getInspectionAnalytics\r\n};","import React, { useState, useEffect } from 'react';\nimport { FaTimes, FaCheckCircle, FaCreditCard, FaLock } from 'react-icons/fa';\n\nconst SimplePaymentModal = ({ \n  isOpen, \n  onClose, \n  amount = 50000, \n  propertyTitle,\n  onPaymentSuccess,\n  onPaymentError \n}) => {\n  const [paymentStep, setPaymentStep] = useState('details');\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [paymentComplete, setPaymentComplete] = useState(false);\n  const [paymentMethod, setPaymentMethod] = useState('card'); // 'card' or 'transfer'\n  const [formData, setFormData] = useState({\n    email: '',\n    cardNumber: '',\n    expiry: '',\n    cvv: '',\n    cardName: '',\n    accountName: '',\n    bankName: '',\n    transferReference: ''\n  });\n\n  // Reset form when modal opens\n  useEffect(() => {\n    if (isOpen) {\n      setPaymentStep('details');\n      setIsProcessing(false);\n      setPaymentComplete(false);\n      setFormData({\n        email: '',\n        cardNumber: '',\n        expiry: '',\n        cvv: '',\n        cardName: '',\n        accountName: '',\n        bankName: '',\n        transferReference: ''\n      });\n      setPaymentMethod('card');\n    }\n  }, [isOpen]);\n\n  const formatCardNumber = (value) => {\n    const cleaned = value.replace(/\\s/g, '');\n    const chunks = cleaned.match(/.{1,4}/g) || [];\n    return chunks.join(' ');\n  };\n\n  const formatExpiry = (value) => {\n    const cleaned = value.replace(/\\D/g, '');\n    if (cleaned.length >= 2) {\n      return cleaned.slice(0, 2) + '/' + cleaned.slice(2, 4);\n    }\n    return cleaned;\n  };\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    \n    if (name === 'cardNumber') {\n      setFormData(prev => ({\n        ...prev,\n        [name]: formatCardNumber(value)\n      }));\n    } else if (name === 'expiry') {\n      setFormData(prev => ({\n        ...prev,\n        [name]: formatExpiry(value)\n      }));\n    } else {\n      setFormData(prev => ({\n        ...prev,\n        [name]: value\n      }));\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    // Basic validation\n    if (!formData.email) {\n      alert('Please fill in your email address');\n      return;\n    }\n\n    if (paymentMethod === 'card') {\n      if (!formData.cardNumber || !formData.expiry || !formData.cvv) {\n        alert('Please fill in all card details');\n        return;\n      }\n    } else if (paymentMethod === 'transfer') {\n      if (!formData.accountName || !formData.bankName || !formData.transferReference) {\n        alert('Please fill in all transfer details');\n        return;\n      }\n    }\n\n    setIsProcessing(true);\n    setPaymentStep('processing');\n\n    // Simulate payment processing\n    setTimeout(() => {\n      setIsProcessing(false);\n      setPaymentStep('success');\n      setPaymentComplete(true);\n      \n      // Generate mock payment reference\n      const paymentRef = paymentMethod === 'card' \n        ? 'CARD_' + Date.now()\n        : 'TRANSFER_' + Date.now();\n      \n      // Call success callback\n      if (onPaymentSuccess) {\n        onPaymentSuccess({\n          reference: paymentRef,\n          amount: amount,\n          method: paymentMethod,\n          status: 'successful',\n          timestamp: new Date().toISOString()\n        });\n      }\n    }, paymentMethod === 'card' ? 2000 : 1500);\n  };\n\n  const handleClose = () => {\n    if (paymentComplete) {\n      onClose();\n    } else {\n      if (window.confirm('Are you sure you want to cancel this payment?')) {\n        onClose();\n      }\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\">\n      <div className=\"flex min-h-screen items-center justify-center p-4\">\n        <div className=\"fixed inset-0 bg-black bg-opacity-50\" onClick={handleClose}></div>\n        \n        <div className=\"relative bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto\">\n          {/* Header */}\n          <div className=\"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 rounded-t-lg\">\n            <div className=\"flex justify-between items-start\">\n              <div>\n                <h3 className=\"text-xl font-bold\">Property Verification Payment</h3>\n                <p className=\"text-blue-100 text-sm mt-1\">{propertyTitle || 'Property Verification'}</p>\n              </div>\n              <button\n                onClick={handleClose}\n                className=\"text-white hover:text-blue-200 transition-colors\"\n              >\n                <FaTimes size={20} />\n              </button>\n            </div>\n          </div>\n\n          {/* Content */}\n          <div className=\"p-6\">\n            {paymentStep === 'details' && (\n              <form onSubmit={handleSubmit} className=\"space-y-4\">\n                {/* Amount Display */}\n                <div className=\"bg-gray-50 p-4 rounded-lg text-center\">\n                  <p className=\"text-sm text-gray-600\">Payment Amount</p>\n                  <p className=\"text-2xl font-bold text-gray-900\">{amount.toLocaleString()}</p>\n                  <p className=\"text-xs text-gray-500 mt-1\">Property Verification Fee</p>\n                </div>\n\n                {/* Payment Method Selection */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Payment Method\n                  </label>\n                  <div className=\"grid grid-cols-2 gap-3\">\n                    <button\n                      type=\"button\"\n                      onClick={() => setPaymentMethod('card')}\n                      className={`p-3 border rounded-lg text-sm font-medium transition-colors ${\n                        paymentMethod === 'card'\n                          ? 'border-blue-500 bg-blue-50 text-blue-700'\n                          : 'border-gray-300 bg-white text-gray-700 hover:border-gray-400'\n                      }`}\n                    >\n                      <FaCreditCard className=\"inline mr-2\" />\n                      Card Payment\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => setPaymentMethod('transfer')}\n                      className={`p-3 border rounded-lg text-sm font-medium transition-colors ${\n                        paymentMethod === 'transfer'\n                          ? 'border-blue-500 bg-blue-50 text-blue-700'\n                          : 'border-gray-300 bg-white text-gray-700 hover:border-gray-400'\n                      }`}\n                    >\n                      <span className=\"inline mr-2\"></span>\n                      Bank Transfer\n                    </button>\n                  </div>\n                </div>\n\n                {/* Email */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Email Address\n                  </label>\n                  <input\n                    type=\"email\"\n                    name=\"email\"\n                    value={formData.email}\n                    onChange={handleInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    placeholder=\"your@email.com\"\n                    required\n                  />\n                </div>\n\n                {/* Card Payment Form */}\n                {paymentMethod === 'card' && (\n                  <div className=\"space-y-3\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Card Number\n                      </label>\n                      <input\n                        type=\"text\"\n                        name=\"cardNumber\"\n                        value={formData.cardNumber}\n                        onChange={handleInputChange}\n                        maxLength={19}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                        placeholder=\"1234 5678 9012 3456\"\n                        required\n                      />\n                    </div>\n\n                    <div className=\"grid grid-cols-2 gap-3\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Expiry Date\n                        </label>\n                        <input\n                          type=\"text\"\n                          name=\"expiry\"\n                          value={formData.expiry}\n                          onChange={handleInputChange}\n                          maxLength={5}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                          placeholder=\"MM/YY\"\n                          required\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          CVV\n                        </label>\n                        <input\n                          type=\"text\"\n                          name=\"cvv\"\n                          value={formData.cvv}\n                          onChange={handleInputChange}\n                          maxLength={4}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                          placeholder=\"123\"\n                          required\n                        />\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {/* Bank Transfer Form */}\n                {paymentMethod === 'transfer' && (\n                  <div className=\"space-y-3\">\n                    <div className=\"bg-blue-50 p-4 rounded-lg\">\n                      <h4 className=\"font-semibold text-blue-900 mb-2\">Bank Transfer Details</h4>\n                      <div className=\"text-sm text-blue-800 space-y-1\">\n                        <p><strong>Bank:</strong> Test Bank PLC</p>\n                        <p><strong>Account Name:</strong> PropertyArk Verification</p>\n                        <p><strong>Account Number:</strong> 1234567890</p>\n                        <p><strong>Amount:</strong> {amount.toLocaleString()}</p>\n                      </div>\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Your Account Name\n                      </label>\n                      <input\n                        type=\"text\"\n                        name=\"accountName\"\n                        value={formData.accountName}\n                        onChange={handleInputChange}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                        placeholder=\"John Doe\"\n                        required\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Bank Name\n                      </label>\n                      <input\n                        type=\"text\"\n                        name=\"bankName\"\n                        value={formData.bankName}\n                        onChange={handleInputChange}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                        placeholder=\"Your Bank Name\"\n                        required\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Transfer Reference/Transaction ID\n                      </label>\n                      <input\n                        type=\"text\"\n                        name=\"transferReference\"\n                        value={formData.transferReference}\n                        onChange={handleInputChange}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                        placeholder=\"Transaction ID from your bank\"\n                        required\n                      />\n                    </div>\n                  </div>\n                )}\n\n                {/* Security Note */}\n                <div className=\"flex items-center text-sm text-gray-600 bg-blue-50 p-3 rounded-lg\">\n                  <FaLock className=\"text-blue-600 mr-2\" />\n                  <span>Your payment information is secure and encrypted</span>\n                </div>\n\n                {/* Submit Button */}\n                <button\n                  type=\"submit\"\n                  className=\"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center justify-center\"\n                >\n                  <FaCreditCard className=\"mr-2\" />\n                  Pay {amount.toLocaleString()}\n                </button>\n              </form>\n            )}\n\n            {paymentStep === 'processing' && (\n              <div className=\"text-center py-8\">\n                <div className=\"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4\">\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n                </div>\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Processing Payment</h3>\n                <p className=\"text-gray-600\">Please wait while we process your payment...</p>\n              </div>\n            )}\n\n            {paymentStep === 'success' && (\n              <div className=\"text-center py-8\">\n                <div className=\"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4\">\n                  <FaCheckCircle className=\"text-green-600 text-2xl\" />\n                </div>\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Payment Successful!</h3>\n                <p className=\"text-gray-600 mb-4\">Your property verification payment has been processed successfully.</p>\n                <div className=\"bg-gray-50 p-3 rounded-lg text-sm\">\n                  <p className=\"text-gray-600\">Payment Reference: <span className=\"font-mono font-semibold\">PAY_{Date.now()}</span></p>\n                  <p className=\"text-gray-600\">Amount: <span className=\"font-semibold\">{amount.toLocaleString()}</span></p>\n                </div>\n                <button\n                  onClick={handleClose}\n                  className=\"mt-6 w-full bg-green-600 text-white py-3 rounded-lg font-medium hover:bg-green-700 transition-colors\"\n                >\n                  Continue\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SimplePaymentModal;\n","import React, { useState, useEffect, useMemo } from 'react';\nimport { FaTimes, FaCheckCircle, FaExclamationTriangle, FaSpinner, FaShieldAlt, FaMoneyBillWave, FaCreditCard } from 'react-icons/fa';\nimport { getApiUrl } from '../utils/apiConfig';\nimport { useAuth } from '../contexts/AuthContext';\nimport { authenticatedFetch } from '../utils/authToken';\nimport SimplePaymentModal from './SimplePaymentModal';\n\nconst PropertyVerification = ({ property, onClose, onSuccess }) => {\n  const { user } = useAuth();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [successMessage, setSuccessMessage] = useState('');\n  const [showPaymentModal, setShowPaymentModal] = useState(false);\n  const [paymentComplete, setPaymentComplete] = useState(false);\n  const [paymentData, setPaymentData] = useState(null); // Store payment data\n  const [submitting, setSubmitting] = useState(false); // Track submission state\n  const [config, setConfig] = useState(null);\n  const [configLoading, setConfigLoading] = useState(true);\n  \n  const [formValues, setFormValues] = useState({\n    propertyName: '',\n    propertyUrl: '',\n    propertyLocation: '',\n    message: '',\n    preferredBadgeColor: '#10B981'\n  });\n\n  // Initialize form with property data\n  useEffect(() => {\n    if (!property) return;\n    \n    const derivedLocation = (() => {\n      const location = property.location;\n      if (!location) return '';\n      if (typeof location === 'string') return location;\n      const parts = [location.address, location.city, location.state].filter(Boolean);\n      return parts.join(', ');\n    })();\n\n    // Generate property URL automatically\n    const generatePropertyUrl = () => {\n      if (property?.shareUrl || property?.listingUrl) {\n        return property.shareUrl || property.listingUrl;\n      }\n      \n      // Generate URL from property data\n      const baseUrl = 'https://real-estate-marketplace-37544.web.app';\n      const propertyId = property?.id || property?._id;\n      const propertyTitle = property?.title || property?.name || 'property';\n      \n      if (propertyId) {\n        // Create a clean URL-friendly slug from title\n        const slug = propertyTitle\n          .toLowerCase()\n          .replace(/[^a-z0-9]+/g, '-')\n          .replace(/^-+|-+$/g, '');\n        \n        return `${baseUrl}/property/${propertyId}/${slug}`;\n      }\n      \n      return `${baseUrl}/properties`;\n    };\n\n    setFormValues(prev => ({\n      ...prev,\n      propertyName: property.title || property.name || prev.propertyName,\n      propertyUrl: generatePropertyUrl(),\n      propertyLocation: derivedLocation || prev.propertyLocation\n    }));\n  }, [property]);\n\n  // Fetch verification config\n  useEffect(() => {\n    const fetchConfig = async () => {\n      try {\n        setConfigLoading(true);\n        const response = await fetch(getApiUrl('/verification/config'));\n        const data = await response.json();\n        \n        if (!response.ok || !data.success) {\n          throw new Error(data.message || 'Unable to load verification configuration');\n        }\n        \n        setConfig(data.data);\n        setFormValues(prev => ({\n          ...prev,\n          preferredBadgeColor: data.data?.verificationBadgeColor || prev.preferredBadgeColor\n        }));\n      } catch (err) {\n        console.warn('PropertyVerification: failed to load config', err);\n        // Use default config if fetch fails\n        setConfig({\n          verificationFee: 50000,\n          currency: 'NGN',\n          supportedDocuments: ['title_deed', 'survey_plan', 'building_approval', 'tax_clearance'],\n          processingTime: '3-5 business days'\n        });\n      } finally {\n        setConfigLoading(false);\n      }\n    };\n\n    fetchConfig();\n  }, []);\n\n  const verificationFee = useMemo(() => {\n    return config?.verificationFee || 50000;\n  }, [config?.verificationFee]);\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormValues(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const handlePaymentSuccess = async (paymentData) => {\n    console.log('PropertyVerification: Payment successful', paymentData);\n    setPaymentComplete(true);\n    setSuccessMessage(' Payment completed successfully! Please review your details and submit the verification request.');\n    setPaymentData(paymentData); // Store payment data for submission\n  };\n\n  const handleVerificationSubmit = async () => {\n    if (!paymentData) {\n      setError('No payment data found. Please complete payment first.');\n      return;\n    }\n\n    if (!user || (!user.id && !user.uid)) {\n      setError('Please login to submit verification request');\n      return;\n    }\n\n    setSubmitting(true);\n    setError('');\n    \n    try {\n      // DEBUG: Check token before sending\n      const token = localStorage.getItem('token') || localStorage.getItem('firebaseToken');\n      console.log('DEBUG: Verification submission', {\n        hasToken: !!token,\n        tokenLength: token?.length,\n        userEmail: user?.email,\n        userId: user?.uid\n      });\n\n      const applicationData = {\n        propertyId: property?.id,\n        propertyName: formValues.propertyName || property?.title,\n        propertyUrl: formValues.propertyUrl || property?.propertyUrl,\n        propertyLocation: formValues.propertyLocation || property?.location,\n        message: formValues.message,\n        preferredBadgeColor: formValues.preferredBadgeColor,\n        paymentReference: paymentData.reference,\n        paymentAmount: paymentData.amount,\n        paymentStatus: 'completed'\n      };\n\n      const response = await authenticatedFetch(getApiUrl('/verification/applications'), {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(applicationData)\n      });\n\n      if (response.ok) {\n        const result = await response.json();\n        console.log('PropertyVerification: Application submitted successfully', result);\n        \n        // Update property status in local state to reflect verification requested\n        if (property?.id) {\n          const verificationStatus = JSON.parse(localStorage.getItem('propertyVerificationStatus') || '{}');\n          verificationStatus[property.id] = {\n            status: 'requested',\n            requestedAt: new Date().toISOString(),\n            applicationId: result.data?.applicationId\n          };\n          localStorage.setItem('propertyVerificationStatus', JSON.stringify(verificationStatus));\n        }\n        \n        if (onSuccess) {\n          onSuccess({\n            ...result,\n            propertyId: property?.id,\n            status: 'requested'\n          });\n        }\n        \n        setSuccessMessage(' Verification request submitted successfully! Your property is now under review.');\n        \n        // Close modal after showing success message\n        setTimeout(() => {\n          onClose();\n        }, 2000);\n      } else {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.message || 'Failed to submit verification application');\n      }\n    } catch (error) {\n      console.error('PropertyVerification: Error submitting application', error);\n      setError(error.message || 'Failed to submit verification application. Please try again.');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  const handlePaymentError = (error) => {\n    console.error('PropertyVerification: Payment failed', error);\n    setError('Payment failed. Please try again.');\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    \n    // Basic validation\n    if (!formValues.propertyName || !formValues.propertyUrl || !formValues.propertyLocation) {\n      setError('Please fill in all required fields');\n      return;\n    }\n\n    // Show payment modal\n    setShowPaymentModal(true);\n    setError('');\n  };\n\n  const badgePreviewColor = formValues.preferredBadgeColor || '#10B981';\n\n  if (configLoading) {\n    return (\n      <div className=\"fixed inset-0 z-50 overflow-y-auto\">\n        <div className=\"flex min-h-screen items-center justify-center p-4\">\n          <div className=\"bg-white rounded-lg shadow-xl max-w-md w-full p-6 text-center\">\n            <FaSpinner className=\"animate-spin text-blue-600 text-4xl mx-auto mb-4\" />\n            <h3 className=\"text-lg font-semibold\">Loading Verification</h3>\n            <p className=\"text-gray-600\">Please wait...</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <div className=\"fixed inset-0 z-50 overflow-y-auto\">\n        <div className=\"flex min-h-screen items-center justify-center p-4\">\n          <div className=\"fixed inset-0 bg-black bg-opacity-50\" onClick={onClose}></div>\n          \n          <div className=\"relative bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n            {/* Header */}\n            <div className=\"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 rounded-t-lg\">\n              <div className=\"flex justify-between items-start\">\n                <div>\n                  <h3 className=\"text-xl font-bold flex items-center\">\n                    <FaShieldAlt className=\"mr-2\" />\n                    Property Verification\n                  </h3>\n                  <p className=\"text-blue-100 text-sm mt-1\">\n                    Get your property verified with the PropertyArk trust badge\n                  </p>\n                </div>\n                <button\n                  onClick={onClose}\n                  className=\"text-white hover:text-blue-200 transition-colors\"\n                >\n                  <FaTimes size={20} />\n                </button>\n              </div>\n            </div>\n\n            {/* Content */}\n            <div className=\"p-6\">\n              {successMessage ? (\n                <div className=\"text-center py-8\">\n                  <FaCheckCircle className=\"text-green-600 text-5xl mx-auto mb-4\" />\n                  <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">Success!</h3>\n                  <p className=\"text-gray-600 mb-6\">{successMessage}</p>\n                  \n                  {/* Show submission button after payment is complete */}\n                  {paymentComplete && !submitting && (\n                    <div className=\"space-y-4\">\n                      <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                        <h4 className=\"font-medium text-blue-900 mb-2\">Review Your Details</h4>\n                        <div className=\"text-left space-y-2 text-sm text-blue-800\">\n                          <p><strong>Property:</strong> {formValues.propertyName}</p>\n                          <p><strong>Location:</strong> {formValues.propertyLocation}</p>\n                          <p><strong>Payment Reference:</strong> {paymentData?.reference}</p>\n                          <p><strong>Amount:</strong> {paymentData?.amount?.toLocaleString()}</p>\n                        </div>\n                      </div>\n                      \n                      <div className=\"flex space-x-3 justify-center\">\n                        <button\n                          onClick={handleVerificationSubmit}\n                          className=\"px-6 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors flex items-center\"\n                        >\n                          <FaCheckCircle className=\"mr-2\" />\n                          Submit Verification Request\n                        </button>\n                        \n                        <button\n                          onClick={() => setShowPaymentModal(false)}\n                          className=\"px-6 py-3 bg-gray-600 text-white rounded-lg font-medium hover:bg-gray-700 transition-colors\"\n                        >\n                          Cancel\n                        </button>\n                      </div>\n                    </div>\n                  )}\n                  \n                  {/* Show loading state during submission */}\n                  {submitting && (\n                    <div className=\"flex items-center justify-center\">\n                      <FaSpinner className=\"animate-spin text-blue-600 text-2xl mr-3\" />\n                      <span className=\"text-gray-600\">Submitting verification request...</span>\n                    </div>\n                  )}\n                </div>\n              ) : (\n                <form onSubmit={handleSubmit} className=\"space-y-6\">\n                  {/* Error Message */}\n                  {error && (\n                    <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center\">\n                      <FaExclamationTriangle className=\"text-red-600 mr-3\" />\n                      <span className=\"text-red-800\">{error}</span>\n                    </div>\n                  )}\n\n                  {/* Property Information */}\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Property Name *\n                      </label>\n                      <input\n                        type=\"text\"\n                        name=\"propertyName\"\n                        value={formValues.propertyName}\n                        onChange={handleInputChange}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                        required\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Property URL *\n                      </label>\n                      <input\n                        type=\"url\"\n                        name=\"propertyUrl\"\n                        value={formValues.propertyUrl}\n                        onChange={handleInputChange}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50\"\n                        placeholder=\"https://...\"\n                        readOnly\n                      />\n                      <p className=\"text-xs text-gray-500 mt-1\">\n                         Auto-generated from property details\n                      </p>\n                    </div>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Property Location *\n                    </label>\n                    <input\n                      type=\"text\"\n                      name=\"propertyLocation\"\n                      value={formValues.propertyLocation}\n                      onChange={handleInputChange}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"City, State\"\n                      required\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Additional Message\n                    </label>\n                    <textarea\n                      name=\"message\"\n                      value={formValues.message}\n                      onChange={handleInputChange}\n                      rows={4}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"Any additional information about the property...\"\n                    />\n                  </div>\n\n                  {/* Badge Color Preview */}\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Verification Badge Color\n                    </label>\n                    <div className=\"flex items-center space-x-3\">\n                      <div\n                        className=\"w-8 h-8 rounded-full border-2 border-gray-300\"\n                        style={{ backgroundColor: badgePreviewColor }}\n                      ></div>\n                      <span className=\"text-sm text-gray-600\">Preview of your verification badge</span>\n                    </div>\n                  </div>\n\n                  {/* Fee Information */}\n                  <div className=\"bg-gray-50 p-4 rounded-lg\">\n                    <div className=\"flex justify-between items-center\">\n                      <div>\n                        <h4 className=\"font-semibold text-gray-900\">Verification Fee</h4>\n                        <p className=\"text-sm text-gray-600\">One-time payment for property verification</p>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"text-2xl font-bold text-gray-900\">{verificationFee.toLocaleString()}</p>\n                        <p className=\"text-xs text-gray-500\">Processing time: {config?.processingTime || '3-5 business days'}</p>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Submit Button */}\n                  <button\n                    type=\"submit\"\n                    disabled={loading}\n                    className=\"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center\"\n                  >\n                    {loading ? (\n                      <>\n                        <FaSpinner className=\"animate-spin mr-2\" />\n                        Processing...\n                      </>\n                    ) : (\n                      <>\n                        <FaCreditCard className=\"mr-2\" />\n                        Pay {verificationFee.toLocaleString()} for Verification\n                      </>\n                    )}\n                  </button>\n                </form>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Simple Payment Modal */}\n      <SimplePaymentModal\n        isOpen={showPaymentModal}\n        onClose={() => setShowPaymentModal(false)}\n        amount={verificationFee}\n        propertyTitle={formValues.propertyName}\n        onPaymentSuccess={handlePaymentSuccess}\n        onPaymentError={handlePaymentError}\n      />\n    </>\n  );\n};\n\nexport default PropertyVerification;\n","// Utility functions for property verification status\n\nexport const getVerificationStatus = (propertyId) => {\n  if (!propertyId) return null;\n  \n  try {\n    const verificationStatus = JSON.parse(localStorage.getItem('propertyVerificationStatus') || '{}');\n    return verificationStatus[propertyId] || null;\n  } catch (error) {\n    console.error('Error getting verification status:', error);\n    return null;\n  }\n};\n\nexport const isVerificationRequested = (propertyId) => {\n  const status = getVerificationStatus(propertyId);\n  return status?.status === 'requested';\n};\n\nexport const isVerificationApproved = (propertyId) => {\n  const status = getVerificationStatus(propertyId);\n  return status?.status === 'approved';\n};\n\nexport const setVerificationStatus = (propertyId, status, additionalData = {}) => {\n  if (!propertyId) return;\n  \n  try {\n    const verificationStatus = JSON.parse(localStorage.getItem('propertyVerificationStatus') || '{}');\n    verificationStatus[propertyId] = {\n      status,\n      updatedAt: new Date().toISOString(),\n      ...additionalData\n    };\n    localStorage.setItem('propertyVerificationStatus', JSON.stringify(verificationStatus));\n  } catch (error) {\n    console.error('Error setting verification status:', error);\n  }\n};\n\nexport const getVerificationButtonText = (propertyId) => {\n  if (isVerificationApproved(propertyId)) {\n    return 'Verified';\n  }\n  if (isVerificationRequested(propertyId)) {\n    return 'Verification Requested';\n  }\n  return 'Get Verified';\n};\n\nexport const getVerificationButtonClass = (propertyId) => {\n  if (isVerificationApproved(propertyId)) {\n    return 'bg-green-600 text-white cursor-not-allowed';\n  }\n  if (isVerificationRequested(propertyId)) {\n    return 'bg-yellow-600 text-white cursor-not-allowed';\n  }\n  return 'bg-blue-600 text-white hover:bg-blue-700';\n};\n","import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { FaCalendar, FaClock, FaMapMarkerAlt, FaUser, FaPhone, FaEnvelope, FaCheckCircle, FaTimesCircle, FaCalendarAlt, FaEye } from 'react-icons/fa';\r\nimport { listInspectionRequestsByVendor, updateInspectionRequest, getInspectionAnalytics } from '../services/inspectionService';\r\nimport toast from 'react-hot-toast';\r\n\r\nconst VendorInspectionRequests = () => {\r\n  const { user } = useAuth();\r\n  const [requests, setRequests] = useState([]);\r\n  const [analytics, setAnalytics] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showResponseModal, setShowResponseModal] = useState(false);\r\n  const [selectedRequest, setSelectedRequest] = useState(null);\r\n  const [responseType, setResponseType] = useState('accept');\r\n  const [proposedDate, setProposedDate] = useState('');\r\n  const [proposedTime, setProposedTime] = useState('');\r\n  const [vendorMessage, setVendorMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    loadInspectionRequests();\r\n  }, [user]);\r\n\r\n  useEffect(() => {\r\n    if (!user?.id && !user?.email) {\r\n      setAnalytics(null);\r\n      return;\r\n    }\r\n    setAnalytics(getInspectionAnalytics({ role: 'vendor', vendorId: user?.id, vendorEmail: user?.email }));\r\n\r\n    const handleAnalyticsUpdate = (event) => {\r\n      const detail = event.detail || event;\r\n      if (detail?.vendorId && detail.vendorId !== user?.id) return;\r\n      setAnalytics(getInspectionAnalytics({ role: 'vendor', vendorId: user?.id, vendorEmail: user?.email }));\r\n    };\r\n\r\n    window.addEventListener('inspectionAnalyticsUpdated', handleAnalyticsUpdate);\r\n    return () => window.removeEventListener('inspectionAnalyticsUpdated', handleAnalyticsUpdate);\r\n  }, [user?.id, user?.email]);\r\n\r\n  const loadInspectionRequests = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const data = await listInspectionRequestsByVendor(user?.id, user?.email);\r\n      setRequests(data);\r\n      if (user?.id || user?.email) {\r\n        setAnalytics(getInspectionAnalytics({ role: 'vendor', vendorId: user?.id, vendorEmail: user?.email }));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading inspection requests:', error);\r\n      toast.error('Failed to load inspection requests');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRespondToRequest = (request, initialType = 'accept') => {\r\n    setSelectedRequest(request);\r\n    setShowResponseModal(true);\r\n    setProposedDate(request.preferredDate);\r\n    setProposedTime(request.preferredTime);\r\n    setVendorMessage('');\r\n    setResponseType(initialType);\r\n  };\r\n\r\n  const handleSubmitResponse = async () => {\r\n    if (!selectedRequest) return;\r\n\r\n    try {\r\n      let updates = {};\r\n      \r\n      if (responseType === 'accept') {\r\n        updates = {\r\n          status: 'accepted',\r\n          confirmedDate: selectedRequest.preferredDate,\r\n          confirmedTime: selectedRequest.preferredTime,\r\n          vendorMessage: vendorMessage || 'Viewing confirmed. Looking forward to showing you the property!'\r\n        };\r\n      } else if (responseType === 'propose') {\r\n        if (!proposedDate || !proposedTime) {\r\n          toast.error('Please select a proposed date and time');\r\n          return;\r\n        }\r\n        updates = {\r\n          status: 'proposed_new_time',\r\n          proposedDate,\r\n          proposedTime,\r\n          vendorMessage: vendorMessage || 'I would like to propose a different time. Please let me know if this works for you.'\r\n        };\r\n      } else if (responseType === 'decline') {\r\n        updates = {\r\n          status: 'declined',\r\n          vendorMessage: vendorMessage || 'Unfortunately, I am not available at the requested time.'\r\n        };\r\n      }\r\n\r\n      const success = await updateInspectionRequest(selectedRequest.id, updates);\r\n      \r\n      if (success) {\r\n        toast.success(`Request ${responseType === 'accept' ? 'accepted' : responseType === 'propose' ? 'updated with new time' : 'declined'}`);\r\n        setShowResponseModal(false);\r\n        setSelectedRequest(null);\r\n        loadInspectionRequests(); // Reload requests\r\n      } else {\r\n        toast.error('Failed to update request');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating request:', error);\r\n      toast.error('Failed to update request');\r\n    }\r\n  };\r\n\r\n  const getStatusBadge = (status) => {\r\n    const badges = {\r\n      'pending_vendor': { color: 'bg-yellow-100 text-yellow-800', text: 'Pending Response' },\r\n      'accepted': { color: 'bg-green-100 text-green-800', text: 'Accepted' },\r\n      'proposed_new_time': { color: 'bg-blue-100 text-blue-800', text: 'New Time Proposed' },\r\n      'declined': { color: 'bg-red-100 text-red-800', text: 'Declined' },\r\n      'buyer_rescheduled': { color: 'bg-purple-100 text-purple-800', text: 'Buyer Rescheduled' },\r\n      'cancelled_by_buyer': { color: 'bg-gray-200 text-gray-700', text: 'Cancelled by Buyer' },\r\n      'cancelled_by_vendor': { color: 'bg-gray-200 text-gray-700', text: 'Cancelled by You' }\r\n    };\r\n    \r\n    const badge = badges[status] || badges['pending_vendor'];\r\n    return (\r\n      <span className={`px-2 py-1 rounded-full text-xs font-medium ${badge.color}`}>\r\n        {badge.text}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  const formatDateTime = (date, time) => {\r\n    if (!date || !time) return 'Not specified';\r\n    try {\r\n      const dateObj = new Date(`${date}T${time}`);\r\n      return dateObj.toLocaleDateString() + ' at ' + dateObj.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n    } catch {\r\n      return `${date} at ${time}`;\r\n    }\r\n  };\r\n\r\n  const handleAcceptBuyerReschedule = async (request) => {\r\n    const ok = await updateInspectionRequest(request.id, {\r\n      status: 'accepted',\r\n      confirmedDate: request.preferredDate,\r\n      confirmedTime: request.preferredTime,\r\n      vendorMessage: 'Buyer reschedule accepted'\r\n    });\r\n    if (ok) {\r\n      toast.success('Rescheduled inspection confirmed');\r\n      loadInspectionRequests();\r\n    } else {\r\n      toast.error('Failed to confirm reschedule');\r\n    }\r\n  };\r\n\r\n  const handleVendorCancel = async (request) => {\r\n    const confirmCancel = window.confirm('Cancel this inspection? The buyer will be notified.');\r\n    if (!confirmCancel) return;\r\n    const ok = await updateInspectionRequest(request.id, {\r\n      status: 'cancelled_by_vendor',\r\n      vendorMessage: 'Vendor cancelled the appointment',\r\n      cancelledAt: new Date().toISOString()\r\n    });\r\n    if (ok) {\r\n      toast.success('Inspection cancelled');\r\n      loadInspectionRequests();\r\n    } else {\r\n      toast.error('Failed to cancel inspection');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center p-8\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n        <span className=\"ml-2\">Loading inspection requests...</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h2 className=\"text-2xl font-bold text-gray-900\">Property Viewing Requests</h2>\r\n        <button\r\n          onClick={loadInspectionRequests}\r\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n        >\r\n          Refresh\r\n        </button>\r\n      </div>\r\n\r\n      {analytics && (\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n          <div className=\"bg-blue-50 border border-blue-100 rounded-xl p-4\">\r\n            <p className=\"text-sm text-blue-600\">Pending Responses</p>\r\n            <p className=\"text-3xl font-semibold text-blue-900\">{analytics.pendingResponses}</p>\r\n          </div>\r\n          <div className=\"bg-green-50 border border-green-100 rounded-xl p-4\">\r\n            <p className=\"text-sm text-green-600\">Confirmed</p>\r\n            <p className=\"text-3xl font-semibold text-green-900\">{analytics.confirmed}</p>\r\n          </div>\r\n          <div className=\"bg-purple-50 border border-purple-100 rounded-xl p-4\">\r\n            <p className=\"text-sm text-purple-600\">Buyer Reschedules</p>\r\n            <p className=\"text-3xl font-semibold text-purple-900\">{analytics.buyerReschedules}</p>\r\n          </div>\r\n          <div className=\"bg-red-50 border border-red-100 rounded-xl p-4\">\r\n            <p className=\"text-sm text-red-600\">Buyer Cancellations</p>\r\n            <p className=\"text-3xl font-semibold text-red-900\">{analytics.cancelledByBuyer}</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {requests.length === 0 ? (\r\n        <div className=\"text-center py-12\">\r\n          <FaCalendar className=\"mx-auto text-4xl text-gray-400 mb-4\" />\r\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No viewing requests yet</h3>\r\n          <p className=\"text-gray-500\">When buyers request to view your properties, they will appear here.</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"grid gap-6\">\r\n          {requests.map((request) => (\r\n            <div key={request.id} className=\"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow\">\r\n              <div className=\"flex items-start justify-between mb-4\">\r\n                <div className=\"flex-1\">\r\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\r\n                    {request.propertyTitle || request.projectName}\r\n                  </h3>\r\n                  <div className=\"flex items-center text-sm text-gray-600 mb-2\">\r\n                    <FaMapMarkerAlt className=\"mr-2\" />\r\n                    {request.propertyLocation || request.projectLocation}\r\n                  </div>\r\n                  <div className=\"flex items-center text-sm text-gray-600\">\r\n                    <FaUser className=\"mr-2\" />\r\n                    {request.buyerName || request.userName}\r\n                  </div>\r\n                </div>\r\n                <div className=\"ml-4\">\r\n                  {getStatusBadge(request.status)}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\r\n                <div className=\"flex items-center text-sm text-gray-600\">\r\n                  <FaCalendar className=\"mr-2\" />\r\n                  <span>Requested: {formatDateTime(request.preferredDate, request.preferredTime)}</span>\r\n                </div>\r\n                {request.confirmedDate && request.confirmedTime && (\r\n                  <div className=\"flex items-center text-sm text-green-600\">\r\n                    <FaCheckCircle className=\"mr-2\" />\r\n                    <span>Confirmed: {formatDateTime(request.confirmedDate, request.confirmedTime)}</span>\r\n                  </div>\r\n                )}\r\n                {request.proposedDate && request.proposedTime && request.status === 'proposed_new_time' && (\r\n                  <div className=\"flex items-center text-sm text-blue-600\">\r\n                    <FaCalendarAlt className=\"mr-2\" />\r\n                    <span>Proposed: {formatDateTime(request.proposedDate, request.proposedTime)}</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {request.message && (\r\n                <div className=\"mb-4 p-3 bg-gray-50 rounded-lg\">\r\n                  <p className=\"text-sm text-gray-700\">\r\n                    <strong>Buyer's message:</strong> {request.message}\r\n                  </p>\r\n                </div>\r\n              )}\r\n\r\n              {request.vendorMessage && (\r\n                <div className=\"mb-4 p-3 bg-blue-50 rounded-lg\">\r\n                  <p className=\"text-sm text-gray-700\">\r\n                    <strong>Your response:</strong> {request.vendorMessage}\r\n                  </p>\r\n                </div>\r\n              )}\r\n\r\n              {request.buyerMessage && (\r\n                <div className=\"mb-4 p-3 bg-purple-50 rounded-lg\">\r\n                  <p className=\"text-sm text-gray-700\">\r\n                    <strong>Buyer update:</strong> {request.buyerMessage}\r\n                  </p>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center space-x-4 text-sm text-gray-600\">\r\n                  <span className=\"flex items-center\">\r\n                    <FaPhone className=\"mr-1\" />\r\n                    {request.buyerPhone || 'Not provided'}\r\n                  </span>\r\n                  <span className=\"flex items-center\">\r\n                    <FaEnvelope className=\"mr-1\" />\r\n                    {request.buyerEmail || request.userEmail}\r\n                  </span>\r\n                </div>\r\n\r\n                {request.status === 'pending_vendor' && (\r\n                  <button\r\n                    onClick={() => handleRespondToRequest(request)}\r\n                    className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n                  >\r\n                    Respond\r\n                  </button>\r\n                )}\r\n\r\n                {request.status === 'buyer_rescheduled' && (\r\n                  <div className=\"flex flex-wrap gap-3\">\r\n                    <button\r\n                      onClick={() => handleAcceptBuyerReschedule(request)}\r\n                      className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\r\n                    >\r\n                      Accept New Time\r\n                    </button>\r\n                    <button\r\n                      onClick={() => handleRespondToRequest(request, 'propose')}\r\n                      className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n                    >\r\n                      Propose Another Time\r\n                    </button>\r\n                  </div>\r\n                )}\r\n\r\n                {request.status === 'accepted' && (\r\n                  <div className=\"flex flex-wrap gap-3\">\r\n                    <button\r\n                      onClick={() => handleRespondToRequest(request, 'propose')}\r\n                      className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n                    >\r\n                      Reschedule\r\n                    </button>\r\n                    <button\r\n                      onClick={() => handleVendorCancel(request)}\r\n                      className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\r\n                    >\r\n                      Cancel\r\n                    </button>\r\n                  </div>\r\n                )}\r\n\r\n                {request.status === 'cancelled_by_buyer' && (\r\n                  <span className=\"text-sm text-gray-500\">Buyer cancelled this appointment</span>\r\n                )}\r\n\r\n                {request.status === 'cancelled_by_vendor' && (\r\n                  <span className=\"text-sm text-gray-500\">You cancelled this appointment</span>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Response Modal */}\r\n      {showResponseModal && selectedRequest && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n          <div className=\"bg-white rounded-lg max-w-md w-full p-6\">\r\n            <h3 className=\"text-lg font-semibold mb-4\">Respond to Viewing Request</h3>\r\n            \r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Response Type</label>\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"flex items-center\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      value=\"accept\"\r\n                      checked={responseType === 'accept'}\r\n                      onChange={(e) => setResponseType(e.target.value)}\r\n                      className=\"mr-2\"\r\n                    />\r\n                    Accept as requested\r\n                  </label>\r\n                  <label className=\"flex items-center\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      value=\"propose\"\r\n                      checked={responseType === 'propose'}\r\n                      onChange={(e) => setResponseType(e.target.value)}\r\n                      className=\"mr-2\"\r\n                    />\r\n                    Propose different time\r\n                  </label>\r\n                  <label className=\"flex items-center\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      value=\"decline\"\r\n                      checked={responseType === 'decline'}\r\n                      onChange={(e) => setResponseType(e.target.value)}\r\n                      className=\"mr-2\"\r\n                    />\r\n                    Decline request\r\n                  </label>\r\n                </div>\r\n              </div>\r\n\r\n              {responseType === 'propose' && (\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Proposed Date</label>\r\n                    <input\r\n                      type=\"date\"\r\n                      value={proposedDate}\r\n                      onChange={(e) => setProposedDate(e.target.value)}\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Proposed Time</label>\r\n                    <input\r\n                      type=\"time\"\r\n                      value={proposedTime}\r\n                      onChange={(e) => setProposedTime(e.target.value)}\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Message (Optional)</label>\r\n                <textarea\r\n                  value={vendorMessage}\r\n                  onChange={(e) => setVendorMessage(e.target.value)}\r\n                  rows={3}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                  placeholder=\"Add a personal message...\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex justify-end space-x-3 mt-6\">\r\n              <button\r\n                onClick={() => setShowResponseModal(false)}\r\n                className=\"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                onClick={handleSubmitResponse}\r\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\"\r\n              >\r\n                Submit Response\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VendorInspectionRequests;\r\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport { \r\n  FaBell, \r\n  FaTimes, \r\n  FaCheck, \r\n  FaArchive, \r\n  FaTrash, \r\n  FaExclamationTriangle,\r\n  FaInfoCircle,\r\n  FaCheckCircle,\r\n  FaTimesCircle,\r\n  FaSpinner,\r\n  FaComments,\r\n  FaStar\r\n} from 'react-icons/fa';\r\nimport { useNotifications } from '../contexts/NotificationContext';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport toast from 'react-hot-toast';\r\nimport { getApiUrl } from '../utils/apiConfig';\r\n\r\nconst NotificationDropdown = () => {\r\n  const {\r\n    notifications,\r\n    unreadCount,\r\n    loading,\r\n    markAsRead,\r\n    markAllAsRead,\r\n    archiveNotification,\r\n    deleteNotification,\r\n    refreshNotifications\r\n  } = useNotifications();\r\n\r\n  const { user } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [actionLoading, setActionLoading] = useState(null);\r\n  const dropdownRef = useRef(null);\r\n  const [showRatingModal, setShowRatingModal] = useState(false);\r\n  const [ratingTarget, setRatingTarget] = useState(null);\r\n  const [ratingStars, setRatingStars] = useState(0);\r\n  const [ratingComment, setRatingComment] = useState('');\r\n\r\n  // Close dropdown when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  const handleMarkAsRead = async (notificationId) => {\r\n    setActionLoading(notificationId);\r\n    try {\r\n      const result = await markAsRead(notificationId);\r\n      if (result.success) {\r\n        toast.success('Notification marked as read');\r\n      } else {\r\n        toast.error(result.message || 'Failed to mark as read');\r\n      }\r\n    } catch (error) {\r\n      toast.error('Error marking notification as read');\r\n    } finally {\r\n      setActionLoading(null);\r\n    }\r\n  };\r\n\r\n  const handleMarkAllAsRead = async () => {\r\n    setActionLoading('all');\r\n    try {\r\n      const result = await markAllAsRead();\r\n      if (result.success) {\r\n        toast.success('All notifications marked as read');\r\n      } else {\r\n        toast.error(result.message || 'Failed to mark all as read');\r\n      }\r\n    } catch (error) {\r\n      toast.error('Error marking all notifications as read');\r\n    } finally {\r\n      setActionLoading(null);\r\n    }\r\n  };\r\n\r\n  const handleArchive = async (notificationId) => {\r\n    setActionLoading(notificationId);\r\n    try {\r\n      const result = await archiveNotification(notificationId);\r\n      if (result.success) {\r\n        toast.success('Notification archived');\r\n      } else {\r\n        toast.error(result.message || 'Failed to archive');\r\n      }\r\n    } catch (error) {\r\n      toast.error('Error archiving notification');\r\n    } finally {\r\n      setActionLoading(null);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (notificationId) => {\r\n    if (window.confirm('Are you sure you want to delete this notification?')) {\r\n      setActionLoading(notificationId);\r\n      try {\r\n        const result = await deleteNotification(notificationId);\r\n        if (result.success) {\r\n          toast.success('Notification deleted');\r\n        } else {\r\n          toast.error(result.message || 'Failed to delete');\r\n        }\r\n      } catch (error) {\r\n        toast.error('Error deleting notification');\r\n      } finally {\r\n        setActionLoading(null);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSendMessage = async (notification) => {\r\n    try {\r\n      if (!user || !user.id) {\r\n        toast.error('Please login to start a chat');\r\n        return;\r\n      }\r\n\r\n      const { data } = notification;\r\n      const buyerId = data?.buyerId || user.id;\r\n      const vendorId = data?.vendorId;\r\n      const propertyId = data?.propertyId;\r\n      \r\n      if (!vendorId || !propertyId) {\r\n        toast.error('Unable to start chat: missing vendor or property');\r\n        return;\r\n      }\r\n      \r\n      const payload = {\r\n        buyerId,\r\n        vendorId,\r\n        propertyId,\r\n        starterId: user.id,\r\n        initialMessage: `Hi, I'm interested in this property.`\r\n      };\r\n      \r\n      const res = await fetch(getApiUrl('/chats/start'), {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload)\r\n      });\r\n      \r\n      const json = await res.json();\r\n      if (res.ok) {\r\n        setIsOpen(false);\r\n        navigate('/messages', { state: { chatId: json.chatId } });\r\n        toast.success('Chat started!');\r\n      } else {\r\n        toast.error(json.error || 'Failed to start chat');\r\n      }\r\n    } catch (err) {\r\n      console.error('Error starting chat:', err);\r\n      toast.error('Error starting chat');\r\n    }\r\n  };\r\n\r\n  const getInspectionTargetPath = (notification) => {\r\n    const role = notification?.data?.recipientRoles?.[0] || notification?.data?.role;\r\n    if (role === 'vendor') {\r\n      return '/vendor/inspections';\r\n    }\r\n    if (role === 'buyer') {\r\n      return '/buyer/inspections';\r\n    }\r\n    // fallback by current user role\r\n    if (user?.role === 'vendor' || user?.roles?.includes('vendor')) {\r\n      return '/vendor/inspections';\r\n    }\r\n    return '/buyer/inspections';\r\n  };\r\n\r\n  const handleOpenInspection = (notification) => {\r\n    const path = getInspectionTargetPath(notification);\r\n    const params = new URLSearchParams();\r\n    if (notification?.data?.requestId) {\r\n      params.set('inspectionId', notification.data.requestId);\r\n    }\r\n    if (notification?.data?.propertyTitle) {\r\n      params.set('property', notification.data.propertyTitle);\r\n    }\r\n    const target = params.toString() ? `${path}?${params.toString()}` : path;\r\n    setIsOpen(false);\r\n    navigate(target);\r\n  };\r\n\r\n  const handleRate = (notification) => {\r\n    const { data } = notification;\r\n    const rateeId = data?.vendorId || data?.buyerId;\r\n    const roleOfRatee = data?.vendorId ? 'vendor' : 'buyer';\r\n    setRatingTarget({ \r\n      rateeId, \r\n      roleOfRatee, \r\n      transactionId: data?.transactionId, \r\n      propertyId: data?.propertyId \r\n    });\r\n    setShowRatingModal(true);\r\n    setIsOpen(false);\r\n  };\r\n\r\n  const handleRatingSubmit = async () => {\r\n    if (!ratingTarget || ratingStars === 0) {\r\n      toast.error('Please select a rating');\r\n      return;\r\n    }\r\n\r\n    if (!user || !user.id) {\r\n      toast.error('Please login to submit a rating');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      const res = await fetch(getApiUrl('/ratings'), {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          raterId: user.id,\r\n          rateeId: ratingTarget.rateeId,\r\n          transactionId: ratingTarget.transactionId,\r\n          propertyId: ratingTarget.propertyId,\r\n          roleOfRatee: ratingTarget.roleOfRatee,\r\n          stars: ratingStars,\r\n          comment: ratingComment\r\n        })\r\n      });\r\n      \r\n      const json = await res.json();\r\n      if (res.ok) {\r\n        toast.success('Rating submitted successfully!');\r\n        setShowRatingModal(false);\r\n        setRatingStars(0);\r\n        setRatingComment('');\r\n        setRatingTarget(null);\r\n      } else {\r\n        toast.error(json.error || 'Failed to submit rating');\r\n      }\r\n    } catch (err) {\r\n      console.error('Error submitting rating:', err);\r\n      toast.error('Error submitting rating');\r\n    }\r\n  };\r\n\r\n  const getNotificationIcon = (type, priority) => {\r\n    const iconClass = `text-lg ${\r\n      priority === 'urgent' ? 'text-red-500' :\r\n      priority === 'high' ? 'text-orange-500' :\r\n      priority === 'medium' ? 'text-blue-500' :\r\n      'text-gray-500'\r\n    }`;\r\n\r\n    switch (type) {\r\n      case 'property_verified':\r\n      case 'property_approval':\r\n        return <FaCheckCircle className={iconClass} />;\r\n      case 'property_rejected':\r\n        return <FaTimesCircle className={iconClass} />;\r\n      case 'property_inquiry':\r\n        return <FaInfoCircle className={iconClass} />;\r\n      case 'escrow_created':\r\n      case 'escrow_payment_received':\r\n      case 'payment_received':\r\n      case 'escrow_completed':\r\n        return <FaCheckCircle className={iconClass} />;\r\n      case 'escrow_disputed':\r\n      case 'escrow_timeout':\r\n        return <FaExclamationTriangle className={iconClass} />;\r\n      case 'user_suspended':\r\n        return <FaTimesCircle className={iconClass} />;\r\n      case 'user_activated':\r\n        return <FaCheckCircle className={iconClass} />;\r\n      default:\r\n        return <FaInfoCircle className={iconClass} />;\r\n    }\r\n  };\r\n\r\n  const getPriorityColor = (priority) => {\r\n    switch (priority) {\r\n      case 'urgent':\r\n        return 'border-l-red-500 bg-red-50';\r\n      case 'high':\r\n        return 'border-l-orange-500 bg-orange-50';\r\n      case 'medium':\r\n        return 'border-l-blue-500 bg-blue-50';\r\n      default:\r\n        return 'border-l-gray-500 bg-gray-50';\r\n    }\r\n  };\r\n\r\n  const formatTimeAgo = (dateString) => {\r\n    const date = new Date(dateString);\r\n    const now = new Date();\r\n    const diffInSeconds = Math.floor((now - date) / 1000);\r\n\r\n    if (diffInSeconds < 60) return 'Just now';\r\n    if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)}m ago`;\r\n    if (diffInSeconds < 86400) return `${Math.floor(diffInSeconds / 3600)}h ago`;\r\n    if (diffInSeconds < 2592000) return `${Math.floor(diffInSeconds / 86400)}d ago`;\r\n    return date.toLocaleDateString();\r\n  };\r\n\r\n  const handleBellClick = () => {\r\n    // Navigate to alerts page when bell icon is clicked\r\n    navigate('/alerts');\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative\" ref={dropdownRef}>\r\n      {/* Notification Bell */}\r\n      <button\r\n        onClick={handleBellClick}\r\n        className=\"relative p-2 text-gray-700 hover:text-brand-orange transition-colors\"\r\n      >\r\n        <FaBell className=\"text-xl\" />\r\n        {unreadCount > 0 && (\r\n          <span className=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center\">\r\n            {unreadCount > 99 ? '99+' : unreadCount}\r\n          </span>\r\n        )}\r\n      </button>\r\n\r\n      {/* Dropdown */}\r\n      {isOpen && (\r\n        <div className=\"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-lg border border-gray-200 z-50\">\r\n          {/* Header */}\r\n          <div className=\"p-4 border-b border-gray-200\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900\">\r\n                Notifications\r\n                {unreadCount > 0 && (\r\n                  <span className=\"ml-2 bg-red-100 text-red-800 text-sm px-2 py-1 rounded-full\">\r\n                    {unreadCount} unread\r\n                  </span>\r\n                )}\r\n              </h3>\r\n              <button\r\n                onClick={() => setIsOpen(false)}\r\n                className=\"text-gray-400 hover:text-gray-600\"\r\n              >\r\n                <FaTimes />\r\n              </button>\r\n            </div>\r\n            \r\n            {unreadCount > 0 && (\r\n              <button\r\n                onClick={handleMarkAllAsRead}\r\n                disabled={actionLoading === 'all'}\r\n                className=\"mt-2 text-sm text-blue-600 hover:text-blue-800 disabled:opacity-50\"\r\n              >\r\n                {actionLoading === 'all' ? (\r\n                  <FaSpinner className=\"animate-spin inline mr-1\" />\r\n                ) : (\r\n                  <FaCheck className=\"inline mr-1\" />\r\n                )}\r\n                Mark all as read\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Notifications List */}\r\n          <div className=\"max-h-96 overflow-y-auto\">\r\n            {loading ? (\r\n              <div className=\"p-8 text-center\">\r\n                <FaSpinner className=\"animate-spin text-2xl text-gray-400 mx-auto mb-2\" />\r\n                <p className=\"text-gray-500\">Loading notifications...</p>\r\n              </div>\r\n            ) : notifications.length === 0 ? (\r\n              <div className=\"p-8 text-center\">\r\n                <FaBell className=\"text-4xl text-gray-300 mx-auto mb-2\" />\r\n                <p className=\"text-gray-500\">No notifications yet</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"divide-y divide-gray-100\">\r\n                {notifications.slice(0, 10).map((notification) => (\r\n                  <div\r\n                    key={notification._id}\r\n                    className={`p-4 border-l-4 ${getPriorityColor(notification.priority)} ${\r\n                      notification.status === 'unread' ? 'bg-blue-50' : 'bg-white'\r\n                    }`}\r\n                  >\r\n                    <div className=\"flex items-start space-x-3\">\r\n                      <div className=\"flex-shrink-0 mt-1\">\r\n                        {getNotificationIcon(notification.type, notification.priority)}\r\n                      </div>\r\n                      \r\n                      <div className=\"flex-1 min-w-0\">\r\n                        <div className=\"flex items-start justify-between\">\r\n                          <div className=\"flex-1\">\r\n                            <p className={`text-sm font-medium ${\r\n                              notification.status === 'unread' ? 'text-gray-900' : 'text-gray-700'\r\n                            }`}>\r\n                              {notification.title}\r\n                            </p>\r\n                            <p className=\"text-sm text-gray-600 mt-1\">\r\n                              {notification.message}\r\n                            </p>\r\n                            <p className=\"text-xs text-gray-500 mt-2\">\r\n                              {formatTimeAgo(notification.createdAt)}\r\n                            </p>\r\n                          </div>\r\n                          \r\n                          {notification.status === 'unread' && (\r\n                            <div className=\"flex-shrink-0 ml-2\">\r\n                              <div className=\"w-2 h-2 bg-blue-500 rounded-full\"></div>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                        \r\n                        {/* Actions */}\r\n                        <div className=\"flex items-center flex-wrap gap-2 mt-3\">\r\n                          {/* Inspection deep links */}\r\n                          {notification.type?.startsWith('inspection_') && (\r\n                            <button\r\n                              onClick={() => handleOpenInspection(notification)}\r\n                              className=\"text-xs text-indigo-600 hover:text-indigo-800 flex items-center\"\r\n                            >\r\n                              <FaInfoCircle className=\"mr-1\" />\r\n                              View inspection\r\n                            </button>\r\n                          )}\r\n\r\n                          {/* Send Message for inquiry/payment */}\r\n                          {(notification.type === 'property_inquiry' || notification.type === 'payment_received') && (\r\n                            <button\r\n                              onClick={() => handleSendMessage(notification)}\r\n                              className=\"text-xs text-green-600 hover:text-green-800 flex items-center\"\r\n                            >\r\n                              <FaComments className=\"mr-1\" />\r\n                              Send Message\r\n                            </button>\r\n                          )}\r\n                          \r\n                          {/* Rate after payment */}\r\n                          {notification.type === 'payment_received' && (\r\n                            <button\r\n                              onClick={() => handleRate(notification)}\r\n                              className=\"text-xs text-yellow-600 hover:text-yellow-800 flex items-center\"\r\n                            >\r\n                              <FaStar className=\"mr-1\" />\r\n                              Rate {notification.data?.vendorId ? 'Vendor' : 'Buyer'}\r\n                            </button>\r\n                          )}\r\n                          \r\n                          {notification.status === 'unread' && (\r\n                            <button\r\n                              onClick={() => handleMarkAsRead(notification._id)}\r\n                              disabled={actionLoading === notification._id}\r\n                              className=\"text-xs text-blue-600 hover:text-blue-800 disabled:opacity-50 flex items-center\"\r\n                            >\r\n                              {actionLoading === notification._id ? (\r\n                                <FaSpinner className=\"animate-spin mr-1\" />\r\n                              ) : (\r\n                                <FaCheck className=\"mr-1\" />\r\n                              )}\r\n                              Mark read\r\n                            </button>\r\n                          )}\r\n                          \r\n                          <button\r\n                            onClick={() => handleArchive(notification._id)}\r\n                            disabled={actionLoading === notification._id}\r\n                            className=\"text-xs text-gray-600 hover:text-gray-800 disabled:opacity-50 flex items-center\"\r\n                          >\r\n                            {actionLoading === notification._id ? (\r\n                              <FaSpinner className=\"animate-spin mr-1\" />\r\n                            ) : (\r\n                              <FaArchive className=\"mr-1\" />\r\n                            )}\r\n                            Archive\r\n                          </button>\r\n                          \r\n                          <button\r\n                            onClick={() => handleDelete(notification._id)}\r\n                            disabled={actionLoading === notification._id}\r\n                            className=\"text-xs text-red-600 hover:text-red-800 disabled:opacity-50 flex items-center\"\r\n                          >\r\n                            {actionLoading === notification._id ? (\r\n                              <FaSpinner className=\"animate-spin mr-1\" />\r\n                            ) : (\r\n                              <FaTrash className=\"mr-1\" />\r\n                            )}\r\n                            Delete\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Footer */}\r\n          {notifications.length > 10 && (\r\n            <div className=\"p-4 border-t border-gray-200\">\r\n              <button\r\n                onClick={refreshNotifications}\r\n                className=\"w-full text-sm text-blue-600 hover:text-blue-800\"\r\n              >\r\n                View all notifications\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Rating Modal */}\r\n      {showRatingModal && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]\">\r\n          <div className=\"bg-white rounded-lg max-w-md w-full p-6 shadow-xl\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">\r\n              Rate {ratingTarget?.roleOfRatee === 'vendor' ? 'Vendor' : 'Buyer'}\r\n            </h3>\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Rating</label>\r\n                <div className=\"flex space-x-1\">\r\n                  {[1, 2, 3, 4, 5].map((star) => (\r\n                    <button\r\n                      key={star}\r\n                      onClick={() => setRatingStars(star)}\r\n                      className={`text-3xl transition-colors ${star <= ratingStars ? 'text-yellow-400' : 'text-gray-300'}`}\r\n                    >\r\n                      <FaStar />\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Comment (Optional)</label>\r\n                <textarea\r\n                  value={ratingComment}\r\n                  onChange={(e) => setRatingComment(e.target.value)}\r\n                  rows={3}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                  placeholder=\"Share your experience...\"\r\n                />\r\n              </div>\r\n              <div className=\"flex justify-end gap-3\">\r\n                <button\r\n                  onClick={() => {\r\n                    setShowRatingModal(false);\r\n                    setRatingStars(0);\r\n                    setRatingComment('');\r\n                    setRatingTarget(null);\r\n                  }}\r\n                  className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  onClick={handleRatingSubmit}\r\n                  disabled={ratingStars === 0}\r\n                  className=\"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                >\r\n                  Submit Rating\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotificationDropdown;\r\n","import React from 'react';\nimport { Line } from 'react-chartjs-2';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend\n} from 'chart.js';\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend\n);\n\nconst VendorViewsChart = ({ properties = [] }) => {\n  // Build simple \"views over properties\" series using current data\n  const labels = properties.map((p, index) => p.title || `Property ${index + 1}`);\n  const viewsData = properties.map(p => p.views || 0);\n\n  const data = {\n    labels,\n    datasets: [\n      {\n        label: 'Views',\n        data: viewsData,\n        borderColor: '#2563EB',\n        backgroundColor: '#2563EB20',\n        borderWidth: 2,\n        tension: 0.3,\n        pointRadius: 4,\n        pointBackgroundColor: '#2563EB'\n      }\n    ]\n  };\n\n  const options = {\n    responsive: true,\n    maintainAspectRatio: false,\n    plugins: {\n      legend: {\n        display: false\n      },\n      tooltip: {\n        callbacks: {\n          label: (context) => `Views: ${context.parsed.y}`\n        }\n      }\n    },\n    scales: {\n      y: {\n        beginAtZero: true,\n        ticks: {\n          precision: 0\n        }\n      }\n    }\n  };\n\n  if (!properties.length) {\n    return (\n      <div className=\"h-64 flex items-center justify-center text-sm text-gray-500\">\n        No property data available yet.\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-64\">\n      <Line data={data} options={options} />\n    </div>\n  );\n};\n\nexport default VendorViewsChart;\n\n\n","import React from 'react';\nimport { Bar } from 'react-chartjs-2';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend\n} from 'chart.js';\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend\n);\n\nconst VendorConversionChart = ({ properties = [] }) => {\n  const labels = properties.map((p, index) => p.title || `Property ${index + 1}`);\n  const conversionRates = properties.map(p => {\n    const views = p.views || 0;\n    const inquiries = p.inquiries || 0;\n    if (!views) return 0;\n    return ((inquiries / views) * 100).toFixed(1);\n  });\n\n  const data = {\n    labels,\n    datasets: [\n      {\n        label: 'Conversion Rate (%)',\n        data: conversionRates,\n        backgroundColor: '#10B98180',\n        borderColor: '#10B981',\n        borderWidth: 1\n      }\n    ]\n  };\n\n  const options = {\n    responsive: true,\n    maintainAspectRatio: false,\n    plugins: {\n      legend: {\n        display: false\n      },\n      tooltip: {\n        callbacks: {\n          label: (context) => `Conversion: ${context.parsed.y}%`\n        }\n      }\n    },\n    scales: {\n      y: {\n        beginAtZero: true,\n        max: 100,\n        ticks: {\n          callback: (val) => `${val}%`\n        }\n      }\n    }\n  };\n\n  if (!properties.length) {\n    return (\n      <div className=\"h-64 flex items-center justify-center text-sm text-gray-500\">\n        No property data available yet.\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-64\">\n      <Bar data={data} options={options} />\n    </div>\n  );\n};\n\nexport default VendorConversionChart;\n\n\n","import React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { useProperty } from '../contexts/PropertyContext';\r\nimport { useNotifications } from '../contexts/NotificationContext';\r\nimport { FaHome, FaChartLine, FaEye, FaHeart, FaEnvelope, FaCalendar, FaDollarSign, FaPlus, FaEdit, FaTrash, FaMapMarkerAlt, FaBed, FaBath, FaRulerCombined, FaPhone, FaCheck, FaTimes, FaExclamationTriangle, FaSpinner } from 'react-icons/fa';\r\nimport PropertyVerification from '../components/PropertyVerificationNew';\r\nimport { getVerificationStatus, isVerificationRequested, isVerificationApproved, getVerificationButtonText, getVerificationButtonClass } from '../utils/verificationStatus';\r\nimport VendorInspectionRequests from '../components/VendorInspectionRequests';\r\nimport NotificationDropdown from '../components/NotificationDropdown';\r\nimport PropertyCardSkeleton from '../components/PropertyCardSkeleton';\r\nimport Breadcrumbs from '../components/Breadcrumbs';\r\nimport VendorViewsChart from '../components/VendorViewsChart';\r\nimport VendorConversionChart from '../components/VendorConversionChart';\r\nimport toast from 'react-hot-toast';\r\nimport { getApiUrl } from '../utils/apiConfig';\r\nimport { authenticatedFetch } from '../utils/authToken';\r\n\r\nconst VendorDashboard = () => {\r\n  const { user } = useAuth();\r\n  const { deleteProperty } = useProperty();\r\n  useNotifications(); // Keep for side effects\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const [activeTab, setActiveTab] = useState(() => {\r\n    // Set initial tab based on current route\r\n    if (location.pathname === '/vendor/properties') {\r\n      return 'properties';\r\n    }\r\n    return 'overview';\r\n  });\r\n\r\n  // Update active tab when route changes\r\n  useEffect(() => {\r\n    if (location.pathname === '/vendor/properties') {\r\n      setActiveTab('properties');\r\n    } else if (location.pathname === '/vendor/dashboard') {\r\n      setActiveTab('overview');\r\n    }\r\n  }, [location.pathname]);\r\n  \r\n  // Determine vendor type\r\n  const isAgent = user?.vendorData?.vendorCategory === 'agent';\r\n  const isPropertyOwner = user?.vendorData?.vendorCategory === 'property_owner';\r\n  const [properties, setProperties] = useState([]);\r\n  const [propertiesLoading, setPropertiesLoading] = useState(true);\r\n  const [analytics, setAnalytics] = useState({\r\n    totalProperties: 0,\r\n    activeListings: 0,\r\n    pendingListings: 0,\r\n    soldProperties: 0,\r\n    totalViews: 0,\r\n    totalInquiries: 0,\r\n    totalRevenue: 0,\r\n    averagePrice: 0,\r\n    conversionRate: 0,\r\n    monthlyViews: 0,\r\n    monthlyInquiries: 0\r\n  });\r\n  const [inquiries, setInquiries] = useState([]);\r\n  const [viewingRequests, setViewingRequests] = useState([]);\r\n  const [showProposalModal, setShowProposalModal] = useState(false);\r\n  const [proposalDate, setProposalDate] = useState('');\r\n  const [proposalTime, setProposalTime] = useState('');\r\n  const [selectedRequestId, setSelectedRequestId] = useState(null);\r\n  const [showVerificationModal, setShowVerificationModal] = useState(false);\r\n  const [selectedProperty, setSelectedProperty] = useState(null);\r\n  const [verificationRequests, setVerificationRequests] = useState([]);\r\n  const [verificationRequestsLoading, setVerificationRequestsLoading] = useState(false);\r\n\r\n\r\n  // Sync tab with route\r\n  useEffect(() => {\r\n    if (location.pathname.startsWith('/vendor/add-property')) {\r\n      setActiveTab('add');\r\n    } else if (location.pathname.startsWith('/vendor/properties')) {\r\n      setActiveTab('properties');\r\n    } else if (location.pathname.startsWith('/vendor/dashboard')) {\r\n      // keep current or default to overview\r\n    }\r\n  }, [location.pathname]);\r\n\r\n  // Fetch vendor's properties from localStorage and backend API\r\n  const fetchVendorProperties = useCallback(async () => {\r\n    if (!user) {\r\n      setProperties([]);\r\n      setPropertiesLoading(false);\r\n      return;\r\n    }\r\n\r\n    setPropertiesLoading(true);\r\n    \r\n    try {\r\n      const userId = user?.id || user?.uid;\r\n      const userEmail = user?.email;\r\n      \r\n      console.log('VendorDashboard: Fetching properties for user:', { userId, userEmail });\r\n      \r\n      if (!userId && !userEmail) {\r\n        console.log('VendorDashboard: No user ID or email found');\r\n        setProperties([]);\r\n        setPropertiesLoading(false);\r\n        return;\r\n      }\r\n\r\n      // Fetch properties from localStorage as primary source\r\n      let allProps = [];\r\n\r\n      try {\r\n        const localProperties = JSON.parse(localStorage.getItem('mockProperties') || '[]');\r\n        const userLocalProps = localProperties.filter(prop => {\r\n          const matchesId = prop.ownerId === userId || prop.ownerId === user?.id;\r\n          const matchesEmail = prop.ownerEmail === userEmail;\r\n          return matchesId || matchesEmail;\r\n        });\r\n        \r\n        if (userLocalProps.length > 0) {\r\n          console.log('VendorDashboard: Found', userLocalProps.length, 'properties in localStorage');\r\n          \r\n          allProps = userLocalProps.map(prop => ({\r\n            ...prop,\r\n            source: 'localStorage',\r\n            createdAt: prop.createdAt ? new Date(prop.createdAt) : new Date()\r\n          }));\r\n        }\r\n      } catch (err) {\r\n        console.warn('VendorDashboard: Error reading localStorage:', err);\r\n      }\r\n\r\n      // Also try to fetch from backend API\r\n      try {\r\n        const response = await authenticatedFetch(getApiUrl('/properties'), {\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          }\r\n        });\r\n        \r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          const apiProps = Array.isArray(data.data) ? data.data : (Array.isArray(data) ? data : []);\r\n          \r\n          console.log('VendorDashboard: Found', apiProps.length, 'properties from backend');\r\n          \r\n          // Merge API properties with localStorage, preferring API data\r\n          apiProps.forEach(prop => {\r\n            const existingIndex = allProps.findIndex(p => p.id === prop.id);\r\n            if (existingIndex >= 0) {\r\n              allProps[existingIndex] = {\r\n                ...allProps[existingIndex],\r\n                ...prop,\r\n                source: 'api',\r\n                createdAt: prop.createdAt ? new Date(prop.createdAt) : new Date()\r\n              };\r\n            } else {\r\n              allProps.push({\r\n                ...prop,\r\n                source: 'api',\r\n                createdAt: prop.createdAt ? new Date(prop.createdAt) : new Date()\r\n              });\r\n            }\r\n          });\r\n        }\r\n      } catch (err) {\r\n        console.warn('VendorDashboard: Error fetching from backend API:', err);\r\n      }\r\n\r\n      // Sort by createdAt descending\r\n      allProps.sort((a, b) => {\r\n        const dateA = a.createdAt instanceof Date ? a.createdAt : new Date(a.createdAt || 0);\r\n        const dateB = b.createdAt instanceof Date ? b.createdAt : new Date(b.createdAt || 0);\r\n        return dateB - dateA;\r\n      });\r\n      \r\n      console.log('VendorDashboard: Total properties found:', allProps.length);\r\n\r\n      // Normalize property data for display\r\n      const normalizedProps = allProps.map(property => {\r\n        const details = property.details || {};\r\n        const images = property.images || [];\r\n        const primaryImage = images.find(img => img.isPrimary)?.url || \r\n                           (typeof images[0] === 'string' ? images[0] : images[0]?.url) ||\r\n                           'https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=400&h=300&fit=crop';\r\n        \r\n        // Determine display status based on approval and listing type\r\n        let displayStatus = 'pending';\r\n        if (property.approvalStatus === 'approved' || property.verificationStatus === 'approved') {\r\n          displayStatus = 'active';\r\n        } else if (property.approvalStatus === 'rejected' || property.verificationStatus === 'rejected') {\r\n          displayStatus = 'rejected';\r\n        } else if (property.approvalStatus === 'pending' || property.verificationStatus === 'pending') {\r\n          displayStatus = 'pending';\r\n        }\r\n\r\n        return {\r\n          ...property,\r\n          image: primaryImage,\r\n          bedrooms: property.bedrooms || details.bedrooms || 0,\r\n          bathrooms: property.bathrooms || details.bathrooms || 0,\r\n          area: property.area || details.sqft || 0,\r\n          location: typeof property.location === 'object' \r\n            ? `${property.location.address || ''}, ${property.location.city || ''}, ${property.location.state || ''}`.replace(/^, |, $/g, '')\r\n            : property.location || 'Location not specified',\r\n          status: displayStatus,\r\n          views: property.views || 0,\r\n          inquiries: property.inquiriesCount || 0,\r\n          favorites: property.favoritesCount || 0,\r\n          dateListed: property.createdAt instanceof Date \r\n            ? property.createdAt.toISOString().split('T')[0]\r\n            : (typeof property.createdAt === 'string' ? property.createdAt.split('T')[0] : 'Unknown'),\r\n          lastUpdated: property.updatedAt?.toDate?.()?.toISOString?.()?.split('T')[0] ||\r\n                      (typeof property.updatedAt === 'string' ? property.updatedAt.split('T')[0] : null)\r\n        };\r\n      });\r\n\r\n      console.log('VendorDashboard: Total properties loaded:', normalizedProps.length);\r\n      setProperties(normalizedProps);\r\n\r\n    } catch (error) {\r\n      console.error('VendorDashboard: Error fetching properties:', error);\r\n      toast.error('Failed to load properties');\r\n    } finally {\r\n      setPropertiesLoading(false);\r\n    }\r\n  }, [user]);\r\n\r\n  // Load verification requests when user or auth state changes\r\n  const fetchVerificationRequests = useCallback(async () => {\r\n    if (!user) {\r\n      setVerificationRequests([]);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setVerificationRequestsLoading(true);\r\n      const response = await authenticatedFetch(getApiUrl('/verification/applications/mine'), {\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      const data = await response.json();\r\n      if (response.ok && data.success) {\r\n        setVerificationRequests(Array.isArray(data.data) ? data.data : []);\r\n      } else {\r\n        console.warn('VendorDashboard: Failed to load verification requests', data?.message);\r\n      }\r\n    } catch (error) {\r\n      console.error('VendorDashboard: Error fetching verification requests', error);\r\n    } finally {\r\n      setVerificationRequestsLoading(false);\r\n    }\r\n  }, [user]);\r\n\r\n  // Load vendor's properties when user changes\r\n  useEffect(() => {\r\n    fetchVendorProperties();\r\n  }, [user, fetchVendorProperties]);\r\n\r\n  useEffect(() => {\r\n    if (!user) {\r\n      setVerificationRequests([]);\r\n      return;\r\n    }\r\n    fetchVerificationRequests();\r\n  }, [user, fetchVerificationRequests]);\r\n\r\n  // Load vendor analytics summary from backend\r\n  useEffect(() => {\r\n    const fetchVendorAnalytics = async () => {\r\n      if (!user) return;\r\n\r\n      try {\r\n        const res = await authenticatedFetch(getApiUrl('/dashboard/vendor'), {\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          }\r\n        });\r\n\r\n        const data = await res.json();\r\n        if (!res.ok || !data.success) {\r\n          console.warn('VendorDashboard: Failed to load backend analytics summary');\r\n          return;\r\n        }\r\n\r\n        const summary = data.data || {};\r\n        setAnalytics(prev => ({\r\n          ...prev,\r\n          totalProperties: summary.totalProperties ?? prev.totalProperties,\r\n          activeListings: summary.activeListings ?? prev.activeListings,\r\n          pendingListings: summary.pendingListings ?? prev.pendingListings,\r\n          soldProperties: summary.soldProperties ?? prev.soldProperties,\r\n          totalViews: summary.totalViews ?? prev.totalViews,\r\n          totalInquiries: summary.totalInquiries ?? prev.totalInquiries,\r\n          totalRevenue: summary.totalRevenue ?? prev.totalRevenue,\r\n          conversionRate: summary.conversionRate ?? prev.conversionRate\r\n        }));\r\n      } catch (error) {\r\n        console.warn('VendorDashboard: Error fetching backend analytics summary', error);\r\n      }\r\n    };\r\n\r\n    fetchVendorAnalytics();\r\n  }, [user]);\r\n\r\n  // Removed: Firestore sync is no longer needed\r\n\r\n  // Load mock inquiries and viewing requests\r\n  useEffect(() => {\r\n    // Mock inquiries data\r\n    setInquiries([\r\n      {\r\n        id: 1,\r\n        propertyId: 1,\r\n        propertyTitle: \"Luxury Apartment in Victoria Island\",\r\n        buyerName: \"John Adebayo\",\r\n        buyerEmail: \"john@email.com\",\r\n        buyerPhone: \"+234 801 234 5678\",\r\n        message: \"I'm interested in viewing this property. When would be a good time?\",\r\n        status: \"new\",\r\n        date: \"2024-01-20\",\r\n        priority: \"high\"\r\n      },\r\n      {\r\n        id: 2,\r\n        propertyId: 2,\r\n        propertyTitle: \"Modern Family House in Lekki\",\r\n        buyerName: \"Sarah Johnson\",\r\n        buyerEmail: \"sarah@email.com\",\r\n        buyerPhone: \"+234 802 345 6789\",\r\n        message: \"Could you provide more details about the neighborhood and amenities?\",\r\n        status: \"contacted\",\r\n        date: \"2024-01-19\",\r\n        priority: \"medium\"\r\n      }\r\n    ]);\r\n\r\n    // Load viewing requests created by buyers from localStorage\r\n    try {\r\n      const stored = JSON.parse(localStorage.getItem('viewingRequests') || '[]');\r\n      setViewingRequests(stored);\r\n    } catch (e) {\r\n      setViewingRequests([]);\r\n    }\r\n  }, []);\r\n\r\n  const handleVerificationCtaClick = (property) => {\r\n    // Check if verification is already requested or approved\r\n    if (isVerificationApproved(property.id)) {\r\n      toast('This property is already verified!', { icon: '' });\r\n      return;\r\n    }\r\n    \r\n    if (isVerificationRequested(property.id)) {\r\n      toast('Verification already requested for this property.', { icon: '' });\r\n      return;\r\n    }\r\n\r\n    setSelectedProperty(property);\r\n    setShowVerificationModal(true);\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'active': return 'bg-green-100 text-green-800';\r\n      case 'pending': return 'bg-yellow-100 text-yellow-800';\r\n      case 'sold': return 'bg-blue-100 text-blue-800';\r\n      case 'inactive': return 'bg-gray-100 text-gray-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const getStatusIcon = (status) => {\r\n    switch (status) {\r\n      case 'active': return <FaCheck className=\"text-green-600\" />;\r\n      case 'pending': return <FaExclamationTriangle className=\"text-yellow-600\" />;\r\n      case 'sold': return <FaDollarSign className=\"text-blue-600\" />;\r\n      case 'inactive': return <FaTimes className=\"text-gray-600\" />;\r\n      default: return <FaTimes className=\"text-gray-600\" />;\r\n    }\r\n  };\r\n\r\n  const getPriorityColor = (priority) => {\r\n    switch (priority) {\r\n      case 'high': return 'bg-red-100 text-red-800';\r\n      case 'medium': return 'bg-yellow-100 text-yellow-800';\r\n      case 'low': return 'bg-green-100 text-green-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const handleVerificationSuccess = (result) => {\r\n    const payload = typeof result === 'string' ? { message: result } : result || {};\r\n    const successMessage = payload.message || 'Verification request submitted successfully!';\r\n    const application = payload.application;\r\n\r\n    toast.success(successMessage);\r\n    setShowVerificationModal(false);\r\n    setSelectedProperty(null);\r\n\r\n    if (application) {\r\n      setVerificationRequests((prev = []) => {\r\n        if (!Array.isArray(prev)) return [application];\r\n        const exists = prev.some((request) => request.id === application.id);\r\n        if (exists) {\r\n          return prev.map((request) => (request.id === application.id ? application : request));\r\n        }\r\n        return [...prev, application];\r\n      });\r\n\r\n      if (application.propertyId) {\r\n        setProperties((prev = []) =>\r\n          prev.map((property) => {\r\n            if (!property) return property;\r\n            const identifiers = [\r\n              property.id,\r\n              property.propertyId,\r\n              property.numericId,\r\n              property.referenceCode\r\n            ]\r\n              .filter((value) => value !== undefined && value !== null)\r\n              .map((value) => value.toString());\r\n\r\n            if (!identifiers.includes(application.propertyId.toString())) {\r\n              return property;\r\n            }\r\n\r\n            return {\r\n              ...property,\r\n              verificationStatus: application.status || 'pending',\r\n              isVerified: application.status === 'approved'\r\n            };\r\n          })\r\n        );\r\n      }\r\n    }\r\n\r\n    // Refresh data from backend to keep everything in sync\r\n    fetchVendorProperties();\r\n    fetchVerificationRequests();\r\n  };\r\n\r\n  const handleRequestVerification = (property) => {\r\n    setSelectedProperty(property);\r\n    setShowVerificationModal(true);\r\n  };\r\n\r\n  const verificationStatusByProperty = useMemo(() => {\r\n    const statusMap = {};\r\n    verificationRequests.forEach((request) => {\r\n      const propertyKey =\r\n        request.propertyId ??\r\n        request.property?.id ??\r\n        request.property?.propertyId ??\r\n        request.property?.propertyRef;\r\n\r\n      if (propertyKey === undefined || propertyKey === null) {\r\n        return;\r\n      }\r\n\r\n      statusMap[propertyKey.toString()] = request.status || 'pending';\r\n    });\r\n    return statusMap;\r\n  }, [verificationRequests]);\r\n\r\n  const getPropertyVerificationState = useCallback(\r\n    (property) => {\r\n      if (!property) return 'not_requested';\r\n      if (property.isVerified) return 'approved';\r\n\r\n      const candidateKeys = [\r\n        property.id,\r\n        property.propertyId,\r\n        property.numericId,\r\n        property.referenceCode\r\n      ]\r\n        .filter((value) => value !== undefined && value !== null)\r\n        .map((value) => value.toString());\r\n\r\n      for (const key of candidateKeys) {\r\n        if (verificationStatusByProperty[key]) {\r\n          return verificationStatusByProperty[key];\r\n        }\r\n      }\r\n\r\n      return property.verificationStatus || 'not_requested';\r\n    },\r\n    [verificationStatusByProperty]\r\n  );\r\n\r\n  const getVerificationBadgeMeta = useCallback((status) => {\r\n    switch (status) {\r\n      case 'approved':\r\n        return { label: ' Verified', badgeClass: 'bg-green-100 text-green-800' };\r\n      case 'pending':\r\n        return { label: 'Verification requested', badgeClass: 'bg-yellow-100 text-yellow-800' };\r\n      case 'rejected':\r\n        return { label: 'Verification rejected', badgeClass: 'bg-red-100 text-red-800' };\r\n      default:\r\n        return { label: 'Not verified', badgeClass: 'bg-gray-100 text-gray-800' };\r\n    }\r\n  }, []);\r\n\r\n  const getVerificationCtaMeta = useCallback((status) => {\r\n    if (status === 'approved') {\r\n      return { show: false };\r\n    }\r\n    if (status === 'pending') {\r\n      return { show: true, label: 'Verification requested', disabled: true };\r\n    }\r\n    if (status === 'rejected') {\r\n      return { show: true, label: 'Resubmit verification', disabled: false };\r\n    }\r\n    return { show: true, label: 'Get Verified', disabled: false };\r\n  }, []);\r\n\r\n  const handleDeleteProperty = async (propertyId) => {\r\n    if (!user) {\r\n      toast.error('Please login to manage your properties');\r\n      navigate('/');\r\n      return;\r\n    }\r\n\r\n    // Use toast for confirmation with a custom action\r\n    const confirmed = window.confirm('Are you sure you want to delete this property? This action cannot be undone.');\r\n    if (!confirmed) return;\r\n\r\n    // Optimistic update - remove from local state immediately\r\n    setProperties((prev) => prev.filter((p) => p.id !== propertyId));\r\n\r\n    // Delete from backend\r\n    await deleteProperty(propertyId);\r\n    \r\n    // Refresh list from Firestore to ensure consistency\r\n    await fetchVendorProperties();\r\n  };\r\n\r\n  const getUserInitials = () => {\r\n    if (!user) return 'V';\r\n    if (user?.displayName) {\r\n      return user.displayName.split(' ').map(n => n[0]).join('').toUpperCase();\r\n    }\r\n    if (user?.firstName && user?.lastName) {\r\n      return `${user?.firstName?.[0] || ''}${user?.lastName?.[0] || ''}`.toUpperCase();\r\n    }\r\n    if (user?.email) {\r\n      return user?.email?.[0]?.toUpperCase() || 'V';\r\n    }\r\n    return 'V';\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      {/* Main Content Area */}\r\n      <div className=\"w-full max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\r\n        {/* Header with Profile and Notifications */}\r\n        <div className=\"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between\">\r\n          <div className=\"flex items-center gap-4\">\r\n            {/* Profile Picture */}\r\n            <div className=\"w-12 h-12 bg-gradient-to-r from-brand-blue to-blue-600 rounded-full flex items-center justify-center\">\r\n              {user?.photoURL || user?.avatar ? (\r\n                <img \r\n                  src={user.photoURL || user.avatar} \r\n                  alt=\"User avatar\" \r\n                  className=\"w-12 h-12 rounded-full object-cover\"\r\n                />\r\n              ) : (\r\n                <span className=\"text-lg font-medium text-white\">{getUserInitials()}</span>\r\n              )}\r\n            </div>\r\n            <div>\r\n              <h2 className=\"text-lg font-semibold text-gray-900\">\r\n                {user?.displayName || `${user?.firstName || ''} ${user?.lastName || ''}`.trim() || 'Vendor Account'}\r\n              </h2>\r\n              <p className=\"text-sm text-gray-600\">\r\n                {isAgent ? 'Real Estate Agent' : 'Property Owner'}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Notification Icon */}\r\n          <div className=\"relative md:self-auto self-start\">\r\n            <NotificationDropdown />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Welcome Section */}\r\n        <div className=\"mb-8\" style={{ marginTop: '0px' }}>\r\n          <div className=\"welcome-section\">\r\n            <h1 className=\"text-2xl font-bold mb-2\">Welcome back, {user?.firstName || 'Vendor'}!</h1>\r\n            <p className=\"text-blue-100 mb-4\">\r\n              {isAgent \r\n                ? `Help clients find their dream properties in ${user?.vendorData?.agentLocation || 'your area'}. Manage your listings, track inquiries, and grow your real estate business.`\r\n                : 'Manage your properties, track inquiries, schedule viewings, and grow your real estate portfolio. List, edit, and monitor all your property listings in one place.'\r\n              }\r\n            </p>\r\n\r\n            {/* Vendor ID Card */}\r\n            {user?.vendorCode && (\r\n              <div className=\"bg-white/10 backdrop-blur-sm rounded-lg p-4 mb-4 border border-white/20\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <p className=\"text-blue-200 text-sm\">Your Vendor ID (share with prospects)</p>\r\n                    <p className=\"text-2xl font-mono font-bold text-white tracking-wider\">{user.vendorCode}</p>\r\n                  </div>\r\n                  <button\r\n                    onClick={() => {\r\n                      navigator.clipboard.writeText(user.vendorCode);\r\n                      toast.success('Vendor ID copied to clipboard!');\r\n                    }}\r\n                    className=\"bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2\"\r\n                  >\r\n                    <FaCheck className=\"text-sm\" />\r\n                    Copy\r\n                  </button>\r\n                </div>\r\n                <p className=\"text-blue-200 text-xs mt-2\">\r\n                  Buyers can search for your properties using this ID in the Properties tab.\r\n                </p>\r\n              </div>\r\n            )}\r\n\r\n            {/* Stats Cards */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n              <div \r\n                className=\"stats-card cursor-pointer hover:bg-blue-700 transition-colors\"\r\n                onClick={() => navigate('/vendor/properties')}\r\n                title=\"View your properties\"\r\n              >\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <div className=\"text-2xl font-bold text-white\">{analytics.activeListings || 0}</div>\r\n                    <div className=\"text-blue-200 text-sm\">{isAgent ? 'Managed Properties' : 'Active Listings'}</div>\r\n                  </div>\r\n                  <FaHome className=\"text-blue-300 text-xl\" />\r\n                </div>\r\n              </div>\r\n              \r\n              <div \r\n                className=\"stats-card cursor-pointer hover:bg-blue-700 transition-colors\"\r\n                onClick={() => {\r\n                  setActiveTab('analytics');\r\n                  window.scrollTo({ top: 0, behavior: 'smooth' });\r\n                }}\r\n                title=\"View analytics\"\r\n              >\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <div className=\"text-2xl font-bold text-white\">{analytics.totalViews?.toLocaleString() || 0}</div>\r\n                    <div className=\"text-blue-200 text-sm\">Total Views</div>\r\n                  </div>\r\n                  <FaEye className=\"text-blue-300 text-xl\" />\r\n                </div>\r\n              </div>\r\n              \r\n              <div \r\n                className=\"stats-card cursor-pointer hover:bg-blue-700 transition-colors\"\r\n                onClick={() => {\r\n                  setActiveTab('inquiries');\r\n                  window.scrollTo({ top: 0, behavior: 'smooth' });\r\n                }}\r\n                title=\"View inquiries\"\r\n              >\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <div className=\"text-2xl font-bold text-white\">{analytics.totalInquiries || 0}</div>\r\n                    <div className=\"text-blue-200 text-sm\">Inquiries</div>\r\n                  </div>\r\n                  <FaEnvelope className=\"text-blue-300 text-xl\" />\r\n                </div>\r\n              </div>\r\n              \r\n              <div \r\n                className=\"stats-card cursor-pointer hover:bg-blue-700 transition-colors\"\r\n                onClick={() => {\r\n                  setActiveTab('analytics');\r\n                  window.scrollTo({ top: 0, behavior: 'smooth' });\r\n                }}\r\n                title=\"View analytics\"\r\n              >\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <div className=\"text-2xl font-bold text-white\">{analytics.conversionRate || 0}%</div>\r\n                    <div className=\"text-blue-200 text-sm\">Conversion Rate</div>\r\n                  </div>\r\n                  <FaChartLine className=\"text-blue-300 text-xl\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n      {/* Tab Navigation */}\r\n      <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 mb-6\">\r\n        <div className=\"border-b border-gray-200\">\r\n          <nav\r\n            className=\"flex overflow-x-auto no-scrollbar px-4 sm:px-6\"\r\n            aria-label=\"Vendor dashboard sections\"\r\n          >\r\n            <div className=\"flex min-w-max divide-x divide-transparent\">\r\n            {[\r\n              { id: 'overview', label: 'Overview', icon: FaChartLine },\r\n              { id: 'properties', label: 'My Properties', icon: FaHome },\r\n              { id: 'inquiries', label: 'Inquiries', icon: FaEnvelope },\r\n              { id: 'viewings', label: 'Viewing Requests', icon: FaCalendar },\r\n              { id: 'analytics', label: 'Analytics', icon: FaChartLine }\r\n            ].map((tab) => (\r\n              <button\r\n                key={tab.id}\r\n                onClick={() => {\r\n                  // Stay within the same component; avoid route changes that could reset auth\r\n                  setActiveTab(tab.id);\r\n                }}\r\n                className={`flex items-center space-x-2 py-4 px-3 border-b-2 font-medium text-sm transition-colors ${\r\n                  activeTab === tab.id\r\n                    ? 'border-brand-blue text-brand-blue'\r\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                }`}\r\n              >\r\n                <tab.icon className=\"h-4 w-4\" />\r\n                <span>{tab.label}</span>\r\n              </button>\r\n            ))}\r\n            </div>\r\n          </nav>\r\n        </div>\r\n\r\n        <div className=\"p-6\">\r\n          {/* Overview Tab */}\r\n          {activeTab === 'overview' && (\r\n            <div className=\"space-y-6\">\r\n              {/* Recent Activity */}\r\n              <div>\r\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Recent Activity</h3>\r\n                <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                  <div className=\"space-y-3\">\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <div className=\"p-2 bg-green-100 rounded-full\">\r\n                        <FaEye className=\"h-4 w-4 text-green-600\" />\r\n                      </div>\r\n                      <div className=\"flex-1\">\r\n                        <p className=\"text-sm text-gray-900\">New view on \"Luxury Apartment in Victoria Island\"</p>\r\n                        <p className=\"text-xs text-gray-500\">2 minutes ago</p>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <div className=\"p-2 bg-blue-100 rounded-full\">\r\n                        <FaEnvelope className=\"h-4 w-4 text-blue-600\" />\r\n                      </div>\r\n                      <div className=\"flex-1\">\r\n                        <p className=\"text-sm text-gray-900\">New inquiry from John Adebayo</p>\r\n                        <p className=\"text-xs text-gray-500\">15 minutes ago</p>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <div className=\"p-2 bg-orange-100 rounded-full\">\r\n                        <FaHeart className=\"h-4 w-4 text-orange-600\" />\r\n                      </div>\r\n                      <div className=\"flex-1\">\r\n                        <p className=\"text-sm text-gray-900\">Property added to favorites</p>\r\n                        <p className=\"text-xs text-gray-500\">1 hour ago</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Agent Information (for agents only) */}\r\n              {isAgent && (\r\n                <div className=\"mb-6\">\r\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Agent Profile</h3>\r\n                  <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-6\">\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                      <div>\r\n                        <h4 className=\"font-medium text-gray-900 mb-2\">Business Information</h4>\r\n                        <div className=\"space-y-2 text-sm\">\r\n                          <p><span className=\"font-medium\">Company:</span> {user?.vendorData?.businessName}</p>\r\n                          <p><span className=\"font-medium\">Location:</span> {user?.vendorData?.agentLocation}</p>\r\n                          <p><span className=\"font-medium\">Experience:</span> {user?.vendorData?.experience}</p>\r\n                        </div>\r\n                      </div>\r\n                      <div>\r\n                        <h4 className=\"font-medium text-gray-900 mb-2\">Contact Information</h4>\r\n                        <div className=\"space-y-2 text-sm\">\r\n                          <p><span className=\"font-medium\">Phone:</span> {user?.phone}</p>\r\n                          <p><span className=\"font-medium\">Email:</span> {user?.email}</p>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"mt-4 pt-4 border-t border-blue-200\">\r\n                      <p className=\"text-sm text-blue-700\">\r\n                         <strong>Tip:</strong> Keep your profile updated to attract more clients in {user?.vendorData?.agentLocation}.\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Quick Actions */}\r\n              <div>\r\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Quick Actions</h3>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                        <button \r\n                    onClick={() => {\r\n                      setActiveTab('add');\r\n                      navigate('/vendor/add-property');\r\n                    }}\r\n                      className=\"flex items-center space-x-3 p-4 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors\"\r\n                      title=\"Add new property\"\r\n                  >\r\n                    <div className=\"p-2 bg-blue-100 rounded-full\">\r\n                      <p className=\"font-medium text-gray-900\">Update Listings</p>\r\n                      <p className=\"text-sm text-gray-500\">Edit property details</p>\r\n                    </div>\r\n                  </button>\r\n                  <button\r\n                    className=\"flex items-center space-x-3 p-4 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors\"\r\n                    title=\"View performance analytics\"\r\n                  >\r\n                    <div className=\"p-2 bg-purple-100 rounded-full\">\r\n                      <FaChartLine className=\"h-5 w-5 text-purple-600\" />\r\n                    </div>\r\n                    <div className=\"text-left\">\r\n                      <p className=\"font-medium text-gray-900\">View Analytics</p>\r\n                      <p className=\"text-sm text-gray-500\">Check performance</p>\r\n                    </div>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Properties Tab */}\r\n          {activeTab === 'properties' && (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900\">My Properties</h3>\r\n                <div className=\"flex flex-wrap items-center gap-3\">\r\n                  <button \r\n                    onClick={fetchVendorProperties}\r\n                    className=\"btn-secondary flex items-center space-x-2\"\r\n                    disabled={propertiesLoading}\r\n                  >\r\n                    {propertiesLoading ? (\r\n                      <FaSpinner className=\"h-4 w-4 animate-spin\" />\r\n                    ) : (\r\n                      <span>Refresh</span>\r\n                    )}\r\n                  </button>\r\n                <button \r\n                  onClick={() => navigate('/vendor/add-property')}\r\n                  className=\"btn-primary flex items-center space-x-2\"\r\n                >\r\n                  <FaPlus className=\"h-4 w-4\" />\r\n                  <span>Add Property</span>\r\n                </button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Loading State */}\r\n              {propertiesLoading && (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                  <PropertyCardSkeleton count={6} />\r\n                </div>\r\n              )}\r\n\r\n              {/* No Properties State */}\r\n              {!propertiesLoading && properties.length === 0 && (\r\n                <div className=\"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300\">\r\n                  <FaHome className=\"mx-auto h-12 w-12 text-gray-400\" />\r\n                  <h3 className=\"mt-4 text-lg font-medium text-gray-900\">No properties yet</h3>\r\n                  <p className=\"mt-2 text-sm text-gray-500\">\r\n                    Get started by adding your first property listing.\r\n                  </p>\r\n                  <button \r\n                    onClick={() => navigate('/vendor/add-property')}\r\n                    className=\"mt-4 btn-primary inline-flex items-center space-x-2\"\r\n                  >\r\n                    <FaPlus className=\"h-4 w-4\" />\r\n                    <span>Add Your First Property</span>\r\n                  </button>\r\n                </div>\r\n              )}\r\n\r\n              {/* Properties Grid */}\r\n              {!propertiesLoading && properties.length > 0 && (\r\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6\">\r\n                {properties.map((property) => {\r\n                  const verificationStatus = getVerificationStatus(property.id);\r\n                  const buttonText = getVerificationButtonText(property.id);\r\n                  const buttonClass = getVerificationButtonClass(property.id);\r\n                  const isDisabled = isVerificationApproved(property.id) || isVerificationRequested(property.id);\r\n\r\n                  return (\r\n                  <div key={property.id} className=\"property-card\">\r\n                    <div className=\"relative\">\r\n                      <img\r\n                        src={property.image}\r\n                        alt={property.title}\r\n                        className=\"w-full h-48 object-cover rounded-t-lg\"\r\n                      />\r\n                      <div className=\"absolute top-3 left-3 flex flex-col space-y-1\">\r\n                        <span className={`px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(property.status)}`}>\r\n                          {property.status.charAt(0).toUpperCase() + property.status.slice(1)}\r\n                        </span>\r\n                        {property.source === 'localStorage' && !property.savedToFirestore && (\r\n                          <span className=\"px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800\" title=\"This property is stored locally and may be lost if you clear browser data\">\r\n                             Local Only\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                      <div className=\"absolute top-3 right-3 flex space-x-2\">\r\n                        <button\r\n                          className=\"p-2 bg-white bg-opacity-90 rounded-full hover:bg-opacity-100 transition-all\"\r\n                          title=\"Edit property\"\r\n                          aria-label=\"Edit property\"\r\n                          onClick={() => navigate('/vendor/add-property', { state: { propertyToEdit: property } })}\r\n                        >\r\n                          <FaEdit className=\"h-4 w-4 text-gray-600\" />\r\n                        </button>\r\n                        <button\r\n                          className=\"p-2 bg-white bg-opacity-90 rounded-full hover:bg-opacity-100 transition-all\"\r\n                          title=\"Delete property\"\r\n                          aria-label=\"Delete property\"\r\n                          onClick={() => handleDeleteProperty(property.id)}\r\n                        >\r\n                          <FaTrash className=\"h-4 w-4 text-red-600\" />\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"p-4\">\r\n                      <div className=\"text-2xl font-bold text-gray-900 mb-1\">\r\n                        {(property.price || 0).toLocaleString()}\r\n                      </div>\r\n                      <h3 className=\"font-semibold text-gray-900 mb-1\">{property.title}</h3>\r\n                      <p className=\"text-gray-600 text-sm mb-3 flex items-center\">\r\n                        <FaMapMarkerAlt className=\"h-3 w-3 mr-1\" />\r\n                        {(() => {\r\n                          if (typeof property.location === 'string') {\r\n                            return property.location;\r\n                          }\r\n                          if (property.location && typeof property.location === 'object') {\r\n                            if (property.location.address) {\r\n                              return property.location.address;\r\n                            }\r\n                            const city = property.location.city || '';\r\n                            const state = property.location.state || '';\r\n                            return `${city}${city && state ? ', ' : ''}${state}`.trim();\r\n                          }\r\n                          return 'Location not specified';\r\n                        })()}\r\n                      </p>\r\n                      \r\n                      <div className=\"flex items-center space-x-4 text-sm text-gray-600 mb-4\">\r\n                        <div className=\"flex items-center space-x-1\">\r\n                          <FaBed className=\"h-3 w-3\" />\r\n                          <span>{property.bedrooms || property.details?.bedrooms || 0}</span>\r\n                        </div>\r\n                        <div className=\"flex items-center space-x-1\">\r\n                          <FaBath className=\"h-3 w-3\" />\r\n                          <span>{property.bathrooms || property.details?.bathrooms || 0}</span>\r\n                        </div>\r\n                        <div className=\"flex items-center space-x-1\">\r\n                          <FaRulerCombined className=\"h-3 w-3\" />\r\n                          <span>{property.area || property.details?.sqft || 0}m</span>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"grid grid-cols-3 gap-4 text-center text-sm\">\r\n                        <div>\r\n                          <div className=\"font-semibold text-gray-900\">{property.views}</div>\r\n                          <div className=\"text-gray-500\">Views</div>\r\n                        </div>\r\n                        <div>\r\n                          <div className=\"font-semibold text-gray-900\">{property.inquiries}</div>\r\n                          <div className=\"text-gray-500\">Inquiries</div>\r\n                        </div>\r\n                        <div>\r\n                          <div className=\"font-semibold text-gray-900\">{property.favorites}</div>\r\n                          <div className=\"text-gray-500\">Favorites</div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"mt-4 pt-4 border-t border-gray-200\">\r\n                        <div className=\"flex items-center justify-between text-xs text-gray-500 mb-3\">\r\n                          <span>Listed: {new Date(property.dateListed).toLocaleDateString()}</span>\r\n                          <span>Updated: {new Date(property.lastUpdated).toLocaleDateString()}</span>\r\n                        </div>\r\n                        \r\n                        {/* Verification Status and Button */}\r\n                        <div className=\"flex items-center justify-between\">\r\n                          <div className=\"flex items-center space-x-2\">\r\n                            {verificationStatus && (\r\n                              <span className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                                verificationStatus.status === 'approved' \r\n                                  ? 'bg-green-100 text-green-800'\r\n                                  : verificationStatus.status === 'requested'\r\n                                  ? 'bg-yellow-100 text-yellow-800'\r\n                                  : 'bg-gray-100 text-gray-800'\r\n                              }`}>\r\n                                {verificationStatus.status === 'approved' \r\n                                  ? ' Verified'\r\n                                  : verificationStatus.status === 'requested'\r\n                                  ? ' Verification Requested'\r\n                                  : 'Not Verified'\r\n                                }\r\n                              </span>\r\n                            )}\r\n                          </div>\r\n\r\n                          <button\r\n                            onClick={() => handleVerificationCtaClick(property)}\r\n                            disabled={isDisabled}\r\n                            className={`px-3 py-1 text-xs rounded-md transition-colors ${buttonClass}`}\r\n                          >\r\n                            {buttonText}\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  );\r\n                })}\r\n              </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Inquiries Tab */}\r\n          {activeTab === 'inquiries' && (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex flex-col gap-3 md:flex-row md:items-center md:justify-between\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900\">Property Inquiries & Viewings</h3>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  <select className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-full sm:w-auto\">\r\n                    <option>All Inquiries</option>\r\n                    <option>New</option>\r\n                    <option>Contacted</option>\r\n                    <option>Follow-up</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-4\">\r\n                {inquiries.map((inquiry) => (\r\n                  <div key={inquiry.id} className=\"bg-white border border-gray-200 rounded-lg p-6\">\r\n                    <div className=\"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between\">\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"flex items-center space-x-3 mb-2\">\r\n                          <h4 className=\"font-semibold text-gray-900\">{inquiry.buyerName}</h4>\r\n                          <span className={`px-2 py-1 rounded-full text-xs font-medium ${getPriorityColor(inquiry.priority)}`}>\r\n                            {inquiry.priority}\r\n                          </span>\r\n                          <span className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                            inquiry.status === 'new' ? 'bg-blue-100 text-blue-800' : 'bg-green-100 text-green-800'\r\n                          }`}>\r\n                            {inquiry.status}\r\n                          </span>\r\n                        </div>\r\n                        <p className=\"text-sm text-gray-600 mb-2\">Property: {inquiry.propertyTitle}</p>\r\n                        <p className=\"text-gray-700 mb-3\">{inquiry.message}</p>\r\n                        <div className=\"flex items-center space-x-4 text-sm text-gray-500\">\r\n                          <span className=\"flex items-center\">\r\n                            <FaEnvelope className=\"h-3 w-3 mr-1\" />\r\n                            {inquiry.buyerEmail}\r\n                          </span>\r\n                          <span className=\"flex items-center\">\r\n                            <FaPhone className=\"h-3 w-3 mr-1\" />\r\n                            {inquiry.buyerPhone}\r\n                          </span>\r\n                          <span className=\"flex items-center\">\r\n                            <FaCalendar className=\"h-3 w-3 mr-1\" />\r\n                            {new Date(inquiry.date).toLocaleDateString()}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex flex-col sm:flex-row gap-2 sm:ml-4\">\r\n                        <button className=\"px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors text-center\">\r\n                          Reply\r\n                        </button>\r\n                        <button className=\"px-3 py-2 bg-gray-100 text-gray-700 rounded text-sm hover:bg-gray-200 transition-colors text-center\">\r\n                          Mark as Contacted\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              {/* Viewing Requests */}\r\n              <div className=\"pt-4\">\r\n                <h4 className=\"text-md font-semibold text-gray-900 mb-3\">Viewing Requests</h4>\r\n                {viewingRequests.length === 0 ? (\r\n                  <p className=\"text-sm text-gray-500\">No viewing requests yet.</p>\r\n                ) : (\r\n                  <div className=\"space-y-3\">\r\n                    {viewingRequests.map((req) => (\r\n                      <div key={req.id} className=\"bg-white border border-gray-200 rounded-lg p-4\">\r\n                        <div className=\"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between\">\r\n                          <div className=\"flex-1\">\r\n                            <div className=\"flex items-center gap-2 mb-1\">\r\n                              <span className=\"text-sm font-semibold text-gray-900\">{req.userName || 'Buyer'}</span>\r\n                              <span className={`px-2 py-0.5 rounded-full text-xs ${req.status==='confirmed' ? 'bg-green-100 text-green-700' : 'bg-yellow-100 text-yellow-700'}`}>{req.status || 'pending'}</span>\r\n                            </div>\r\n                            <p className=\"text-sm text-gray-700\">Property: {req.propertyTitle}</p>\r\n                            <p className=\"text-xs text-gray-500\">Requested: {new Date(req.requestedAt).toLocaleString()}</p>\r\n                            <div className=\"mt-2 text-sm text-gray-700\">\r\n                              <p>Preferred: {req.preferredDate || ''} {req.preferredTime || ''}</p>\r\n                              {req.vendorProposalDate && (\r\n                                <p className=\"text-blue-700\">\r\n                                  Your proposal: {req.vendorProposalDate} {req.vendorProposalTime || ''}\r\n                                </p>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"flex flex-col sm:flex-row gap-2 sm:ml-4\">\r\n                            <button\r\n                              onClick={() => {\r\n                                setSelectedRequestId(req.id);\r\n                                setProposalDate('');\r\n                                setProposalTime('');\r\n                                setShowProposalModal(true);\r\n                              }}\r\n                              className=\"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors\"\r\n                            >\r\n                              Propose Alternative\r\n                            </button>\r\n                            <button\r\n                              onClick={() => {\r\n                                const updated = viewingRequests.map(r => r.id === req.id ? { ...r, status: 'confirmed' } : r);\r\n                                setViewingRequests(updated);\r\n                                localStorage.setItem('viewingRequests', JSON.stringify(updated));\r\n                              }}\r\n                              className=\"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700 transition-colors\"\r\n                            >\r\n                              Confirm\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Viewing Requests Tab */}\r\n          {activeTab === 'viewings' && (\r\n            <VendorInspectionRequests />\r\n          )}\r\n\r\n          {activeTab === 'analytics' && (\r\n            <div className=\"space-y-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900\">Property Performance Analytics</h3>\r\n              \r\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n                <div className=\"bg-white border border-gray-200 rounded-lg p-6\">\r\n                  <h4 className=\"font-semibold text-gray-900 mb-4\">Views by Property</h4>\r\n                  <VendorViewsChart properties={properties} />\r\n                </div>\r\n                \r\n                <div className=\"bg-white border border-gray-200 rounded-lg p-6\">\r\n                  <h4 className=\"font-semibold text-gray-900 mb-4\">Inquiry Conversion by Property</h4>\r\n                  <VendorConversionChart properties={properties} />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"bg-white border border-gray-200 rounded-lg p-6\">\r\n                <h4 className=\"font-semibold text-gray-900 mb-4\">Property Performance Summary</h4>\r\n                <div className=\"overflow-x-auto\">\r\n                  <table className=\"min-w-full divide-y divide-gray-200\">\r\n                    <thead className=\"bg-gray-50\">\r\n                      <tr>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Property</th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Views</th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Inquiries</th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Favorites</th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Conversion</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                      {properties.map((property) => (\r\n                        <tr key={property.id}>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                            <div className=\"flex items-center\">\r\n                              <img className=\"h-10 w-10 rounded-lg object-cover\" src={property.image} alt={property.title} />\r\n                              <div className=\"ml-4\">\r\n                                <div className=\"text-sm font-medium text-gray-900\">{property.title}</div>\r\n                                <div className=\"text-sm text-gray-500\">{property.location}</div>\r\n                              </div>\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{property.views}</td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{property.inquiries}</td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{property.favorites}</td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                            {((property.inquiries / property.views) * 100).toFixed(1)}%\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      {/* Proposal Modal */}\r\n      {showProposalModal && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n          <div className=\"bg-white rounded-lg max-w-md w-full p-6\">\r\n            <div className=\"flex justify-between items-center mb-4\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900\">Propose Alternative Date</h3>\r\n              <button onClick={() => setShowProposalModal(false)} className=\"text-gray-400 hover:text-gray-600\">\r\n                <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" /></svg>\r\n              </button>\r\n            </div>\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Date</label>\r\n                <input type=\"date\" value={proposalDate} onChange={(e) => setProposalDate(e.target.value)} className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\" />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Time</label>\r\n                <input type=\"time\" value={proposalTime} onChange={(e) => setProposalTime(e.target.value)} className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\" />\r\n              </div>\r\n              <div className=\"flex gap-3 pt-2\">\r\n                <button onClick={() => setShowProposalModal(false)} className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors\">Cancel</button>\r\n                <button\r\n                  onClick={() => {\r\n                    if (!proposalDate || !proposalTime || !selectedRequestId) return;\r\n                    const updated = viewingRequests.map(r => r.id === selectedRequestId ? { ...r, vendorProposalDate: proposalDate, vendorProposalTime: proposalTime, status: 'proposed' } : r);\r\n                    setViewingRequests(updated);\r\n                    localStorage.setItem('viewingRequests', JSON.stringify(updated));\r\n                    setShowProposalModal(false);\r\n                  }}\r\n                  className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors\"\r\n                >\r\n                  Send Proposal\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Property Verification Modal */}\r\n      {showVerificationModal && selectedProperty && (\r\n        <PropertyVerification\r\n          property={selectedProperty}\r\n          onClose={() => {\r\n            setShowVerificationModal(false);\r\n            // Refresh the properties to show updated verification status\r\n            setTimeout(() => {\r\n              window.location.reload();\r\n            }, 1000);\r\n          }}\r\n          onSuccess={() => {\r\n            setShowVerificationModal(false);\r\n            toast.success('Verification request submitted successfully!', { icon: '' });\r\n            // Refresh the properties to show updated verification status\r\n            setTimeout(() => {\r\n              window.location.reload();\r\n            }, 1000);\r\n          }}\r\n        />\r\n      )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VendorDashboard;\r\n","/**\r\n * Authentication Token Utility\r\n * Uses backend-issued tokens only.\r\n */\r\n\r\nconst readToken = () => {\r\n  try {\r\n    return localStorage.getItem('accessToken') || localStorage.getItem('token');\r\n  } catch (error) {\r\n    console.warn('getAuthToken: Could not read token from storage:', error);\r\n    return null;\r\n  }\r\n};\r\n\r\nexport const getAuthToken = async () => readToken();\r\n\r\nexport const getAuthHeaders = async () => {\r\n  const token = await getAuthToken();\r\n  const headers = {\r\n    'Content-Type': 'application/json'\r\n  };\r\n  if (token) {\r\n    headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  return headers;\r\n};\r\n\r\nexport const hasAuthToken = async () => {\r\n  const token = await getAuthToken();\r\n  return Boolean(token);\r\n};\r\n\r\nexport const authenticatedFetch = async (url, options = {}) => {\r\n  const headers = await getAuthHeaders();\r\n  const requestOptions = {\r\n    ...options,\r\n    headers: {\r\n      ...headers,\r\n      ...(options.headers || {})\r\n    }\r\n  };\r\n\r\n  return fetch(url, requestOptions);\r\n};\r\n\r\nexport default {\r\n  getAuthToken,\r\n  getAuthHeaders,\r\n  authenticatedFetch,\r\n  hasAuthToken\r\n};\r\n","import React from 'react';\n\nconst PropertyCardSkeleton = ({ count = 1 }) => {\n  const skeletons = Array.from({ length: count }, (_, i) => (\n    <div key={i} className=\"bg-white rounded-xl shadow-md overflow-hidden animate-pulse\">\n      {/* Image skeleton */}\n      <div className=\"w-full h-48 bg-gray-300\"></div>\n      \n      {/* Content skeleton */}\n      <div className=\"p-6\">\n        {/* Price skeleton */}\n        <div className=\"h-8 w-32 bg-gray-300 rounded mb-3\"></div>\n        \n        {/* Title skeleton */}\n        <div className=\"h-6 w-full bg-gray-300 rounded mb-2\"></div>\n        <div className=\"h-6 w-3/4 bg-gray-300 rounded mb-4\"></div>\n        \n        {/* Location skeleton */}\n        <div className=\"h-4 w-2/3 bg-gray-300 rounded mb-4\"></div>\n        \n        {/* Features skeleton */}\n        <div className=\"flex items-center space-x-4 mb-4\">\n          <div className=\"h-4 w-16 bg-gray-300 rounded\"></div>\n          <div className=\"h-4 w-16 bg-gray-300 rounded\"></div>\n          <div className=\"h-4 w-16 bg-gray-300 rounded\"></div>\n        </div>\n        \n        {/* Description skeleton */}\n        <div className=\"space-y-2 mb-4\">\n          <div className=\"h-4 w-full bg-gray-300 rounded\"></div>\n          <div className=\"h-4 w-5/6 bg-gray-300 rounded\"></div>\n        </div>\n        \n        {/* Button skeleton */}\n        <div className=\"h-10 w-full bg-gray-300 rounded\"></div>\n      </div>\n    </div>\n  ));\n\n  return <>{skeletons}</>;\n};\n\nexport default PropertyCardSkeleton;\n\n"],"names":["_ref","items","pathnames","useLocation","pathname","split","filter","x","breadcrumbItems","label","path","map","name","index","routeTo","slice","join","word","charAt","toUpperCase","_jsx","className","children","item","isLast","length","_jsxs","FaHome","_Fragment","Link","to","FaChevronRight","VIEWING_REQUESTS_KEY","INSPECTION_ACTIVITY_KEY","defaultAnalytics","totalRequests","pendingResponses","confirmed","vendorProposals","buyerReschedules","cancelledByBuyer","cancelledByVendor","timeline","safeWindowDispatch","eventName","detail","window","dispatchEvent","CustomEvent","StorageEvent","getStoredRequests","JSON","parse","localStorage","getItem","saveStoredRequests","requests","setItem","stringify","getActivityLog","formatDateTimeLabel","date","time","logInspectionActivity","action","request","payload","buildActivityPayload","requestId","id","propertyTitle","projectTitle","projectName","title","buyerId","userId","vendorId","vendorEmail","status","timestamp","Date","toISOString","log","unshift","pop","saveActivityLog","notifications","buildInspectionNotificationEntries","entries","buyerName","userName","vendorName","vendor","owner","preferredLabel","preferredDate","preferredTime","confirmedLabel","confirmedDate","confirmedTime","proposedLabel","proposedDate","proposedTime","pushForVendor","message","push","recipientId","recipientEmail","roles","type","priority","metadata","pushForBuyer","buyerEmail","userEmail","trim","arguments","undefined","payloads","entry","_entry$metadata","source","data","notificationService","createInspectionNotifications","then","result","success","console","warn","catch","error","persistInspectionNotifications","deriveActionFromStatus","previous","next","updates","toLowerCase","matchesVendor","getInspectionAnalytics","role","relevant","req","matchesBuyer","analytics","pendingStatuses","forEach","includes","lastSevenDays","Array","from","_","idx","setDate","getDate","dateKey","dailyCount","activityFilter","isoDate","count","createInspectionRequest","async","existing","newRequest","now","requestData","createdAt","viewingRequest","key","newValue","listInspectionRequestsByVendor","filtered","r","sort","a","b","updateInspectionRequest","all","nextRecord","updated","updatedAt","find","isOpen","onClose","amount","onPaymentSuccess","onPaymentError","paymentStep","setPaymentStep","useState","isProcessing","setIsProcessing","paymentComplete","setPaymentComplete","paymentMethod","setPaymentMethod","formData","setFormData","email","cardNumber","expiry","cvv","cardName","accountName","bankName","transferReference","useEffect","formatCardNumber","value","replace","match","formatExpiry","cleaned","handleInputChange","e","target","prev","handleClose","confirm","onClick","FaTimes","size","onSubmit","preventDefault","alert","setTimeout","paymentRef","reference","method","toLocaleString","FaCreditCard","onChange","placeholder","required","maxLength","FaLock","FaCheckCircle","_paymentData$amount","property","onSuccess","user","useAuth","loading","setLoading","setError","successMessage","setSuccessMessage","showPaymentModal","setShowPaymentModal","paymentData","setPaymentData","submitting","setSubmitting","config","setConfig","configLoading","setConfigLoading","formValues","setFormValues","propertyName","propertyUrl","propertyLocation","preferredBadgeColor","derivedLocation","location","address","city","state","Boolean","generatePropertyUrl","shareUrl","listingUrl","baseUrl","propertyId","_id","response","fetch","getApiUrl","json","ok","Error","_data$data","verificationBadgeColor","err","verificationFee","currency","supportedDocuments","processingTime","fetchConfig","useMemo","badgePreviewColor","FaSpinner","FaShieldAlt","uid","token","hasToken","tokenLength","applicationData","paymentReference","paymentAmount","paymentStatus","authenticatedFetch","headers","body","errorData","_result$data","verificationStatus","requestedAt","applicationId","FaExclamationTriangle","readOnly","rows","style","backgroundColor","disabled","SimplePaymentModal","getVerificationStatus","isVerificationRequested","isVerificationApproved","VendorInspectionRequests","setRequests","setAnalytics","showResponseModal","setShowResponseModal","selectedRequest","setSelectedRequest","responseType","setResponseType","setProposedDate","setProposedTime","vendorMessage","setVendorMessage","loadInspectionRequests","handleAnalyticsUpdate","event","addEventListener","removeEventListener","toast","handleRespondToRequest","initialType","getStatusBadge","badges","color","text","badge","formatDateTime","dateObj","toLocaleDateString","toLocaleTimeString","hour","minute","FaCalendar","FaMapMarkerAlt","projectLocation","FaUser","FaCalendarAlt","buyerMessage","FaPhone","buyerPhone","FaEnvelope","handleAcceptBuyerReschedule","cancelledAt","handleVendorCancel","checked","NotificationDropdown","unreadCount","markAsRead","markAllAsRead","archiveNotification","deleteNotification","refreshNotifications","useNotifications","navigate","useNavigate","setIsOpen","actionLoading","setActionLoading","dropdownRef","useRef","showRatingModal","setShowRatingModal","ratingTarget","setRatingTarget","ratingStars","setRatingStars","ratingComment","setRatingComment","handleClickOutside","current","contains","document","handleOpenInspection","notification","_notification$data3","_notification$data4","_notification$data","_notification$data$re","_notification$data2","_user$roles","recipientRoles","getInspectionTargetPath","params","URLSearchParams","set","toString","getNotificationIcon","iconClass","FaTimesCircle","FaInfoCircle","getPriorityColor","formatTimeAgo","dateString","diffInSeconds","Math","floor","ref","handleBellClick","FaBell","FaCheck","_notification$type","_notification$data5","startsWith","starterId","initialMessage","res","chatId","handleSendMessage","FaComments","rateeId","roleOfRatee","transactionId","handleRate","FaStar","notificationId","handleMarkAsRead","handleArchive","FaArchive","handleDelete","FaTrash","star","raterId","stars","comment","ChartJS","register","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","properties","labels","p","datasets","views","borderColor","borderWidth","tension","pointRadius","pointBackgroundColor","Line","options","responsive","maintainAspectRatio","plugins","legend","display","tooltip","callbacks","context","parsed","y","scales","beginAtZero","ticks","precision","BarElement","inquiries","toFixed","Bar","max","callback","val","VendorDashboard","_user$vendorData","_user$vendorData2","_user$vendorData3","_analytics$totalViews","_user$vendorData4","_user$vendorData5","_user$vendorData6","_user$vendorData7","deleteProperty","useProperty","activeTab","setActiveTab","isAgent","vendorData","vendorCategory","setProperties","propertiesLoading","setPropertiesLoading","totalProperties","activeListings","pendingListings","soldProperties","totalViews","totalInquiries","totalRevenue","averagePrice","conversionRate","monthlyViews","monthlyInquiries","setInquiries","viewingRequests","setViewingRequests","showProposalModal","setShowProposalModal","proposalDate","setProposalDate","proposalTime","setProposalTime","selectedRequestId","setSelectedRequestId","showVerificationModal","setShowVerificationModal","selectedProperty","setSelectedProperty","verificationRequests","setVerificationRequests","verificationRequestsLoading","setVerificationRequestsLoading","fetchVendorProperties","useCallback","allProps","userLocalProps","prop","matchesId","ownerId","matchesEmail","ownerEmail","apiProps","isArray","existingIndex","findIndex","dateA","normalizedProps","_images$find","_images$","_property$updatedAt","_property$updatedAt$t","_property$updatedAt$t2","_property$updatedAt$t3","_property$updatedAt$t4","details","images","primaryImage","img","isPrimary","url","displayStatus","approvalStatus","image","bedrooms","bathrooms","area","sqft","inquiriesCount","favorites","favoritesCount","dateListed","lastUpdated","toDate","call","fetchVerificationRequests","summary","_summary$totalPropert","_summary$activeListin","_summary$pendingListi","_summary$soldProperti","_summary$totalViews","_summary$totalInquiri","_summary$totalRevenue","_summary$conversionRa","fetchVendorAnalytics","stored","getStatusColor","verificationStatusByProperty","statusMap","_ref2","_request$propertyId","_request$property","_request$property2","_request$property3","propertyKey","propertyRef","isVerified","candidateKeys","numericId","referenceCode","badgeClass","show","photoURL","avatar","src","alt","getUserInitials","displayName","n","firstName","lastName","_user$firstName","_user$lastName","_user$email","_user$email$","marginTop","agentLocation","vendorCode","navigator","clipboard","writeText","scrollTo","top","behavior","FaEye","FaChartLine","icon","tab","FaHeart","businessName","experience","phone","FaPlus","PropertyCardSkeleton","_property$details","_property$details2","_property$details3","buttonText","buttonClass","getVerificationButtonClass","isDisabled","savedToFirestore","propertyToEdit","FaEdit","handleDeleteProperty","price","FaBed","FaBath","FaRulerCombined","handleVerificationCtaClick","inquiry","vendorProposalDate","vendorProposalTime","VendorViewsChart","VendorConversionChart","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","PropertyVerification","reload","getAuthToken","readToken","getAuthHeaders","Authorization","hasAuthToken","requestOptions","skeletons","i"],"sourceRoot":""}