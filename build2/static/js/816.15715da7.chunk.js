"use strict";(self.webpackChunkreal_estate_marketplace=self.webpackChunkreal_estate_marketplace||[]).push([[816],{2816:(e,s,t)=>{t.r(s),t.d(s,{default:()=>c});var r=t(5043),a=t(3216),l=t(5475),n=t(5016),i=t(5369),d=t(3768),o=t(579);const c=()=>{const{user:e}=(0,n.As)(),s=(0,a.Zp)(),[t,c]=(0,r.useState)([]),[x,m]=(0,r.useState)(!0),[p,u]=(0,r.useState)("all"),[g,h]=(0,r.useState)("date"),[j,v]=(0,r.useState)(!1),[y,b]=(0,r.useState)(null),[N,f]=(0,r.useState)(""),[w,S]=(0,r.useState)(""),[q,C]=(0,r.useState)("");(0,r.useEffect)(()=>{if(!e||!e.id)return void m(!1);const s=()=>{try{const s=JSON.parse(localStorage.getItem("inquiries")||"[]"),t=s.filter(s=>s.userId===e.id||s.buyerId===e.id).map(e=>({id:e.id,property:{id:e.propertyId,title:e.propertyTitle,location:e.propertyLocation,price:e.propertyPrice,bedrooms:e.propertyBedrooms,bathrooms:e.propertyBathrooms,area:e.propertyArea,image:e.propertyImage||"https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=500&h=300&fit=crop"},message:e.message,status:"new"===e.status||"contacted"===e.status?"pending":"responded"===e.status?"responded":"closed"===e.status?"closed":"pending",date:e.createdAt||e.date,agent:{name:e.vendorName||"Property Vendor",phone:e.vendorPhone||"+234-XXX-XXXX",email:e.vendorEmail||"",avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(e.vendorName||"Vendor")}&background=random`},responses:e.responses||[]}));t.sort((e,s)=>new Date(s.date)-new Date(e.date)),c(t),m(!1)}catch(s){console.error("Error loading inquiries:",s),c([]),m(!1)}};s();const t=()=>{s()};return window.addEventListener("inquiriesUpdated",t),window.addEventListener("storage",e=>{"inquiries"===e.key&&s()}),()=>{window.removeEventListener("inquiriesUpdated",t)}},[e]);const P=e=>{switch(e){case"pending":case"new":case"contacted":return"bg-yellow-100 text-yellow-800";case"responded":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},A=e=>{switch(e){case"pending":return(0,o.jsx)(i.w_X,{className:"text-yellow-600"});case"responded":return(0,o.jsx)(i.w1Z,{className:"text-blue-600"});case"closed":return(0,o.jsx)(i.A7C,{className:"text-gray-600"});default:return(0,o.jsx)(i.gZZ,{className:"text-gray-600"})}},k=e=>{switch(e){case"pending":case"new":case"contacted":return"Awaiting Response";case"responded":return"Responded";case"closed":return"Closed";default:return"Unknown"}},I=t.filter(e=>{var s;if("all"===p)return!0;return(null===(s={pending:["pending","new","contacted"],responded:["responded"],closed:["closed"]}[p])||void 0===s?void 0:s.includes(e.status))||e.status===p}).sort((e,s)=>"date"===g?new Date(s.date)-new Date(e.date):0),X=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return x?(0,o.jsx)("div",{className:"p-6",children:(0,o.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-brand-blue"})})}):(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Inquiries"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Track your property inquiries and communicate with agents"})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,o.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,o.jsx)(i.gZZ,{className:"text-brand-blue text-xl"})}),(0,o.jsxs)("div",{className:"ml-4",children:[(0,o.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Inquiries"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),(0,o.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"p-3 bg-yellow-100 rounded-lg",children:(0,o.jsx)(i.w_X,{className:"text-yellow-600 text-xl"})}),(0,o.jsxs)("div",{className:"ml-4",children:[(0,o.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(e=>"pending"===e.status).length})]})]})}),(0,o.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,o.jsx)(i.w1Z,{className:"text-green-600 text-xl"})}),(0,o.jsxs)("div",{className:"ml-4",children:[(0,o.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Responded"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(e=>"responded"===e.status).length})]})]})}),(0,o.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"p-3 bg-gray-100 rounded-lg",children:(0,o.jsx)(i.A7C,{className:"text-gray-600 text-xl"})}),(0,o.jsxs)("div",{className:"ml-4",children:[(0,o.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Closed"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(e=>"closed"===e.status).length})]})]})})]}),(0,o.jsx)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:(0,o.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,o.jsx)("div",{className:"flex items-center space-x-4",children:(0,o.jsxs)("select",{value:p,onChange:e=>u(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-brand-blue focus:border-transparent",children:[(0,o.jsx)("option",{value:"all",children:"All Inquiries"}),(0,o.jsx)("option",{value:"pending",children:"Pending"}),(0,o.jsx)("option",{value:"responded",children:"Responded"}),(0,o.jsx)("option",{value:"closed",children:"Closed"})]})}),(0,o.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",I.length," of ",t.length," inquiries"]})]})}),0===I.length?(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[(0,o.jsx)(i.gZZ,{className:"text-gray-300 text-6xl mx-auto mb-4"}),(0,o.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Inquiries Found"}),(0,o.jsx)("p",{className:"text-gray-600 mb-6",children:"all"===p?"You haven't made any inquiries yet. Start browsing properties to ask questions!":`No ${p} inquiries found.`}),(0,o.jsx)(l.N_,{to:"/properties",className:"btn-primary inline-flex items-center",children:"Browse Properties"})]}):(0,o.jsx)("div",{className:"space-y-6",children:I.map(t=>{var r,a;return(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,o.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,o.jsxs)("div",{className:"flex items-start justify-between",children:[(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,o.jsxs)("span",{className:`tag ${P(t.status)} flex items-center space-x-1`,children:[A(t.status),(0,o.jsx)("span",{children:k(t.status)})]}),(0,o.jsx)("span",{className:"text-sm text-gray-500",children:X(t.date)})]}),(0,o.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t.property.title}),(0,o.jsx)("p",{className:"text-gray-600 mb-4",children:t.message})]}),(0,o.jsx)("div",{className:"flex space-x-2",children:(0,o.jsxs)(l.N_,{to:`/property/${t.property.id}`,className:"btn-outline py-2 px-4",children:[(0,o.jsx)(i.Ny1,{className:"inline mr-1"}),"View Property"]})})]})}),(0,o.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,o.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,o.jsx)("img",{src:t.property.image,alt:t.property.title,className:"w-20 h-20 object-cover rounded-lg"}),(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)(i.vq8,{}),(0,o.jsx)("span",{children:t.property.location})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)(i.TiC,{}),(0,o.jsxs)("span",{children:[t.property.bedrooms," Bedrooms"]})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)(i.F6e,{}),(0,o.jsxs)("span",{children:[t.property.bathrooms," Bathrooms"]})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,o.jsx)(i.c7S,{}),(0,o.jsxs)("span",{children:[t.property.area,"m\xb2"]})]})]}),(0,o.jsx)("div",{className:"mt-2",children:(0,o.jsxs)("span",{className:"text-xl font-bold text-gray-900",children:["\u20a6",((null===(r=t.property)||void 0===r?void 0:r.price)||0).toLocaleString()]})})]})]})}),(0,o.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsx)("img",{src:t.agent.avatar,alt:t.agent.name,className:"w-12 h-12 rounded-full object-cover"}),(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)("h4",{className:"font-semibold text-gray-900",children:t.agent.name}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"Property Agent"})]}),(0,o.jsxs)("div",{className:"flex space-x-2",children:[(0,o.jsxs)("a",{href:`tel:${t.agent.phone}`,className:"bg-gray-100 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-200 transition-colors",children:[(0,o.jsx)(i.Cab,{className:"inline mr-1"}),"Call"]}),(0,o.jsxs)("a",{href:`mailto:${t.agent.email}`,className:"bg-blue-100 text-blue-700 py-2 px-4 rounded-lg hover:bg-blue-200 transition-colors",children:[(0,o.jsx)(i.maD,{className:"inline mr-1"}),"Email"]})]}),(0,o.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,o.jsxs)("div",{className:"flex space-x-2",children:[(0,o.jsxs)("button",{onClick:()=>(t=>{if(!e)return d.Ay.error("Please login to purchase properties"),void s("/");s(`/escrow/create?propertyId=${t.id}&type=purchase`),d.Ay.success("Redirecting to secure purchase process...")})(t.property),className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center",children:[(0,o.jsx)(i.AsH,{className:"mr-2"}),"Buy Property - \u20a6",((null===(a=t.property)||void 0===a?void 0:a.price)||0).toLocaleString()]}),(0,o.jsxs)("button",{onClick:()=>(t=>{if(!e)return d.Ay.error("Please login to schedule viewings"),void s("/");b(t),v(!0)})(t.property),className:"flex-1 bg-orange-600 text-white py-2 px-4 rounded-lg hover:bg-orange-700 transition-colors flex items-center justify-center",children:[(0,o.jsx)(i.itz,{className:"mr-2"}),"Schedule Viewing"]}),(0,o.jsxs)(l.N_,{to:`/property/${t.property.id}`,className:"flex-1 bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center",children:[(0,o.jsx)(i.Ny1,{className:"mr-2"}),"View Details"]})]})})]})}),t.responses.length>0&&(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"Conversation"}),(0,o.jsx)("div",{className:"space-y-4",children:t.responses.map(e=>(0,o.jsxs)("div",{className:"p-4 rounded-lg "+("user"===e.from?"bg-blue-50 ml-8":"bg-gray-50 mr-8"),children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,o.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"user"===e.from?"You":t.agent.name}),(0,o.jsx)("span",{className:"text-xs text-gray-500",children:X(e.date)})]}),(0,o.jsx)("p",{className:"text-gray-800",children:e.message})]},e.id))})]})]},t.id)})}),j&&y&&(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[(0,o.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Schedule Property Viewing"}),(0,o.jsx)("p",{className:"text-gray-600 mb-4",children:y.title}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Date"}),(0,o.jsx)("input",{type:"date",value:N,onChange:e=>f(e.target.value),min:(new Date).toISOString().split("T")[0],className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Time"}),(0,o.jsxs)("select",{value:w,onChange:e=>S(e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,o.jsx)("option",{value:"",children:"Select Time"}),(0,o.jsx)("option",{value:"09:00",children:"9:00 AM"}),(0,o.jsx)("option",{value:"10:00",children:"10:00 AM"}),(0,o.jsx)("option",{value:"11:00",children:"11:00 AM"}),(0,o.jsx)("option",{value:"12:00",children:"12:00 PM"}),(0,o.jsx)("option",{value:"13:00",children:"1:00 PM"}),(0,o.jsx)("option",{value:"14:00",children:"2:00 PM"}),(0,o.jsx)("option",{value:"15:00",children:"3:00 PM"}),(0,o.jsx)("option",{value:"16:00",children:"4:00 PM"}),(0,o.jsx)("option",{value:"17:00",children:"5:00 PM"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Message (Optional)"}),(0,o.jsx)("textarea",{value:q,onChange:e=>C(e.target.value),placeholder:"Any specific requirements or questions...",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]})]}),(0,o.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,o.jsx)("button",{onClick:()=>{v(!1),b(null),f(""),S(""),C("")},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,o.jsx)("button",{onClick:()=>{if(!N||!w)return void d.Ay.error("Please select both date and time");if(!e||!e.id||!e.firstName||!e.lastName||!e.email)return void d.Ay.error("User information incomplete. Please refresh and try again.");const s={id:`viewing-${Date.now()}`,propertyId:y.id,propertyTitle:y.title,propertyLocation:y.location,userId:null===e||void 0===e?void 0:e.id,userName:`${(null===e||void 0===e?void 0:e.firstName)||""} ${(null===e||void 0===e?void 0:e.lastName)||""}`,userEmail:(null===e||void 0===e?void 0:e.email)||"",status:"pending_vendor_confirmation",requestedAt:(new Date).toISOString(),preferredDate:N,preferredTime:w,message:q,agentContact:y.agent||{name:"Property Agent",phone:"+234-XXX-XXXX",email:"agent@example.com"},vendorResponse:null,confirmedDate:null,confirmedTime:null},t=JSON.parse(localStorage.getItem("viewingRequests")||"[]");t.push(s),localStorage.setItem("viewingRequests",JSON.stringify(t)),window.dispatchEvent(new CustomEvent("viewingsUpdated",{detail:{viewingRequest:s,action:"created"}})),window.dispatchEvent(new StorageEvent("storage",{key:"viewingRequests",newValue:JSON.stringify(t)})),d.Ay.success(`Viewing request sent for "${y.title}"! The vendor will confirm or suggest an alternative time.`),v(!1),b(null),f(""),S(""),C("")},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Request Viewing"})]})]})})]})}}}]);
//# sourceMappingURL=816.15715da7.chunk.js.map