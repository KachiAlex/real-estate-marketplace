"use strict";(self.webpackChunkreal_estate_marketplace=self.webpackChunkreal_estate_marketplace||[]).push([[365],{325:(e,t,s)=>{s.d(t,{A:()=>a});const a=new class{async uploadFile(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{var a,r,l,o,i;const n=new FormData;n.append("file",e),n.append("uploadType","generic"),n.append("metadata",JSON.stringify({path:t,...s}));const d=await fetch("/api/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")||""}`},body:n}),c=await d.json();if(!d.ok||null===c||void 0===c||!c.success)throw new Error((null===c||void 0===c?void 0:c.message)||"Upload failed");return{success:!0,url:null===(a=c.data)||void 0===a?void 0:a.url,path:(null===(r=c.data)||void 0===r?void 0:r.publicId)||t,name:(null===(l=c.data)||void 0===l?void 0:l.originalName)||e.name,size:(null===(o=c.data)||void 0===o?void 0:o.size)||e.size,type:(null===(i=c.data)||void 0===i?void 0:i.format)||e.type}}catch(n){return console.error("Error uploading file:",n),{success:!1,error:n.message||"Upload failed"}}}async uploadMultipleFiles(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{var a,r,l;const o=new FormData;e.forEach(e=>o.append("files",e)),o.append("uploadType","multiple"),o.append("metadata",JSON.stringify({basePath:t,...s}));const i=await fetch("/api/upload/multiple",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")||""}`},body:o}),n=await i.json();if(!i.ok||null===n||void 0===n||!n.success)throw new Error((null===n||void 0===n?void 0:n.message)||"Upload failed");return{success:!0,successful:(null===(a=n.data)||void 0===a?void 0:a.successful)||[],failed:(null===(r=n.data)||void 0===r?void 0:r.failed)||[],total:(null===(l=n.data)||void 0===l?void 0:l.total)||e.length}}catch(o){return console.error("Error uploading multiple files:",o),{success:!1,error:o.message||"Upload failed"}}}async moveFile(e,t){return{success:!0,url:null,path:t||e,name:(t||e||"").split("/").pop()}}async uploadPropertyImages(e,t,s){try{var a,r,l;const o=new FormData;e.forEach(e=>{o.append("files",e)}),o.append("uploadType","property_images"),o.append("metadata",JSON.stringify({propertyId:t,userId:s}));const i=await fetch("/api/upload/multiple",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")||""}`},body:o}),n=await i.json();if(!i.ok||null===n||void 0===n||!n.success)throw new Error((null===n||void 0===n?void 0:n.message)||"Upload failed");return{success:!0,successful:(null===(a=n.data)||void 0===a?void 0:a.successful)||[],failed:(null===(r=n.data)||void 0===r?void 0:r.failed)||[],total:(null===(l=n.data)||void 0===l?void 0:l.total)||e.length}}catch(o){return console.error("Error uploading property images:",o),{success:!1,error:o.message||"Upload failed"}}}async uploadUserAvatar(e,t){if(!t)return{success:!1,error:"User ID is required"};const s=`users/${t}/avatar/${`avatar_${t}_${Date.now()}.${e.name.split(".").pop()}`}`,a=this.validateFile(e,["image/jpeg","image/jpg","image/png","image/gif","image/webp"],5242880);if(!a.valid)return{success:!1,error:a.errors.join(", ")};const r=await this.uploadFile(e,s,{userId:t});if(r.success){const e={userId:t,avatarUrl:r.url,uploadDate:(new Date).toISOString(),fileName:r.name};localStorage.setItem(`user_avatar_${t}`,JSON.stringify(e))}return r}getFallbackAvatar(e){const t=`https://ui-avatars.com/api/?name=${encodeURIComponent(e)}&background=random&size=200`,s={userId:e,avatarUrl:t,uploadDate:(new Date).toISOString(),fileName:"fallback_avatar",isFallback:!0};return localStorage.setItem(`user_avatar_${e}`,JSON.stringify(s)),{success:!0,url:t,path:`users/${e}/avatar/fallback_${Date.now()}`,name:"fallback_avatar",size:0,type:"image/png",isFallback:!0}}async uploadEscrowDocument(e,t,s,a){try{var r,l,o,i,n;const d=new FormData;d.append("file",e),d.append("uploadType","escrow_document"),d.append("metadata",JSON.stringify({escrowId:t,documentType:s,userId:a}));const c=await fetch("/api/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")||""}`},body:d}),m=await c.json();if(!c.ok||null===m||void 0===m||!m.success)throw new Error((null===m||void 0===m?void 0:m.message)||"Upload failed");return{success:!0,url:null===(r=m.data)||void 0===r?void 0:r.url,path:null===(l=m.data)||void 0===l?void 0:l.publicId,name:null===(o=m.data)||void 0===o?void 0:o.originalName,size:null===(i=m.data)||void 0===i?void 0:i.size,type:null===(n=m.data)||void 0===n?void 0:n.format}}catch(d){return console.error("Error uploading escrow document:",d),{success:!1,error:d.message||"Upload failed"}}}async deleteFile(){return{success:!1,error:"Delete is not supported in this build."}}async getFileMetadata(){return{success:!1,error:"Metadata lookup is not supported in this build."}}async listFiles(){return{success:!1,error:"Listing files is not supported in this build."}}async getPropertyImages(){return{success:!1,error:"Listing images is not supported in this build."}}async getEscrowDocuments(){return{success:!1,error:"Listing documents is not supported in this build."}}validateFile(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5242880;const a=[];return t.length>0&&!t.includes(e.type)&&a.push(`File type ${e.type} is not allowed. Allowed types: ${t.join(", ")}`),e.size>s&&a.push(`File size ${(e.size/1024/1024).toFixed(2)}MB exceeds maximum allowed size of ${(s/1024/1024).toFixed(2)}MB`),{valid:0===a.length,errors:a}}formatFileSize(e){if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]}}},365:(e,t,s)=>{s.r(t),s.d(t,{default:()=>k});var a=s(5043),r=s(3216),l=s(4345),o=s(5016),i=s(6896),n=s(5369),d=s(325),c=s(3768),m=s(579);const u=e=>{let{propertyId:t,onFilesChange:s,initialFiles:r=[],maxFiles:l=10,maxSize:i=10485760,allowedTypes:u=[],type:p="image",disabled:x=!1,className:g=""}=e;const[h,b]=(0,a.useState)(r),[y,f]=(0,a.useState)(new Map),[v,j]=(0,a.useState)(!1),[N,w]=(0,a.useState)(null),{user:S}=(0,o.As)(),C=(()=>{const e={image:{icon:n.HVe,accept:"image/jpeg,image/png,image/webp,image/gif",allowedTypes:["image/jpeg","image/png","image/webp","image/gif"],maxSize:10485760,placeholder:"Click to upload or drag and drop images",subtext:"PNG, JPG, WEBP, GIF up to 10MB each"},video:{icon:n.gSK,accept:"video/mp4,video/webm,video/ogg,video/quicktime",allowedTypes:["video/mp4","video/webm","video/ogg","video/quicktime"],maxSize:104857600,placeholder:"Click to upload or drag and drop videos",subtext:"MP4, WEBM, OGG, MOV up to 100MB each"},document:{icon:n.Gp9,accept:".pdf,.doc,.docx,.txt,.rtf,.odt",allowedTypes:["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","application/rtf","application/vnd.oasis.opendocument.text"],maxSize:26214400,placeholder:"Click to upload or drag and drop documents",subtext:"PDF, DOC, DOCX, TXT, RTF up to 25MB each"}};return e[p]||e.image})(),P=u.length>0?u:C.allowedTypes,A=i||C.maxSize,k=(0,a.useCallback)(async e=>{if(!S||x)return;const a=Array.from(e);if(h.length+a.length>l)return void c.Ay.error(`Maximum ${l} ${p}s allowed`);const r=[],o=[];if(a.forEach(e=>{const t=d.A.validateFile(e,P,A);t.valid?r.push(e):o.push({file:e,errors:t.errors})}),o.length>0&&o.forEach(e=>{let{file:t,errors:s}=e;s.forEach(e=>{c.Ay.error(`${t.name}: ${e}`)})}),0!==r.length)for(const l of r){const e=`${Date.now()}_${Math.random()}`;f(t=>new Map(t).set(e,{file:l,progress:0,status:"uploading"}));try{const a=await _(l,t||"temp",S.uid,e);if(!a.success)throw new Error(a.error||"Upload failed");{const t={id:Date.now()+Math.random(),url:a.url,name:a.name,size:a.size,path:a.path,type:a.type,isUploaded:!a.isLocal};b(e=>[...e,t]),s&&s([...h,t]),f(t=>{const s=new Map(t);return s.set(e,{...s.get(e),progress:100,status:"completed"}),s}),setTimeout(()=>{f(t=>{const s=new Map(t);return s.delete(e),s})},2e3),c.Ay.success(`${l.name} uploaded successfully!`)}}catch(i){console.error("File upload error:",i),f(t=>{const s=new Map(t);return s.set(e,{...s.get(e),status:"error"}),s}),c.Ay.error(`Failed to upload ${l.name}`),setTimeout(()=>{f(t=>{const s=new Map(t);return s.delete(e),s})},3e3)}}},[S,x,h,l,p,P,A,t,s]),_=async(e,t,s,a)=>{try{const t=await d.A.uploadFile(e,s);if(t.success)return f(e=>{const t=new Map(e);return t.set(a,{...t.get(a),progress:100}),t}),{success:!0,url:t.url||t.path,path:t.path,name:e.name,size:e.size,type:e.type,isLocal:!1};{const t=URL.createObjectURL(e);return console.warn(`Falling back to local ${p} storage for:`,e.name),{success:!0,url:t,path:`local-files/${a}`,name:e.name,size:e.size,type:e.type,isLocal:!0}}}catch(r){if(console.error("Error uploading file:",r),"image"===p||"document"===p||"video"===p){const t=URL.createObjectURL(e);console.warn(`Falling back to local ${p} storage for:`,e.name);let s="local-files";return"document"===p&&(s="local-documents"),"video"===p&&(s="local-videos"),"image"===p&&(s="local-images"),{success:!0,url:t,path:`${s}/${a}`,name:e.name,size:e.size,type:e.type,isLocal:!0}}return{success:!1,error:r.message}}},E=(e,t)=>"image"===p?(0,m.jsx)("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:(0,m.jsx)("img",{src:e.url,alt:`${p} ${t+1}`,className:"w-full h-full object-cover"})}):"video"===p?(0,m.jsxs)("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden relative",children:[(0,m.jsx)("video",{src:e.url,className:"w-full h-full object-cover",controls:!1}),(0,m.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-30",children:(0,m.jsx)(n.gSK,{className:"text-white text-2xl"})})]}):(0,m.jsx)("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden flex items-center justify-center",children:(0,m.jsx)(n.Gp9,{className:"text-gray-400 text-3xl"})});return(0,m.jsxs)("div",{className:`enhanced-file-upload ${g}`,children:[(0,m.jsxs)("div",{className:`\n          border-2 border-dashed rounded-lg p-6 text-center transition-all duration-200\n          ${x?"border-gray-200 bg-gray-50 cursor-not-allowed":v?"border-brand-blue bg-blue-50":"border-gray-300 hover:border-brand-blue cursor-pointer"}\n        `,onDragOver:e=>{e.preventDefault(),j(!0)},onDragLeave:e=>{e.preventDefault(),j(!1)},onDrop:e=>{e.preventDefault(),j(!1);const t=e.dataTransfer.files;t.length>0&&k(t)},onClick:()=>!x&&document.getElementById(`${p}-upload`).click(),children:[(0,m.jsx)("input",{id:`${p}-upload`,type:"file",multiple:!0,accept:C.accept,onChange:e=>{const t=e.target.files;t.length>0&&k(t),e.target.value=""},className:"hidden",disabled:x}),(0,m.jsxs)("div",{className:"space-y-2",children:[(0,m.jsx)(C.icon,{className:"mx-auto text-3xl "+(x?"text-gray-300":"text-gray-400")}),(0,m.jsxs)("div",{className:"space-y-1",children:[(0,m.jsx)("p",{className:"text-sm font-medium text-gray-700",children:x?`${p} upload disabled`:C.placeholder}),(0,m.jsx)("p",{className:"text-xs text-gray-500",children:C.subtext}),(0,m.jsxs)("p",{className:"text-xs text-gray-500",children:[h.length,"/",l," ",p,"s uploaded"]})]})]})]}),(()=>{const e=Array.from(y.values());return 0===e.length?null:(0,m.jsxs)("div",{className:"mt-4",children:[(0,m.jsxs)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:["Uploading (",e.length,")"]}),(0,m.jsx)("div",{className:"space-y-3",children:e.map((e,t)=>(0,m.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,m.jsx)("div",{className:"flex-shrink-0",children:"completed"===e.status?(0,m.jsx)(n.CMH,{className:"text-green-500"}):"error"===e.status?(0,m.jsx)(n.BS8,{className:"text-red-500"}):(0,m.jsx)(C.icon,{className:"text-blue-500"})}),(0,m.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,m.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.file.name}),(0,m.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:(0,m.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 "+("completed"===e.status?"bg-green-500":"error"===e.status?"bg-red-500":"bg-blue-500"),style:{width:`${e.progress}%`}})}),(0,m.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"completed"===e.status?"Upload complete":"error"===e.status?"Upload failed":`${Math.round(e.progress)}% uploaded`})]})]},`uploading_${t}`))})]})})(),h.length>0&&(0,m.jsxs)("div",{className:"mt-6",children:[(0,m.jsxs)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:[p.charAt(0).toUpperCase()+p.slice(1),"s (",h.length,")"]}),(0,m.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:h.map((e,t)=>(0,m.jsxs)("div",{className:"relative group",children:[E(e,t),(0,m.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 rounded-lg flex items-center justify-center",children:(0,m.jsxs)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex space-x-2",children:[(0,m.jsx)("button",{onClick:()=>w(t),className:"p-2 bg-white bg-opacity-90 rounded-full hover:bg-opacity-100 transition-all",title:"Preview",children:(0,m.jsx)(n.Ny1,{className:"text-gray-700 text-sm"})}),!x&&(0,m.jsx)("button",{onClick:()=>(async e=>{if(x)return;const t=h[e];if(t.isUploaded&&t.path)try{await d.A.deleteFile(t.path)}catch(r){console.error("Error deleting file from storage:",r)}const a=h.filter((t,s)=>s!==e);b(a),s&&s(a),c.Ay.success("File removed successfully")})(t),className:"p-2 bg-red-500 bg-opacity-90 rounded-full hover:bg-opacity-100 transition-all",title:"Remove",children:(0,m.jsx)(n.QCr,{className:"text-white text-sm"})})]})}),(0,m.jsxs)("div",{className:"mt-1",children:[(0,m.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.name}),(0,m.jsx)("p",{className:"text-xs text-gray-400",children:d.A.formatFileSize(e.size)})]})]},e.id||t))})]}),(()=>{if(null===N)return null;const e=h[N];return e?(0,m.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,m.jsxs)("div",{className:"relative max-w-4xl max-h-full",children:[(0,m.jsx)("button",{onClick:()=>w(null),className:"absolute top-4 right-4 p-2 bg-white bg-opacity-90 rounded-full hover:bg-opacity-100 transition-all z-10",children:(0,m.jsx)(n.QCr,{className:"text-gray-700"})}),"image"===p?(0,m.jsx)("img",{src:e.url,alt:`${p} ${N+1}`,className:"max-w-full max-h-full object-contain rounded-lg"}):"video"===p?(0,m.jsx)("video",{src:e.url,controls:!0,className:"max-w-full max-h-full rounded-lg"}):(0,m.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-md",children:[(0,m.jsx)(n.Gp9,{className:"text-gray-400 text-6xl mx-auto mb-4"}),(0,m.jsx)("h3",{className:"text-lg font-medium text-gray-900 text-center",children:e.name}),(0,m.jsx)("p",{className:"text-sm text-gray-500 text-center mt-2",children:d.A.formatFileSize(e.size)}),(0,m.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"block mt-4 text-center text-blue-600 hover:text-blue-800",children:"Download File"})]}),(0,m.jsx)("div",{className:"absolute bottom-4 left-4 right-4 bg-black bg-opacity-50 text-white p-3 rounded-lg",children:(0,m.jsxs)("p",{className:"text-sm",children:[e.name," (",d.A.formatFileSize(e.size),")"]})})]})}):null})()]})},p=e=>{let{propertyId:t,onImagesChange:s,initialImages:r=[],maxImages:l=10,disabled:o=!1,className:i=""}=e;const[d,p]=(0,a.useState)(""),x=()=>{if(o||!d.trim())return;const e=d.trim();try{if(!(e.startsWith("http://")||e.startsWith("https://")))return void c.Ay.error("Please enter a valid http(s) URL");const t={id:Date.now()+Math.random(),url:e,name:e,size:0,path:null,isUploaded:!1},a=r||[];if(a.length>=l)return void c.Ay.error(`Maximum ${l} images allowed`);const o=[...a,t];s&&s(o),p(""),c.Ay.success("Image URL added")}catch(t){c.Ay.error("Failed to add image URL")}};return(0,m.jsxs)("div",{className:`property-image-upload ${i}`,children:[(0,m.jsx)(u,{propertyId:t,onFilesChange:s,initialFiles:r,maxFiles:l,maxSize:10485760,allowedTypes:["image/jpeg","image/png","image/webp","image/gif"],type:"image",disabled:o}),!o&&(0,m.jsxs)("div",{className:"mt-4",children:[(0,m.jsxs)("div",{className:"flex gap-3",children:[(0,m.jsx)("input",{type:"url",value:d,onChange:e=>p(e.target.value),placeholder:"Paste image URL (https://...)",className:"flex-1 px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",onKeyPress:e=>"Enter"===e.key&&x()}),(0,m.jsxs)("button",{type:"button",onClick:x,className:"px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",disabled:!d.trim(),children:[(0,m.jsx)(n.OiG,{className:"text-sm"}),"Add URL"]})]}),(0,m.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"You can add images by uploading files or pasting image URLs"})]})]})},x=e=>{let{propertyId:t,onVideosChange:s,initialVideos:a=[],maxVideos:r=5,disabled:l=!1,className:o=""}=e;return(0,m.jsx)(u,{propertyId:t,onFilesChange:s,initialFiles:a,maxFiles:r,maxSize:104857600,allowedTypes:["video/mp4","video/webm","video/ogg","video/quicktime"],type:"video",disabled:l,className:o})},g=e=>{let{propertyId:t,onDocumentsChange:s,initialDocuments:a=[],maxDocuments:r=10,disabled:l=!1,className:o=""}=e;return(0,m.jsx)(u,{propertyId:t,onFilesChange:s,initialFiles:a,maxFiles:r,maxSize:26214400,allowedTypes:["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","application/rtf","application/vnd.oasis.opendocument.text"],type:"document",disabled:l,className:o})},h=e=>{let{isOpen:t,onClose:s,onSubmit:r}=e;const[l,o]=(0,a.useState)({title:"",roiPercent:"",durationUnit:"monthly",durationValue:"",minAmount:"",payoutSchedule:"monthly",riskLevel:"medium",redemptionTerms:"",startDate:"",maturityDate:"",summary:""}),[i,d]=(0,a.useState)([]),[c,u]=(0,a.useState)({});if(!t)return null;const p=e=>{const{name:t,value:s}=e.target;o(e=>({...e,[t]:s})),c[t]&&u(e=>({...e,[t]:""}))};return(0,m.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,m.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-lg max-h-[90vh] flex flex-col relative",children:[(0,m.jsxs)("div",{className:"p-6 pb-4 border-b border-gray-100 flex-shrink-0",children:[(0,m.jsx)("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",children:(0,m.jsx)(n.QCr,{})}),(0,m.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Investment Details"}),(0,m.jsx)("p",{className:"text-sm text-gray-600",children:"Provide investment information for this collateralized property."})]}),(0,m.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Investment Title"}),(0,m.jsx)("input",{name:"title",value:l.title,onChange:p,className:"w-full px-4 py-3 border-2 rounded-xl "+(c.title?"border-red-300":"border-gray-200"),placeholder:"e.g., Greenwood Estate Fixed Income"}),c.title&&(0,m.jsx)("p",{className:"text-sm text-red-600 mt-1",children:c.title})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ROI (%)"}),(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)("input",{type:"number",name:"roiPercent",value:l.roiPercent,onChange:p,className:"w-full pl-10 pr-4 py-3 border-2 rounded-xl "+(c.roiPercent?"border-red-300":"border-gray-200"),placeholder:"12"}),(0,m.jsx)(n.lWC,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"})]}),c.roiPercent&&(0,m.jsx)("p",{className:"text-sm text-red-600 mt-1",children:c.roiPercent})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Duration"}),(0,m.jsxs)("div",{className:"flex gap-2",children:[(0,m.jsx)("input",{type:"number",name:"durationValue",value:l.durationValue,onChange:p,className:"flex-1 px-4 py-3 border-2 rounded-xl "+(c.durationValue?"border-red-300":"border-gray-200"),placeholder:"12"}),(0,m.jsxs)("select",{name:"durationUnit",value:l.durationUnit,onChange:p,className:"px-4 py-3 border-2 border-gray-200 rounded-xl min-w-[120px]",children:[(0,m.jsx)("option",{value:"monthly",children:"Monthly"}),(0,m.jsx)("option",{value:"annually",children:"Annually"})]})]}),c.durationValue&&(0,m.jsx)("p",{className:"text-sm text-red-600 mt-1",children:c.durationValue})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Minimum Amount"}),(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)("input",{type:"number",name:"minAmount",value:l.minAmount,onChange:p,className:"w-full pl-10 pr-4 py-3 border-2 rounded-xl "+(c.minAmount?"border-red-300":"border-gray-200"),placeholder:"500000"}),(0,m.jsx)(n.Tsk,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"})]}),c.minAmount&&(0,m.jsx)("p",{className:"text-sm text-red-600 mt-1",children:c.minAmount})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Payout Schedule"}),(0,m.jsxs)("select",{name:"payoutSchedule",value:l.payoutSchedule,onChange:p,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl",children:[(0,m.jsx)("option",{value:"monthly",children:"Monthly"}),(0,m.jsx)("option",{value:"quarterly",children:"Quarterly"}),(0,m.jsx)("option",{value:"annually",children:"Annually"}),(0,m.jsx)("option",{value:"end-of-term",children:"End of Term"})]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Risk Level"}),(0,m.jsxs)("select",{name:"riskLevel",value:l.riskLevel,onChange:p,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl",children:[(0,m.jsx)("option",{value:"low",children:"Low"}),(0,m.jsx)("option",{value:"medium",children:"Medium"}),(0,m.jsx)("option",{value:"high",children:"High"})]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Start Date (optional)"}),(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)("input",{type:"date",name:"startDate",value:l.startDate,onChange:p,className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl"}),(0,m.jsx)(n.bfZ,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"})]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Maturity Date (optional)"}),(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)("input",{type:"date",name:"maturityDate",value:l.maturityDate,onChange:p,className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl"}),(0,m.jsx)(n.bfZ,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"})]})]})]}),(0,m.jsxs)("div",{className:"mt-4",children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Investment Summary"}),(0,m.jsx)("textarea",{name:"summary",value:l.summary,onChange:p,rows:4,className:"w-full px-4 py-3 border-2 rounded-xl "+(c.summary?"border-red-300":"border-gray-200"),placeholder:"Briefly explain the investment, collateral structure, and terms."}),c.summary&&(0,m.jsx)("p",{className:"text-sm text-red-600 mt-1",children:c.summary})]}),(0,m.jsxs)("div",{className:"mt-6",children:[(0,m.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[(0,m.jsx)(n.t69,{className:"mr-2 text-green-600"})," Investment Documents"]}),(0,m.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-blue-400 transition-colors",children:[(0,m.jsx)("input",{type:"file",multiple:!0,accept:".pdf,.doc,.docx",id:"investment-docs",className:"hidden",onChange:e=>{const t=Array.from(e.target.files).map((e,t)=>({url:URL.createObjectURL(e),name:e.name,size:e.size,type:e.type}));d(e=>[...e,...t])}}),(0,m.jsxs)("label",{htmlFor:"investment-docs",className:"cursor-pointer",children:[(0,m.jsx)(n.HVe,{className:"mx-auto text-3xl text-gray-400 mb-2"}),(0,m.jsx)("p",{className:"text-sm text-gray-600",children:"Click to upload investment documents"})]})]}),i.length>0&&(0,m.jsx)("div",{className:"mt-3 space-y-2",children:i.map((e,t)=>(0,m.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[(0,m.jsx)("span",{className:"text-sm text-gray-700 truncate",children:e.name}),(0,m.jsx)("button",{type:"button",onClick:()=>(e=>{d(t=>t.filter((t,s)=>s!==e))})(t),className:"text-red-500 hover:text-red-700",children:(0,m.jsx)(n.QCr,{})})]},t))})]})]}),(0,m.jsxs)("div",{className:"p-6 pt-4 border-t border-gray-100 flex justify-end gap-3 flex-shrink-0",children:[(0,m.jsx)("button",{onClick:s,className:"px-6 py-3 border-2 border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,m.jsx)("button",{onClick:()=>{const e=(()=>{const e={};return l.title||(e.title="Investment title is required"),l.roiPercent||(e.roiPercent="ROI is required"),l.durationValue||(e.durationValue="Duration is required"),l.minAmount||(e.minAmount="Minimum amount is required"),l.summary||(e.summary="Summary is required"),e})();Object.keys(e).length?u(e):r({investment:{title:l.title,roiPercent:Number(l.roiPercent),durationUnit:l.durationUnit,durationValue:Number(l.durationValue),minAmount:Number(l.minAmount),payoutSchedule:l.payoutSchedule,riskLevel:l.riskLevel,redemptionTerms:l.redemptionTerms,startDate:l.startDate||null,maturityDate:l.maturityDate||null,summary:l.summary},investmentDocuments:i})},className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all",children:"Save & Publish"})]})]})})},b=e=>{let{isAgent:t,isPropertyOwner:s,isListingAsAgent:r,setIsListingAsAgent:l,attestationLetter:o,setAttestationLetter:i,documentStatus:d,onAttestationUpload:c,errors:u}=e;const[p,x]=(0,a.useState)(!1),g=e=>{e&&"application/pdf"===e.type?(i(e),c(e)):alert("Please upload a PDF file for the attestation letter.")},h=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?x(!0):"dragleave"===e.type&&x(!1)};return(0,m.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[(0,m.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,m.jsx)(n.x$1,{className:"mr-2"}),"Property Listing Type"]}),(0,m.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,m.jsx)("div",{className:"flex items-center space-x-4",children:(0,m.jsxs)("label",{className:"flex items-center",children:[(0,m.jsx)("input",{type:"radio",name:"listingType",value:"owner",checked:!r,onChange:()=>l(!1),className:"mr-2"}),(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)(n.ymh,{className:"mr-2 text-blue-500"}),(0,m.jsx)("span",{className:"font-medium",children:"I am the property owner"})]})]})}),(0,m.jsx)("div",{className:"flex items-center space-x-4",children:(0,m.jsxs)("label",{className:"flex items-center",children:[(0,m.jsx)("input",{type:"radio",name:"listingType",value:"agent",checked:r,onChange:()=>l(!0),className:"mr-2"}),(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)(n.x$1,{className:"mr-2 text-orange-500"}),(0,m.jsx)("span",{className:"font-medium",children:"I am an agent listing for a client"})]})]})})]}),r&&(0,m.jsxs)("div",{className:"border-t pt-6",children:[(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-2",children:"Agent Requirements"}),(0,m.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"As an agent, you must upload a letter of attestation from the property owner authorizing you to list this property. This document will be verified by our admin team before the property is published."})]}),(0,m.jsx)("div",{className:`p-4 rounded-lg border ${(()=>{if(null===d||void 0===d||!d.hasAttestationLetter)return"text-red-600 bg-red-50 border-red-200";switch(d.attestationStatus){case"verified":return"text-green-600 bg-green-50 border-green-200";case"pending":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"rejected":return"text-red-600 bg-red-50 border-red-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}})()} mb-4`,children:(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)("div",{className:"flex items-center",children:[(()=>{if(null===d||void 0===d||!d.hasAttestationLetter)return(0,m.jsx)(n.BS8,{className:"text-red-500"});switch(d.attestationStatus){case"verified":return(0,m.jsx)(n.CMH,{className:"text-green-500"});case"pending":return(0,m.jsx)(n.BS8,{className:"text-yellow-500"});case"rejected":return(0,m.jsx)(n.BS8,{className:"text-red-500"});default:return(0,m.jsx)(n.BS8,{className:"text-gray-500"})}})(),(0,m.jsx)("span",{className:"ml-2 font-medium",children:(()=>{if(null===d||void 0===d||!d.hasAttestationLetter)return"No attestation letter uploaded";switch(d.attestationStatus){case"verified":return"Attestation letter verified";case"pending":return"Attestation letter pending review";case"rejected":return"Attestation letter rejected - please upload a new one";default:return"Attestation letter status unknown"}})()})]}),"verified"===(null===d||void 0===d?void 0:d.attestationStatus)&&(0,m.jsx)("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Ready to list"})]})}),(0,m.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-6 text-center transition-colors "+(p?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400"),onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:e=>{e.preventDefault(),e.stopPropagation(),x(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&g(e.dataTransfer.files[0])},children:[(0,m.jsx)(n.l1U,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,m.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:(0,m.jsx)("span",{className:"font-medium",children:"Upload Attestation Letter"})}),(0,m.jsx)("p",{className:"text-xs text-gray-500 mb-4",children:"Drag and drop your PDF file here, or click to browse"}),(0,m.jsx)("input",{type:"file",accept:".pdf",onChange:e=>{e.target.files&&e.target.files[0]&&g(e.target.files[0])},className:"hidden",id:"attestation-upload"}),(0,m.jsx)("label",{htmlFor:"attestation-upload",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 cursor-pointer",children:"Choose File"}),o&&(0,m.jsx)("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)(n.CMH,{className:"text-green-500 mr-2"}),(0,m.jsx)("span",{className:"text-sm text-green-700",children:o.name})]})})]}),u.attestationLetter&&(0,m.jsx)("p",{className:"mt-2 text-sm text-red-600",children:u.attestationLetter}),(0,m.jsx)("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,m.jsxs)("div",{className:"flex",children:[(0,m.jsx)(n.BS8,{className:"text-yellow-500 mr-2 mt-0.5"}),(0,m.jsxs)("div",{className:"text-sm text-yellow-800",children:[(0,m.jsx)("p",{className:"font-medium",children:"Important Notice:"}),(0,m.jsx)("p",{className:"mt-1",children:"Properties listed by agents without verified attestation letters will not be published until the document is reviewed and approved by our admin team. This process typically takes 1-2 business days."})]})]})})]}),!r&&(0,m.jsx)("div",{className:"border-t pt-6",children:(0,m.jsx)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,m.jsxs)("div",{className:"flex",children:[(0,m.jsx)(n.ymh,{className:"text-blue-500 mr-2 mt-0.5"}),(0,m.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,m.jsx)("p",{className:"font-medium",children:"Property Owner Listing:"}),(0,m.jsx)("p",{className:"mt-1",children:"As the property owner, you can list your property immediately without additional documentation requirements. Your property will be published after basic verification."})]})]})})})]})};let y=!1,f=!1,v=null,j=!1;(()=>{const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:5000",REACT_APP_FLUTTERWAVE_ENCRYPTION_KEY:"FLWSECK_TESTf2e459954fd8",REACT_APP_FLUTTERWAVE_PUBLIC_KEY:"FLWPUBK_TEST-04fa9716ef05b43e581444120c688399-X",REACT_APP_FLUTTERWAVE_SECRET_KEY:"FLWSECK_TEST-c913279c55318b1715de93539229f706-X"}.REACT_APP_GOOGLE_MAPS_API_KEY;!e||"YOUR_GOOGLE_MAPS_API_KEY"===e||y||f||N(e)})();const N=e=>y?Promise.resolve():(f||(f=!0,v=new Promise((t,s)=>{if(window.google&&window.google.maps)return y=!0,f=!1,void t();const a=document.createElement("script");a.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places&v=weekly&loading=async`,a.async=!0,a.defer=!0;const r=document.createElement("link");r.rel="preconnect",r.href="https://maps.googleapis.com",document.head.appendChild(r);const l=document.createElement("link");l.rel="dns-prefetch",l.href="https://maps.googleapis.com",document.head.appendChild(l),a.onload=()=>{y=!0,f=!1,t()},a.onerror=()=>{f=!1,s(new Error("Failed to load Google Maps API. Please check your API key and ensure the required APIs are enabled."))},document.head.appendChild(a)})),v),w=()=>!!(y&&window.google&&window.google.maps),S=e=>{let{value:t,onChange:s,onPlaceSelect:r,placeholder:l="Enter address...",className:o="",error:i=!1}=e;const[d,c]=(0,a.useState)([]),[u,p]=(0,a.useState)(!1),[x,g]=(0,a.useState)(!1),[h,b]=(0,a.useState)(!0),[y,f]=(0,a.useState)([]),v=(0,a.useRef)(null),S=(0,a.useRef)(null),C=(0,a.useRef)(null),P=(0,a.useRef)(null),A=(0,a.useRef)(null),k=(0,a.useRef)(0),_=(0,a.useRef)(new Map),E=()=>{try{const e=localStorage.getItem("addressMemory");return e?JSON.parse(e):[]}catch(i){return console.error("Error loading address memory:",i),[]}},I=(0,a.useCallback)(e=>{try{const t=E(),s=[{address:e,timestamp:Date.now()},...t.filter(t=>t.address!==e)].slice(0,10);return localStorage.setItem("addressMemory",JSON.stringify(s)),s}catch(i){return console.error("Error saving address to memory:",i),[]}},[]),T=(0,a.useCallback)(e=>{if(!e||e.length<2)return[];return E().filter(t=>t.address.toLowerCase().includes(e.toLowerCase())).slice(0,5)},[]);(0,a.useEffect)(()=>{const e=()=>{if(window.google&&window.google.maps&&(!j&&w()?(j=!0,1):j))if(window.google.maps.places){if(window.google.maps.places.AutocompleteSuggestion)try{C.current=new window.google.maps.places.AutocompleteSuggestion}catch(i){console.log("AutocompleteSuggestion not available, using AutocompleteService"),C.current=new window.google.maps.places.AutocompleteService}else C.current=new window.google.maps.places.AutocompleteService;if(window.google.maps.places.Place)try{P.current=new window.google.maps.places.Place}catch(i){console.log("Place API not available, using PlacesService"),P.current=new window.google.maps.places.PlacesService(document.createElement("div"))}else P.current=new window.google.maps.places.PlacesService(document.createElement("div"))}else console.error("Google Maps Places API not available")};if(w())e();else{const t={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:5000",REACT_APP_FLUTTERWAVE_ENCRYPTION_KEY:"FLWSECK_TESTf2e459954fd8",REACT_APP_FLUTTERWAVE_PUBLIC_KEY:"FLWPUBK_TEST-04fa9716ef05b43e581444120c688399-X",REACT_APP_FLUTTERWAVE_SECRET_KEY:"FLWSECK_TEST-c913279c55318b1715de93539229f706-X"}.REACT_APP_GOOGLE_MAPS_API_KEY||"YOUR_GOOGLE_MAPS_API_KEY";t&&"YOUR_GOOGLE_MAPS_API_KEY"!==t?N(t).then(e).catch(e=>{console.error("Failed to load Google Maps API:",e),C.current=null,P.current=null,b(!1)}):(C.current=null,P.current=null,b(!1))}},[]);const D=(0,a.useCallback)(e=>{var t,s;const a=++k.current,r=T(e);f(r);const l=e.toLowerCase().trim();if(_.current.has(l)){const e=_.current.get(l);return c(e),p(!0),void g(!1)}if(!C.current||null===(t=window.google)||void 0===t||null===(s=t.maps)||void 0===s||!s.places)return g(!1),c([]),void p(r.length>0);const o={input:e,types:["address"],componentRestrictions:{country:"ng"}};C.current.getPlacePredictions?C.current.getPlacePredictions(o,(e,t)=>{if(a===k.current)if(g(!1),t===window.google.maps.places.PlacesServiceStatus.OK&&e){if(_.current.size>=50){const e=_.current.keys().next().value;_.current.delete(e)}_.current.set(l,e),c(e),p(!0)}else c([]),p(!1)}):C.current.getSuggestions&&C.current.getSuggestions(o).then(e=>{if(a===k.current)if(g(!1),e&&e.length>0){if(_.current.size>=50){const e=_.current.keys().next().value;_.current.delete(e)}_.current.set(l,e),c(e),p(!0)}else c([]),p(!1)}).catch(e=>{console.error("Autocomplete error:",e),g(!1),c([]),p(!1)})},[]),M=(0,a.useCallback)(e=>{const t=e.target.value;s(t),A.current&&clearTimeout(A.current),t.length>2?(g(!0),A.current=setTimeout(()=>{D(t)},300)):(c([]),p(!1),g(!1))},[s,D]),F=(0,a.useCallback)(e=>{const t=e.target.value.trim();t.length>5&&I(t),setTimeout(()=>{var e;null!==(e=S.current)&&void 0!==e&&e.contains(document.activeElement)||p(!1)},200)},[]),L=(0,a.useCallback)(e=>{var t,a;if(!P.current||null===(t=window.google)||void 0===t||null===(a=t.maps)||void 0===a||!a.places)return void console.warn("Google Maps places service not available");A.current&&clearTimeout(A.current);const l={placeId:e.place_id,fields:["formatted_address","geometry","address_components","url"]};P.current.getDetails?P.current.getDetails(l,(t,a)=>{if(a===window.google.maps.places.PlacesServiceStatus.OK&&t){var l,o,i,n,d,m,u;const a=t.address_components||[],x=(null===(l=a.find(e=>e.types.includes("locality")))||void 0===l?void 0:l.long_name)||"",g=(null===(o=a.find(e=>e.types.includes("administrative_area_level_1")))||void 0===o?void 0:o.long_name)||"",h=(null===(i=a.find(e=>e.types.includes("postal_code")))||void 0===i?void 0:i.long_name)||"";r({address:t.formatted_address,city:x,state:g,zipCode:h,coordinates:{latitude:null===(n=t.geometry)||void 0===n||null===(d=n.location)||void 0===d?void 0:d.lat(),longitude:null===(m=t.geometry)||void 0===m||null===(u=m.location)||void 0===u?void 0:u.lng()},googleMapsUrl:t.url||`https://www.google.com/maps/place/?q=place_id:${e.place_id}`}),I(t.formatted_address),s(t.formatted_address),p(!1),c([])}}):P.current.fetchFields&&P.current.fetchFields(l).then(t=>{if(t){var a,l,o,i,n,d,m;const u=t.address_components||[],x=(null===(a=u.find(e=>e.types.includes("locality")))||void 0===a?void 0:a.long_name)||"",g=(null===(l=u.find(e=>e.types.includes("administrative_area_level_1")))||void 0===l?void 0:l.long_name)||"",h=(null===(o=u.find(e=>e.types.includes("postal_code")))||void 0===o?void 0:o.long_name)||"";r({address:t.formatted_address,city:x,state:g,zipCode:h,coordinates:{latitude:null===(i=t.geometry)||void 0===i||null===(n=i.location)||void 0===n?void 0:n.lat(),longitude:null===(d=t.geometry)||void 0===d||null===(m=d.location)||void 0===m?void 0:m.lng()},googleMapsUrl:t.url||`https://www.google.com/maps/place/?q=place_id:${e.place_id}`}),I(t.formatted_address),s(t.formatted_address),p(!1),c([])}}).catch(e=>{console.error("Place details error:",e)})},[r,s]),R=(0,a.useCallback)(e=>{A.current&&clearTimeout(A.current),s(e.address),r({address:e.address,city:"",state:"",zipCode:"",coordinates:{latitude:null,longitude:null},googleMapsUrl:""}),p(!1),c([]),f([])},[s,r]),U=(0,a.useCallback)(()=>{var e;A.current&&clearTimeout(A.current),s(""),c([]),p(!1),g(!1),null===(e=v.current)||void 0===e||e.focus()},[s]),O=((0,a.useCallback)(e=>{setTimeout(()=>{var e;null!==(e=S.current)&&void 0!==e&&e.contains(document.activeElement)||p(!1)},200)},[]),(0,a.useCallback)(()=>{d.length>0&&p(!0)},[d.length]));return(0,a.useEffect)(()=>()=>{A.current&&clearTimeout(A.current)},[]),(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)("input",{ref:v,type:"text",value:t,onChange:M,onBlur:F,onFocus:O,className:"w-full pl-12 pr-12 py-4 border-2 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300 "+(i?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-blue-500"),placeholder:h?l:"Enter address manually (autocomplete disabled)"}),(0,m.jsx)(n.vq8,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-lg"}),t&&(0,m.jsx)("button",{type:"button",onClick:U,className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:(0,m.jsx)(n.QCr,{className:"text-sm"})})]}),x&&(0,m.jsx)("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-b-xl shadow-lg z-50",children:(0,m.jsxs)("div",{className:"p-4 text-center",children:[(0,m.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mx-auto"}),(0,m.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Searching addresses..."})]})}),!h&&(0,m.jsx)("div",{className:"mt-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,m.jsxs)("p",{className:"text-sm text-yellow-700",children:[(0,m.jsx)(n.BS8,{className:"inline mr-1"}),"Google Maps autocomplete is disabled. Please enter the address manually."]})}),u&&(d.length>0||y.length>0)&&(0,m.jsxs)("div",{ref:S,className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-b-xl shadow-lg z-50 max-h-60 overflow-y-auto",children:[y.length>0&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-200",children:(0,m.jsx)("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Recent Addresses"})}),y.map((e,t)=>(0,m.jsx)("button",{type:"button",onClick:()=>R(e),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 transition-colors focus:outline-none focus:bg-gray-50",children:(0,m.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,m.jsx)(n.vq8,{className:"text-green-500 text-sm mt-1 flex-shrink-0"}),(0,m.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,m.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.address}),(0,m.jsx)("p",{className:"text-xs text-gray-500",children:"Previously used"})]})]})},`memory-${t}`)),d.length>0&&(0,m.jsx)("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-200",children:(0,m.jsx)("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Google Maps Suggestions"})})]}),d.slice(0,8).map(e=>{var t,s;return(0,m.jsx)("button",{type:"button",onClick:()=>L(e),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 transition-colors focus:outline-none focus:bg-gray-50",children:(0,m.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,m.jsx)(n.vq8,{className:"text-blue-500 text-sm mt-1 flex-shrink-0"}),(0,m.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,m.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:(null===(t=e.structured_formatting)||void 0===t?void 0:t.main_text)||e.description}),(null===(s=e.structured_formatting)||void 0===s?void 0:s.secondary_text)&&(0,m.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.structured_formatting.secondary_text})]})]})},e.place_id)})]})]})},C=e=>{let{value:t,onChange:s,placeholder:r="Enter address...",className:l="",error:o=!1,fieldType:i="address"}=e;const[d,c]=(0,a.useState)([]),[u,p]=(0,a.useState)(!1),[x,g]=(0,a.useState)(null),h=(0,a.useCallback)(()=>{try{const e=localStorage.getItem(`addressMemory_${i}`);return e?JSON.parse(e):[]}catch(o){return console.error(`Error loading address memory for ${i}:`,o),[]}},[i]),b=(0,a.useCallback)(e=>{if(e&&!(e.trim().length<3))try{const t=h(),s=[{address:e.trim(),timestamp:Date.now()},...t.filter(t=>t.address!==e.trim())].slice(0,10);return localStorage.setItem(`addressMemory_${i}`,JSON.stringify(s)),s}catch(o){return console.error(`Error saving address to memory for ${i}:`,o),[]}},[i,h]),y=(0,a.useCallback)(e=>{if(!e||e.length<2)return[];return h().filter(t=>t.address.toLowerCase().includes(e.toLowerCase())).slice(0,5)},[h]),f=(0,a.useCallback)(e=>{const t=e.target.value;s(t);const a=y(t);c(a),p(a.length>0)},[s,y]),v=(0,a.useCallback)(e=>{s(e.address),p(!1),c([])},[s]),j=(0,a.useCallback)(e=>{const t=e.target.value.trim();t.length>2&&b(t),setTimeout(()=>{p(!1)},200)},[b]),N=(0,a.useCallback)(()=>{d.length>0&&p(!0)},[d.length]),w=(0,a.useCallback)(()=>{try{localStorage.removeItem(`addressMemory_${i}`),c([]),p(!1)}catch(o){console.error(`Error clearing memory for ${i}:`,o)}},[i]);return(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)("input",{ref:g,type:"text",value:t,onChange:f,onBlur:j,onFocus:N,className:`w-full pl-12 pr-10 py-3 border-2 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300 ${o?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-blue-500"} ${l}`,placeholder:r,"aria-invalid":o?"true":"false","aria-describedby":o?`${i}-error`:void 0}),(0,m.jsx)(n.vq8,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-lg"}),h().length>0&&(0,m.jsx)("button",{type:"button",onClick:w,className:"absolute right-10 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-red-500 transition-colors",title:"Clear address history",children:(0,m.jsx)(n.QCr,{className:"h-4 w-4"})})]}),u&&d.length>0&&(0,m.jsxs)("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-b-xl shadow-lg z-50 max-h-60 overflow-y-auto",children:[(0,m.jsx)("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-200",children:(0,m.jsxs)("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide flex items-center",children:[(0,m.jsx)(n.OKX,{className:"mr-1"}),"Recent ",i," entries"]})}),d.map((e,t)=>(0,m.jsx)("button",{type:"button",onClick:()=>v(e),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 transition-colors focus:outline-none focus:bg-gray-50",children:(0,m.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,m.jsx)(n.vq8,{className:"text-green-500 text-sm mt-1 flex-shrink-0"}),(0,m.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,m.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.address}),(0,m.jsx)("p",{className:"text-xs text-gray-500",children:"Previously used"})]})]})},`memory-${t}`))]})]})};var P=s(8852);const A=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;const r=(0,a.useRef)(null),l=(0,a.useRef)(!0);(0,a.useEffect)(()=>{if(!l.current)return r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(s){console.error("Error auto-saving form data:",s)}},s),()=>{r.current&&clearTimeout(r.current)};l.current=!1},[t,e,s]);return{clearSavedData:()=>{try{localStorage.removeItem(e)}catch(t){console.error("Error clearing saved data:",t)}},loadSavedData:()=>{try{const t=localStorage.getItem(e);if(t)return JSON.parse(t)}catch(t){console.error("Error loading saved data:",t)}return null}}},k=()=>{const e=(0,r.Zp)(),t=(0,r.zy)(),{createProperty:s,updateProperty:u}=(0,l.NC)(),{user:y}=(0,o.As)(),{isAgent:f,isPropertyOwner:v,checkDocumentStatus:j,uploadAgentDocument:N}=(0,i.U)(),[w,k]=(0,a.useState)({title:"",description:"",price:"",type:"",status:"",location:{address:"",city:"",state:"",zipCode:"",coordinates:{latitude:"",longitude:""},nearestBusStop:{name:"",distance:"",coordinates:{latitude:"",longitude:""}},googleMapsUrl:""},details:{bedrooms:"",bathrooms:"",sqft:"",yearBuilt:"",lotSize:"",parking:"",heating:"",cooling:""},amenities:[],images:[],videos:[],documentation:[],mortgageDetails:{}}),[_,E]=(0,a.useState)({}),[I,T]=(0,a.useState)(!1),[D,M]=(0,a.useState)(0),[F,L]=(0,a.useState)(""),[R,U]=(0,a.useState)(""),[O,z]=(0,a.useState)(!1),[B,$]=(0,a.useState)(null),[q,K]=(0,a.useState)(!1),[G,V]=(0,a.useState)(null),[W,H]=(0,a.useState)(null),[J,Y]=(0,a.useState)({mortgageProvider:"",minDownPaymentPercent:"",tenorMonths:"",interestRate:"",monthlyIncomeRequirement:""}),Q=`addPropertyForm_${(null===y||void 0===y?void 0:y.id)||"guest"}`,{clearSavedData:X}=A(Q,{},2e3);(0,a.useEffect)(()=>{var e;if(!(null===(e=t.state)||void 0===e?void 0:e.propertyToEdit))try{const e=localStorage.getItem(Q);if(e){var s;const t=JSON.parse(e);(t.title||null!==(s=t.location)&&void 0!==s&&s.address)&&(k(e=>({...e,...t,images:e.images,videos:e.videos,documentation:e.documentation})),c.Ay.success("Draft restored from previous session",{duration:3e3}))}}catch(a){console.error("Error loading saved form data:",a)}},[]),(0,a.useEffect)(()=>{const e=setTimeout(()=>{const e={...w,images:[],videos:[],documentation:[]};try{localStorage.setItem(Q,JSON.stringify(e))}catch(t){console.error("Error auto-saving form data:",t)}},2e3);return()=>clearTimeout(e)},[w,Q]),(0,a.useEffect)(()=>{if(f){const e=j();H(e)}},[f,j]);const Z=e=>{const{name:t,value:s}=e.target;if(t.includes(".")){const[e,a]=t.split(".");if("location"===e&&"address"===a)k(e=>({...e,location:{...e.location,address:s}}));else if("location"===e&&"city"===a)k(e=>({...e,location:{...e.location,city:s}}));else if("location"===e&&"state"===a)k(e=>({...e,location:{...e.location,state:s}}));else if("location"===e&&"zipCode"===a)k(e=>({...e,location:{...e.location,zipCode:s}}));else if("location"===e&&"googleMapsUrl"===a)k(e=>({...e,location:{...e.location,googleMapsUrl:s}}));else if(t.includes("coordinates.")){const e=t.split(".")[1];k(t=>({...t,location:{...t.location,coordinates:{...t.location.coordinates,[e]:parseFloat(s)||""}}}))}else if(t.includes("busStop.")){const e=t.split(".")[1];k(t=>({...t,location:{...t.location,nearestBusStop:{...t.location.nearestBusStop,[e]:s}}}))}else if(t.includes("busStopCoordinates.")){const e=t.split(".")[1];k(t=>({...t,location:{...t.location,nearestBusStop:{...t.location.nearestBusStop,coordinates:{...t.location.nearestBusStop.coordinates,[e]:parseFloat(s)||""}}}}))}else if(t.includes("details.")){const e=t.split(".")[1];k(t=>({...t,details:{...t.details,[e]:s}}))}}else k(e=>({...e,[t]:s}));_[t]&&E(e=>({...e,[t]:""}))},ee=()=>{R.trim()&&!w.amenities.includes(R.trim())&&(k(e=>({...e,amenities:[...e.amenities,R.trim()]})),U(""))},te=async a=>{a.preventDefault();const r=(()=>{const e={};w.title||(e.title="Title is required"),w.description||(e.description="Description is required"),w.price||(e.price="Price is required"),w.type||(e.type="Property type is required"),w.status||(e.status="Property status is required"),w.location.address||(e["location.address"]="Address is required"),w.location.city||(e["location.city"]="City is required"),w.location.state||(e["location.state"]="State is required"),w.details.bedrooms||(e["details.bedrooms"]="Number of bedrooms is required"),w.details.bathrooms||(e["details.bathrooms"]="Number of bathrooms is required"),w.details.sqft||(e["details.sqft"]="Square footage is required");const t=Boolean(w.location.coordinates.latitude)&&Boolean(w.location.coordinates.longitude);return w.location.googleMapsUrl||t||(e["location.googleMapsUrl"]="Provide Google Maps link or both latitude and longitude"),q&&f&&(null!==W&&void 0!==W&&W.hasAttestationLetter?"verified"!==W.attestationStatus&&(e.attestationLetter="Attestation letter must be verified by admin before listing properties"):e.attestationLetter="Attestation letter is required for agents"),"for-mortgage"===w.status&&(J.mortgageProvider||(e.mortgageProvider="Mortgage provider is required"),J.minDownPaymentPercent||(e.minDownPaymentPercent="Minimum down payment is required"),J.tenorMonths||(e.tenorMonths="Tenor (months) is required"),J.interestRate||(e.interestRate="Interest rate is required"),J.monthlyIncomeRequirement||(e.monthlyIncomeRequirement="Monthly income requirement is required")),e})();if(Object.keys(r).length>0)E(r);else if("for-investment"!==w.status||B){T(!0),M(10),L("Validating and creating property...");try{const r={...w,price:parseFloat(w.price),vendorId:(null===y||void 0===y?void 0:y.id)||(null===y||void 0===y?void 0:y.uid),vendorName:(null===y||void 0===y?void 0:y.displayName)||(null===y||void 0===y?void 0:y.firstName)+" "+(null===y||void 0===y?void 0:y.lastName)||(null===y||void 0===y?void 0:y.email),isAgentListing:q,agentId:q?(null===y||void 0===y?void 0:y.id)||(null===y||void 0===y?void 0:y.uid):null,createdAt:new Date,listingType:w.status,moderationStatus:q?"pending_verification":"pending",details:{...w.details,bedrooms:parseInt(w.details.bedrooms),bathrooms:parseInt(w.details.bathrooms),sqft:parseInt(w.details.sqft),yearBuilt:w.details.yearBuilt?parseInt(w.details.yearBuilt):null},images:w.images&&w.images.length>0?w.images:[],videos:[],documentation:[],...B?{investment:B.investment,investmentDocuments:B.investmentDocuments}:{},mortgageDetails:"for-mortgage"===w.status?{mortgageProvider:J.mortgageProvider,minDownPaymentPercent:Number(J.minDownPaymentPercent),tenorMonths:Number(J.tenorMonths),interestRate:Number(J.interestRate),monthlyIncomeRequirement:Number(J.monthlyIncomeRequirement)}:void 0},h=await s(r);if(h.success){const s=h.id;c.Ay.success("Property created successfully!"),M(35),L("Finalizing images...");let b=[...w.images||[]];try{const e=b.filter(e=>e.path&&e.path.includes("/temp"));if(e.length>0){const t=await Promise.all(e.map(async e=>{const t=e.path.split("/").pop(),a=`properties/${s}/images/${t}`,r=await d.A.moveFile(e.path,a);return r.success?{...e,url:r.url,path:r.path}:e}));b=b.map(e=>{const s=t.find(t=>t.name&&t.name===e.name||t.path&&t.path===e.path);return s||e})}}catch(a){c.Ay.error("Some images could not be finalized.")}try{M(55),L("Uploading videos and documents...");const[e,t]=await Promise.all([Promise.resolve({success:!0,successful:[]}),Promise.resolve({success:!0,successful:[]})]),a=(e.successful||[]).map((e,t)=>({url:e.url,isPrimary:0===t,caption:e.name})),r=(t.successful||[]).map((e,t)=>({url:e.url,isPrimary:0===t,caption:e.name}));await u(s,{images:b,videos:a,documentation:r}),c.Ay.success("Media uploaded successfully"),M(100),L("Done")}catch(a){c.Ay.error("Property saved, but media upload failed.")}try{const e=y?`vendor_properties_${y.id||y.uid}`:null;if(e){var l,o,i,n,m,p,x;const t=JSON.parse(localStorage.getItem(e)||"[]"),a={id:s,title:r.title,price:Number(r.price)||0,location:(null===(l=r.location)||void 0===l?void 0:l.address)||(null===(o=r.location)||void 0===o?void 0:o.city)||(null===(i=r.location)||void 0===i?void 0:i.googleMapsUrl)||"Location not specified",bedrooms:Number(null===(n=r.details)||void 0===n?void 0:n.bedrooms)||0,bathrooms:Number(null===(m=r.details)||void 0===m?void 0:m.bathrooms)||0,area:Number(null===(p=r.details)||void 0===p?void 0:p.sqft)||0,image:r.images&&(null===(x=r.images[0])||void 0===x?void 0:x.url)||"https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=400&h=300&fit=crop",status:"pending",views:0,inquiries:0,favorites:0,dateListed:(new Date).toISOString(),lastUpdated:(new Date).toISOString()};localStorage.setItem(e,JSON.stringify([a,...t]))}}catch(g){}X(),t.pathname.includes("/vendor/")?e("/vendor/properties"):e("/dashboard")}else E({general:h.message}),c.Ay.error(h.message||"Failed to create property")}catch(h){E({general:h.message})}finally{T(!1),setTimeout(()=>{M(0),L("")},500)}}else z(!0)};return(0,m.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 py-12",children:[(0,m.jsxs)("div",{className:"max-w-6xl mx-auto px-6",children:[(0,m.jsxs)("div",{className:"text-center mb-12",children:[(0,m.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-600 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg",children:(0,m.jsx)(n.rQ8,{className:"text-white text-3xl"})}),(0,m.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Add New Property"}),(0,m.jsx)("p",{className:"text-xl text-gray-600",children:"List your property with comprehensive details"})]}),(0,m.jsx)("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-8",children:(0,m.jsxs)("form",{onSubmit:te,className:"space-y-8",children:[_.general&&(0,m.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-600 px-6 py-4 rounded-xl",children:(0,m.jsx)("p",{className:"font-medium",children:_.general})}),(0,m.jsx)(b,{isAgent:f,isPropertyOwner:v,isListingAsAgent:q,setIsListingAsAgent:K,attestationLetter:G,setAttestationLetter:V,documentStatus:W,onAttestationUpload:async e=>{try{const t=await N({type:"attestation_letter",file:e,propertyId:null,description:"Letter of attestation for property listing"});if(t.success){const e=j();H(e)}return t}catch(t){return console.error("Error uploading attestation letter:",t),{success:!1,error:t.message}}},errors:_}),(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,m.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,m.jsx)(n.ymh,{className:"text-white text-lg"})}),(0,m.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Basic Information"})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Property Title"}),(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)(P.A,{fieldKey:"title",value:w.title,onChange:e=>k(t=>({...t,title:e})),placeholder:"e.g., Beautiful 3-bedroom house",className:"pl-12"}),(0,m.jsx)(n.rQ8,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-lg pointer-events-none"})]}),_.title&&(0,m.jsx)("p",{className:"mt-2 text-sm text-red-600",children:_.title})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Property Type"}),(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsxs)("select",{name:"type",value:w.type,onChange:Z,className:"w-full pl-12 pr-4 py-4 border-2 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300 "+(_.type?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-blue-500"),children:[(0,m.jsx)("option",{value:"",children:"Select type"}),["house","apartment","condo","townhouse","land","commercial"].map(e=>(0,m.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]}),(0,m.jsx)(n.ymh,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-lg pointer-events-none"})]}),_.type&&(0,m.jsx)("p",{className:"mt-2 text-sm text-red-600",children:_.type})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Property Status"}),(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsxs)("select",{name:"status",value:w.status,onChange:Z,className:"w-full pl-12 pr-4 py-4 border-2 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300 "+(_.status?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-blue-500"),children:[(0,m.jsx)("option",{value:"",children:"Select status"}),["for-sale","for-rent","for-lease","for-mortgage","for-investment"].map(e=>(0,m.jsx)("option",{value:e,children:"for-sale"===e?"For Sale":"for-rent"===e?"For Rent":"for-lease"===e?"For Lease":"for-mortgage"===e?"For Mortgage":"For Investment"},e))]}),(0,m.jsx)(n.CMH,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-lg pointer-events-none"})]}),_.status&&(0,m.jsx)("p",{className:"mt-2 text-sm text-red-600",children:_.status})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Price (\u20a6)"}),(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)(P.A,{type:"number",fieldKey:"price",value:w.price,onChange:e=>k(t=>({...t,price:e})),placeholder:"50000000",className:"pl-12"}),(0,m.jsx)("span",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-lg font-bold",children:"\u20a6"})]}),_.price&&(0,m.jsx)("p",{className:"mt-2 text-sm text-red-600",children:_.price})]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Description"}),(0,m.jsx)(P.A,{fieldKey:"description",value:w.description,onChange:e=>k(t=>({...t,description:e})),multiline:!0,rows:4,placeholder:"Describe your property in detail..."}),_.description&&(0,m.jsx)("p",{className:"mt-2 text-sm text-red-600",children:_.description})]})]}),(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,m.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-teal-600 rounded-lg flex items-center justify-center",children:(0,m.jsx)(n.vq8,{className:"text-white text-lg"})}),(0,m.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Location Information"})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Address"}),(0,m.jsx)(S,{value:w.location.address,onChange:e=>{k(t=>({...t,location:{...t.location,address:e}}))},onPlaceSelect:e=>{k(t=>({...t,location:{...t.location,address:e.address,city:e.city,state:e.state,zipCode:e.zipCode,coordinates:e.coordinates,googleMapsUrl:e.googleMapsUrl}}))},placeholder:"Start typing your address...",error:!!_["location.address"]}),_["location.address"]&&(0,m.jsx)("p",{className:"mt-2 text-sm text-red-600",children:_["location.address"]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"City"}),(0,m.jsx)(C,{value:w.location.city,onChange:e=>{k(t=>({...t,location:{...t.location,city:e}}))},placeholder:"Enter city...",fieldType:"city",error:!!_["location.city"]}),_["location.city"]&&(0,m.jsx)("p",{className:"mt-2 text-sm text-red-600",children:_["location.city"]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"State"}),(0,m.jsx)(C,{value:w.location.state,onChange:e=>{k(t=>({...t,location:{...t.location,state:e}}))},placeholder:"Enter state...",fieldType:"state",error:!!_["location.state"]}),_["location.state"]&&(0,m.jsx)("p",{className:"mt-2 text-sm text-red-600",children:_["location.state"]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"ZIP Code"}),(0,m.jsx)(C,{value:w.location.zipCode,onChange:e=>{k(t=>({...t,location:{...t.location,zipCode:e}}))},placeholder:"Enter ZIP code...",fieldType:"zipCode",error:!!_["location.zipCode"]}),_["location.zipCode"]&&(0,m.jsx)("p",{className:"mt-2 text-sm text-red-600",children:_["location.zipCode"]})]})]}),(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("h4",{className:"text-lg font-semibold text-gray-700 flex items-center",children:[(0,m.jsx)(n.jHd,{className:"mr-2 text-blue-600"}),"Geographic Coordinates"]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Latitude (optional)"}),(0,m.jsx)(P.A,{type:"number",fieldKey:"coordinates.latitude",value:w.location.coordinates.latitude,onChange:e=>k(t=>({...t,location:{...t.location,coordinates:{...t.location.coordinates,latitude:e}}})),placeholder:"40.7128"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Longitude (optional)"}),(0,m.jsx)(P.A,{type:"number",fieldKey:"coordinates.longitude",value:w.location.coordinates.longitude,onChange:e=>k(t=>({...t,location:{...t.location,coordinates:{...t.location.coordinates,longitude:e}}})),placeholder:"-74.0060"})]})]}),(0,m.jsxs)("div",{className:"mt-4 p-4 bg-blue-50 rounded-xl border border-blue-200",children:[(0,m.jsx)("div",{className:"flex items-center justify-between",children:(0,m.jsxs)("div",{className:"flex-1",children:[(0,m.jsx)("h5",{className:"text-sm font-semibold text-blue-800 mb-2",children:"Google Maps Link"}),w.location.googleMapsUrl?(0,m.jsxs)("div",{className:"space-y-2",children:[(0,m.jsx)("p",{className:"text-xs text-green-600 font-medium",children:"\u2713 Auto-populated from address selection"}),(0,m.jsx)(P.A,{fieldKey:"location.googleMapsUrl",value:w.location.googleMapsUrl,onChange:e=>k(t=>({...t,location:{...t.location,googleMapsUrl:e}})),placeholder:"https://www.google.com/maps/..."})]}):(0,m.jsxs)("div",{className:"space-y-2",children:[(0,m.jsx)("p",{className:"text-xs text-gray-600",children:"Select an address above to auto-populate this field"}),(0,m.jsx)(P.A,{fieldKey:"location.googleMapsUrl",value:w.location.googleMapsUrl,onChange:e=>k(t=>({...t,location:{...t.location,googleMapsUrl:e}})),placeholder:"https://www.google.com/maps/..."})]})]})}),_["location.googleMapsUrl"]&&(0,m.jsx)("p",{className:"mt-2 text-sm text-red-600",children:_["location.googleMapsUrl"]}),(w.location.googleMapsUrl||w.location.coordinates.latitude&&w.location.coordinates.longitude)&&(0,m.jsx)("div",{className:"mt-4 rounded-lg overflow-hidden border border-blue-200 bg-white",children:(0,m.jsx)("iframe",{title:"Property location preview",src:w.location.googleMapsUrl?`https://www.google.com/maps?q=${encodeURIComponent(w.location.googleMapsUrl)}&output=embed`:`https://www.google.com/maps?q=${encodeURIComponent(w.location.coordinates.latitude+","+w.location.coordinates.longitude)}&output=embed`,width:"100%",height:"300",style:{border:0},loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})})]})]}),(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("h4",{className:"text-lg font-semibold text-gray-700 flex items-center",children:[(0,m.jsx)(n.K9k,{className:"mr-2 text-green-600"}),"Nearest Bus Stop"]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Bus Stop Name"}),(0,m.jsx)(C,{value:w.location.nearestBusStop.name,onChange:e=>{k(t=>({...t,location:{...t.location,nearestBusStop:{...t.location.nearestBusStop,name:e}}}))},placeholder:"Enter bus stop name...",fieldType:"busStop"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Distance"}),(0,m.jsx)(P.A,{fieldKey:"busStop.distance",value:w.location.nearestBusStop.distance,onChange:e=>k(t=>({...t,location:{...t.location,nearestBusStop:{...t.location.nearestBusStop,distance:e}}})),placeholder:"0.2 miles"})]})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Bus Stop Latitude (optional)"}),(0,m.jsx)(P.A,{type:"number",fieldKey:"busStopCoordinates.latitude",value:w.location.nearestBusStop.coordinates.latitude,onChange:e=>k(t=>({...t,location:{...t.location,nearestBusStop:{...t.location.nearestBusStop,coordinates:{...t.location.nearestBusStop.coordinates,latitude:e}}}})),placeholder:"40.7132"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Bus Stop Longitude (optional)"}),(0,m.jsx)(P.A,{type:"number",fieldKey:"busStopCoordinates.longitude",value:w.location.nearestBusStop.coordinates.longitude,onChange:e=>k(t=>({...t,location:{...t.location,nearestBusStop:{...t.location.nearestBusStop,coordinates:{...t.location.nearestBusStop.coordinates,longitude:e}}}})),placeholder:"-74.0059"})]})]})]})]}),(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,m.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-500 to-red-600 rounded-lg flex items-center justify-center",children:(0,m.jsx)(n.VlX,{className:"text-white text-lg"})}),(0,m.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Property Details"})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Bedrooms"}),(0,m.jsx)(P.A,{type:"number",fieldKey:"bedrooms",value:w.details.bedrooms,onChange:e=>k(t=>({...t,details:{...t.details,bedrooms:e}})),placeholder:"3"}),_["details.bedrooms"]&&(0,m.jsx)("p",{className:"mt-2 text-sm text-red-600",children:_["details.bedrooms"]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Bathrooms"}),(0,m.jsx)(P.A,{type:"number",fieldKey:"bathrooms",value:w.details.bathrooms,onChange:e=>k(t=>({...t,details:{...t.details,bathrooms:e}})),placeholder:"2"}),_["details.bathrooms"]&&(0,m.jsx)("p",{className:"mt-2 text-sm text-red-600",children:_["details.bathrooms"]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Square Feet"}),(0,m.jsx)(P.A,{type:"number",fieldKey:"sqft",value:w.details.sqft,onChange:e=>k(t=>({...t,details:{...t.details,sqft:e}})),placeholder:"2000"}),_["details.sqft"]&&(0,m.jsx)("p",{className:"mt-2 text-sm text-red-600",children:_["details.sqft"]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Year Built"}),(0,m.jsx)(P.A,{type:"number",fieldKey:"yearBuilt",value:w.details.yearBuilt,onChange:e=>k(t=>({...t,details:{...t.details,yearBuilt:e}})),placeholder:"2015"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Lot Size"}),(0,m.jsx)(P.A,{fieldKey:"details.lotSize",value:w.details.lotSize,onChange:e=>k(t=>({...t,details:{...t.details,lotSize:e}})),placeholder:"0.25 acres"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Parking"}),(0,m.jsx)(P.A,{fieldKey:"details.parking",value:w.details.parking,onChange:e=>k(t=>({...t,details:{...t.details,parking:e}})),placeholder:"2-car garage"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Heating"}),(0,m.jsx)(P.A,{fieldKey:"details.heating",value:w.details.heating,onChange:e=>k(t=>({...t,details:{...t.details,heating:e}})),placeholder:"Central"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Cooling"}),(0,m.jsx)(P.A,{fieldKey:"details.cooling",value:w.details.cooling,onChange:e=>k(t=>({...t,details:{...t.details,cooling:e}})),placeholder:"Central AC"})]})]})]}),(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,m.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-600 rounded-lg flex items-center justify-center",children:(0,m.jsx)(n.HVe,{className:"text-white text-lg"})}),(0,m.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Media & Documents"})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("h4",{className:"text-lg font-semibold text-gray-700 flex items-center",children:[(0,m.jsx)(n.dkL,{className:"mr-2 text-blue-600"}),"Property Images"]}),(0,m.jsx)(p,{propertyId:w.id||"temp",onImagesChange:e=>k(t=>({...t,images:e})),initialImages:w.images||[],maxImages:10})]}),(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("h4",{className:"text-lg font-semibold text-gray-700 flex items-center",children:[(0,m.jsx)(n.HiP,{className:"mr-2 text-red-600"}),"Property Videos"]}),(0,m.jsx)(x,{propertyId:w.id||"temp",onVideosChange:e=>k(t=>({...t,videos:e})),initialVideos:w.videos||[],maxVideos:5})]}),(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("h4",{className:"text-lg font-semibold text-gray-700 flex items-center",children:[(0,m.jsx)(n.t69,{className:"mr-2 text-green-600"}),"Documents"]}),(0,m.jsx)(g,{propertyId:w.id||"temp",onDocumentsChange:e=>k(t=>({...t,documentation:e})),initialDocuments:w.documentation||[],maxDocuments:10})]})]})]}),(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,m.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-600 rounded-lg flex items-center justify-center",children:(0,m.jsx)(n.CMH,{className:"text-white text-lg"})}),(0,m.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Amenities"})]}),(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{className:"flex gap-3",children:[(0,m.jsxs)("div",{className:"flex-1 relative",children:[(0,m.jsx)("input",{type:"text",value:R,onChange:e=>U(e.target.value),className:"w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300",placeholder:"Add custom amenity",onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),ee())}),(0,m.jsx)(n.OiG,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-lg"})]}),(0,m.jsx)("button",{type:"button",onClick:ee,className:"px-6 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all duration-300 transform hover:-translate-y-1 shadow-lg",children:"Add"})]}),(0,m.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:["Parking","Garden","Balcony","Pool","Gym","Security","Air Conditioning","Heating","Hardwood Floors","Fireplace","Walk-in Closet","Patio","High-Speed Internet"].map(e=>(0,m.jsx)("button",{type:"button",onClick:()=>{w.amenities.includes(e)||k(t=>({...t,amenities:[...t.amenities,e]}))},className:"px-4 py-3 text-sm rounded-xl border-2 transition-all duration-300 "+(w.amenities.includes(e)?"bg-blue-50 border-blue-300 text-blue-700 shadow-md":"bg-gray-50 border-gray-200 text-gray-700 hover:bg-gray-100 hover:border-gray-300"),children:e},e))})]}),w.amenities.length>0&&(0,m.jsxs)("div",{className:"space-y-3",children:[(0,m.jsx)("h4",{className:"text-lg font-semibold text-gray-700",children:"Selected Amenities:"}),(0,m.jsx)("div",{className:"flex flex-wrap gap-3",children:w.amenities.map((e,t)=>(0,m.jsxs)("span",{className:"inline-flex items-center px-4 py-2 rounded-xl text-sm bg-gradient-to-r from-blue-100 to-purple-100 text-blue-800 border border-blue-200 shadow-sm",children:[e,(0,m.jsx)("button",{type:"button",onClick:()=>(e=>{k(t=>({...t,amenities:t.amenities.filter(t=>t!==e)}))})(e),className:"ml-3 text-blue-600 hover:text-blue-800 transition-colors",children:(0,m.jsx)(n.QCr,{className:"text-sm"})})]},t))})]})]}),"for-mortgage"===w.status&&(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,m.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-yellow-500 to-orange-600 rounded-lg flex items-center justify-center",children:(0,m.jsx)(n.Tsk,{className:"text-white text-lg"})}),(0,m.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Mortgage Details"})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Mortgage Provider"}),(0,m.jsx)(P.A,{fieldKey:"mortgageDetails.mortgageProvider",value:J.mortgageProvider,onChange:e=>Y(t=>({...t,mortgageProvider:e})),placeholder:"Bank of America"}),_.mortgageProvider&&(0,m.jsx)("p",{className:"mt-2 text-sm text-red-600",children:_.mortgageProvider})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Minimum Down Payment (%)"}),(0,m.jsx)(P.A,{type:"number",fieldKey:"mortgageDetails.minDownPaymentPercent",value:J.minDownPaymentPercent,onChange:e=>Y(t=>({...t,minDownPaymentPercent:e})),placeholder:"20"}),_.minDownPaymentPercent&&(0,m.jsx)("p",{className:"mt-2 text-sm text-red-600",children:_.minDownPaymentPercent})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Tenor (Months)"}),(0,m.jsx)(P.A,{type:"number",fieldKey:"mortgageDetails.tenorMonths",value:J.tenorMonths,onChange:e=>Y(t=>({...t,tenorMonths:e})),placeholder:"300"}),_.tenorMonths&&(0,m.jsx)("p",{className:"mt-2 text-sm text-red-600",children:_.tenorMonths})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Interest Rate (%)"}),(0,m.jsx)(P.A,{type:"number",fieldKey:"mortgageDetails.interestRate",value:J.interestRate,onChange:e=>Y(t=>({...t,interestRate:e})),placeholder:"3.5"}),_.interestRate&&(0,m.jsx)("p",{className:"mt-2 text-sm text-red-600",children:_.interestRate})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Monthly Income Requirement (\u20a6)"}),(0,m.jsx)(P.A,{type:"number",fieldKey:"mortgageDetails.monthlyIncomeRequirement",value:J.monthlyIncomeRequirement,onChange:e=>Y(t=>({...t,monthlyIncomeRequirement:e})),placeholder:"300000"}),_.monthlyIncomeRequirement&&(0,m.jsx)("p",{className:"mt-2 text-sm text-red-600",children:_.monthlyIncomeRequirement})]})]})]}),(0,m.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end gap-4 pt-6",children:[I&&(0,m.jsxs)("div",{className:"flex-1",children:[(0,m.jsx)("div",{className:"w-full bg-gray-100 rounded-full h-2 mb-2",children:(0,m.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${D}%`}})}),(0,m.jsx)("p",{className:"text-xs text-gray-500",children:F})]}),(0,m.jsx)("button",{type:"button",onClick:()=>e("/dashboard"),className:"px-8 py-4 border-2 border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition-all duration-300 font-semibold",children:"Cancel"}),(0,m.jsx)("button",{type:"submit",disabled:I,className:"px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:-translate-y-1 shadow-lg font-semibold",children:I?(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),"Adding Property..."]}):"Add Property"})]})]})})]}),O&&(0,m.jsx)(h,{isOpen:O,onClose:()=>{z(!1),$(null)},onSubmit:e=>{$(e),z(!1),setTimeout(()=>{te({preventDefault:()=>{}})},0)}})]})}},8852:(e,t,s)=>{s.d(t,{A:()=>o});var a=s(5043),r=s(5369),l=s(579);const o=e=>{let{value:t,onChange:s,placeholder:o="",className:i="",error:n=!1,fieldKey:d,type:c="text",min:m,max:u,step:p,multiline:x=!1,rows:g=4}=e;const[h,b]=(0,a.useState)(!1),y=(0,a.useMemo)(()=>`memory_${d}`,[d]),f=(0,a.useCallback)(()=>{try{const e=localStorage.getItem(y);return e?JSON.parse(e):[]}catch{return[]}},[y]),v=(0,a.useMemo)(()=>{const e=f();if(!t||t.toString().length<1)return e.slice(0,8);const s=t.toString().toLowerCase();return e.filter(e=>{var t;return null===e||void 0===e||null===(t=e.v)||void 0===t?void 0:t.toString().toLowerCase().includes(s)}).slice(0,8)},[t,f]),j=(0,a.useCallback)(e=>{const t=(null!==e&&void 0!==e?e:"").toString().trim();if(t)try{const e=f(),s=[{v:t,t:Date.now()},...e.filter(e=>(null===e||void 0===e?void 0:e.v)!==t)].slice(0,12);localStorage.setItem(y,JSON.stringify(s))}catch{}},[f,y]),N=(0,a.useCallback)(()=>{j(t),setTimeout(()=>b(!1),200)},[j,t]),w=(0,a.useCallback)(()=>{f().length>0&&b(!0)},[f]),S=(0,a.useCallback)(e=>{s(e.v),b(!1)},[s]),C=(0,a.useCallback)(()=>{localStorage.removeItem(y),b(!1)},[y]),P={value:t||"",onChange:e=>s(e.target.value),onBlur:N,onFocus:w,placeholder:o,className:`w-full px-4 py-3 border-2 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300 ${n?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-blue-500"} ${i}`};return(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)("div",{className:"relative",children:[x?(0,l.jsx)("textarea",{rows:g,...P}):(0,l.jsx)("input",{type:c,min:m,max:u,step:p,...P}),f().length>0&&(0,l.jsx)("button",{type:"button",onClick:C,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-red-500",title:"Clear history",children:(0,l.jsx)(r.QCr,{className:"h-4 w-4"})})]}),h&&v.length>0&&(0,l.jsxs)("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-b-xl shadow-lg z-50 max-h-60 overflow-y-auto",children:[(0,l.jsxs)("div",{className:"px-4 py-2 bg-blue-50 border-b border-blue-200 flex items-center text-xs text-blue-700 uppercase tracking-wide font-semibold",children:[(0,l.jsx)(r.OKX,{className:"mr-2"})," Recent entries (",v.length,")"]}),v.map((e,t)=>(0,l.jsxs)("button",{type:"button",onClick:()=>S(e),className:"w-full px-4 py-3 text-left hover:bg-blue-50 border-b border-gray-100 last:border-b-0 transition-colors text-sm",children:[(0,l.jsx)("span",{className:"font-medium",children:e.v}),(0,l.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:new Date(e.t).toLocaleDateString()})]},`${y}-${t}`))]})]})}}}]);
//# sourceMappingURL=365.31fad027.chunk.js.map