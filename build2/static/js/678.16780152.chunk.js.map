{"version":3,"file":"static/js/678.16780152.chunk.js","mappings":"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","sources":["utils/mortgageDocumentUpload.js","pages/Mortgage.js","components/MemoryInput.js"],"sourcesContent":["/**\r\n * Mortgage Document Upload Utility\r\n * Handles uploading documents for mortgage applications to Cloudinary via backend\r\n */\r\n\r\nimport axios from 'axios';\r\nimport { getApiUrl } from './apiConfig';\r\n\r\n/**\r\n * Upload mortgage documents to backend (which uploads to Cloudinary)\r\n * @param {File[]} files - Array of File objects to upload\r\n * @param {string} applicationId - Optional application ID if application already exists\r\n * @param {Function} onProgress - Optional progress callback (progress: number) => void\r\n * @returns {Promise<{success: boolean, data?: Array, error?: string}>}\r\n */\r\nexport const uploadMortgageDocuments = async (files, applicationId = null, onProgress = null) => {\r\n  try {\r\n    if (!files || files.length === 0) {\r\n      throw new Error('No files provided');\r\n    }\r\n\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      throw new Error('Authentication required');\r\n    }\r\n\r\n    // Validate files\r\n    const maxSize = 10 * 1024 * 1024; // 10MB\r\n    const allowedTypes = [\r\n      'application/pdf',\r\n      'application/msword',\r\n      'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n      'text/plain',\r\n      'image/jpeg',\r\n      'image/jpg',\r\n      'image/png'\r\n    ];\r\n\r\n    const invalidFiles = files.filter(file => {\r\n      if (file.size > maxSize) {\r\n        return `File ${file.name} exceeds 10MB limit`;\r\n      }\r\n      if (!allowedTypes.includes(file.type)) {\r\n        return `File ${file.name} has invalid type`;\r\n      }\r\n      return null;\r\n    });\r\n\r\n    if (invalidFiles.length > 0) {\r\n      throw new Error(`Invalid files: ${invalidFiles.join(', ')}`);\r\n    }\r\n\r\n    // Create FormData\r\n    const formData = new FormData();\r\n    files.forEach(file => {\r\n      formData.append('documents', file);\r\n    });\r\n    \r\n    if (applicationId) {\r\n      formData.append('applicationId', applicationId);\r\n    }\r\n\r\n    // Upload to backend\r\n    const response = await axios.post(\r\n      getApiUrl('/upload/mortgage/documents'),\r\n      formData,\r\n      {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'multipart/form-data'\r\n        },\r\n        onUploadProgress: (progressEvent) => {\r\n          if (onProgress && progressEvent.total) {\r\n            const percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total);\r\n            onProgress(percentCompleted);\r\n          }\r\n        }\r\n      }\r\n    );\r\n\r\n    if (response.data && response.data.success) {\r\n      // Transform uploaded files to document format expected by backend\r\n      const documents = response.data.data.uploaded.map((file, index) => ({\r\n        type: 'bank_statement', // Default type, can be enhanced later\r\n        url: file.url,\r\n        name: files[index].name,\r\n        uploadedAt: new Date().toISOString(),\r\n        publicId: file.publicId\r\n      }));\r\n\r\n      return {\r\n        success: true,\r\n        data: documents,\r\n        uploadedFiles: response.data.data.uploaded\r\n      };\r\n    } else {\r\n      throw new Error(response.data?.message || 'Upload failed');\r\n    }\r\n  } catch (error) {\r\n    console.error('Error uploading mortgage documents:', error);\r\n    return {\r\n      success: false,\r\n      error: error.response?.data?.message || error.message || 'Failed to upload documents'\r\n    };\r\n  }\r\n};\r\n\r\n/**\r\n * Upload a single document\r\n * @param {File} file - File to upload\r\n * @param {string} applicationId - Optional application ID\r\n * @param {Function} onProgress - Optional progress callback\r\n * @returns {Promise<{success: boolean, data?: Object, error?: string}>}\r\n */\r\nexport const uploadSingleMortgageDocument = async (file, applicationId = null, onProgress = null) => {\r\n  const result = await uploadMortgageDocuments([file], applicationId, onProgress);\r\n  \r\n  if (result.success) {\r\n    return {\r\n      success: true,\r\n      data: result.data[0]\r\n    };\r\n  }\r\n  \r\n  return result;\r\n};\r\n\r\n","import React, { useState, useMemo, useEffect } from 'react';\r\nimport MemoryInput from '../components/MemoryInput';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { useProperty } from '../contexts/PropertyContext';\r\nimport { useMortgage } from '../contexts/MortgageContext';\r\nimport { FaHome, FaMoneyBillWave, FaPercentage, FaCalendar, FaArrowRight, FaBed, FaBath, FaRuler, FaFilter, FaRedo, FaCheck, FaClock, FaTimes, FaFileAlt, FaStar, FaArrowDown, FaArrowUp, FaCheckCircle, FaTimesCircle, FaInfoCircle } from 'react-icons/fa';\r\nimport toast from 'react-hot-toast';\r\nimport axios from 'axios';\r\nimport { uploadMortgageDocuments } from '../utils/mortgageDocumentUpload';\r\nimport { getApiUrl } from '../utils/apiConfig';\r\n\r\nconst Mortgage = () => {\r\n  const { user } = useAuth();\r\n  const { properties, loading: propertiesLoading } = useProperty();\r\n  const { getUserApplications, getApplicationsByStatus, refreshApplications } = useMortgage();\r\n  const navigate = useNavigate();\r\n  const [activeTab, setActiveTab] = useState('all');\r\n  const [selectedLocation, setSelectedLocation] = useState('all');\r\n  const [selectedPriceRange, setSelectedPriceRange] = useState('any');\r\n  const [selectedPropertyType, setSelectedPropertyType] = useState('all');\r\n  const [selectedEligibility, setSelectedEligibility] = useState('all');\r\n  \r\n  // Mortgage calculator state\r\n  const [homePrice, setHomePrice] = useState(35000000);\r\n  const [downPayment, setDownPayment] = useState(7000000);\r\n  const [loanTerm, setLoanTerm] = useState(15);\r\n  const [interestRate, setInterestRate] = useState(13.5);\r\n\r\n  // Button handlers\r\n  const handlePreQualification = () => {\r\n    if (!user) {\r\n      toast.error('Please login to start pre-qualification');\r\n      navigate('/');\r\n      return;\r\n    }\r\n    // Reset form state\r\n    setEmploymentType('employed');\r\n    setEmployerName('');\r\n    setJobTitle('');\r\n    setMonthlyIncome('');\r\n    setYearsOfEmployment('');\r\n    setBusinessName('');\r\n    setBusinessType('');\r\n    setBusinessMonthlyIncome('');\r\n    setBankStatements([]);\r\n    setAcceptTerms(false);\r\n    setSelectedBankId('');\r\n    setShowPrequalificationModal(true);\r\n  };\r\n\r\n  const handleViewProperty = (propertyId) => {\r\n    navigate(`/property/${propertyId}`);\r\n  };\r\n\r\n  const [showMortgageModal, setShowMortgageModal] = useState(false);\r\n  const [showPrequalificationModal, setShowPrequalificationModal] = useState(false);\r\n  const [selectedProperty, setSelectedProperty] = useState(null);\r\n  const [employmentType, setEmploymentType] = useState('employed');\r\n  const [employerName, setEmployerName] = useState('');\r\n  const [jobTitle, setJobTitle] = useState('');\r\n  const [monthlyIncome, setMonthlyIncome] = useState('');\r\n  const [yearsOfEmployment, setYearsOfEmployment] = useState('');\r\n  const [businessName, setBusinessName] = useState('');\r\n  const [businessType, setBusinessType] = useState('');\r\n  const [businessMonthlyIncome, setBusinessMonthlyIncome] = useState('');\r\n  const [bankStatements, setBankStatements] = useState([]);\r\n  const [acceptTerms, setAcceptTerms] = useState(false);\r\n  const [banks, setBanks] = useState([]);\r\n  const [selectedBankId, setSelectedBankId] = useState('');\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [uploadProgress, setUploadProgress] = useState(0);\r\n  const [isUploading, setIsUploading] = useState(false);\r\n\r\n  // Load approved mortgage banks\r\n  useEffect(() => {\r\n    const loadBanks = async () => {\r\n      try {\r\n        const token = localStorage.getItem('token');\r\n        if (!token) return;\r\n\r\n        const response = await axios.get(getApiUrl('/mortgage-banks'), {\r\n          headers: { Authorization: `Bearer ${token}` }\r\n        });\r\n\r\n        if (response.data.success) {\r\n          setBanks(response.data.data || []);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error loading mortgage banks:', error);\r\n      }\r\n    };\r\n\r\n    if (user) {\r\n      loadBanks();\r\n    }\r\n  }, [user]);\r\n\r\n  const handleApplyMortgage = (property) => {\r\n    console.log('Apply for Mortgage clicked, property:', property, 'user:', user);\r\n    \r\n    if (!user) {\r\n      toast.error('Please login to apply for mortgage');\r\n      navigate('/');\r\n      return;\r\n    }\r\n    \r\n    setSelectedProperty(property);\r\n    setShowMortgageModal(true);\r\n  };\r\n\r\n  const handleFileUpload = (event) => {\r\n    const files = Array.from(event.target.files);\r\n    setBankStatements(files);\r\n  };\r\n\r\n  const handlePrequalificationSubmission = async () => {\r\n    // Validation\r\n    if (!acceptTerms) {\r\n      toast.error('Please accept the terms and conditions');\r\n      return;\r\n    }\r\n\r\n    if (employmentType === 'employed' && (!employerName || !jobTitle || !monthlyIncome || !yearsOfEmployment)) {\r\n      toast.error('Please fill in all employment details');\r\n      return;\r\n    }\r\n\r\n    if (employmentType === 'self-employed' && (!businessName || !businessType || !businessMonthlyIncome)) {\r\n      toast.error('Please fill in all business details');\r\n      return;\r\n    }\r\n\r\n    if (!selectedBankId) {\r\n      toast.error('Please select a mortgage bank');\r\n      return;\r\n    }\r\n\r\n    const selectedBank = banks.find(b => b._id === selectedBankId || b.id === selectedBankId);\r\n    if (!selectedBank) {\r\n      toast.error('Selected bank not found');\r\n      return;\r\n    }\r\n\r\n    // Prepare employment details\r\n    const employmentDetails = {\r\n      type: employmentType,\r\n      employerName: employmentType === 'employed' ? employerName : undefined,\r\n      jobTitle: employmentType === 'employed' ? jobTitle : undefined,\r\n      monthlyIncome: parseFloat(employmentType === 'employed' ? monthlyIncome : businessMonthlyIncome) || 0,\r\n      yearsOfEmployment: parseFloat(yearsOfEmployment) || 0,\r\n      businessName: employmentType === 'self-employed' ? businessName : undefined,\r\n      businessType: employmentType === 'self-employed' ? businessType : undefined\r\n    };\r\n\r\n    setIsSubmitting(true);\r\n    setUploadProgress(0);\r\n    setIsUploading(false);\r\n\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        throw new Error('Authentication required. Please login again.');\r\n      }\r\n\r\n      // Upload documents first if any files are provided\r\n      let documents = [];\r\n      if (bankStatements && bankStatements.length > 0) {\r\n        setIsUploading(true);\r\n        setUploadProgress(0);\r\n        \r\n        const uploadResult = await uploadMortgageDocuments(\r\n          bankStatements,\r\n          null, // applicationId - not created yet\r\n          (progress) => {\r\n            setUploadProgress(progress);\r\n          }\r\n        );\r\n\r\n        setIsUploading(false);\r\n\r\n        if (!uploadResult.success) {\r\n          throw new Error(uploadResult.error || 'Failed to upload documents');\r\n        }\r\n\r\n        documents = uploadResult.data || [];\r\n        toast.success(`Successfully uploaded ${documents.length} document(s)`);\r\n      }\r\n\r\n      // Submit prequalification request to backend\r\n      const response = await axios.post(\r\n        getApiUrl('/mortgages/prequalify'),\r\n        {\r\n          mortgageBankId: selectedBankId,\r\n          employmentDetails: employmentDetails,\r\n          documents: documents\r\n        },\r\n        {\r\n          headers: { \r\n            Authorization: `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          }\r\n        }\r\n      );\r\n\r\n      if (response.data && response.data.success) {\r\n        const { data } = response.data;\r\n        \r\n        // Display prequalification results\r\n        toast.success('Pre-qualification request submitted successfully!', {\r\n          duration: 5000\r\n        });\r\n        \r\n        // Show results in a detailed toast\r\n        setTimeout(() => {\r\n          toast(\r\n            <div className=\"p-4\">\r\n              <h3 className=\"font-semibold text-lg mb-2\">Prequalification Estimates</h3>\r\n              <div className=\"space-y-2 text-sm\">\r\n                <p><strong>Estimated Max Loan:</strong> {data.estimatedMaxLoan?.toLocaleString() || '0'}</p>\r\n                <p><strong>Estimated Property Value:</strong> {data.estimatedPropertyValue?.toLocaleString() || '0'}</p>\r\n                <p><strong>Estimated Down Payment:</strong> {data.estimatedDownPayment?.toLocaleString() || '0'}</p>\r\n                <p className=\"mt-2 text-gray-600\">You will be contacted within 24 hours with your pre-qualification results.</p>\r\n              </div>\r\n            </div>,\r\n            {\r\n              duration: 10000,\r\n              icon: ''\r\n            }\r\n          );\r\n        }, 1500);\r\n        \r\n        // Refresh applications to show the new prequalification\r\n        setTimeout(() => {\r\n          if (refreshApplications) {\r\n            refreshApplications();\r\n          }\r\n        }, 2000);\r\n        \r\n        // Reset form\r\n        setShowPrequalificationModal(false);\r\n        setEmploymentType('employed');\r\n        setEmployerName('');\r\n        setJobTitle('');\r\n        setMonthlyIncome('');\r\n        setYearsOfEmployment('');\r\n        setBusinessName('');\r\n        setBusinessType('');\r\n        setBusinessMonthlyIncome('');\r\n        setBankStatements([]);\r\n        setAcceptTerms(false);\r\n        setSelectedBankId('');\r\n      } else {\r\n        throw new Error(response.data?.message || 'Failed to submit pre-qualification request');\r\n      }\r\n    } catch (error) {\r\n      console.error('Prequalification submission error:', error);\r\n      const errorMessage = error.response?.data?.message || error.message || 'Failed to submit pre-qualification request. Please try again.';\r\n      toast.error(errorMessage);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n      setIsUploading(false);\r\n      setUploadProgress(0);\r\n    }\r\n  };\r\n\r\n  const handleConfirmMortgageApplication = async () => {\r\n    // Validation\r\n    if (!acceptTerms) {\r\n      toast.error('Please accept the terms and conditions');\r\n      return;\r\n    }\r\n\r\n    if (employmentType === 'employed' && (!employerName || !jobTitle || !monthlyIncome || !yearsOfEmployment)) {\r\n      toast.error('Please fill in all employment details');\r\n      return;\r\n    }\r\n\r\n    if (employmentType === 'self-employed' && (!businessName || !businessType || !businessMonthlyIncome)) {\r\n      toast.error('Please fill in all business details');\r\n      return;\r\n    }\r\n\r\n    if (!selectedBankId) {\r\n      toast.error('Please select a mortgage bank');\r\n      return;\r\n    }\r\n\r\n    if (!selectedProperty) {\r\n      toast.error('No property selected');\r\n      return;\r\n    }\r\n\r\n    const selectedBank = banks.find(b => b._id === selectedBankId || b.id === selectedBankId);\r\n    if (!selectedBank) {\r\n      toast.error('Selected bank not found');\r\n      return;\r\n    }\r\n\r\n    // Get property ID - handle both id and _id formats\r\n    const propertyId = selectedProperty.id || selectedProperty._id || selectedProperty.propertyId;\r\n    if (!propertyId) {\r\n      toast.error('Invalid property ID');\r\n      return;\r\n    }\r\n\r\n    // Calculate loan terms\r\n    const propertyPrice = typeof selectedProperty.price === 'number' ? selectedProperty.price : parseFloat(selectedProperty.price) || 0;\r\n    const downPaymentPercent = selectedProperty.category === 'commercial' ? 25 : 20;\r\n    const loanTermYears = selectedProperty.category === 'commercial' ? 15 : 25;\r\n    const defaultInterestRate = 18.5; // Default rate, could be from bank products later\r\n    \r\n    const downPayment = Math.round(propertyPrice * (downPaymentPercent / 100));\r\n    const requestedAmount = propertyPrice - downPayment;\r\n\r\n    // Prepare employment details\r\n    const employmentDetails = {\r\n      type: employmentType,\r\n      employerName: employmentType === 'employed' ? employerName : undefined,\r\n      jobTitle: employmentType === 'employed' ? jobTitle : undefined,\r\n      monthlyIncome: parseFloat(employmentType === 'employed' ? monthlyIncome : businessMonthlyIncome) || 0,\r\n      yearsOfEmployment: parseFloat(yearsOfEmployment) || 0,\r\n      businessName: employmentType === 'self-employed' ? businessName : undefined,\r\n      businessType: employmentType === 'self-employed' ? businessType : undefined\r\n    };\r\n\r\n    setIsSubmitting(true);\r\n    setUploadProgress(0);\r\n    setIsUploading(false);\r\n\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        throw new Error('Authentication required. Please login again.');\r\n      }\r\n\r\n      // Upload documents first if any files are provided\r\n      let documents = [];\r\n      if (bankStatements && bankStatements.length > 0) {\r\n        setIsUploading(true);\r\n        setUploadProgress(0);\r\n        \r\n        const uploadResult = await uploadMortgageDocuments(\r\n          bankStatements,\r\n          null, // applicationId - not created yet\r\n          (progress) => {\r\n            setUploadProgress(progress);\r\n          }\r\n        );\r\n\r\n        setIsUploading(false);\r\n\r\n        if (!uploadResult.success) {\r\n          throw new Error(uploadResult.error || 'Failed to upload documents');\r\n        }\r\n\r\n        documents = uploadResult.data || [];\r\n        toast.success(`Successfully uploaded ${documents.length} document(s)`);\r\n      }\r\n\r\n      // Submit to backend API only (no localStorage)\r\n      const response = await axios.post(\r\n        getApiUrl('/mortgages/apply'),\r\n        {\r\n          propertyId: propertyId, // Proper ID format (id or _id)\r\n          mortgageBankId: selectedBankId,\r\n          requestedAmount: requestedAmount,\r\n          downPayment: downPayment,\r\n          loanTermYears: loanTermYears,\r\n          interestRate: defaultInterestRate,\r\n          employmentDetails: employmentDetails,\r\n          documents: documents // Now contains Cloudinary URLs\r\n        },\r\n        {\r\n          headers: { \r\n            Authorization: `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          }\r\n        }\r\n      );\r\n\r\n      if (response.data && response.data.success) {\r\n        // Success - reset form and show success message\r\n        toast.success(`Mortgage application submitted successfully for \"${selectedProperty.title}\"!`);\r\n        \r\n        // Show application details\r\n        setTimeout(() => {\r\n          toast.info(\r\n            `Loan Amount: ${requestedAmount.toLocaleString()} | ` +\r\n            `Down Payment: ${downPayment.toLocaleString()} | ` +\r\n            `Term: ${loanTermYears} years`\r\n          );\r\n        }, 1500);\r\n\r\n        // Reset form\r\n        setShowMortgageModal(false);\r\n        setSelectedProperty(null);\r\n        setSelectedBankId('');\r\n        setEmploymentType('employed');\r\n        setEmployerName('');\r\n        setJobTitle('');\r\n        setMonthlyIncome('');\r\n        setYearsOfEmployment('');\r\n        setBusinessName('');\r\n        setBusinessType('');\r\n        setBusinessMonthlyIncome('');\r\n        setBankStatements([]);\r\n        setAcceptTerms(false);\r\n\r\n        // Refresh applications to show the new one\r\n        setTimeout(() => {\r\n          if (refreshApplications) {\r\n            refreshApplications();\r\n          }\r\n        }, 1000);\r\n\r\n        // Navigate to applications page\r\n        setTimeout(() => {\r\n          navigate('/mortgages/applications');\r\n        }, 3000);\r\n      } else {\r\n        throw new Error(response.data?.message || 'Failed to submit application');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error submitting mortgage application:', error);\r\n      \r\n      // Handle different error types\r\n      let errorMessage = 'Failed to submit mortgage application. Please try again.';\r\n      \r\n      if (error.response) {\r\n        // Server responded with error status\r\n        const status = error.response.status;\r\n        const data = error.response.data;\r\n        \r\n        if (status === 401) {\r\n          errorMessage = 'Authentication failed. Please login again.';\r\n          setTimeout(() => navigate('/'), 2000);\r\n        } else if (status === 400) {\r\n          errorMessage = data?.message || data?.errors?.[0]?.msg || 'Invalid application data. Please check all fields.';\r\n        } else if (status === 404) {\r\n          errorMessage = 'Property or bank not found. Please refresh and try again.';\r\n        } else if (status === 500) {\r\n          errorMessage = 'Server error. Please try again later or contact support.';\r\n        } else {\r\n          errorMessage = data?.message || `Error: ${status}. Please try again.`;\r\n        }\r\n      } else if (error.request) {\r\n        // Request made but no response\r\n        errorMessage = 'Network error. Please check your internet connection and try again.';\r\n      } else if (error.message) {\r\n        errorMessage = error.message;\r\n      }\r\n      \r\n      toast.error(errorMessage);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n      setIsUploading(false);\r\n      setUploadProgress(0);\r\n    }\r\n  };\r\n\r\n  const handleFilterResults = () => {\r\n    // Apply filters based on current selections\r\n    const filters = {\r\n      location: selectedLocation,\r\n      priceRange: selectedPriceRange,\r\n      propertyType: selectedPropertyType,\r\n      eligibility: selectedEligibility\r\n    };\r\n    toast.success('Filters applied successfully!');\r\n    console.log('Applied filters:', filters);\r\n  };\r\n\r\n  const handleResetFilters = () => {\r\n    setSelectedLocation('all');\r\n    setSelectedPriceRange('any');\r\n    setSelectedPropertyType('all');\r\n    setSelectedEligibility('all');\r\n    toast.success('Filters reset successfully!');\r\n  };\r\n\r\n  const handlePagination = (pageNumber) => {\r\n    toast.success(`Navigating to page ${pageNumber}`);\r\n  };\r\n\r\n  // Mock mortgage rates data\r\n  const mortgageRates = [\r\n    { type: '30-Year Fixed', rate: 13.5, change: -0.25, trend: 'down' },\r\n    { type: '15-Year Fixed', rate: 12.8, change: -0.15, trend: 'down' },\r\n    { type: '10-Year Fixed', rate: 12.2, change: -0.75, trend: 'down' },\r\n    { type: '5/1 ARM', rate: 11.9, change: 0.05, trend: 'up' }\r\n  ];\r\n\r\n  // Helper function to calculate monthly mortgage payment\r\n  const calculateMonthlyPayment = (principal, annualRate, years) => {\r\n    const monthlyRate = annualRate / 100 / 12;\r\n    const numberOfPayments = years * 12;\r\n    if (monthlyRate === 0) {\r\n      return principal / numberOfPayments;\r\n    }\r\n    return (principal * monthlyRate * Math.pow(1 + monthlyRate, numberOfPayments)) /\r\n           (Math.pow(1 + monthlyRate, numberOfPayments) - 1);\r\n  };\r\n\r\n  // Transform real properties for mortgage page (any property can be financed via mortgage)\r\n  const allEligibleProperties = useMemo(() => {\r\n    if (!properties || properties.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    const defaultInterestRate = 13.5;\r\n    const defaultLoanTerm = 20;\r\n    const defaultDownPaymentPercent = 20;\r\n\r\n    return properties\r\n      .filter(prop => prop.price && prop.price > 0) // Only properties with valid prices\r\n      .map((prop) => {\r\n        const propertyId = prop.id || prop._id || prop.propertyId;\r\n        const price = typeof prop.price === 'number' ? prop.price : parseFloat(prop.price) || 0;\r\n        const downPaymentPercent = prop.typeSlug === 'office' || prop.typeSlug === 'retail' || prop.typeSlug === 'warehouse' ? 25 : defaultDownPaymentPercent;\r\n        const loanTerm = prop.typeSlug === 'office' || prop.typeSlug === 'retail' || prop.typeSlug === 'warehouse' ? 15 : defaultLoanTerm;\r\n        const downPayment = price * (downPaymentPercent / 100);\r\n        const loanAmount = price - downPayment;\r\n        const monthlyPayment = calculateMonthlyPayment(loanAmount, defaultInterestRate, loanTerm);\r\n\r\n        // Determine category\r\n        const residentialTypes = ['apartment', 'house', 'villa', 'penthouse', 'townhouse', 'bungalow', 'studio'];\r\n        const category = residentialTypes.includes(prop.typeSlug) ? 'residential' : 'commercial';\r\n\r\n        // Build tags\r\n        const tags = ['Mortgage Ready'];\r\n        if (prop.isVerified) tags.push('Verified');\r\n        // Add more tags based on property features\r\n        if (prop.yearBuilt && new Date().getFullYear() - prop.yearBuilt <= 5) {\r\n          tags.push('New');\r\n        }\r\n\r\n        // Determine location string\r\n        let locationStr = '';\r\n        if (prop.location) {\r\n          locationStr = typeof prop.location === 'string' ? prop.location : \r\n            `${prop.city || ''}, ${prop.state || ''}`.trim();\r\n        } else if (prop.city || prop.state) {\r\n          locationStr = `${prop.city || ''}, ${prop.state || ''}`.trim();\r\n        } else {\r\n          locationStr = 'Location not specified';\r\n        }\r\n\r\n        return {\r\n          id: propertyId,\r\n          _id: propertyId, // For MongoDB compatibility\r\n          title: prop.title || 'Untitled Property',\r\n          location: locationStr,\r\n          price: price,\r\n          image: prop.image || prop.images?.[0] || '/placeholder.jpg',\r\n          bedrooms: prop.bedrooms || 0,\r\n          bathrooms: prop.bathrooms || 0,\r\n          area: prop.area || prop.sqft || 0,\r\n          tags: tags,\r\n          monthlyPayment: Math.round(monthlyPayment),\r\n          downPaymentPercent: downPaymentPercent,\r\n          loanTerm: loanTerm,\r\n          interestRate: defaultInterestRate,\r\n          category: category,\r\n          isPreApproved: false, // Could be enhanced with actual pre-approval data\r\n          isNewDevelopment: prop.yearBuilt && new Date().getFullYear() - prop.yearBuilt <= 2,\r\n          isRecentlyAdded: prop.createdAt && new Date(prop.createdAt) > new Date(Date.now() - 30 * 24 * 60 * 60 * 1000),\r\n          // Keep original property data for reference\r\n          originalProperty: prop\r\n        };\r\n      })\r\n      .filter(prop => prop.price > 0); // Ensure valid price\r\n  }, [properties]);\r\n\r\n  // Filter properties based on active tab\r\n  const eligibleProperties = useMemo(() => {\r\n    switch (activeTab) {\r\n      case 'pre-approved':\r\n        return allEligibleProperties.filter(p => p.isPreApproved);\r\n      case 'residential':\r\n        return allEligibleProperties.filter(p => p.category === 'residential');\r\n      case 'commercial':\r\n        return allEligibleProperties.filter(p => p.category === 'commercial');\r\n      case 'new-developments':\r\n        return allEligibleProperties.filter(p => p.isNewDevelopment);\r\n      case 'recently-added':\r\n        return allEligibleProperties.filter(p => p.isRecentlyAdded);\r\n      case 'all':\r\n      default:\r\n        return allEligibleProperties;\r\n    }\r\n  }, [activeTab, allEligibleProperties]);\r\n\r\n  // Mock lender partners data\r\n  const lenderPartners = [\r\n    { name: \"First Bank of Nigeria\", rating: 4.7, rate: 13.2 },\r\n    { name: \"Access Bank\", rating: 4.7, rate: 13.2 },\r\n    { name: \"UBA Mortgages\", rating: 4.7, rate: 13.2 },\r\n    { name: \"Zenith Bank\", rating: 4.7, rate: 13.2 }\r\n  ];\r\n\r\n  // Get real application status data from context\r\n  const userApplications = getUserApplications();\r\n  const pendingApplications = getApplicationsByStatus('pending');\r\n  const underReviewApplications = getApplicationsByStatus('under_review');\r\n  const approvedApplications = getApplicationsByStatus('approved');\r\n  \r\n  // Get recent applications for status display\r\n  const recentApplications = userApplications\r\n    .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))\r\n    .slice(0, 5);\r\n\r\n  // Mock educational resources\r\n  const educationalResources = [\r\n    \"Understanding Mortgage Types in Nigeria\",\r\n    \"How to Improve Your Mortgage Approval Chances\",\r\n    \"First-Time Homebuyer's Guide\",\r\n    \"Nigerian Mortgage Glossary\"\r\n  ];\r\n\r\n  // Calculate mortgage details\r\n  const loanAmount = homePrice - downPayment;\r\n  const monthlyRate = interestRate / 100 / 12;\r\n  const numberOfPayments = loanTerm * 12;\r\n  const monthlyPayment = loanAmount * (monthlyRate * Math.pow(1 + monthlyRate, numberOfPayments)) / (Math.pow(1 + monthlyRate, numberOfPayments) - 1);\r\n  const totalInterest = (monthlyPayment * numberOfPayments) - loanAmount;\r\n  const totalPayment = monthlyPayment * numberOfPayments;\r\n\r\n  const getStatusIcon = (status) => {\r\n    switch (status) {\r\n      case 'completed':\r\n        return <FaCheck className=\"text-green-600\" />;\r\n      case 'in-progress':\r\n        return <FaClock className=\"text-yellow-600\" />;\r\n      case 'pending':\r\n        return <FaTimes className=\"text-gray-400\" />;\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'completed':\r\n        return 'bg-green-100 text-green-800';\r\n      case 'in-progress':\r\n        return 'bg-yellow-100 text-yellow-800';\r\n      case 'pending':\r\n        return 'bg-gray-100 text-gray-800';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-4 sm:p-6 pb-8 sm:pb-6\">\r\n      {/* Header */}\r\n      <div className=\"mb-8\">\r\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Mortgage</h1>\r\n        <p className=\"text-gray-600\">\r\n          Find the perfect mortgage solution for your dream home\r\n        </p>\r\n      </div>\r\n\r\n      {/* Top Section - Mortgage Summary and Rates */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8\">\r\n        {/* Mortgage Summary */}\r\n        <div className=\"bg-white rounded-lg shadow p-6\">\r\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Mortgage Summary</h2>\r\n          \r\n          <div className=\"grid grid-cols-2 gap-4 mb-6\">\r\n            <div className=\"text-center\">\r\n              <div className=\"p-3 bg-blue-100 rounded-lg w-fit mx-auto mb-2\">\r\n                <FaHome className=\"text-brand-blue text-xl\" />\r\n              </div>\r\n              <p className=\"text-sm text-gray-600\">Estimated Price Range</p>\r\n              <p className=\"text-lg font-bold text-gray-900\">25-45M</p>\r\n            </div>\r\n            <div className=\"text-center\">\r\n              <div className=\"p-3 bg-green-100 rounded-lg w-fit mx-auto mb-2\">\r\n                <FaMoneyBillWave className=\"text-green-600 text-xl\" />\r\n              </div>\r\n              <p className=\"text-sm text-gray-600\">Recommended Down Payment</p>\r\n              <p className=\"text-lg font-bold text-gray-900\">8.5M</p>\r\n            </div>\r\n            <div className=\"text-center\">\r\n              <div className=\"p-3 bg-orange-100 rounded-lg w-fit mx-auto mb-2\">\r\n                <FaPercentage className=\"text-brand-orange text-xl\" />\r\n              </div>\r\n              <p className=\"text-sm text-gray-600\">Current Avg. Interest Rate</p>\r\n              <p className=\"text-lg font-bold text-gray-900\">13.5%</p>\r\n            </div>\r\n            <div className=\"text-center\">\r\n              <div className=\"p-3 bg-purple-100 rounded-lg w-fit mx-auto mb-2\">\r\n                <FaCalendar className=\"text-purple-600 text-xl\" />\r\n              </div>\r\n              <p className=\"text-sm text-gray-600\">Typical Loan Term</p>\r\n              <p className=\"text-lg font-bold text-gray-900\">15-25 yrs</p>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-brand-blue rounded-lg p-4 text-white\">\r\n            <h3 className=\"font-semibold mb-2\">Get Pre-qualified Today</h3>\r\n            <p className=\"text-sm mb-3\">Get a personalized estimate of how much you can borrow before you start house hunting. No impact on your credit score.</p>\r\n            <button \r\n              onClick={handlePreQualification}\r\n              className=\"bg-yellow-500 hover:bg-yellow-600 text-black px-4 py-2 rounded-lg font-medium flex items-center space-x-2\"\r\n              title=\"Start mortgage pre-qualification process\"\r\n            >\r\n              <span>Start Pre-qualification</span>\r\n              <FaArrowRight />\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Current Mortgage Rates */}\r\n        <div className=\"bg-white rounded-lg shadow p-6\">\r\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Current Mortgage Rates</h2>\r\n          \r\n          <div className=\"space-y-3 mb-6\">\r\n            {mortgageRates.map((rate, index) => (\r\n              <div key={index} className=\"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0\">\r\n                <div>\r\n                  <p className=\"font-medium text-gray-900\">{rate.type}</p>\r\n                  <p className=\"text-sm text-gray-600\">\r\n                    {rate.trend === 'down' ? (\r\n                      <span className=\"text-green-600 flex items-center\">\r\n                        <FaArrowDown className=\"mr-1\" />\r\n                        {Math.abs(rate.change)}% from last week\r\n                      </span>\r\n                    ) : (\r\n                      <span className=\"text-red-600 flex items-center\">\r\n                        <FaArrowUp className=\"mr-1\" />\r\n                        +{rate.change}% from last week\r\n                      </span>\r\n                    )}\r\n                  </p>\r\n                </div>\r\n                <p className=\"text-xl font-bold text-gray-900\">{rate.rate}%</p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <div className=\"bg-gray-50 rounded-lg p-4 mb-4\">\r\n            <h3 className=\"font-medium text-gray-900 mb-2\">Rate Trends</h3>\r\n            <div className=\"h-32 bg-white rounded border flex items-end justify-between px-2\">\r\n              {[13.2, 13.8, 14.1, 13.9, 13.5, 13.5].map((height, index) => (\r\n                <div key={index} className=\"flex flex-col items-center\">\r\n                  <div\r\n                    className=\"w-6 bg-brand-blue rounded-t mb-1\"\r\n                    style={{ height: `${(height - 12) * 20}%` }}\r\n                  ></div>\r\n                  <span className=\"text-xs text-gray-600\">{['Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov'][index]}</span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <p className=\"text-xs text-gray-500 mb-2\">Last updated: June 15, 2023 | Source: AfricaEstate Partners</p>\r\n          <p className=\"text-xs text-gray-500 mb-2\">Rates are subject to change</p>\r\n          <a href=\"#\" className=\"text-sm text-brand-blue hover:underline\">View Detailed Trends</a>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Eligible Properties Section */}\r\n      <div className=\"bg-white rounded-lg shadow mb-8\">\r\n        <div className=\"p-4 sm:p-6 border-b border-gray-200\">\r\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Mortgage Summary - Eligible Properties</h2>\r\n          \r\n          {/* Tabs */}\r\n          <div className=\"flex space-x-4 sm:space-x-6 mb-4 overflow-x-auto pb-2 -mx-6 px-6 scrollbar-hide\">\r\n            {(() => {\r\n              // Calculate counts for each tab\r\n              const tabCounts = {\r\n                'all': allEligibleProperties.length,\r\n                'pre-approved': allEligibleProperties.filter(p => p.isPreApproved).length,\r\n                'residential': allEligibleProperties.filter(p => p.category === 'residential').length,\r\n                'commercial': allEligibleProperties.filter(p => p.category === 'commercial').length,\r\n                'new-developments': allEligibleProperties.filter(p => p.isNewDevelopment).length,\r\n                'recently-added': allEligibleProperties.filter(p => p.isRecentlyAdded).length\r\n              };\r\n              \r\n              return [\r\n                { key: 'all', label: 'All Eligible' },\r\n                { key: 'pre-approved', label: 'Pre-Approved' },\r\n                { key: 'residential', label: 'Residential' },\r\n                { key: 'commercial', label: 'Commercial' },\r\n                { key: 'new-developments', label: 'New Developments' },\r\n                { key: 'recently-added', label: 'Recently Added' }\r\n              ].map((tab) => (\r\n                <button\r\n                  key={tab.key}\r\n                  onClick={() => setActiveTab(tab.key)}\r\n                  className={`pb-2 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap flex-shrink-0 px-1 ${\r\n                    activeTab === tab.key\r\n                      ? 'border-brand-blue text-brand-blue'\r\n                      : 'border-transparent text-gray-500 hover:text-gray-700'\r\n                  }`}\r\n                >\r\n                  <span className=\"hidden sm:inline\">{tab.label}</span>\r\n                  <span className=\"sm:hidden\">{tab.label.split(' ')[0]}</span>\r\n                  <span className=\"ml-1\">({tabCounts[tab.key]})</span>\r\n                </button>\r\n              ));\r\n            })()}\r\n          </div>\r\n\r\n          {/* Filter Bar */}\r\n          <div className=\"flex flex-wrap gap-4 items-center\">\r\n            <select\r\n              value={selectedLocation}\r\n              onChange={(e) => setSelectedLocation(e.target.value)}\r\n              className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm\"\r\n            >\r\n              <option value=\"all\">Location (All locations)</option>\r\n              <option value=\"lagos\">Lagos</option>\r\n              <option value=\"abuja\">Abuja</option>\r\n              <option value=\"port-harcourt\">Port Harcourt</option>\r\n            </select>\r\n            \r\n            <select\r\n              value={selectedPriceRange}\r\n              onChange={(e) => setSelectedPriceRange(e.target.value)}\r\n              className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm\"\r\n            >\r\n              <option value=\"any\">Price Range (Any price)</option>\r\n              <option value=\"20-30m\">20M - 30M</option>\r\n              <option value=\"30-40m\">30M - 40M</option>\r\n              <option value=\"40-50m\">40M - 50M</option>\r\n            </select>\r\n            \r\n            <select\r\n              value={selectedPropertyType}\r\n              onChange={(e) => setSelectedPropertyType(e.target.value)}\r\n              className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm\"\r\n            >\r\n              <option value=\"all\">Property Type (All types)</option>\r\n              <option value=\"apartment\">Apartment</option>\r\n              <option value=\"villa\">Villa</option>\r\n              <option value=\"penthouse\">Penthouse</option>\r\n            </select>\r\n            \r\n            <select\r\n              value={selectedEligibility}\r\n              onChange={(e) => setSelectedEligibility(e.target.value)}\r\n              className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm\"\r\n            >\r\n              <option value=\"all\">Mortgage Eligibility (All eligibility)</option>\r\n              <option value=\"ready\">Mortgage Ready</option>\r\n              <option value=\"pre-approved\">Pre-Approved</option>\r\n            </select>\r\n            \r\n            <button \r\n              onClick={handleFilterResults}\r\n              className=\"btn-primary flex items-center space-x-2\"\r\n              title=\"Apply current filter selections\"\r\n            >\r\n              <FaFilter />\r\n              <span>Filter Results</span>\r\n            </button>\r\n            \r\n            <button \r\n              onClick={handleResetFilters}\r\n              className=\"p-2 text-gray-500 hover:text-gray-700\"\r\n              title=\"Reset all filters to default\"\r\n            >\r\n              <FaRedo />\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"p-4 sm:p-6 pb-8\">\r\n          <p className=\"text-gray-600 mb-6\">Found {eligibleProperties.length} mortgage-eligible {activeTab === 'all' ? 'properties' : activeTab.replace('-', ' ')}</p>\r\n          \r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6\">\r\n            {eligibleProperties.map((property) => (\r\n              <div key={property.id} className=\"border border-gray-200 rounded-lg overflow-hidden\">\r\n                <div className=\"relative\">\r\n                  <img\r\n                    src={property.image}\r\n                    alt={property.title}\r\n                    className=\"w-full h-48 object-cover\"\r\n                  />\r\n                  <div className=\"absolute top-2 right-2 flex flex-col space-y-1\">\r\n                    {property.tags.map((tag, index) => (\r\n                      <span\r\n                        key={index}\r\n                        className={`px-2 py-1 text-xs font-medium rounded-full ${\r\n                          tag === 'Mortgage Ready' ? 'bg-green-100 text-green-800' :\r\n                          tag === 'Verified' ? 'bg-blue-100 text-blue-800' :\r\n                          tag === 'Featured' ? 'bg-purple-100 text-purple-800' :\r\n                          'bg-yellow-100 text-yellow-800'\r\n                        }`}\r\n                      >\r\n                        {tag}\r\n                      </span>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"p-4\">\r\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">{property.title}</h3>\r\n                  <p className=\"text-gray-600 mb-3\">{property.location}</p>\r\n                  \r\n                  <div className=\"flex items-center space-x-4 text-sm text-gray-600 mb-4\">\r\n                    <span className=\"flex items-center\">\r\n                      <FaBed className=\"mr-1\" />\r\n                      {property.bedrooms} beds\r\n                    </span>\r\n                    <span className=\"flex items-center\">\r\n                      <FaBath className=\"mr-1\" />\r\n                      {property.bathrooms} baths\r\n                    </span>\r\n                    <span className=\"flex items-center\">\r\n                      <FaRuler className=\"mr-1\" />\r\n                      {property.area} m\r\n                    </span>\r\n                  </div>\r\n                  \r\n                  <div className=\"bg-gray-50 rounded-lg p-3 mb-4\">\r\n                    <p className=\"text-sm text-gray-600 mb-1\">Estimated Monthly Payment</p>\r\n                    <p className=\"text-xl font-bold text-gray-900\">{property.monthlyPayment.toLocaleString()}/month</p>\r\n                    <div className=\"text-xs text-gray-500 mt-1\">\r\n                      {property.downPaymentPercent}% Down Payment  {property.loanTerm} yrs Loan Term  {property.interestRate}% Interest Rate\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"flex space-x-2\">\r\n                    <button \r\n                      onClick={() => handleViewProperty(property.id)}\r\n                      className=\"flex-1 btn-outline text-sm\"\r\n                      title=\"View property details\"\r\n                    >\r\n                      View Property\r\n                    </button>\r\n                    <button \r\n                      onClick={() => handleApplyMortgage(property)}\r\n                      className=\"flex-1 btn-primary text-sm\"\r\n                      title=\"Apply for mortgage on this property\"\r\n                    >\r\n                      Apply for Mortgage\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n          \r\n          <div className=\"mt-6 flex justify-center\">\r\n            <div className=\"flex space-x-2\">\r\n              {[1, 2, 3, 4, 5].map((page) => (\r\n                <button\r\n                  key={page}\r\n                  onClick={() => handlePagination(page)}\r\n                  className={`px-3 py-2 rounded-lg text-sm ${\r\n                    page === 1\r\n                      ? 'bg-brand-blue text-white'\r\n                      : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n                  }`}\r\n                  title={`Go to page ${page}`}\r\n                >\r\n                  {page}\r\n                </button>\r\n              ))}\r\n              <span className=\"px-3 py-2 text-gray-500\">...</span>\r\n              <button \r\n                onClick={() => handlePagination(25)}\r\n                className=\"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm hover:bg-gray-200\"\r\n                title=\"Go to page 25\"\r\n              >\r\n                25\r\n              </button>\r\n            </div>\r\n          </div>\r\n          \r\n          <p className=\"text-xs text-gray-500 mt-4 text-center\">\r\n            All properties are verified by PropertyArk for mortgage eligibility.\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Bottom Section - Calculator, Lenders, Application Status, Resources */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-6\">\r\n        {/* Quick Mortgage Calculator */}\r\n        <div className=\"bg-white rounded-lg shadow p-6\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Quick Mortgage Calculator</h3>\r\n          \r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Home Price</label>\r\n              <MemoryInput\r\n                type=\"number\"\r\n                fieldKey=\"mortgage.calculator.homePrice\"\r\n                value={homePrice}\r\n                onChange={(val) => setHomePrice(parseInt(val || 0))}\r\n                className=\"w-full\"\r\n              />\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Down Payment</label>\r\n              <MemoryInput\r\n                type=\"number\"\r\n                fieldKey=\"mortgage.calculator.downPayment\"\r\n                value={downPayment}\r\n                onChange={(val) => setDownPayment(parseInt(val || 0))}\r\n                className=\"w-full\"\r\n              />\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Loan Term (Years): {loanTerm} Years\r\n              </label>\r\n              <input\r\n                type=\"range\"\r\n                min=\"5\"\r\n                max=\"30\"\r\n                value={loanTerm}\r\n                onChange={(e) => setLoanTerm(parseInt(e.target.value))}\r\n                className=\"w-full\"\r\n              />\r\n              <div className=\"flex justify-between text-xs text-gray-500\">\r\n                <span>5 yrs</span>\r\n                <span>30 yrs</span>\r\n              </div>\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Interest Rate (%): {interestRate}%\r\n              </label>\r\n              <input\r\n                type=\"range\"\r\n                min=\"8\"\r\n                max=\"18\"\r\n                step=\"0.1\"\r\n                value={interestRate}\r\n                onChange={(e) => setInterestRate(parseFloat(e.target.value))}\r\n                className=\"w-full\"\r\n              />\r\n              <div className=\"flex justify-between text-xs text-gray-500\">\r\n                <span>8%</span>\r\n                <span>18%</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"mt-6 space-y-2\">\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-sm text-gray-600\">Loan Amount:</span>\r\n              <span className=\"font-medium\">{loanAmount.toLocaleString()}</span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-sm text-gray-600\">Total Interest:</span>\r\n              <span className=\"font-medium\">{totalInterest.toLocaleString()}</span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-sm text-gray-600\">Total Payment:</span>\r\n              <span className=\"font-medium\">{totalPayment.toLocaleString()}</span>\r\n            </div>\r\n            <div className=\"border-t pt-2\">\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-sm font-medium text-gray-900\">Monthly Payment:</span>\r\n                <span className=\"text-lg font-bold text-brand-blue\">{Math.round(monthlyPayment).toLocaleString()} / month</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <p className=\"text-xs text-gray-500 mt-4\">This is an estimate only</p>\r\n          <a href=\"#\" className=\"text-sm text-brand-blue hover:underline\">Detailed Calculator</a>\r\n        </div>\r\n\r\n        {/* Approved Lender Partners */}\r\n        <div className=\"bg-white rounded-lg shadow p-6\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Approved Lender Partners</h3>\r\n          \r\n          <div className=\"space-y-3\">\r\n            {lenderPartners.map((lender, index) => (\r\n              <div key={index} className=\"flex items-center justify-between p-3 border border-gray-200 rounded-lg\">\r\n                <div>\r\n                  <p className=\"font-medium text-gray-900\">{lender.name}</p>\r\n                  <div className=\"flex items-center space-x-1\">\r\n                    <FaStar className=\"text-yellow-500 text-sm\" />\r\n                    <span className=\"text-sm text-gray-600\">{lender.rating}</span>\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-right\">\r\n                  <p className=\"font-medium text-gray-900\">{lender.rate}%</p>\r\n                  <FaArrowRight className=\"text-gray-400\" />\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n          \r\n          <p className=\"text-sm text-gray-600 mt-4\">7 lenders available in your area</p>\r\n          <a href=\"#\" className=\"text-sm text-brand-blue hover:underline\">Compare All</a>\r\n        </div>\r\n\r\n        {/* Application Status */}\r\n        <div className=\"bg-white rounded-lg shadow p-6\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Application Status</h3>\r\n          \r\n          {recentApplications.length === 0 ? (\r\n            <div className=\"text-center py-8\">\r\n              <p className=\"text-gray-500 mb-4\">No applications yet</p>\r\n              <button\r\n                onClick={() => navigate('/mortgage')}\r\n                className=\"text-sm text-blue-600 hover:underline\"\r\n              >\r\n                Apply for Mortgage\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-4\">\r\n              {recentApplications.map((application) => (\r\n                <div key={application._id || application.id} className=\"flex items-start space-x-3 p-3 hover:bg-gray-50 rounded-lg\">\r\n                  <div className={`p-2 rounded-full ${\r\n                    application.status === 'approved' ? 'bg-green-100' :\r\n                    application.status === 'rejected' ? 'bg-red-100' :\r\n                    application.status === 'under_review' ? 'bg-blue-100' :\r\n                    'bg-yellow-100'\r\n                  }`}>\r\n                    {application.status === 'approved' ? <FaCheckCircle className=\"text-green-600\" /> :\r\n                     application.status === 'rejected' ? <FaTimesCircle className=\"text-red-600\" /> :\r\n                     application.status === 'under_review' ? <FaInfoCircle className=\"text-blue-600\" /> :\r\n                     <FaClock className=\"text-yellow-600\" />}\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"flex items-center space-x-2 mb-1\">\r\n                      <p className=\"text-sm font-medium text-gray-900\">\r\n                        {new Date(application.createdAt).toLocaleDateString()}\r\n                      </p>\r\n                      <span className={`px-2 py-1 text-xs rounded-full ${\r\n                        application.status === 'approved' ? 'bg-green-100 text-green-800' :\r\n                        application.status === 'rejected' ? 'bg-red-100 text-red-800' :\r\n                        application.status === 'under_review' ? 'bg-blue-100 text-blue-800' :\r\n                        'bg-yellow-100 text-yellow-800'\r\n                      }`}>\r\n                        {application.status.replace('_', ' ')}\r\n                      </span>\r\n                    </div>\r\n                    <p className=\"text-sm font-medium text-gray-900\">\r\n                      {application.property?.title || 'Prequalification Request'}\r\n                    </p>\r\n                    <p className=\"text-xs text-gray-600\">\r\n                      Amount: {application.requestedAmount?.toLocaleString() || '0'} | \r\n                      Bank: {application.mortgageBank?.name || 'N/A'}\r\n                    </p>\r\n                  </div>\r\n                  <button\r\n                    onClick={() => navigate(`/mortgages/applications/${application._id || application.id}`)}\r\n                    className=\"text-sm text-blue-600 hover:underline\"\r\n                  >\r\n                    View\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n          \r\n          {userApplications.length > 0 && (\r\n            <div className=\"mt-4 pt-4 border-t border-gray-200\">\r\n              <button\r\n                onClick={() => navigate('/mortgages/applications')}\r\n                className=\"text-sm text-blue-600 hover:underline w-full text-center\"\r\n              >\r\n                View All Applications\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Educational Resources */}\r\n        <div className=\"bg-white rounded-lg shadow p-6\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Educational Resources</h3>\r\n          \r\n          <div className=\"space-y-3\">\r\n            {educationalResources.map((resource, index) => (\r\n              <div key={index} className=\"flex items-center space-x-3 p-2 hover:bg-gray-50 rounded-lg\">\r\n                <FaFileAlt className=\"text-gray-400\" />\r\n                <span className=\"text-sm text-gray-700\">{resource}</span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n          \r\n          <p className=\"text-sm text-gray-600 mt-4\">75 Resources available</p>\r\n          <a href=\"#\" className=\"text-sm text-brand-blue hover:underline\">Compare All</a>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Mortgage Application Modal */}\r\n      {showMortgageModal && selectedProperty && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n          <div className=\"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6\">\r\n            <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Apply for Mortgage</h3>\r\n            <p className=\"text-gray-600 mb-6\">{selectedProperty.title}</p>\r\n            \r\n            {/* Property Summary */}\r\n            <div className=\"bg-gray-50 p-4 rounded-lg mb-6\">\r\n              <h4 className=\"font-semibold text-gray-900 mb-2\">Property Details</h4>\r\n              <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n                <div>\r\n                  <p><strong>Property Price:</strong> {selectedProperty.price.toLocaleString()}</p>\r\n                  <p><strong>Loan Amount:</strong> {Math.round(selectedProperty.price * 0.8).toLocaleString()}</p>\r\n                </div>\r\n                <div>\r\n                  <p><strong>Down Payment:</strong> {Math.round(selectedProperty.price * 0.2).toLocaleString()}</p>\r\n                  <p><strong>Monthly Payment:</strong> {Math.round((selectedProperty.price * 0.8 * 0.185) / 12).toLocaleString()}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-6\">\r\n              {/* Bank Selection */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Select Mortgage Bank <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <select\r\n                  value={selectedBankId}\r\n                  onChange={(e) => setSelectedBankId(e.target.value)}\r\n                  className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 border-gray-300\"\r\n                >\r\n                  <option value=\"\">Choose a mortgage bank</option>\r\n                  {banks.map((bank) => (\r\n                    <option key={bank._id} value={bank._id}>\r\n                      {bank.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n                {banks.length === 0 && (\r\n                  <p className=\"mt-1 text-xs text-gray-500\">\r\n                    No mortgage banks are currently available. Please try again later.\r\n                  </p>\r\n                )}\r\n\r\n                {/* Display Bank Products with Rates */}\r\n                {selectedBankId && (() => {\r\n                  const selectedBank = banks.find(b => b._id === selectedBankId || b.id === selectedBankId);\r\n                  const activeProducts = selectedBank?.mortgageProducts?.filter(p => p.isActive) || [];\r\n                  \r\n                  if (activeProducts.length > 0) {\r\n                    return (\r\n                      <div className=\"mt-4 bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n                        <h4 className=\"text-sm font-semibold text-gray-900 mb-3\">\r\n                          {selectedBank?.name} - Available Products & Rates\r\n                        </h4>\r\n                        <div className=\"space-y-3\">\r\n                          {activeProducts.map((product, index) => (\r\n                            <div \r\n                              key={index} \r\n                              className=\"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\"\r\n                            >\r\n                              <div className=\"flex items-start justify-between mb-2\">\r\n                                <div className=\"flex-1\">\r\n                                  <h5 className=\"font-semibold text-gray-900 text-sm\">{product.name}</h5>\r\n                                  {product.description && (\r\n                                    <p className=\"text-xs text-gray-600 mt-1\">{product.description}</p>\r\n                                  )}\r\n                                </div>\r\n                                <div className=\"ml-4 text-right\">\r\n                                  <div className=\"text-lg font-bold text-blue-600\">\r\n                                    {product.interestRate}%\r\n                                  </div>\r\n                                  <div className=\"text-xs text-gray-500 capitalize\">\r\n                                    {product.interestRateType}\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                              \r\n                              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 mt-3 pt-3 border-t border-gray-100\">\r\n                                <div>\r\n                                  <p className=\"text-xs text-gray-500\">Loan Range</p>\r\n                                  <p className=\"text-xs font-medium text-gray-900 mt-1\">\r\n                                    {product.minLoanAmount?.toLocaleString()} - {product.maxLoanAmount?.toLocaleString()}\r\n                                  </p>\r\n                                </div>\r\n                                <div>\r\n                                  <p className=\"text-xs text-gray-500\">Down Payment</p>\r\n                                  <p className=\"text-xs font-medium text-gray-900 mt-1\">\r\n                                    {product.minDownPaymentPercent}% min\r\n                                  </p>\r\n                                </div>\r\n                                <div>\r\n                                  <p className=\"text-xs text-gray-500\">Max Term</p>\r\n                                  <p className=\"text-xs font-medium text-gray-900 mt-1\">\r\n                                    {product.maxLoanTerm} years\r\n                                  </p>\r\n                                </div>\r\n                                {product.eligibilityCriteria && (\r\n                                  <div>\r\n                                    <p className=\"text-xs text-gray-500\">Requirements</p>\r\n                                    <div className=\"text-xs text-gray-900 mt-1 space-y-0.5\">\r\n                                      {product.eligibilityCriteria.minMonthlyIncome > 0 && (\r\n                                        <p>Income: {product.eligibilityCriteria.minMonthlyIncome.toLocaleString()}/mo</p>\r\n                                      )}\r\n                                      {product.eligibilityCriteria.minCreditScore > 0 && (\r\n                                        <p>Credit: {product.eligibilityCriteria.minCreditScore}+</p>\r\n                                      )}\r\n                                    </div>\r\n                                  </div>\r\n                                )}\r\n                              </div>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                        <p className=\"text-xs text-gray-600 mt-3 italic\">\r\n                          * Rates and terms shown are indicative. Final terms subject to bank review and approval.\r\n                        </p>\r\n                      </div>\r\n                    );\r\n                  } else if (selectedBank && (!selectedBank.mortgageProducts || selectedBank.mortgageProducts.length === 0)) {\r\n                    return (\r\n                      <div className=\"mt-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\r\n                        <p className=\"text-sm text-yellow-800\">\r\n                          <FaMoneyBillWave className=\"inline mr-2\" />\r\n                          {selectedBank.name} has no active mortgage products available at this time.\r\n                        </p>\r\n                      </div>\r\n                    );\r\n                  }\r\n                  return null;\r\n                })()}\r\n              </div>\r\n              {/* Employment Type */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Employment Type</label>\r\n                <div className=\"flex space-x-4\">\r\n                  <label className=\"flex items-center\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      value=\"employed\"\r\n                      checked={employmentType === 'employed'}\r\n                      onChange={(e) => setEmploymentType(e.target.value)}\r\n                      className=\"mr-2\"\r\n                    />\r\n                    Employed\r\n                  </label>\r\n                  <label className=\"flex items-center\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      value=\"self-employed\"\r\n                      checked={employmentType === 'self-employed'}\r\n                      onChange={(e) => setEmploymentType(e.target.value)}\r\n                      className=\"mr-2\"\r\n                    />\r\n                    Self-Employed\r\n                  </label>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Employment Details */}\r\n              {employmentType === 'employed' && (\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Employer Name</label>\r\n                    <MemoryInput\r\n                      fieldKey=\"mortgage.app.employerName\"\r\n                      value={employerName}\r\n                      onChange={(val) => setEmployerName(val)}\r\n                      placeholder=\"Company Name\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Job Title</label>\r\n                    <MemoryInput\r\n                      fieldKey=\"mortgage.app.jobTitle\"\r\n                      value={jobTitle}\r\n                      onChange={(val) => setJobTitle(val)}\r\n                      placeholder=\"Your Position\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Monthly Income ()</label>\r\n                    <MemoryInput\r\n                      type=\"number\"\r\n                      fieldKey=\"mortgage.app.monthlyIncome\"\r\n                      value={monthlyIncome}\r\n                      onChange={(val) => setMonthlyIncome(val)}\r\n                      placeholder=\"500000\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Years of Employment</label>\r\n                    <MemoryInput\r\n                      type=\"number\"\r\n                      fieldKey=\"mortgage.app.yearsOfEmployment\"\r\n                      value={yearsOfEmployment}\r\n                      onChange={(val) => setYearsOfEmployment(val)}\r\n                      placeholder=\"5\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Business Details */}\r\n              {employmentType === 'self-employed' && (\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Business Name</label>\r\n                    <MemoryInput\r\n                      fieldKey=\"mortgage.app.businessName\"\r\n                      value={businessName}\r\n                      onChange={(val) => setBusinessName(val)}\r\n                      placeholder=\"Business Name\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Business Type</label>\r\n                    <MemoryInput\r\n                      fieldKey=\"mortgage.app.businessType\"\r\n                      value={businessType}\r\n                      onChange={(val) => setBusinessType(val)}\r\n                      placeholder=\"e.g., Consulting, Trading\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"col-span-2\">\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Monthly Business Income ()</label>\r\n                    <MemoryInput\r\n                      type=\"number\"\r\n                      fieldKey=\"mortgage.app.businessMonthlyIncome\"\r\n                      value={businessMonthlyIncome}\r\n                      onChange={(val) => setBusinessMonthlyIncome(val)}\r\n                      placeholder=\"750000\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Bank Statements Upload */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Bank Statements (Last 6 months)</label>\r\n                <input\r\n                  type=\"file\"\r\n                  multiple\r\n                  accept=\".pdf,.jpg,.jpeg,.png\"\r\n                  onChange={handleFileUpload}\r\n                  disabled={isUploading || isSubmitting}\r\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                />\r\n                {bankStatements.length > 0 && (\r\n                  <div className=\"mt-2\">\r\n                    <p className=\"text-sm text-gray-600\">Selected files:</p>\r\n                    <ul className=\"text-sm text-gray-500\">\r\n                      {bankStatements.map((file, index) => (\r\n                        <li key={index}> {file.name} ({(file.size / 1024 / 1024).toFixed(2)} MB)</li>\r\n                      ))}\r\n                    </ul>\r\n                  </div>\r\n                )}\r\n                {isUploading && (\r\n                  <div className=\"mt-3\">\r\n                    <div className=\"flex items-center justify-between text-sm text-gray-600 mb-1\">\r\n                      <span>Uploading documents...</span>\r\n                      <span>{uploadProgress}%</span>\r\n                    </div>\r\n                    <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                      <div\r\n                        className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\r\n                        style={{ width: `${uploadProgress}%` }}\r\n                      ></div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Terms and Conditions */}\r\n              <div>\r\n                <label className=\"flex items-start\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={acceptTerms}\r\n                    onChange={(e) => setAcceptTerms(e.target.checked)}\r\n                    className=\"mr-2 mt-1\"\r\n                  />\r\n                  <span className=\"text-sm text-gray-700\">\r\n                    I accept the mortgage terms and conditions and agree to provide additional documents as required by the vendor.\r\n                  </span>\r\n                </label>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex space-x-3 mt-6\">\r\n              <button\r\n                onClick={() => {\r\n                  setShowMortgageModal(false);\r\n                  setSelectedProperty(null);\r\n                  setEmploymentType('employed');\r\n                  setEmployerName('');\r\n                  setJobTitle('');\r\n                  setMonthlyIncome('');\r\n                  setYearsOfEmployment('');\r\n                  setBusinessName('');\r\n                  setBusinessType('');\r\n                  setBusinessMonthlyIncome('');\r\n                  setBankStatements([]);\r\n                  setAcceptTerms(false);\r\n                }}\r\n                className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                onClick={handleConfirmMortgageApplication}\r\n                disabled={isSubmitting || isUploading}\r\n                className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2\"\r\n              >\r\n                {isUploading ? (\r\n                  <>\r\n                    <FaClock className=\"animate-spin\" />\r\n                    <span>Uploading Documents ({uploadProgress}%)...</span>\r\n                  </>\r\n                ) : isSubmitting ? (\r\n                  <>\r\n                    <FaClock className=\"animate-spin\" />\r\n                    <span>Submitting Application...</span>\r\n                  </>\r\n                ) : (\r\n                  <span>Submit Application</span>\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Prequalification Modal */}\r\n      {showPrequalificationModal && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n          <div className=\"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6\">\r\n            <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Get Pre-qualified for a Mortgage</h3>\r\n            <p className=\"text-gray-600 mb-6\">Fill out this form to get pre-qualified and see how much you can borrow. No impact on your credit score.</p>\r\n            \r\n            <div className=\"space-y-6\">\r\n              {/* Bank Selection */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Select Mortgage Bank <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <select\r\n                  value={selectedBankId}\r\n                  onChange={(e) => setSelectedBankId(e.target.value)}\r\n                  className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 border-gray-300\"\r\n                >\r\n                  <option value=\"\">Choose a mortgage bank</option>\r\n                  {banks.map((bank) => (\r\n                    <option key={bank._id} value={bank._id}>\r\n                      {bank.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n                {banks.length === 0 && (\r\n                  <p className=\"mt-1 text-xs text-gray-500\">\r\n                    No mortgage banks are currently available. Please try again later.\r\n                  </p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Employment Type */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Employment Type</label>\r\n                <div className=\"flex space-x-4\">\r\n                  <label className=\"flex items-center\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      value=\"employed\"\r\n                      checked={employmentType === 'employed'}\r\n                      onChange={(e) => setEmploymentType(e.target.value)}\r\n                      className=\"mr-2\"\r\n                    />\r\n                    Employed\r\n                  </label>\r\n                  <label className=\"flex items-center\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      value=\"self-employed\"\r\n                      checked={employmentType === 'self-employed'}\r\n                      onChange={(e) => setEmploymentType(e.target.value)}\r\n                      className=\"mr-2\"\r\n                    />\r\n                    Self-Employed\r\n                  </label>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Employment Details */}\r\n              {employmentType === 'employed' && (\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Employer Name</label>\r\n                    <MemoryInput\r\n                      fieldKey=\"mortgage.prequal.employerName\"\r\n                      value={employerName}\r\n                      onChange={(val) => setEmployerName(val)}\r\n                      placeholder=\"Company Name\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Job Title</label>\r\n                    <MemoryInput\r\n                      fieldKey=\"mortgage.prequal.jobTitle\"\r\n                      value={jobTitle}\r\n                      onChange={(val) => setJobTitle(val)}\r\n                      placeholder=\"Your Position\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Monthly Income ()</label>\r\n                    <MemoryInput\r\n                      type=\"number\"\r\n                      fieldKey=\"mortgage.prequal.monthlyIncome\"\r\n                      value={monthlyIncome}\r\n                      onChange={(val) => setMonthlyIncome(val)}\r\n                      placeholder=\"500000\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Years of Employment</label>\r\n                    <MemoryInput\r\n                      type=\"number\"\r\n                      fieldKey=\"mortgage.prequal.yearsOfEmployment\"\r\n                      value={yearsOfEmployment}\r\n                      onChange={(val) => setYearsOfEmployment(val)}\r\n                      placeholder=\"5\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Business Details */}\r\n              {employmentType === 'self-employed' && (\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Business Name</label>\r\n                    <MemoryInput\r\n                      fieldKey=\"mortgage.prequal.businessName\"\r\n                      value={businessName}\r\n                      onChange={(val) => setBusinessName(val)}\r\n                      placeholder=\"Business Name\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Business Type</label>\r\n                    <MemoryInput\r\n                      fieldKey=\"mortgage.prequal.businessType\"\r\n                      value={businessType}\r\n                      onChange={(val) => setBusinessType(val)}\r\n                      placeholder=\"e.g., Consulting, Trading\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"col-span-2\">\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Monthly Business Income ()</label>\r\n                    <MemoryInput\r\n                      type=\"number\"\r\n                      fieldKey=\"mortgage.prequal.businessMonthlyIncome\"\r\n                      value={businessMonthlyIncome}\r\n                      onChange={(val) => setBusinessMonthlyIncome(val)}\r\n                      placeholder=\"750000\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Bank Statements Upload */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Bank Statements (Last 6 months) - Optional</label>\r\n                <input\r\n                  type=\"file\"\r\n                  multiple\r\n                  accept=\".pdf,.jpg,.jpeg,.png\"\r\n                  onChange={handleFileUpload}\r\n                  disabled={isUploading || isSubmitting}\r\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                />\r\n                {bankStatements.length > 0 && (\r\n                  <div className=\"mt-2\">\r\n                    <p className=\"text-sm text-gray-600\">Selected files:</p>\r\n                    <ul className=\"text-sm text-gray-500\">\r\n                      {bankStatements.map((file, index) => (\r\n                        <li key={index}> {file.name} ({(file.size / 1024 / 1024).toFixed(2)} MB)</li>\r\n                      ))}\r\n                    </ul>\r\n                  </div>\r\n                )}\r\n                {isUploading && (\r\n                  <div className=\"mt-3\">\r\n                    <div className=\"flex items-center justify-between text-sm text-gray-600 mb-1\">\r\n                      <span>Uploading documents...</span>\r\n                      <span>{uploadProgress}%</span>\r\n                    </div>\r\n                    <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                      <div\r\n                        className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\r\n                        style={{ width: `${uploadProgress}%` }}\r\n                      ></div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Terms and Conditions */}\r\n              <div>\r\n                <label className=\"flex items-start\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={acceptTerms}\r\n                    onChange={(e) => setAcceptTerms(e.target.checked)}\r\n                    className=\"mr-2 mt-1\"\r\n                  />\r\n                  <span className=\"text-sm text-gray-700\">\r\n                    I accept the mortgage pre-qualification terms and conditions and agree to provide additional documents as required.\r\n                  </span>\r\n                </label>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex space-x-3 mt-6\">\r\n              <button\r\n                onClick={() => {\r\n                  setShowPrequalificationModal(false);\r\n                  setEmploymentType('employed');\r\n                  setEmployerName('');\r\n                  setJobTitle('');\r\n                  setMonthlyIncome('');\r\n                  setYearsOfEmployment('');\r\n                  setBusinessName('');\r\n                  setBusinessType('');\r\n                  setBusinessMonthlyIncome('');\r\n                  setBankStatements([]);\r\n                  setAcceptTerms(false);\r\n                  setSelectedBankId('');\r\n                }}\r\n                className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                onClick={handlePrequalificationSubmission}\r\n                disabled={isSubmitting || isUploading}\r\n                className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2\"\r\n              >\r\n                {isUploading ? (\r\n                  <>\r\n                    <FaClock className=\"animate-spin\" />\r\n                    <span>Uploading Documents ({uploadProgress}%)...</span>\r\n                  </>\r\n                ) : isSubmitting ? (\r\n                  <>\r\n                    <FaClock className=\"animate-spin\" />\r\n                    <span>Submitting Request...</span>\r\n                  </>\r\n                ) : (\r\n                  <span>Submit Pre-qualification</span>\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Mortgage;\r\n\r\n\r\n\r\n","import React, { useCallback, useMemo, useState } from 'react';\nimport { FaHistory, FaTimes } from 'react-icons/fa';\n\nconst MemoryInput = ({\n  value,\n  onChange,\n  placeholder = '',\n  className = '',\n  error = false,\n  fieldKey, // unique storage key per field, e.g., 'title', 'price'\n  type = 'text',\n  min,\n  max,\n  step,\n  multiline = false,\n  rows = 4,\n}) => {\n  const [showSuggestions, setShowSuggestions] = useState(false);\n\n  const storageKey = useMemo(() => `memory_${fieldKey}`, [fieldKey]);\n\n  const getMemory = useCallback(() => {\n    try {\n      const raw = localStorage.getItem(storageKey);\n      return raw ? JSON.parse(raw) : [];\n    } catch {\n      return [];\n    }\n  }, [storageKey]);\n\n  const filteredSuggestions = useMemo(() => {\n    const memory = getMemory();\n    if (!value || value.toString().length < 1) {\n      // Show all suggestions when field is empty\n      return memory.slice(0, 8);\n    }\n    const lower = value.toString().toLowerCase();\n    return memory\n      .filter((m) => m?.v?.toString().toLowerCase().includes(lower))\n      .slice(0, 8);\n  }, [value, getMemory]);\n\n  const saveToMemory = useCallback(\n    (val) => {\n      const trimmed = (val ?? '').toString().trim();\n      if (!trimmed) return;\n      try {\n        const memory = getMemory();\n        const newList = [\n          { v: trimmed, t: Date.now() },\n          ...memory.filter((m) => m?.v !== trimmed),\n        ].slice(0, 12);\n        localStorage.setItem(storageKey, JSON.stringify(newList));\n      } catch {\n        // ignore\n      }\n    },\n    [getMemory, storageKey]\n  );\n\n  const handleBlur = useCallback(() => {\n    saveToMemory(value);\n    setTimeout(() => setShowSuggestions(false), 200);\n  }, [saveToMemory, value]);\n\n  const handleFocus = useCallback(() => {\n    const memory = getMemory();\n    if (memory.length > 0) setShowSuggestions(true);\n  }, [getMemory]);\n\n  const handleSelect = useCallback(\n    (suggestion) => {\n      onChange(suggestion.v);\n      setShowSuggestions(false);\n    },\n    [onChange]\n  );\n\n  const clearMemory = useCallback(() => {\n    localStorage.removeItem(storageKey);\n    setShowSuggestions(false);\n  }, [storageKey]);\n\n  const commonProps = {\n    value: value || '', // Ensure value is never null/undefined\n    onChange: (e) => onChange(e.target.value),\n    onBlur: handleBlur,\n    onFocus: handleFocus,\n    placeholder,\n    className:\n      `w-full px-4 py-3 border-2 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300 ${\n        error ? 'border-red-300 focus:border-red-500' : 'border-gray-200 focus:border-blue-500'\n      } ${className}`,\n  };\n\n  return (\n    <div className=\"relative\">\n      <div className=\"relative\">\n        {multiline ? (\n          <textarea rows={rows} {...commonProps} />\n        ) : (\n          <input type={type} min={min} max={max} step={step} {...commonProps} />\n        )}\n\n        {getMemory().length > 0 && (\n          <button\n            type=\"button\"\n            onClick={clearMemory}\n            className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-red-500\"\n            title=\"Clear history\"\n          >\n            <FaTimes className=\"h-4 w-4\" />\n          </button>\n        )}\n      </div>\n\n      {showSuggestions && filteredSuggestions.length > 0 && (\n        <div className=\"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-b-xl shadow-lg z-50 max-h-60 overflow-y-auto\">\n          <div className=\"px-4 py-2 bg-blue-50 border-b border-blue-200 flex items-center text-xs text-blue-700 uppercase tracking-wide font-semibold\">\n            <FaHistory className=\"mr-2\" /> Recent entries ({filteredSuggestions.length})\n          </div>\n          {filteredSuggestions.map((s, idx) => (\n            <button\n              key={`${storageKey}-${idx}`}\n              type=\"button\"\n              onClick={() => handleSelect(s)}\n              className=\"w-full px-4 py-3 text-left hover:bg-blue-50 border-b border-gray-100 last:border-b-0 transition-colors text-sm\"\n            >\n              <span className=\"font-medium\">{s.v}</span>\n              <span className=\"text-xs text-gray-500 ml-2\">\n                {new Date(s.t).toLocaleDateString()}\n              </span>\n            </button>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MemoryInput;\n\n\n"],"names":["uploadMortgageDocuments","async","files","applicationId","arguments","length","undefined","onProgress","Error","token","localStorage","getItem","maxSize","allowedTypes","invalidFiles","filter","file","size","name","includes","type","join","formData","FormData","forEach","append","response","axios","post","getApiUrl","headers","onUploadProgress","progressEvent","total","percentCompleted","Math","round","loaded","data","success","uploaded","map","index","url","uploadedAt","Date","toISOString","publicId","uploadedFiles","_response$data","message","error","_error$response","_error$response$data","console","Mortgage","user","useAuth","properties","loading","propertiesLoading","useProperty","getUserApplications","getApplicationsByStatus","refreshApplications","useMortgage","navigate","useNavigate","activeTab","setActiveTab","useState","selectedLocation","setSelectedLocation","selectedPriceRange","setSelectedPriceRange","selectedPropertyType","setSelectedPropertyType","selectedEligibility","setSelectedEligibility","homePrice","setHomePrice","downPayment","setDownPayment","loanTerm","setLoanTerm","interestRate","setInterestRate","showMortgageModal","setShowMortgageModal","showPrequalificationModal","setShowPrequalificationModal","selectedProperty","setSelectedProperty","employmentType","setEmploymentType","employerName","setEmployerName","jobTitle","setJobTitle","monthlyIncome","setMonthlyIncome","yearsOfEmployment","setYearsOfEmployment","businessName","setBusinessName","businessType","setBusinessType","businessMonthlyIncome","setBusinessMonthlyIncome","bankStatements","setBankStatements","acceptTerms","setAcceptTerms","banks","setBanks","selectedBankId","setSelectedBankId","isSubmitting","setIsSubmitting","uploadProgress","setUploadProgress","isUploading","setIsUploading","useEffect","get","Authorization","loadBanks","handleFileUpload","event","Array","from","target","handlePagination","pageNumber","toast","allEligibleProperties","useMemo","prop","price","_prop$images","propertyId","id","_id","parseFloat","downPaymentPercent","typeSlug","monthlyPayment","calculateMonthlyPayment","principal","annualRate","years","monthlyRate","numberOfPayments","pow","category","tags","isVerified","push","yearBuilt","getFullYear","locationStr","location","city","state","trim","title","image","images","bedrooms","bathrooms","area","sqft","isPreApproved","isNewDevelopment","isRecentlyAdded","createdAt","now","originalProperty","eligibleProperties","p","userApplications","recentApplications","sort","a","b","slice","loanAmount","totalInterest","totalPayment","_jsxs","className","children","_jsx","FaHome","FaMoneyBillWave","FaPercentage","FaCalendar","onClick","handlePreQualification","FaArrowRight","rate","change","trend","FaArrowDown","abs","FaArrowUp","height","style","href","tabCounts","key","label","tab","split","value","onChange","e","handleFilterResults","filters","priceRange","propertyType","eligibility","log","FaFilter","handleResetFilters","FaRedo","replace","property","src","alt","tag","FaBed","FaBath","FaRuler","toLocaleString","handleViewProperty","handleApplyMortgage","page","MemoryInput","fieldKey","val","parseInt","min","max","step","rating","lender","FaStar","application","_application$property","_application$requeste","_application$mortgage","status","FaCheckCircle","FaTimesCircle","FaInfoCircle","FaClock","toLocaleDateString","requestedAmount","mortgageBank","resource","FaFileAlt","bank","_selectedBank$mortgag","selectedBank","find","activeProducts","mortgageProducts","isActive","product","_product$minLoanAmoun","_product$maxLoanAmoun","description","interestRateType","minLoanAmount","maxLoanAmount","minDownPaymentPercent","maxLoanTerm","eligibilityCriteria","minMonthlyIncome","minCreditScore","checked","placeholder","multiple","accept","disabled","toFixed","width","propertyPrice","loanTermYears","employmentDetails","documents","uploadResult","progress","mortgageBankId","_response$data2","setTimeout","info","errorMessage","_data$errors","_data$errors$","errors","msg","request","_Fragment","duration","_data$estimatedMaxLoa","_data$estimatedProper","_data$estimatedDownPa","estimatedMaxLoan","estimatedPropertyValue","estimatedDownPayment","icon","_ref","multiline","rows","showSuggestions","setShowSuggestions","storageKey","getMemory","useCallback","raw","JSON","parse","filteredSuggestions","memory","toString","lower","toLowerCase","m","_m$v","v","saveToMemory","trimmed","newList","t","setItem","stringify","handleBlur","handleFocus","handleSelect","suggestion","clearMemory","removeItem","commonProps","onBlur","onFocus","FaTimes","FaHistory","s","idx"],"sourceRoot":""}