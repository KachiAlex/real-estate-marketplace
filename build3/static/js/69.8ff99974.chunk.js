"use strict";(self.webpackChunkreal_estate_marketplace=self.webpackChunkreal_estate_marketplace||[]).push([[69],{2069:(e,s,t)=>{t.r(s),t.d(s,{default:()=>S});var n=t(5043),l=t(3216),i=t(4063),r=t(3519),a=t(7636),d=t(4282),c=t(1072),o=t(8602),m=t(8139),u=t.n(m),x=t(5173),h=t.n(x),v=t(7852),p=t(579);h().string,h().bool,h().bool,h().bool,h().bool;const j=n.forwardRef((e,s)=>{let{bsPrefix:t,className:n,fluid:l=!1,rounded:i=!1,roundedCircle:r=!1,thumbnail:a=!1,...d}=e;return t=(0,v.oU)(t,"img"),(0,p.jsx)("img",{ref:s,...d,className:u()(n,l&&`${t}-fluid`,i&&"rounded",r&&"rounded-circle",a&&`${t}-thumbnail`)})});j.displayName="Image";const b=j;var N=t(9620),g=t(8258),y=t(2083),f=t(9853),A=t(2825),w=t(3823),I=t(5016);const S=()=>{var e,s,t,m,u,x,h,v,j,S,R,L,k,$,F,M,C,T,O,D,B,P,E,H,V,_,z;const{id:G}=(0,l.g)(),U=(0,l.Zp)(),{user:Y}=(0,I.As)(),{getInvestmentById:Z}=(0,A.H)(),{createEscrowTransaction:q,getEscrowTransaction:J}=(0,w.N)(),[K,Q]=(0,n.useState)(null),[W,X]=(0,n.useState)(null),[ee,se]=(0,n.useState)(!0),[te,ne]=(0,n.useState)(null),[le,ie]=(0,n.useState)(!1),[re,ae]=(0,n.useState)(""),[de,ce]=(0,n.useState)(null),[oe,me]=(0,n.useState)(!1);(0,n.useEffect)(()=>{ue()},[G]);const ue=async()=>{try{se(!0);const s=await Z(G);if(!s)return ne("Investment not found"),void se(!1);Q(s);(null===s||void 0===s?void 0:s.vendorId)||(null===s||void 0===s||s.sponsorId);if(s.sponsor&&X(s.sponsor),Y&&"buyer"===Y.role)try{const e=await J(G);ce(e)}catch(e){}}catch(e){ne(e.message)}finally{se(!1)}};if(ee)return(0,p.jsx)(r.A,{className:"py-5",children:(0,p.jsx)("div",{className:"text-center",children:(0,p.jsx)("div",{className:"spinner-border",role:"status",children:(0,p.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})});if(te||!K)return(0,p.jsxs)(r.A,{className:"py-5",children:[(0,p.jsx)(a.A,{variant:"danger",children:te||"Investment not found"}),(0,p.jsx)(d.A,{variant:"outline-primary",onClick:()=>U("/investments"),children:"Back to Investments"})]});const xe={...K,currentFunding:Number(null!==(e=null!==(s=K.currentFunding)&&void 0!==s?s:K.raisedAmount)&&void 0!==e?e:0)||0,targetAmount:Number(null!==(t=null!==(m=K.targetAmount)&&void 0!==m?m:K.totalAmount)&&void 0!==t?t:0)||0,minInvestment:Number(null!==(u=null!==(x=K.minInvestment)&&void 0!==x?x:K.minimumInvestment)&&void 0!==u?u:0)||0,maxInvestment:Number(null!==(h=null!==(v=K.maxInvestment)&&void 0!==v?v:K.totalAmount)&&void 0!==h?h:0)||0,expectedROI:Number(null!==(j=null!==(S=K.expectedROI)&&void 0!==S?S:K.expectedReturn)&&void 0!==j?j:0)||0,termMonths:Number(null!==(R=null!==(L=K.termMonths)&&void 0!==L?L:K.duration)&&void 0!==R?R:0)||0,riskScore:Number(null!==(k=K.riskScore)&&void 0!==k?k:K.expectedReturn&&K.expectedReturn>20?7:K.expectedReturn&&K.expectedReturn>15?5:3)||5,propertyType:null!==($=null!==(F=K.propertyType)&&void 0!==F?F:K.type)&&void 0!==$?$:"N/A",propertyLocation:null!==(M=K.propertyLocation)&&void 0!==M?M:null!==(C=K.location)&&void 0!==C&&C.address?`${K.location.address}, ${K.location.city}`:"N/A",propertyValue:Number(null!==(T=null!==(O=K.propertyValue)&&void 0!==O?O:K.totalAmount)&&void 0!==T?T:0)||0,propertyDescription:null!==(D=null!==(B=K.propertyDescription)&&void 0!==B?B:K.description)&&void 0!==D?D:"",paymentSchedule:null!==(P=K.paymentSchedule)&&void 0!==P?P:"Monthly",exitStrategy:null!==(E=K.exitStrategy)&&void 0!==E?E:"End of term",vendorId:null!==(H=null!==(V=K.vendorId)&&void 0!==V?V:K.sponsorId)&&void 0!==H?H:null},he=(ve=null!==(_=xe.riskScore)&&void 0!==_?_:5)<=3?{level:"Low",color:"success"}:ve<=6?{level:"Medium",color:"warning"}:{level:"High",color:"danger"};var ve;const pe=xe.targetAmount>0?xe.currentFunding/xe.targetAmount*100:0;return(0,p.jsxs)(r.A,{fluid:!0,className:"px-0",children:[(0,p.jsx)("div",{className:"position-relative mb-4",style:{backgroundColor:"#f8f9fa"},children:(0,p.jsxs)(c.A,{className:"g-0",children:[K.images&&K.images.length>0&&(0,p.jsx)(o.A,{lg:8,children:(0,p.jsx)("div",{style:{height:"500px",overflow:"hidden"},children:(0,p.jsx)(b,{src:K.images[0],alt:K.title,fluid:!0,style:{width:"100%",height:"100%",objectFit:"cover"}})})}),(0,p.jsx)(o.A,{lg:K.images&&K.images.length>0?4:12,children:(0,p.jsxs)("div",{className:"p-4 h-100 d-flex flex-column justify-content-between",style:{minHeight:K.images&&K.images.length>0?"500px":"auto",backgroundColor:"#fff"},children:[(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:"d-flex justify-content-between align-items-start mb-3",children:[(0,p.jsxs)("div",{className:"flex-grow-1",children:[(0,p.jsx)("h1",{className:"h2 mb-2 fw-bold",children:K.title}),(0,p.jsx)("p",{className:"text-muted mb-3",children:K.subtitle||"Investment Opportunity"})]}),(0,p.jsx)("div",{className:"ms-3",children:(e=>{const s={active:{variant:"success",text:"Active"},funded:{variant:"info",text:"Fully Funded"},completed:{variant:"secondary",text:"Completed"},cancelled:{variant:"danger",text:"Cancelled"}}[e]||{variant:"secondary",text:e};return(0,p.jsx)(i.A,{bg:s.variant,children:s.text})})(K.status)})]}),(0,p.jsxs)(c.A,{className:"g-3 mb-4",children:[(0,p.jsx)(o.A,{xs:6,sm:4,children:(0,p.jsxs)("div",{className:"text-center p-3 bg-light rounded",children:[(0,p.jsx)("div",{className:"text-muted small mb-1",children:"ROI"}),(0,p.jsxs)("div",{className:"h4 text-success mb-0 fw-bold",children:[xe.expectedROI||0,"%"]})]})}),(0,p.jsx)(o.A,{xs:6,sm:4,children:(0,p.jsxs)("div",{className:"text-center p-3 bg-light rounded",children:[(0,p.jsx)("div",{className:"text-muted small mb-1",children:"Term"}),(0,p.jsxs)("div",{className:"h4 mb-0 fw-bold",children:[xe.termMonths||0,"m"]})]})}),(0,p.jsx)(o.A,{xs:12,sm:4,children:(0,p.jsxs)("div",{className:"text-center p-3 bg-light rounded",children:[(0,p.jsx)("div",{className:"text-muted small mb-1",children:"Risk"}),(0,p.jsx)(i.A,{bg:he.color,className:"fs-6 px-3 py-2",children:he.level})]})})]}),(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,p.jsx)("span",{className:"text-muted small",children:"Funding Progress"}),(0,p.jsxs)("span",{className:"fw-bold text-primary",children:[pe.toFixed(1),"%"]})]}),(0,p.jsx)(N.A,{now:pe,variant:"success",style:{height:"12px",borderRadius:"6px"},className:"mb-2"}),(0,p.jsxs)(c.A,{className:"g-2 text-center",children:[(0,p.jsx)(o.A,{xs:6,children:(0,p.jsxs)("div",{className:"p-2 bg-light rounded",children:[(0,p.jsx)("div",{className:"text-muted small",children:"Raised"}),(0,p.jsxs)("div",{className:"fw-bold text-success",children:["$",(Number(xe.currentFunding)||0).toLocaleString()]})]})}),(0,p.jsx)(o.A,{xs:6,children:(0,p.jsxs)("div",{className:"p-2 bg-light rounded",children:[(0,p.jsx)("div",{className:"text-muted small",children:"Target"}),(0,p.jsxs)("div",{className:"fw-bold",children:["$",(Number(xe.targetAmount)||0).toLocaleString()]})]})})]})]})]}),"active"===K.status&&"buyer"===(null===Y||void 0===Y?void 0:Y.role)&&(0,p.jsx)("div",{className:"mt-auto",children:de?(0,p.jsx)(a.A,{variant:"info",className:"mb-0",children:(0,p.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("strong",{children:"Investment in Progress"}),(0,p.jsx)("div",{className:"small",children:"Active escrow transaction"})]}),(0,p.jsx)(d.A,{variant:"primary",size:"sm",onClick:()=>U(`/escrow/${de.id}`),children:"View"})]})}):(0,p.jsx)(d.A,{variant:"success",size:"lg",className:"w-100 fw-bold",onClick:()=>ie(!0),children:"Invest Now"})})]})})]})}),(0,p.jsx)(r.A,{children:(0,p.jsxs)(c.A,{children:[(0,p.jsxs)(o.A,{lg:8,children:[(0,p.jsx)(g.A,{className:"mb-4 border-0 shadow-sm",children:(0,p.jsxs)(g.A.Body,{className:"p-4",children:[(0,p.jsx)("h4",{className:"mb-3 fw-bold",children:"About This Investment"}),(0,p.jsx)("p",{className:"lead mb-0",style:{lineHeight:"1.8"},children:K.description})]})}),(0,p.jsxs)(c.A,{className:"g-4 mb-4",children:[(0,p.jsx)(o.A,{md:6,children:(0,p.jsx)(g.A,{className:"h-100 border-0 shadow-sm",children:(0,p.jsxs)(g.A.Body,{className:"p-4",children:[(0,p.jsx)("h5",{className:"mb-3 fw-bold",children:"Property Collateral"}),(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsx)("div",{className:"text-muted small mb-1",children:"Property Type"}),(0,p.jsx)("div",{className:"fw-semibold",children:xe.propertyType||"N/A"})]}),(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsx)("div",{className:"text-muted small mb-1",children:"Location"}),(0,p.jsx)("div",{className:"fw-semibold",children:xe.propertyLocation||"N/A"})]}),(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsx)("div",{className:"text-muted small mb-1",children:"Estimated Value"}),(0,p.jsxs)("div",{className:"h5 text-primary mb-0 fw-bold",children:["$",(Number(xe.propertyValue)||0).toLocaleString()]})]}),xe.propertyDescription&&(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:"text-muted small mb-1",children:"Details"}),(0,p.jsx)("div",{className:"text-muted small",children:xe.propertyDescription})]})]})})}),(0,p.jsx)(o.A,{md:6,children:(0,p.jsx)(g.A,{className:"h-100 border-0 shadow-sm",children:(0,p.jsxs)(g.A.Body,{className:"p-4",children:[(0,p.jsx)("h5",{className:"mb-3 fw-bold",children:"Investment Terms"}),(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsxs)("div",{className:"d-flex justify-content-between align-items-center py-2 border-bottom",children:[(0,p.jsx)("span",{className:"text-muted",children:"Minimum Investment"}),(0,p.jsxs)("span",{className:"fw-bold",children:["$",(Number(xe.minInvestment)||0).toLocaleString()]})]}),(0,p.jsxs)("div",{className:"d-flex justify-content-between align-items-center py-2 border-bottom",children:[(0,p.jsx)("span",{className:"text-muted",children:"Maximum Investment"}),(0,p.jsxs)("span",{className:"fw-bold",children:["$",(Number(xe.maxInvestment)||0).toLocaleString()]})]}),(0,p.jsxs)("div",{className:"d-flex justify-content-between align-items-center py-2 border-bottom",children:[(0,p.jsx)("span",{className:"text-muted",children:"Payment Schedule"}),(0,p.jsx)("span",{className:"fw-bold",children:xe.paymentSchedule||"N/A"})]}),(0,p.jsxs)("div",{className:"d-flex justify-content-between align-items-center py-2",children:[(0,p.jsx)("span",{className:"text-muted",children:"Exit Strategy"}),(0,p.jsx)("span",{className:"fw-bold",children:xe.exitStrategy||"N/A"})]})]})]})})})]}),K.legalDocuments&&K.legalDocuments.length>0&&(0,p.jsx)(g.A,{className:"mb-4 border-0 shadow-sm",children:(0,p.jsxs)(g.A.Body,{className:"p-4",children:[(0,p.jsx)("h5",{className:"mb-3 fw-bold",children:"Legal Documents"}),(0,p.jsx)("div",{className:"d-flex flex-column gap-2",children:K.legalDocuments.map((e,s)=>(0,p.jsxs)("div",{className:"d-flex justify-content-between align-items-center p-3 bg-light rounded",children:[(0,p.jsx)("span",{className:"fw-semibold",children:e.name}),(0,p.jsx)(d.A,{variant:"outline-primary",size:"sm",href:e.url,target:"_blank",children:"View"})]},s))})]})})]}),(0,p.jsx)(o.A,{lg:4,children:(0,p.jsx)("div",{className:"sticky-top",style:{top:"20px"},children:(0,p.jsxs)(g.A,{className:"border-0 shadow-sm",children:[(0,p.jsx)(g.A.Header,{className:"bg-primary text-white py-3",children:(0,p.jsx)("h5",{className:"mb-0 fw-bold",children:"Investment Summary"})}),(0,p.jsxs)(g.A.Body,{className:"p-4",children:[(0,p.jsxs)("div",{className:"text-center mb-4 p-4 bg-light rounded",children:[(0,p.jsx)("div",{className:"text-muted small mb-2",children:"Expected Return"}),(0,p.jsxs)("h2",{className:"text-success mb-2 fw-bold",children:["$",(parseFloat(re||xe.minInvestment||0)*((xe.expectedROI||0)/100)||0).toLocaleString()]}),(0,p.jsxs)("div",{className:"text-muted small",children:["Based on ",xe.expectedROI||0,"% ROI"]})]}),(0,p.jsxs)("div",{className:"mb-3 pb-3 border-bottom",children:[(0,p.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,p.jsx)("span",{className:"text-muted",children:"Investment Term"}),(0,p.jsxs)("strong",{children:[xe.termMonths||0," months"]})]}),(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsx)("span",{className:"text-muted",children:"Risk Level"}),(0,p.jsx)(i.A,{bg:he.color,children:he.level})]})]}),(W||K.sponsor)&&(0,p.jsxs)("div",{className:"mb-3 pb-3 border-bottom",children:[(0,p.jsx)("div",{className:"text-muted small mb-2",children:"Investment Company"}),(0,p.jsx)("div",{className:"fw-bold mb-1",children:(null===W||void 0===W?void 0:W.companyName)||(null===(z=K.sponsor)||void 0===z?void 0:z.name)||"N/A"}),(0,p.jsx)("div",{className:"text-muted small",children:(null===W||void 0===W?void 0:W.email)||"N/A"})]}),"funded"===K.status&&(0,p.jsx)(a.A,{variant:"info",className:"mb-0",children:"This investment opportunity is fully funded."})]})]})})})]})}),(0,p.jsxs)(y.A,{show:le,onHide:()=>ie(!1),children:[(0,p.jsx)(y.A.Header,{closeButton:!0,children:(0,p.jsxs)(y.A.Title,{children:["Invest in ",K.title]})}),(0,p.jsxs)(y.A.Body,{children:[te&&(0,p.jsx)(a.A,{variant:"danger",children:te}),(0,p.jsxs)(f.A,{children:[(0,p.jsxs)(f.A.Group,{className:"mb-3",children:[(0,p.jsx)(f.A.Label,{children:"Investment Amount"}),(0,p.jsx)(f.A.Control,{type:"number",value:re,onChange:e=>ae(e.target.value),min:xe.minInvestment,max:xe.maxInvestment,placeholder:`Minimum: $${(Number(xe.minInvestment)||0).toLocaleString()}`}),(0,p.jsxs)(f.A.Text,{className:"text-muted",children:["Minimum: $",(Number(xe.minInvestment)||0).toLocaleString()," | Maximum: $",(Number(xe.maxInvestment)||0).toLocaleString()]})]}),(0,p.jsxs)(a.A,{variant:"info",children:[(0,p.jsx)("h6",{children:"Investment Summary"}),(0,p.jsxs)("p",{className:"mb-1",children:[(0,p.jsx)("strong",{children:"Amount:"})," $",(parseFloat(re||0)||0).toLocaleString()]}),(0,p.jsxs)("p",{className:"mb-1",children:[(0,p.jsx)("strong",{children:"Expected Return:"})," $",(parseFloat(re||0)*((xe.expectedROI||0)/100)||0).toLocaleString()]}),(0,p.jsxs)("p",{className:"mb-0",children:[(0,p.jsx)("strong",{children:"Term:"})," ",xe.termMonths||0," months"]})]}),(0,p.jsxs)(a.A,{variant:"warning",children:[(0,p.jsx)("h6",{children:"Important Notice"}),(0,p.jsx)("p",{className:"mb-0",children:"Your investment will be secured by the property collateral. The investment company must provide original property documents before funds are released."})]})]})]}),(0,p.jsxs)(y.A.Footer,{children:[(0,p.jsx)(d.A,{variant:"secondary",onClick:()=>ie(!1),children:"Cancel"}),(0,p.jsx)(d.A,{variant:"success",onClick:async()=>{var e,s,t,n,l,i,r,a,d,c,o,m,u,x;if(!Y||!Y.id&&!Y.uid)return void ne("Please login to invest");if(!re||parseFloat(re)<=0)return void ne("Please enter a valid investment amount");if(!K)return void ne("Investment data not loaded");const h={...K,currentFunding:Number(null!==(e=null!==(s=K.currentFunding)&&void 0!==s?s:K.raisedAmount)&&void 0!==e?e:0)||0,targetAmount:Number(null!==(t=null!==(n=K.targetAmount)&&void 0!==n?n:K.totalAmount)&&void 0!==t?t:0)||0,minInvestment:Number(null!==(l=null!==(i=K.minInvestment)&&void 0!==i?i:K.minimumInvestment)&&void 0!==l?l:0)||0,maxInvestment:Number(null!==(r=null!==(a=K.maxInvestment)&&void 0!==a?a:K.totalAmount)&&void 0!==r?r:0)||0,expectedROI:Number(null!==(d=null!==(c=K.expectedROI)&&void 0!==c?c:K.expectedReturn)&&void 0!==d?d:0)||0,termMonths:Number(null!==(o=null!==(m=K.termMonths)&&void 0!==m?m:K.duration)&&void 0!==o?o:0)||0,propertyLocation:null!==(u=K.propertyLocation)&&void 0!==u?u:null!==(x=K.location)&&void 0!==x&&x.address?`${K.location.address}, ${K.location.city}`:"N/A"},v=h.minInvestment;if(parseFloat(re)<v)ne(`Minimum investment amount is $${(Number(v)||0).toLocaleString()}`);else try{var p,j,b;me(!0),ne(null);const e=null!==(p=null!==(j=K.vendorId)&&void 0!==j?j:K.sponsorId)&&void 0!==p?p:null,s=await q(G,parseFloat(re),Y.uid||Y.id,e,{type:"investment",investmentData:{...K,title:K.title,investmentTitle:K.title,expectedROI:h.expectedROI,expectedReturn:h.expectedROI,lockPeriod:h.termMonths,termMonths:h.termMonths,duration:h.termMonths,vendorId:e,sponsorId:e,sponsor:K.sponsor||W,vendor:K.vendor||K.sponsor,propertyLocation:h.propertyLocation}});if(!s.success)return void ne(s.error||"Failed to create escrow transaction");const t=s.id||(null===(b=s.data)||void 0===b?void 0:b.id);if(!t)return void ne("Failed to get escrow transaction ID");ie(!1),U(`/escrow/${t}`)}catch(N){console.error("Investment error:",N),ne(N.message||"An error occurred while processing your investment")}finally{me(!1)}},disabled:oe||!re,children:oe?"Processing...":"Confirm Investment"})]})]})]})}}}]);
//# sourceMappingURL=69.8ff99974.chunk.js.map