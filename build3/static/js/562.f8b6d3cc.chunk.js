"use strict";(self.webpackChunkreal_estate_marketplace=self.webpackChunkreal_estate_marketplace||[]).push([[562],{2407:(e,t,r)=>{r.d(t,{A:()=>i});r(5043);var s=r(3216),o=r(5475),a=r(5369),l=r(579);const i=e=>{let{items:t}=e;const r=(0,s.zy)().pathname.split("/").filter(e=>e),i=t||[{label:"Home",path:"/"},...r.map((e,t)=>{const s=`/${r.slice(0,t+1).join("/")}`;return{label:e.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),path:s}})];return(0,l.jsx)("nav",{className:"flex items-center space-x-2 text-sm text-gray-600 mb-4","aria-label":"Breadcrumb",children:(0,l.jsx)("ol",{className:"flex items-center space-x-2",children:i.map((e,t)=>{const r=t===i.length-1;return(0,l.jsxs)("li",{className:"flex items-center",children:[0===t&&(0,l.jsx)(a.rQ8,{className:"h-4 w-4 text-gray-400 mr-2","aria-hidden":"true"}),r?(0,l.jsx)("span",{className:"text-gray-900 font-medium","aria-current":"page",children:e.label}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.N_,{to:e.path,className:"hover:text-blue-600 transition-colors","aria-label":`Navigate to ${e.label}`,children:e.label}),(0,l.jsx)(a.X6T,{className:"h-3 w-3 text-gray-400 mx-2","aria-hidden":"true"})]})]},e.path||t)})})})}},4562:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m});var s=r(5043),o=r(3216),a=r(5475),l=r(4345),i=r(5016),n=r(5369),d=r(3768),c=r(8329),u=(r(2407),r(579));const m=()=>{const e=(0,o.Zp)(),[t]=(0,a.ok)(),{properties:r=[],filters:m={},setFilters:x,fetchProperties:p,toggleFavorite:g,saveSearch:h,loading:v}=(0,l.NC)(),{user:b,setAuthRedirect:f}=(0,i.As)(),y=(0,s.useMemo)(()=>Array.isArray(r)?r:[],[r]),[w,j]=(0,s.useState)(!1),[N,S]=(0,s.useState)(""),[C,P]=(0,s.useState)(""),[A,k]=(0,s.useState)(""),[L,F]=(0,s.useState)({min:"",max:""}),[I,M]=(0,s.useState)(""),[$,T]=(0,s.useState)(""),[E,R]=(0,s.useState)(""),[B,V]=(0,s.useState)(""),[X,D]=(0,s.useState)(""),[_,q]=(0,s.useState)({min:"",max:""}),[z,O]=(0,s.useState)(""),[U,H]=(0,s.useState)(1),[J]=(0,s.useState)(12),[G,W]=(0,s.useState)(new Set),[Q,Z]=(0,s.useState)(""),[Y,K]=(0,s.useState)(!1),[ee,te]=(0,s.useState)(""),[re,se]=(0,s.useState)(!1),[oe,ae]=(0,s.useState)("mostRecent"),le=(0,s.useCallback)(()=>{if(b&&b.id){const e=`favorites_${b.id}`,t=JSON.parse(localStorage.getItem(e)||"[]").map(e=>String(e));return W(new Set(t)),t.length}return W(new Set),0},[b]);(0,s.useEffect)(()=>{le()},[b,le]);const ie=s.useRef(!1);(0,s.useEffect)(()=>{if(!b)return;const e=e=>{ie.current||setTimeout(()=>{le()},150)},t=e=>{b&&b.id&&e.key===`favorites_${b.id}`&&!ie.current&&setTimeout(()=>{le()},150)};return window.addEventListener("favoritesUpdated",e),window.addEventListener("storage",t),()=>{window.removeEventListener("favoritesUpdated",e),window.removeEventListener("storage",t)}},[b,le]);const ne=e=>{if(!e)return e;return{"port harcourt":"Rivers","port-harcourt":"Rivers",ph:"Rivers",fct:"Abuja","abuja fct":"Abuja"}[e.toLowerCase().trim()]||e},de=e=>({buy:"For Sale",rent:"For Rent","short-let":"Shortlet",sale:"For Sale",lease:"For Lease"}[null===e||void 0===e?void 0:e.toLowerCase()]||e),ce=e=>({buy:"For Sale",rent:"For Rent","short-let":"Shortlet",sale:"For Sale",lease:"For Lease",shortlet:"Shortlet"}[null===e||void 0===e?void 0:e.toLowerCase()]||e),ue=(0,s.useMemo)(()=>{let e=[...y];if(E){const t=ne(E).toLowerCase().trim();e=e.filter(e=>{var r,s,o,a;const l=(null===e||void 0===e||null===(r=e.city)||void 0===r?void 0:r.toLowerCase())||(null!==e&&void 0!==e&&null!==(s=e.location)&&void 0!==s&&s.city&&"object"===typeof e.location?e.location.city.toLowerCase():"")||"";if(ne(l)===t||l===t)return!0;const i=(null===e||void 0===e||null===(o=e.state)||void 0===o?void 0:o.toLowerCase())||(null!==e&&void 0!==e&&null!==(a=e.location)&&void 0!==a&&a.state&&"object"===typeof e.location?e.location.state.toLowerCase():"")||"";if(ne(i)===t||i===t)return!0;if(null!==e&&void 0!==e&&e.location&&"string"===typeof e.location){const r=e.location.toLowerCase();if(r.split(",").map(e=>ne(e.trim())).includes(t))return!0;if(r.endsWith(t)||r.endsWith(`, ${t}`))return!0;const s=r.split(",").map(e=>e.trim());for(const e of s)if(ne(e)===t)return!0}if(null!==e&&void 0!==e&&e.location&&"object"===typeof e.location){var n,d;const r=(null===(n=e.location.city)||void 0===n?void 0:n.toLowerCase())||"",s=(null===(d=e.location.state)||void 0===d?void 0:d.toLowerCase())||"";if(ne(r)===t||ne(s)===t||r===t||s===t)return!0}return!1})}if($.trim()){const t=$.toLowerCase();e=e.filter(e=>{var r,s,o,a,l,i;return(null===(r=e.title)||void 0===r?void 0:r.toLowerCase().includes(t))||(null===(s=e.description)||void 0===s?void 0:s.toLowerCase().includes(t))||(null===(o=e.location)||void 0===o?void 0:o.toLowerCase().includes(t))||(null===(a=e.address)||void 0===a?void 0:a.toLowerCase().includes(t))||e.city&&e.city.toLowerCase().includes(t)||e.state&&e.state.toLowerCase().includes(t)||(null===(l=e.location)||void 0===l?void 0:l.city)&&"object"===typeof e.location&&e.location.city.toLowerCase().includes(t)||(null===(i=e.location)||void 0===i?void 0:i.state)&&"object"===typeof e.location&&e.location.state.toLowerCase().includes(t)})}if(B&&(e=e.filter(e=>e.type===B)),X&&(e=e.filter(e=>e.status===X||e.listingType===X||e.label===X)),_.min&&(e=e.filter(e=>e.price>=parseFloat(_.min))),_.max&&(e=e.filter(e=>e.price<=parseFloat(_.max))),z){const t=z.toLowerCase().trim();console.log("Properties: Filtering by vendor search term:",t),e=e.filter(e=>{var r,s,o,a,l;const i=((null===e||void 0===e?void 0:e.vendorName)||(null===e||void 0===e||null===(r=e.agent)||void 0===r?void 0:r.name)||(null!==e&&void 0!==e&&e.owner?`${e.owner.firstName||""} ${e.owner.lastName||""}`.trim():"")||(null===e||void 0===e||null===(s=e.owner)||void 0===s?void 0:s.name)||"").toLowerCase(),n=((null===e||void 0===e?void 0:e.vendorId)||(null===e||void 0===e?void 0:e.ownerId)||(null===e||void 0===e||null===(o=e.owner)||void 0===o?void 0:o.id)||"").toLowerCase(),d=((null===e||void 0===e?void 0:e.vendorCode)||(null===e||void 0===e||null===(a=e.owner)||void 0===a?void 0:a.vendorCode)||"").toLowerCase(),c=((null===e||void 0===e?void 0:e.vendorEmail)||(null===e||void 0===e?void 0:e.ownerEmail)||(null===e||void 0===e||null===(l=e.owner)||void 0===l?void 0:l.email)||"").toLowerCase();let u=!1;if(d){const e=d.toLowerCase().trim(),r=t.toLowerCase().trim(),s=e.replace(/^vnd-/,""),o=r.replace(/^vnd-/,"");u=e===r||s===o||s.includes(o)||e.includes(r)}const m=i.includes(t)||n.includes(t)||u||c.includes(t);var x,p;if(m)console.log("Properties: Match found - Property:",e.title,"vendorCode:",(null===e||void 0===e?void 0:e.vendorCode)||(null===e||void 0===e||null===(x=e.owner)||void 0===x?void 0:x.vendorCode)||"MISSING","vendorName:",(null===e||void 0===e?void 0:e.vendorName)||i||"MISSING","vendorEmail:",c||"MISSING","ownerId:",(null===e||void 0===e?void 0:e.ownerId)||(null===e||void 0===e||null===(p=e.owner)||void 0===p?void 0:p.id)||"MISSING","searchTerm:",t);else if(z.toLowerCase().includes("vnd-")){var g;console.log("Properties: VendorCode search failed - Property:",e.title,"vendorCode:",(null===e||void 0===e?void 0:e.vendorCode)||(null===e||void 0===e||null===(g=e.owner)||void 0===g?void 0:g.vendorCode)||"UNDEFINED","searchTerm:",t)}return m}),console.log("Properties: Filtered to",e.length,"properties for vendor search:",t)}let t=[...e];switch(oe){case"priceLow":t.sort((e,t)=>parseFloat((null===e||void 0===e?void 0:e.price)||0)-parseFloat((null===t||void 0===t?void 0:t.price)||0));break;case"priceHigh":t.sort((e,t)=>{const r=parseFloat((null===e||void 0===e?void 0:e.price)||0);return parseFloat((null===t||void 0===t?void 0:t.price)||0)-r});break;case"mostRecent":t.sort((e,t)=>{const r=null!==e&&void 0!==e&&e.createdAt?new Date(e.createdAt).getTime():0;return(null!==t&&void 0!==t&&t.createdAt?new Date(t.createdAt).getTime():0)-r});break;case"mostPopular":t.sort((e,t)=>{const r=parseInt((null===e||void 0===e?void 0:e.views)||0),s=parseInt((null===t||void 0===t?void 0:t.views)||0),o=parseInt((null===e||void 0===e?void 0:e.favorites)||0);return s+2*parseInt((null===t||void 0===t?void 0:t.favorites)||0)-(r+2*o)})}return t},[y,$,E,B,X,_,z,oe]),me=(0,s.useMemo)(()=>{const e=Array.from(new Set(y.map(e=>e.type).filter(Boolean))),t=Array.from(new Set(y.map(e=>e.status||e.listingType).filter(Boolean))),r=Array.from(new Set(y.map(e=>{var t;return(null===(t=e.location)||void 0===t?void 0:t.city)||e.location}).filter(Boolean)));return{types:e.length?e:["apartment","house","villa","condo","duplex"],statuses:t.length?t:["for-sale","for-rent","for-lease"],locations:r}},[y]),xe=(0,s.useMemo)(()=>{const e=new Map;return y.forEach(t=>{var r,s,o;const a=(null===t||void 0===t||null===(r=t.agent)||void 0===r?void 0:r.name)||(null!==t&&void 0!==t&&t.owner?`${t.owner.firstName||""} ${t.owner.lastName||""}`.trim():""),l=(null===t||void 0===t?void 0:t.ownerId)||(null===t||void 0===t||null===(s=t.owner)||void 0===s?void 0:s.id)||"",i=(null===t||void 0===t?void 0:t.vendorCode)||(null===t||void 0===t||null===(o=t.owner)||void 0===o?void 0:o.vendorCode)||"";a&&!e.has(l)&&e.set(l,{name:a,code:i})}),Array.from(e.entries()).map(e=>{let[t,r]=e;return{id:t,name:r.name,code:r.code}})},[y]),pe=Math.ceil(ue.length/J),ge=(U-1)*J,he=ge+J,ve=ue.slice(ge,he);(0,s.useEffect)(()=>{p({}).catch(e=>{console.warn("Error fetching properties on mount:",e)})},[p]),(0,s.useEffect)(()=>{const e=t.get("fromAlert"),r=t.get("alertName"),s=t.get("search"),o=t.get("location"),a=t.get("type"),l=t.get("status"),i=t.get("minPrice"),n=t.get("maxPrice"),c=t.get("minBedrooms"),u=t.get("maxBedrooms"),m=t.get("minBathrooms"),p=t.get("maxBathrooms"),g=t.get("minArea"),h=t.get("maxArea"),v=t.get("features");if(s&&(S(s),T(s)),o){const e=ne(o);R(e),s||S(e)}else s||R("");if(a){const e=de(a);["buy","rent","short-let","sale","lease"].includes(a.toLowerCase())?(D(e),k(e)):(V(e),P(e))}if(l){const e=ce(l);D(e),k(e)}if((i||n)&&(F(e=>({...e,min:i||e.min,max:n||e.max})),q({min:i||"",max:n||""})),e&&r){console.log("Loading properties from alert:",r),te(r);const e={location:o||"",type:a||"",minPrice:i?parseInt(i):"",maxPrice:n?parseInt(n):"",minBedrooms:c?parseInt(c):"",maxBedrooms:u?parseInt(u):"",minBathrooms:m?parseInt(m):"",maxBathrooms:p?parseInt(p):"",minArea:g?parseInt(g):"",maxArea:h?parseInt(h):"",features:v?v.split(","):[]};x(e),d.Ay.success(`Showing properties matching "${r}" alert criteria`)}else(o||a||l)&&d.Ay.success(`Filtering properties${o?` in ${o}`:""}${a?` - ${de(a)}`:""}${l?` - ${ce(l)}`:""}`)},[t,x]);const be=t=>{e(`/property/${t}`)},[fe,ye]=(0,s.useState)(!1),[we,je]=(0,s.useState)(null),[Ne,Se]=(0,s.useState)(""),[Ce,Pe]=(0,s.useState)(""),[Ae,ke]=(0,s.useState)(""),Le=e=>{const t=`${window.location.origin}/property/${e.id}`;navigator.clipboard.writeText(t).then(()=>{d.Ay.success("Property link copied to clipboard!")}).catch(()=>{d.Ay.error("Failed to copy link")})},Fe=()=>{P(""),k(""),F({min:"",max:""}),x({}),H(1),d.Ay.success("Filters cleared")},Ie=e=>{H(e),window.scrollTo({top:0,behavior:"smooth"})};return(0,u.jsxs)("div",{className:"p-6",children:[(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,u.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Properties"}),ee&&(0,u.jsxs)("div",{className:"flex items-center space-x-2 bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",children:[(0,u.jsx)(n.jNV,{className:"text-xs"}),(0,u.jsxs)("span",{children:["From Alert: ",ee]})]})]}),(0,u.jsx)("p",{className:"text-gray-600",children:ee?`Properties matching your "${ee}" alert criteria`:"Browse and filter properties to find your perfect match"})]}),(m.type||m.status||m.minPrice||m.maxPrice)&&(0,u.jsx)("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("span",{className:"text-sm font-medium text-blue-900",children:"Active Filters:"}),m.type&&(0,u.jsxs)("span",{className:"px-2 py-1 bg-blue-200 text-blue-800 rounded text-xs",children:["Type: ",m.type]}),m.status&&(0,u.jsxs)("span",{className:"px-2 py-1 bg-blue-200 text-blue-800 rounded text-xs",children:["Status: ",m.status]}),(m.minPrice||m.maxPrice)&&(0,u.jsxs)("span",{className:"px-2 py-1 bg-blue-200 text-blue-800 rounded text-xs",children:["Price: \u20a6",m.minPrice||"0"," - \u20a6",m.maxPrice||"\u221e"]})]}),(0,u.jsx)("button",{onClick:()=>{b?K(!0):d.Ay.error("Please login to save searches")},className:"bg-orange-500 text-white px-3 py-1 rounded text-xs flex items-center",children:"Save Search"})]})}),(0,u.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,u.jsxs)("div",{className:"w-full lg:w-80 bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Filters"}),(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Properties"}),(0,u.jsx)("input",{type:"text",placeholder:"Search by title, location, or description...",value:N,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price Range"}),(0,u.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,u.jsx)("input",{type:"number",placeholder:"Min Price",value:L.min,onChange:e=>F(t=>({...t,min:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,u.jsx)("input",{type:"number",placeholder:"Max Price",value:L.max,onChange:e=>F(t=>({...t,max:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Type"}),(0,u.jsxs)("select",{value:C,onChange:e=>P(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,u.jsx)("option",{value:"",children:"All Types"}),me.types.map(e=>(0,u.jsx)("option",{value:e,children:e},e))]})]}),(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,u.jsxs)("select",{value:A,onChange:e=>k(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,u.jsx)("option",{value:"",children:"All Status"}),me.statuses.map(e=>(0,u.jsx)("option",{value:e,children:e},e))]})]}),(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search by Vendor"}),(0,u.jsx)("input",{type:"text",value:I,onChange:e=>M(e.target.value),placeholder:"Name, email, or Vendor ID (VND-XXXXX)...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),xe.length>0&&I&&(0,u.jsx)("div",{className:"mt-2 max-h-40 overflow-y-auto border border-gray-200 rounded-lg bg-white shadow-lg",children:xe.filter(e=>e.name.toLowerCase().includes(I.toLowerCase())||e.code&&e.code.toLowerCase().includes(I.toLowerCase())).slice(0,5).map((e,t)=>(0,u.jsxs)("button",{onClick:()=>M(e.code||e.name),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-blue-50 rounded transition-colors",children:[(0,u.jsx)("span",{children:e.name||"Unknown Vendor"}),e.code&&(0,u.jsxs)("span",{className:"ml-2 text-xs text-blue-600 font-mono",children:["(",e.code,")"]})]},e.code||e.name||`vendor-${t}`))})]}),(0,u.jsxs)("div",{className:"space-y-3",children:[(0,u.jsx)("button",{onClick:async()=>{se(!0);try{T(N),V(C),D(A),q({...L}),O(I);const e={...m,type:C,status:A,minPrice:L.min,maxPrice:L.max,search:N};x(e),await p(e,1),H(1),d.Ay.success("Filters applied successfully!")}catch(e){console.error("Error applying filters:",e),d.Ay.error("Failed to apply filters")}finally{se(!1)}},disabled:re||v,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:re||v?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,u.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,u.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Applying Filters..."]}):"Apply Filters"}),(0,u.jsx)("button",{onClick:()=>{P(""),k(""),F({min:"",max:""}),S(""),M(""),V(""),D(""),q({min:"",max:""}),T(""),O(""),x({}),p({},1),H(1)},disabled:re||v,className:"w-full bg-red-500 text-white py-2 px-4 rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear All Filters"}),(0,u.jsx)("button",{onClick:Fe,disabled:re||v,className:"w-full text-gray-600 py-2 px-4 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Reset"})]})]}),(0,u.jsxs)("div",{className:"w-full lg:flex-1",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:[ue.length," Properties Found"]}),(0,u.jsxs)("p",{className:"text-sm text-gray-600",children:["Showing ",ge+1,"-",Math.min(he,ue.length)," of ",ue.length," properties",ue.length!==y.length&&(0,u.jsxs)("span",{className:"text-blue-600 ml-2",children:["(filtered from ",y.length," total)"]})]})]}),(0,u.jsxs)("select",{value:oe,onChange:e=>ae(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,u.jsx)("option",{value:"mostRecent",children:"Sort by: Most Recent"}),(0,u.jsx)("option",{value:"priceLow",children:"Price: Low to High"}),(0,u.jsx)("option",{value:"priceHigh",children:"Price: High to Low"}),(0,u.jsx)("option",{value:"mostPopular",children:"Most Popular"})]})]}),(0,u.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v?(0,u.jsx)(c.A,{count:12}):ve.length>0?ve.map(e=>{var t,r,s,o;return(0,u.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("div",{onClick:()=>be(e.id),className:"cursor-pointer",children:(0,u.jsx)("img",{src:e.image||"https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=400&h=300&fit=crop",alt:e.title,className:"w-full h-48 object-cover"})}),e.tag&&(0,u.jsx)("div",{className:`absolute top-2 left-2 ${e.tagColor||"bg-orange-500"} text-white px-2 py-1 rounded text-xs font-medium`,children:e.tag}),(0,u.jsxs)("div",{className:"absolute top-2 right-2 flex space-x-2 z-10",children:[(0,u.jsx)("button",{onClick:t=>{t.stopPropagation(),(async e=>{if(!b)return void d.Ay.error("Please login to save properties to favorites");const t=String(e),r=G.has(t);ie.current=!0;const s=new Set(G);r?s.delete(t):s.add(t),W(s);try{const r=y.find(r=>{const s=r.id||r.propertyId||r._id;return String(s)===t||s===e})||ue.find(r=>{const s=r.id||r.propertyId||r._id;return String(s)===t||s===e}),s=await g(t,r);if(!s||!s.success)throw new Error((null===s||void 0===s?void 0:s.error)||"Failed to toggle favorite");if(b&&b.id){const e=`favorites_${b.id}`;JSON.parse(localStorage.getItem(e)||"[]").map(e=>String(e)).includes(t)!==s.favorited&&console.warn("Properties: Favorite state mismatch detected, reloading...")}setTimeout(()=>{le(),ie.current=!1},200)}catch(o){console.error("Properties: Error toggling favorite:",o),ie.current=!1;const e=new Set(G);r?e.add(t):e.delete(t),W(e),d.Ay.error(o.message||"Failed to update saved properties. Please try again.")}})(e.id)},className:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-opacity-75 transition-all "+(G.has(String(e.id))?"bg-red-500 bg-opacity-90":"bg-black bg-opacity-50"),title:G.has(String(e.id))?"Remove from favorites":"Add to favorites",children:(0,u.jsx)(n.Mbv,{className:"text-lg transition-all "+(G.has(String(e.id))?"text-red-500 fill-red-500":"text-white")})}),(0,u.jsx)("button",{onClick:t=>{t.stopPropagation(),(async e=>{if(navigator.share)try{await navigator.share({title:e.title,text:e.description,url:`${window.location.origin}/property/${e.id}`})}catch(t){console.log("Error sharing:",t),Le(e)}else Le(e)})(e)},className:"w-8 h-8 bg-black bg-opacity-50 rounded-full flex items-center justify-center hover:bg-opacity-75 transition-colors",children:(0,u.jsx)(n.Zzu,{className:"text-white text-sm"})})]})]}),(0,u.jsxs)("div",{onClick:()=>be(e.id),className:"p-4 cursor-pointer",children:[(0,u.jsxs)("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:["\u20a6",(null===(t=e.price)||void 0===t?void 0:t.toLocaleString())||"0"]}),(0,u.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:e.title}),(0,u.jsx)("p",{className:"text-gray-600 text-sm mb-3",children:e.location}),(0,u.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-3",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,u.jsx)(n.TiC,{}),(0,u.jsxs)("span",{children:[e.bedrooms||(null===(r=e.details)||void 0===r?void 0:r.bedrooms)||0," Bedrooms"]})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,u.jsx)(n.F6e,{}),(0,u.jsxs)("span",{children:[e.bathrooms||(null===(s=e.details)||void 0===s?void 0:s.bathrooms)||0," Bathrooms"]})]}),(0,u.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,u.jsx)(n.VlX,{}),(0,u.jsxs)("span",{children:[e.area||(null===(o=e.details)||void 0===o?void 0:o.sqft)||0,"m\xb2 Area"]})]})]}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)("div",{onClick:t=>{t.stopPropagation(),be(e.id)},className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center cursor-pointer",children:"View Details \u2192"}),(0,u.jsxs)("button",{onClick:t=>{t.stopPropagation(),(e=>{b?(je(e),ye(!0)):d.Ay.error("Please login to schedule viewings")})(e)},className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center",title:`Schedule a viewing for ${e.title}`,children:[(0,u.jsx)(n.itz,{className:"mr-2"}),"Schedule Viewing"]})]})]})]},e.id)}):(0,u.jsxs)("div",{className:"col-span-full text-center py-12",children:[(0,u.jsx)("p",{className:"text-gray-500 text-lg",children:"No properties found matching your criteria."}),(0,u.jsx)("button",{onClick:Fe,className:"mt-4 text-blue-600 hover:text-blue-800",children:"Clear all filters"})]})}),pe>1&&(0,u.jsx)("div",{className:"flex justify-center mt-8",children:(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("button",{onClick:()=>{U>1&&(H(U-1),window.scrollTo({top:0,behavior:"smooth"}))},disabled:1===U,"aria-label":"Previous page",className:"px-3 py-2 border border-gray-300 rounded text-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"\u2039"}),Array.from({length:Math.min(5,pe)},(e,t)=>{let r;return r=pe<=5||U<=3?t+1:U>=pe-2?pe-4+t:U-2+t,(0,u.jsx)("button",{onClick:()=>Ie(r),className:"px-3 py-2 border rounded text-sm "+(U===r?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50"),children:r},r)}),pe>5&&U<pe-2&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("span",{className:"px-2 text-gray-500",children:"..."}),(0,u.jsx)("button",{onClick:()=>Ie(pe),className:"px-3 py-2 border border-gray-300 rounded text-sm hover:bg-gray-50",children:pe})]}),(0,u.jsx)("button",{onClick:()=>{U<pe&&(H(U+1),window.scrollTo({top:0,behavior:"smooth"}))},disabled:U===pe,"aria-label":"Next page",className:"px-3 py-2 border border-gray-300 rounded text-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"\u203a"})]})})]})]}),Y&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,u.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Save Search"}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Name"}),(0,u.jsx)("input",{type:"text",value:Q,onChange:e=>Z(e.target.value),placeholder:"e.g., 3-bedroom apartments in Lagos",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),(0,u.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:[(0,u.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Search Criteria:"}),(0,u.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[C&&(0,u.jsxs)("p",{children:["\u2022 Type: ",C]}),A&&(0,u.jsxs)("p",{children:["\u2022 Status: ",A]}),L.min&&(0,u.jsxs)("p",{children:["\u2022 Min Price: \u20a6",parseInt(L.min).toLocaleString()]}),L.max&&(0,u.jsxs)("p",{children:["\u2022 Max Price: \u20a6",parseInt(L.max).toLocaleString()]}),N&&(0,u.jsxs)("p",{children:['\u2022 Search: "',N,'"']}),!C&&!A&&!L.min&&!L.max&&!N&&(0,u.jsx)("p",{className:"text-gray-500",children:"No specific filters applied"})]})]}),(0,u.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,u.jsx)("p",{className:"text-sm text-blue-800",children:"\ud83d\udca1 You'll receive notifications when new properties matching these criteria become available."})})]}),(0,u.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,u.jsx)("button",{onClick:()=>{K(!1),Z("")},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,u.jsx)("button",{onClick:async()=>{if(Q.trim())try{const e={type:C,status:A,priceRange:L,searchQuery:N,location:m.location,bedrooms:m.bedrooms,bathrooms:m.bathrooms};await h(Q,e),d.Ay.success(`Search "${Q}" saved successfully!`),K(!1),Z("")}catch(e){console.error("Error saving search:",e),d.Ay.error("Failed to save search")}else d.Ay.error("Please enter a name for your search")},disabled:!Q.trim(),className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Save Search"})]})]})}),fe&&we&&(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,u.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[(0,u.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Schedule Property Viewing"}),(0,u.jsx)("p",{className:"text-gray-600 mb-4",children:we.title}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Date"}),(0,u.jsx)("input",{type:"date",value:Ne,onChange:e=>Se(e.target.value),min:(new Date).toISOString().split("T")[0],className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Time"}),(0,u.jsxs)("select",{value:Ce,onChange:e=>Pe(e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,u.jsx)("option",{value:"",children:"Select Time"}),(0,u.jsx)("option",{value:"09:00",children:"9:00 AM"}),(0,u.jsx)("option",{value:"10:00",children:"10:00 AM"}),(0,u.jsx)("option",{value:"11:00",children:"11:00 AM"}),(0,u.jsx)("option",{value:"12:00",children:"12:00 PM"}),(0,u.jsx)("option",{value:"13:00",children:"1:00 PM"}),(0,u.jsx)("option",{value:"14:00",children:"2:00 PM"}),(0,u.jsx)("option",{value:"15:00",children:"3:00 PM"}),(0,u.jsx)("option",{value:"16:00",children:"4:00 PM"}),(0,u.jsx)("option",{value:"17:00",children:"5:00 PM"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Message (Optional)"}),(0,u.jsx)("textarea",{value:Ae,onChange:e=>ke(e.target.value),placeholder:"Any specific requirements or questions...",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]})]}),(0,u.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,u.jsx)("button",{onClick:()=>{ye(!1),je(null),Se(""),Pe(""),ke("")},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,u.jsx)("button",{onClick:()=>{if(!Ne||!Ce)return void d.Ay.error("Please select both date and time");if(!b||!b.id||!b.firstName||!b.lastName||!b.email)return void d.Ay.error("User information incomplete. Please refresh and try again.");const e={id:`viewing-${Date.now()}`,propertyId:we.id,propertyTitle:we.title,propertyLocation:we.location,userId:b.id,userName:`${b.firstName} ${b.lastName}`,userEmail:b.email,status:"pending_vendor_confirmation",requestedAt:(new Date).toISOString(),preferredDate:Ne,preferredTime:Ce,message:Ae,agentContact:we.agent||{name:"Property Agent",phone:"+234-XXX-XXXX",email:"agent@example.com"},vendorResponse:null,confirmedDate:null,confirmedTime:null},t=JSON.parse(localStorage.getItem("viewingRequests")||"[]");t.push(e),localStorage.setItem("viewingRequests",JSON.stringify(t)),window.dispatchEvent(new CustomEvent("viewingsUpdated",{detail:{viewingRequest:e,action:"created"}})),window.dispatchEvent(new StorageEvent("storage",{key:"viewingRequests",newValue:JSON.stringify(t)})),d.Ay.success(`Viewing request sent for "${we.title}"! The vendor will confirm or suggest an alternative time.`),ye(!1),je(null),Se(""),Pe(""),ke("")},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Request Viewing"})]})]})})]})}},8329:(e,t,r)=>{r.d(t,{A:()=>o});r(5043);var s=r(579);const o=e=>{let{count:t=1}=e;const r=Array.from({length:t},(e,t)=>(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden animate-pulse",children:[(0,s.jsx)("div",{className:"w-full h-48 bg-gray-300"}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("div",{className:"h-8 w-32 bg-gray-300 rounded mb-3"}),(0,s.jsx)("div",{className:"h-6 w-full bg-gray-300 rounded mb-2"}),(0,s.jsx)("div",{className:"h-6 w-3/4 bg-gray-300 rounded mb-4"}),(0,s.jsx)("div",{className:"h-4 w-2/3 bg-gray-300 rounded mb-4"}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,s.jsx)("div",{className:"h-4 w-16 bg-gray-300 rounded"}),(0,s.jsx)("div",{className:"h-4 w-16 bg-gray-300 rounded"}),(0,s.jsx)("div",{className:"h-4 w-16 bg-gray-300 rounded"})]}),(0,s.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,s.jsx)("div",{className:"h-4 w-full bg-gray-300 rounded"}),(0,s.jsx)("div",{className:"h-4 w-5/6 bg-gray-300 rounded"})]}),(0,s.jsx)("div",{className:"h-10 w-full bg-gray-300 rounded"})]})]},t));return(0,s.jsx)(s.Fragment,{children:r})}}}]);
//# sourceMappingURL=562.f8b6d3cc.chunk.js.map