{"version":3,"file":"static/js/122.40d97958.chunk.js","mappings":"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","sources":["services/storageService.js","pages/Profile.js"],"sourcesContent":["class StorageService {\r\n  async uploadFile(file, path, metadata = {}) {\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('file', file);\r\n      formData.append('uploadType', 'generic');\r\n      formData.append('metadata', JSON.stringify({ path, ...metadata }));\r\n\r\n      const response = await fetch('/api/upload', {\r\n        method: 'POST',\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem('token') || ''}`\r\n        },\r\n        body: formData\r\n      });\r\n\r\n      const result = await response.json();\r\n      if (!response.ok || !result?.success) {\r\n        throw new Error(result?.message || 'Upload failed');\r\n      }\r\n\r\n      return {\r\n        success: true,\r\n        url: result.data?.url,\r\n        path: result.data?.publicId || path,\r\n        name: result.data?.originalName || file.name,\r\n        size: result.data?.size || file.size,\r\n        type: result.data?.format || file.type\r\n      };\r\n    } catch (error) {\r\n      console.error('Error uploading file:', error);\r\n      return {\r\n        success: false,\r\n        error: error.message || 'Upload failed'\r\n      };\r\n    }\r\n  }\r\n\r\n  async uploadMultipleFiles(files, basePath, metadata = {}) {\r\n    try {\r\n      const formData = new FormData();\r\n      files.forEach((file) => formData.append('files', file));\r\n      formData.append('uploadType', 'multiple');\r\n      formData.append('metadata', JSON.stringify({ basePath, ...metadata }));\r\n\r\n      const response = await fetch('/api/upload/multiple', {\r\n        method: 'POST',\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem('token') || ''}`\r\n        },\r\n        body: formData\r\n      });\r\n\r\n      const result = await response.json();\r\n      if (!response.ok || !result?.success) {\r\n        throw new Error(result?.message || 'Upload failed');\r\n      }\r\n\r\n      return {\r\n        success: true,\r\n        successful: result.data?.successful || [],\r\n        failed: result.data?.failed || [],\r\n        total: result.data?.total || files.length\r\n      };\r\n    } catch (error) {\r\n      console.error('Error uploading multiple files:', error);\r\n      return {\r\n        success: false,\r\n        error: error.message || 'Upload failed'\r\n      };\r\n    }\r\n  }\r\n\r\n  async moveFile(oldPath, newPath) {\r\n    return {\r\n      success: true,\r\n      url: null,\r\n      path: newPath || oldPath,\r\n      name: (newPath || oldPath || '').split('/').pop()\r\n    };\r\n  }\r\n\r\n  async uploadPropertyImages(files, propertyId, userId) {\r\n    try {\r\n      const formData = new FormData();\r\n      files.forEach((file) => {\r\n        formData.append('files', file);\r\n      });\r\n      formData.append('uploadType', 'property_images');\r\n      formData.append('metadata', JSON.stringify({\r\n        propertyId,\r\n        userId\r\n      }));\r\n\r\n      const response = await fetch('/api/upload/multiple', {\r\n        method: 'POST',\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem('token') || ''}`\r\n        },\r\n        body: formData\r\n      });\r\n\r\n      const result = await response.json();\r\n      if (!response.ok || !result?.success) {\r\n        throw new Error(result?.message || 'Upload failed');\r\n      }\r\n\r\n      return {\r\n        success: true,\r\n        successful: result.data?.successful || [],\r\n        failed: result.data?.failed || [],\r\n        total: result.data?.total || files.length\r\n      };\r\n    } catch (error) {\r\n      console.error('Error uploading property images:', error);\r\n      return {\r\n        success: false,\r\n        error: error.message || 'Upload failed'\r\n      };\r\n    }\r\n  }\r\n\r\n  async uploadUserAvatar(file, userId) {\r\n    if (!userId) {\r\n      return { success: false, error: 'User ID is required' };\r\n    }\r\n\r\n    const timestamp = Date.now();\r\n    const fileExtension = file.name.split('.').pop();\r\n    const fileName = `avatar_${userId}_${timestamp}.${fileExtension}`;\r\n    const path = `users/${userId}/avatar/${fileName}`;\r\n\r\n    const validation = this.validateFile(file, ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp'], 5 * 1024 * 1024);\r\n    if (!validation.valid) {\r\n      return {\r\n        success: false,\r\n        error: validation.errors.join(', ')\r\n      };\r\n    }\r\n\r\n    const result = await this.uploadFile(file, path, { userId });\r\n    if (result.success) {\r\n      const avatarInfo = {\r\n        userId,\r\n        avatarUrl: result.url,\r\n        uploadDate: new Date().toISOString(),\r\n        fileName: result.name\r\n      };\r\n      localStorage.setItem(`user_avatar_${userId}`, JSON.stringify(avatarInfo));\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  getFallbackAvatar(userId) {\r\n    const mockAvatarUrl = `https://ui-avatars.com/api/?name=${encodeURIComponent(userId)}&background=random&size=200`;\r\n\r\n    const avatarInfo = {\r\n      userId,\r\n      avatarUrl: mockAvatarUrl,\r\n      uploadDate: new Date().toISOString(),\r\n      fileName: 'fallback_avatar',\r\n      isFallback: true\r\n    };\r\n\r\n    localStorage.setItem(`user_avatar_${userId}`, JSON.stringify(avatarInfo));\r\n\r\n    return {\r\n      success: true,\r\n      url: mockAvatarUrl,\r\n      path: `users/${userId}/avatar/fallback_${Date.now()}`,\r\n      name: 'fallback_avatar',\r\n      size: 0,\r\n      type: 'image/png',\r\n      isFallback: true\r\n    };\r\n  }\r\n\r\n  async uploadEscrowDocument(file, escrowId, documentType, userId) {\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('file', file);\r\n      formData.append('uploadType', 'escrow_document');\r\n      formData.append('metadata', JSON.stringify({\r\n        escrowId,\r\n        documentType,\r\n        userId\r\n      }));\r\n\r\n      const response = await fetch('/api/upload', {\r\n        method: 'POST',\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem('token') || ''}`\r\n        },\r\n        body: formData\r\n      });\r\n\r\n      const result = await response.json();\r\n      if (!response.ok || !result?.success) {\r\n        throw new Error(result?.message || 'Upload failed');\r\n      }\r\n\r\n      return {\r\n        success: true,\r\n        url: result.data?.url,\r\n        path: result.data?.publicId,\r\n        name: result.data?.originalName,\r\n        size: result.data?.size,\r\n        type: result.data?.format\r\n      };\r\n    } catch (error) {\r\n      console.error('Error uploading escrow document:', error);\r\n      return {\r\n        success: false,\r\n        error: error.message || 'Upload failed'\r\n      };\r\n    }\r\n  }\r\n\r\n  async deleteFile() {\r\n    return { success: false, error: 'Delete is not supported in this build.' };\r\n  }\r\n\r\n  async getFileMetadata() {\r\n    return { success: false, error: 'Metadata lookup is not supported in this build.' };\r\n  }\r\n\r\n  async listFiles() {\r\n    return { success: false, error: 'Listing files is not supported in this build.' };\r\n  }\r\n\r\n  async getPropertyImages() {\r\n    return { success: false, error: 'Listing images is not supported in this build.' };\r\n  }\r\n\r\n  async getEscrowDocuments() {\r\n    return { success: false, error: 'Listing documents is not supported in this build.' };\r\n  }\r\n\r\n  validateFile(file, allowedTypes = [], maxSize = 5 * 1024 * 1024) {\r\n    const errors = [];\r\n\r\n    if (allowedTypes.length > 0 && !allowedTypes.includes(file.type)) {\r\n      errors.push(`File type ${file.type} is not allowed. Allowed types: ${allowedTypes.join(', ')}`);\r\n    }\r\n\r\n    if (file.size > maxSize) {\r\n      errors.push(`File size ${(file.size / 1024 / 1024).toFixed(2)}MB exceeds maximum allowed size of ${(maxSize / 1024 / 1024).toFixed(2)}MB`);\r\n    }\r\n\r\n    return {\r\n      valid: errors.length === 0,\r\n      errors\r\n    };\r\n  }\r\n\r\n  formatFileSize(bytes) {\r\n    if (bytes === 0) return '0 Bytes';\r\n\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n  }\r\n}\r\n\r\nconst storageService = new StorageService();\r\nexport default storageService;\r\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { FaUser, FaCamera, FaTimes, FaUpload } from 'react-icons/fa';\r\nimport axios from 'axios';\r\nimport toast from 'react-hot-toast';\r\nimport storageService from '../services/storageService';\r\nimport { getApiUrl } from '../utils/apiConfig';\r\n\r\nconst Profile = () => {\r\n  const { currentUser, updateUserProfile } = useAuth();\r\n  const user = currentUser;\r\n  const [formData, setFormData] = useState({\r\n    firstName: user?.firstName || '',\r\n    lastName: user?.lastName || '',\r\n    email: user?.email || user?.user?.email || '', // Use login email from auth\r\n    phone: user?.phone || '',\r\n    bio: user?.bio || '',\r\n    avatar: user?.avatar || ''\r\n  });\r\n  const [errors, setErrors] = useState({});\r\n  const [loading, setLoading] = useState(false);\r\n  const [uploadingAvatar, setUploadingAvatar] = useState(false);\r\n  const [avatarPreview, setAvatarPreview] = useState(user?.avatar || null);\r\n  const [success, setSuccess] = useState(false);\r\n  const fileInputRef = useRef(null);\r\n\r\n  // Sync form data and avatar preview when user changes\r\n  // But don't overwrite if we have a preview that's different (user just uploaded)\r\n  useEffect(() => {\r\n    if (user) {\r\n      // Check localStorage for a saved avatar (data URL from local upload)\r\n      let savedAvatar = null;\r\n      try {\r\n        const currentUserData = JSON.parse(localStorage.getItem('currentUser') || '{}');\r\n        if (currentUserData.avatar && currentUserData.avatar.startsWith('data:')) {\r\n          savedAvatar = currentUserData.avatar;\r\n        }\r\n      } catch (e) {\r\n        console.error('Error reading localStorage:', e);\r\n      }\r\n      \r\n      // Prioritize saved local avatar, then user avatar, then empty\r\n      const avatarToUse = savedAvatar || user?.avatar || '';\r\n      \r\n      // Only update avatar if we don't have a preview or if the avatar changed\r\n      const shouldUpdateAvatar = !avatarPreview || (avatarToUse && avatarToUse !== avatarPreview);\r\n      \r\n      setFormData({\r\n        firstName: user?.firstName || '',\r\n        lastName: user?.lastName || '',\r\n        email: user?.email || user?.user?.email || '',\r\n        phone: user?.phone || '',\r\n        bio: user?.bio || '',\r\n        avatar: avatarToUse\r\n      });\r\n      \r\n      if (shouldUpdateAvatar) {\r\n        setAvatarPreview(avatarToUse || null);\r\n      }\r\n    }\r\n  }, [user]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n    \r\n    if (errors[name]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [name]: ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n    if (!formData.firstName) newErrors.firstName = 'First name is required';\r\n    if (!formData.lastName) newErrors.lastName = 'Last name is required';\r\n    // Email validation removed - email cannot be changed\r\n    return newErrors;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const newErrors = validateForm();\r\n    \r\n    if (Object.keys(newErrors).length > 0) {\r\n      setErrors(newErrors);\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      // Use avatarPreview if available (from recent upload), otherwise use formData.avatar\r\n      const avatarToSave = avatarPreview && !avatarPreview.startsWith('data:') ? avatarPreview : (formData.avatar || user?.avatar || '');\r\n      \r\n      // Update profile via backend API if available, otherwise use local update\r\n      const token = localStorage.getItem('token');\r\n      if (token) {\r\n        try {\r\n          const response = await axios.put(\r\n            getApiUrl('/auth/profile'),\r\n            {\r\n              firstName: formData.firstName,\r\n              lastName: formData.lastName,\r\n              phone: formData.phone,\r\n              avatar: avatarToSave\r\n            },\r\n            {\r\n              headers: {\r\n                'Authorization': `Bearer ${token}`\r\n              }\r\n            }\r\n          );\r\n          \r\n          if (response.data.success) {\r\n            // Use the avatar from the response if available, otherwise use what we sent\r\n            const updatedAvatar = response.data.user?.avatar || response.data.data?.avatar || avatarToSave;\r\n            await updateUserProfile({\r\n              firstName: formData.firstName,\r\n              lastName: formData.lastName,\r\n              phone: formData.phone,\r\n              avatar: updatedAvatar\r\n            });\r\n            // Update formData and preview to ensure consistency\r\n            setFormData(prev => ({ ...prev, avatar: updatedAvatar }));\r\n            setAvatarPreview(updatedAvatar);\r\n          }\r\n        } catch (apiError) {\r\n          console.error('API update failed, using local update:', apiError);\r\n          // Fallback to local update\r\n          await updateUserProfile({\r\n            firstName: formData.firstName,\r\n            lastName: formData.lastName,\r\n            phone: formData.phone,\r\n            avatar: avatarToSave\r\n          });\r\n          // Update formData and preview\r\n          setFormData(prev => ({ ...prev, avatar: avatarToSave }));\r\n          setAvatarPreview(avatarToSave);\r\n        }\r\n      } else {\r\n        // No token, use local update only\r\n        await updateUserProfile({\r\n          firstName: formData.firstName,\r\n          lastName: formData.lastName,\r\n          phone: formData.phone,\r\n          avatar: avatarToSave\r\n        });\r\n        // Update formData and preview\r\n        setFormData(prev => ({ ...prev, avatar: avatarToSave }));\r\n        setAvatarPreview(avatarToSave);\r\n      }\r\n      \r\n      setSuccess(true);\r\n      setTimeout(() => setSuccess(false), 3000);\r\n    } catch (error) {\r\n      setErrors({ general: error.message });\r\n      toast.error('Failed to update profile');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAvatarSelect = () => {\r\n    fileInputRef.current?.click();\r\n  };\r\n\r\n  const handleAvatarChange = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n\r\n    // Validate file\r\n    const validTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp', 'image/gif'];\r\n    const maxSize = 5 * 1024 * 1024; // 5MB\r\n\r\n    if (!validTypes.includes(file.type)) {\r\n      toast.error('Please select a valid image file (JPEG, PNG, WEBP, or GIF)');\r\n      return;\r\n    }\r\n\r\n    if (file.size > maxSize) {\r\n      toast.error('Image size must be less than 5MB');\r\n      return;\r\n    }\r\n\r\n    // Create preview immediately for better UX and get local data URL\r\n    const localDataUrl = await new Promise((resolve, reject) => {\r\n      const reader = new FileReader();\r\n      reader.onload = (event) => {\r\n        setAvatarPreview(event.target.result);\r\n        resolve(event.target.result);\r\n      };\r\n      reader.onerror = reject;\r\n      reader.readAsDataURL(file);\r\n    });\r\n\r\n    setUploadingAvatar(true);\r\n\r\n    try {\r\n      const userId = user?.id || user?.uid;\r\n\r\n      if (!userId) {\r\n        throw new Error('User not authenticated');\r\n      }\r\n\r\n      const uploadResult = await storageService.uploadUserAvatar(file, userId);\r\n      const avatarUrl = uploadResult.success ? uploadResult.url : localDataUrl;\r\n\r\n      if (!uploadResult.success) {\r\n        console.error('Avatar upload failed:', uploadResult.error);\r\n        toast.error('Upload failed. Using local preview until sync.');\r\n      }\r\n\r\n      const token = localStorage.getItem('token');\r\n      if (token) {\r\n        try {\r\n          await axios.put(\r\n            getApiUrl('/auth/profile'),\r\n            { avatar: avatarUrl },\r\n            {\r\n              headers: {\r\n                Authorization: `Bearer ${token}`\r\n              }\r\n            }\r\n          );\r\n        } catch (apiError) {\r\n          console.error('Backend API update error:', apiError);\r\n        }\r\n      }\r\n\r\n      try {\r\n        const currentUserData = JSON.parse(localStorage.getItem('currentUser') || '{}');\r\n        const updatedUser = { ...currentUserData, avatar: avatarUrl };\r\n        localStorage.setItem('currentUser', JSON.stringify(updatedUser));\r\n      } catch (localError) {\r\n        console.error('Error saving to localStorage:', localError);\r\n      }\r\n\r\n      if (updateUserProfile) {\r\n        await updateUserProfile({ avatar: avatarUrl });\r\n      }\r\n\r\n      setFormData(prev => ({ ...prev, avatar: avatarUrl }));\r\n      setAvatarPreview(avatarUrl);\r\n      toast.success('Profile picture saved');\r\n    } catch (error) {\r\n      console.error('Avatar upload error:', error);\r\n      \r\n      let errorMessage = 'Failed to upload profile picture';\r\n      \r\n      if (error.message?.includes('permission')) {\r\n        errorMessage = 'Storage permission denied. Please check your storage configuration.';\r\n      } else if (error.message) {\r\n        errorMessage = error.message;\r\n      }\r\n      \r\n      toast.error(errorMessage);\r\n      \r\n      // Revert preview on error\r\n      setAvatarPreview(user?.avatar || null);\r\n    } finally {\r\n      setUploadingAvatar(false);\r\n      // Reset file input\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = '';\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleRemoveAvatar = async () => {\r\n    try {\r\n      setFormData(prev => ({ ...prev, avatar: '' }));\r\n      setAvatarPreview(null);\r\n      await updateUserProfile({ avatar: '' });\r\n      toast.success('Profile picture removed');\r\n    } catch (error) {\r\n      console.error('Error removing avatar:', error);\r\n      toast.error('Failed to remove profile picture');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        <div className=\"mb-8\">\r\n          <h1 className=\"text-3xl font-bold text-gray-900\">Profile Settings</h1>\r\n          <p className=\"text-gray-600\">Manage your account information</p>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n          {/* Profile Form */}\r\n          <div className=\"lg:col-span-2\">\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Personal Information</h2>\r\n              \r\n              {/* Profile Picture Upload Section */}\r\n              <div className=\"mb-8 pb-8 border-b border-gray-200\">\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-4\">Profile Picture</label>\r\n                <div className=\"flex items-center space-x-6\">\r\n                  {/* Avatar Display */}\r\n                  <div className=\"relative\">\r\n                    <div className=\"w-32 h-32 rounded-full overflow-hidden border-4 border-gray-200 shadow-lg bg-gray-100\">\r\n                      {avatarPreview ? (\r\n                        <img\r\n                          src={avatarPreview}\r\n                          alt=\"Profile\"\r\n                          className=\"w-full h-full object-cover\"\r\n                        />\r\n                      ) : (\r\n                        <div className=\"w-full h-full flex items-center justify-center\">\r\n                          <FaUser className=\"text-4xl text-gray-400\" />\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    \r\n                    {/* Upload Overlay */}\r\n                    {!uploadingAvatar && (\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={handleAvatarSelect}\r\n                        className=\"absolute bottom-0 right-0 p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors shadow-lg\"\r\n                        title=\"Change profile picture\"\r\n                      >\r\n                        <FaCamera className=\"text-sm\" />\r\n                      </button>\r\n                    )}\r\n                    \r\n                    {/* Uploading Indicator */}\r\n                    {uploadingAvatar && (\r\n                      <div className=\"absolute inset-0 rounded-full bg-black bg-opacity-50 flex items-center justify-center\">\r\n                        <div className=\"text-white text-center\">\r\n                          <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-white mx-auto mb-2\"></div>\r\n                          <p className=\"text-xs\">Uploading...</p>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  \r\n                  {/* Upload Controls */}\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"space-y-3\">\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={handleAvatarSelect}\r\n                        disabled={uploadingAvatar}\r\n                        className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2\"\r\n                      >\r\n                        <FaUpload className=\"text-sm\" />\r\n                        <span>{avatarPreview ? 'Change Picture' : 'Upload Picture'}</span>\r\n                      </button>\r\n                      \r\n                      {avatarPreview && (\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={handleRemoveAvatar}\r\n                          disabled={uploadingAvatar}\r\n                          className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2\"\r\n                        >\r\n                          <FaTimes className=\"text-sm\" />\r\n                          <span>Remove Picture</span>\r\n                        </button>\r\n                      )}\r\n                      \r\n                      <p className=\"text-xs text-gray-500\">\r\n                        JPG, PNG, WEBP or GIF. Max size 5MB\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  {/* Hidden File Input */}\r\n                  <input\r\n                    ref={fileInputRef}\r\n                    type=\"file\"\r\n                    accept=\"image/jpeg,image/jpg,image/png,image/webp,image/gif\"\r\n                    onChange={handleAvatarChange}\r\n                    className=\"hidden\"\r\n                    disabled={uploadingAvatar}\r\n                  />\r\n                </div>\r\n              </div>\r\n              \r\n              <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n                {errors.general && (\r\n                  <div className=\"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-md\">\r\n                    {errors.general}\r\n                  </div>\r\n                )}\r\n\r\n                {success && (\r\n                  <div className=\"bg-green-50 border border-green-200 text-green-600 px-4 py-3 rounded-md\">\r\n                    Profile updated successfully!\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">First Name</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"firstName\"\r\n                      value={formData.firstName}\r\n                      onChange={handleChange}\r\n                      className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${\r\n                        errors.firstName ? 'border-red-300' : 'border-gray-300'\r\n                      }`}\r\n                    />\r\n                    {errors.firstName && <p className=\"mt-1 text-sm text-red-600\">{errors.firstName}</p>}\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Last Name</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"lastName\"\r\n                      value={formData.lastName}\r\n                      onChange={handleChange}\r\n                      className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${\r\n                        errors.lastName ? 'border-red-300' : 'border-gray-300'\r\n                      }`}\r\n                    />\r\n                    {errors.lastName && <p className=\"mt-1 text-sm text-red-600\">{errors.lastName}</p>}\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Email <span className=\"text-gray-400 text-xs\">(Cannot be changed)</span>\r\n                  </label>\r\n                  <input\r\n                    type=\"email\"\r\n                    name=\"email\"\r\n                    value={formData.email}\r\n                    readOnly\r\n                    disabled\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600 cursor-not-allowed\"\r\n                  />\r\n                  <p className=\"mt-1 text-xs text-gray-500\">Your email is locked to your login credentials</p>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Phone Number</label>\r\n                  <input\r\n                    type=\"tel\"\r\n                    name=\"phone\"\r\n                    value={formData.phone}\r\n                    onChange={handleChange}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    placeholder=\"(555) 123-4567\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Bio</label>\r\n                  <textarea\r\n                    name=\"bio\"\r\n                    value={formData.bio}\r\n                    onChange={handleChange}\r\n                    rows={4}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    placeholder=\"Tell us about yourself...\"\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"flex justify-end\">\r\n                  <button\r\n                    type=\"submit\"\r\n                    disabled={loading}\r\n                    className=\"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50\"\r\n                  >\r\n                    {loading ? 'Saving...' : 'Save Changes'}\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Sidebar */}\r\n          <div className=\"lg:col-span-1\">\r\n            {/* Account Info */}\r\n            <div className=\"bg-white rounded-lg shadow p-6 mb-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Account Information</h3>\r\n              <div className=\"space-y-3\">\r\n                <div>\r\n                  <span className=\"text-sm text-gray-500\">Member Since</span>\r\n                  <p className=\"font-medium\">{user?.createdAt ? new Date(user.createdAt).toLocaleDateString() : 'N/A'}</p>\r\n                </div>\r\n                <div>\r\n                  <span className=\"text-sm text-gray-500\">Account Status</span>\r\n                  <p className=\"font-medium text-green-600\">Active</p>\r\n                </div>\r\n                <div>\r\n                  <span className=\"text-sm text-gray-500\">User ID</span>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <p className=\"font-mono font-bold text-blue-600 text-lg tracking-wider\">{user?.userCode || 'PAK-XXXXXX'}</p>\r\n                    <button\r\n                      onClick={async (e) => {\r\n                        const button = e.currentTarget;\r\n                        const originalText = button.textContent;\r\n                        try {\r\n                          const textToCopy = user?.userCode || '';\r\n                          if (!textToCopy) {\r\n                            toast.error('User ID not available');\r\n                            return;\r\n                          }\r\n                          \r\n                          await navigator.clipboard.writeText(textToCopy);\r\n                          button.textContent = 'Copied!';\r\n                          button.classList.add('bg-green-100', 'text-green-700');\r\n                          button.classList.remove('bg-blue-100', 'text-blue-700');\r\n                          \r\n                          toast.success(`User ID \"${textToCopy}\" copied!`, {\r\n                            icon: '✅',\r\n                            duration: 3000,\r\n                            style: {\r\n                              background: '#10b981',\r\n                              color: '#fff',\r\n                            },\r\n                          });\r\n                          \r\n                          setTimeout(() => {\r\n                            button.textContent = originalText;\r\n                            button.classList.remove('bg-green-100', 'text-green-700');\r\n                            button.classList.add('bg-blue-100', 'text-blue-700');\r\n                          }, 2000);\r\n                        } catch (err) {\r\n                          // Fallback for older browsers\r\n                          const textToCopy = user?.userCode || '';\r\n                          if (!textToCopy) {\r\n                            toast.error('User ID not available');\r\n                            return;\r\n                          }\r\n                          \r\n                          const textArea = document.createElement('textarea');\r\n                          textArea.value = textToCopy;\r\n                          textArea.style.position = 'fixed';\r\n                          textArea.style.opacity = '0';\r\n                          document.body.appendChild(textArea);\r\n                          textArea.select();\r\n                          document.execCommand('copy');\r\n                          document.body.removeChild(textArea);\r\n                          \r\n                          button.textContent = 'Copied!';\r\n                          button.classList.add('bg-green-100', 'text-green-700');\r\n                          button.classList.remove('bg-blue-100', 'text-blue-700');\r\n                          \r\n                          toast.success(`User ID \"${textToCopy}\" copied!`, {\r\n                            icon: '✅',\r\n                            duration: 3000,\r\n                            style: {\r\n                              background: '#10b981',\r\n                              color: '#fff',\r\n                            },\r\n                          });\r\n                          \r\n                          setTimeout(() => {\r\n                            button.textContent = originalText;\r\n                            button.classList.remove('bg-green-100', 'text-green-700');\r\n                            button.classList.add('bg-blue-100', 'text-blue-700');\r\n                          }, 2000);\r\n                        }\r\n                      }}\r\n                      className=\"text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 px-2 py-1 rounded transition-colors\"\r\n                    >\r\n                      Copy\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n                {/* Vendor ID - only shown if user is a vendor */}\r\n                {user?.vendorCode && user?.roles?.includes('vendor') && (\r\n                  <div>\r\n                    <span className=\"text-sm text-gray-500\">Vendor ID</span>\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <p className=\"font-mono font-bold text-green-600 text-lg tracking-wider\">{user.vendorCode}</p>\r\n                      <button\r\n                        onClick={async (e) => {\r\n                          const button = e.currentTarget;\r\n                          const originalText = button.textContent;\r\n                          try {\r\n                            const textToCopy = user?.vendorCode || '';\r\n                            if (!textToCopy) {\r\n                              toast.error('Vendor ID not available');\r\n                              return;\r\n                            }\r\n                            \r\n                            await navigator.clipboard.writeText(textToCopy);\r\n                            button.textContent = 'Copied!';\r\n                            button.classList.add('bg-blue-100', 'text-blue-700');\r\n                            button.classList.remove('bg-green-100', 'text-green-700');\r\n                            \r\n                            toast.success(`Vendor ID \"${textToCopy}\" copied!`, {\r\n                              icon: '✅',\r\n                              duration: 3000,\r\n                              style: {\r\n                                background: '#10b981',\r\n                                color: '#fff',\r\n                              },\r\n                            });\r\n                            \r\n                            setTimeout(() => {\r\n                              button.textContent = originalText;\r\n                              button.classList.remove('bg-blue-100', 'text-blue-700');\r\n                              button.classList.add('bg-green-100', 'text-green-700');\r\n                            }, 2000);\r\n                          } catch (err) {\r\n                            // Fallback for older browsers\r\n                            const textToCopy = user?.vendorCode || '';\r\n                            if (!textToCopy) {\r\n                              toast.error('Vendor ID not available');\r\n                              return;\r\n                            }\r\n                            \r\n                            const textArea = document.createElement('textarea');\r\n                            textArea.value = textToCopy;\r\n                            textArea.style.position = 'fixed';\r\n                            textArea.style.opacity = '0';\r\n                            document.body.appendChild(textArea);\r\n                            textArea.select();\r\n                            document.execCommand('copy');\r\n                            document.body.removeChild(textArea);\r\n                            \r\n                            button.textContent = 'Copied!';\r\n                            button.classList.add('bg-blue-100', 'text-blue-700');\r\n                            button.classList.remove('bg-green-100', 'text-green-700');\r\n                            \r\n                            toast.success(`Vendor ID \"${textToCopy}\" copied!`, {\r\n                              icon: '✅',\r\n                              duration: 3000,\r\n                              style: {\r\n                                background: '#10b981',\r\n                                color: '#fff',\r\n                              },\r\n                            });\r\n                            \r\n                            setTimeout(() => {\r\n                              button.textContent = originalText;\r\n                              button.classList.remove('bg-blue-100', 'text-blue-700');\r\n                              button.classList.add('bg-green-100', 'text-green-700');\r\n                            }, 2000);\r\n                          }\r\n                        }}\r\n                        className=\"text-xs bg-green-100 hover:bg-green-200 text-green-700 px-2 py-1 rounded transition-colors\"\r\n                      >\r\n                        Copy\r\n                      </button>\r\n                    </div>\r\n                    <p className=\"text-xs text-gray-500 mt-1\">Share this with buyers to find your properties</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Quick Actions */}\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Quick Actions</h3>\r\n              <div className=\"space-y-3\">\r\n                <button className=\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md\">\r\n                  Change Password\r\n                </button>\r\n                <button className=\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md\">\r\n                  Notification Settings\r\n                </button>\r\n                <button className=\"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md\">\r\n                  Privacy Settings\r\n                </button>\r\n                <button className=\"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 rounded-md\">\r\n                  Delete Account\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile; "],"names":["uploadFile","file","path","metadata","arguments","length","undefined","_result$data","_result$data2","_result$data3","_result$data4","_result$data5","formData","FormData","append","JSON","stringify","response","fetch","method","headers","Authorization","localStorage","getItem","body","result","json","ok","success","Error","message","url","data","publicId","name","originalName","size","type","format","error","console","uploadMultipleFiles","files","basePath","_result$data6","_result$data7","_result$data8","forEach","successful","failed","total","moveFile","oldPath","newPath","split","pop","uploadPropertyImages","propertyId","userId","_result$data9","_result$data0","_result$data1","uploadUserAvatar","Date","now","validation","this","validateFile","valid","errors","join","avatarInfo","avatarUrl","uploadDate","toISOString","fileName","setItem","getFallbackAvatar","mockAvatarUrl","encodeURIComponent","isFallback","uploadEscrowDocument","escrowId","documentType","_result$data10","_result$data11","_result$data12","_result$data13","_result$data14","deleteFile","getFileMetadata","listFiles","getPropertyImages","getEscrowDocuments","allowedTypes","maxSize","includes","push","toFixed","formatFileSize","bytes","i","Math","floor","log","parseFloat","pow","Profile","_user$user","_user$roles","currentUser","updateUserProfile","useAuth","user","setFormData","useState","firstName","lastName","email","phone","bio","avatar","setErrors","loading","setLoading","uploadingAvatar","setUploadingAvatar","avatarPreview","setAvatarPreview","setSuccess","fileInputRef","useRef","useEffect","_user$user2","savedAvatar","currentUserData","parse","startsWith","e","avatarToUse","shouldUpdateAvatar","handleChange","value","target","prev","handleAvatarSelect","_fileInputRef$current","current","click","_jsx","className","children","_jsxs","src","alt","FaUser","onClick","title","FaCamera","disabled","FaUpload","async","toast","FaTimes","ref","accept","onChange","localDataUrl","Promise","resolve","reject","reader","FileReader","onload","event","onerror","readAsDataURL","id","uid","uploadResult","storageService","token","axios","put","getApiUrl","apiError","updatedUser","localError","_error$message","errorMessage","onSubmit","preventDefault","newErrors","validateForm","Object","keys","avatarToSave","_response$data$user","_response$data$data","updatedAvatar","setTimeout","general","readOnly","placeholder","rows","createdAt","toLocaleDateString","userCode","button","currentTarget","originalText","textContent","textToCopy","navigator","clipboard","writeText","classList","add","remove","icon","duration","style","background","color","err","textArea","document","createElement","position","opacity","appendChild","select","execCommand","removeChild","vendorCode","roles"],"sourceRoot":""}