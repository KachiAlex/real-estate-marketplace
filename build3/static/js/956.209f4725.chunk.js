"use strict";(self.webpackChunkreal_estate_marketplace=self.webpackChunkreal_estate_marketplace||[]).push([[956],{956:(e,s,t)=>{t.r(s),t.d(s,{default:()=>d});var r=t(5043),l=t(3216),a=t(5016),n=t(5369),c=t(3768),i=t(579);const d=()=>{var e,s,t;const d=(0,l.Zp)(),{user:o}=(0,a.As)(),[x,m]=(0,r.useState)([]),[u,h]=(0,r.useState)(!1),[g,p]=(0,r.useState)(!1),[j,N]=(0,r.useState)(null),[b,f]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(o){const e=JSON.parse(localStorage.getItem("escrowTransactions")||"[]").filter(e=>e.buyerId===o.id);m(e),console.log("User escrow transactions:",e)}},[o]);const y=()=>{d("/properties")},v=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"funded":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},w=e=>{switch(e){case"pending":default:return(0,i.jsx)(n.w_X,{});case"funded":return(0,i.jsx)(n.JhU,{});case"completed":return(0,i.jsx)(n.A7C,{});case"cancelled":return(0,i.jsx)(n._Hm,{})}},S=e=>{switch(e){case"pending":return"Payment Pending";case"funded":return"Funds in Escrow";case"completed":return"Transaction Complete";case"cancelled":return"Cancelled";default:return"Unknown"}};return(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Escrow Transactions"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Manage your secure property transactions with built-in escrow protection"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,i.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,i.jsx)(n.SMR,{className:"text-blue-600 text-xl"})}),(0,i.jsxs)("div",{className:"ml-4",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Transactions"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:x.length})]})]})}),(0,i.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"p-3 bg-yellow-100 rounded-lg",children:(0,i.jsx)(n.w_X,{className:"text-yellow-600 text-xl"})}),(0,i.jsxs)("div",{className:"ml-4",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:x.filter(e=>"pending"===e.status||"funded"===e.status).length})]})]})}),(0,i.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,i.jsx)(n.A7C,{className:"text-green-600 text-xl"})}),(0,i.jsxs)("div",{className:"ml-4",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),(0,i.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:x.filter(e=>"completed"===e.status).length})]})]})}),(0,i.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,i.jsx)(n.JhU,{className:"text-blue-600 text-xl"})}),(0,i.jsxs)("div",{className:"ml-4",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Funds in Escrow"}),(0,i.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["\u20a6",x.filter(e=>"funded"===e.status).reduce((e,s)=>e+(s.totalAmount||0),0).toLocaleString()]})]})]})})]}),(0,i.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 rounded-lg p-6 mb-8",children:[(0,i.jsxs)("div",{className:"flex items-center mb-4",children:[(0,i.jsx)(n.SMR,{className:"text-blue-600 text-2xl mr-3"}),(0,i.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Escrow Protection Active"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(n.JhU,{className:"text-green-600 mr-2"}),(0,i.jsxs)("span",{children:[(0,i.jsx)("strong",{children:"Funds Secured:"})," Money held safely in escrow"]})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(n.BAG,{className:"text-green-600 mr-2"}),(0,i.jsxs)("span",{children:[(0,i.jsx)("strong",{children:"Buyer Control:"})," You approve before release"]})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(n.DDN,{className:"text-green-600 mr-2"}),(0,i.jsxs)("span",{children:[(0,i.jsx)("strong",{children:"Dispute Protection:"})," Full refund guarantee"]})]})]})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Your Transactions"}),(0,i.jsxs)("button",{onClick:y,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[(0,i.jsx)(n.OiG,{className:"mr-2"}),"Start New Purchase"]})]}),(0,i.jsx)("div",{className:"bg-white rounded-lg shadow",children:0===x.length?(0,i.jsxs)("div",{className:"p-12 text-center",children:[(0,i.jsx)(n.SMR,{className:"text-gray-400 text-4xl mx-auto mb-4"}),(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Escrow Transactions Yet"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:"Start your first secure property purchase with escrow protection"}),(0,i.jsxs)("button",{onClick:y,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center mx-auto",children:[(0,i.jsx)(n.OiG,{className:"mr-2"}),"Browse Properties"]})]}):(0,i.jsx)("div",{className:"divide-y divide-gray-200",children:x.map(e=>{var s,t;return(0,i.jsx)("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.propertyTitle}),(0,i.jsxs)("span",{className:`px-2 py-1 rounded-full text-xs font-medium flex items-center ${v(e.status)}`,children:[w(e.status),(0,i.jsx)("span",{className:"ml-1",children:S(e.status)})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Amount:"})," \u20a6",null===(s=e.totalAmount)||void 0===s?void 0:s.toLocaleString()]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Created:"})," ",new Date(e.createdAt).toLocaleDateString()]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Type:"})," ",e.type||"Purchase"]})]}),"funded"===e.status&&(0,i.jsxs)("div",{className:"mt-2 p-2 bg-blue-50 rounded text-sm text-blue-800",children:[(0,i.jsx)(n.JhU,{className:"inline mr-1"}),(0,i.jsx)("strong",{children:"Funds Secured:"})," \u20a6",null===(t=e.amount)||void 0===t?void 0:t.toLocaleString()," held in escrow awaiting your approval"]})]}),(0,i.jsx)("div",{className:"flex space-x-2",children:"funded"===e.status?(0,i.jsxs)("button",{onClick:()=>(e=>{N(e),p(!0)})(e),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center",children:[(0,i.jsx)(n.BAG,{className:"mr-1"}),"Approve & Release Funds"]}):"completed"===e.status?(0,i.jsxs)("div",{className:"bg-green-100 text-green-800 px-4 py-2 rounded-lg flex items-center",children:[(0,i.jsx)(n.A7C,{className:"mr-1"}),"Funds Released"]}):(0,i.jsxs)("button",{onClick:()=>{return s=e.id,void d(`/escrow/${s}`);var s},className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors flex items-center",children:[(0,i.jsx)(n.Ny1,{className:"mr-1"}),"View Details"]})})]})},e.id)})})}),g&&j&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,i.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,i.jsx)(n._Hm,{className:"text-red-600 text-2xl"})}),(0,i.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"\u26a0\ufe0f WARNING: Approve Fund Release"}),(0,i.jsxs)("p",{className:"text-gray-600 mb-4",children:["You are about to release ",(0,i.jsxs)("strong",{children:["\u20a6",null===(e=j.totalAmount)||void 0===e?void 0:e.toLocaleString()]})," to the vendor for:"]}),(0,i.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-4 text-left",children:[(0,i.jsx)("h4",{className:"font-semibold text-gray-900",children:j.propertyTitle}),(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:["Transaction ID: ",j.id]}),(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:["Amount: \u20a6",null===(s=j.amount)||void 0===s?void 0:s.toLocaleString()]}),(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:["Escrow Fee: \u20a6",null===(t=j.escrowFee)||void 0===t?void 0:t.toLocaleString()]})]}),(0,i.jsx)("div",{className:"bg-red-50 p-4 rounded-lg mb-6",children:(0,i.jsxs)("div",{className:"text-sm text-red-800 space-y-2",children:[(0,i.jsx)("p",{children:(0,i.jsx)("strong",{children:"\u26a0\ufe0f IMPORTANT WARNING:"})}),(0,i.jsxs)("ul",{className:"text-left space-y-1",children:[(0,i.jsx)("li",{children:"\u2022 Once approved, the money will be sent directly to the vendor"}),(0,i.jsxs)("li",{children:["\u2022 This action is ",(0,i.jsx)("strong",{children:"IRREVERSIBLE"})]}),(0,i.jsx)("li",{children:"\u2022 You will NOT be able to get a refund after approval"}),(0,i.jsx)("li",{children:"\u2022 Only approve if you are completely satisfied with the property"})]})]})}),(0,i.jsxs)("div",{className:"text-sm text-gray-600 mb-6",children:[(0,i.jsx)("p",{children:"Have you:"}),(0,i.jsxs)("ul",{className:"text-left space-y-1 mt-2",children:[(0,i.jsx)("li",{children:"\u2705 Inspected the property thoroughly?"}),(0,i.jsx)("li",{children:"\u2705 Verified all documents are correct?"}),(0,i.jsx)("li",{children:"\u2705 Confirmed the property meets your expectations?"}),(0,i.jsx)("li",{children:"\u2705 Received all necessary paperwork?"})]})]}),(0,i.jsxs)("div",{className:"flex space-x-3",children:[(0,i.jsx)("button",{onClick:()=>{p(!1),N(null)},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,i.jsx)("button",{onClick:async()=>{if(j){f(!0);try{const e=JSON.parse(localStorage.getItem("escrowTransactions")||"[]").map(e=>e.id===j.id?{...e,status:"completed",completedAt:(new Date).toISOString(),buyerApprovalDate:(new Date).toISOString(),fundsReleasedToVendor:!0}:e);localStorage.setItem("escrowTransactions",JSON.stringify(e)),m(e=>e.map(e=>e.id===j.id?{...e,status:"completed",completedAt:(new Date).toISOString(),buyerApprovalDate:(new Date).toISOString(),fundsReleasedToVendor:!0}:e)),p(!1),N(null),c.Ay.success("Funds released to vendor! Transaction completed successfully.")}catch(e){console.error("Error approving transaction:",e),c.Ay.error("Failed to approve transaction")}finally{f(!1)}}},disabled:b,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center justify-center",children:b?(0,i.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.DDN,{className:"mr-2"}),"Yes, Release Funds"]})})]}),(0,i.jsx)("p",{className:"text-xs text-gray-500 mt-3",children:'By clicking "Yes, Release Funds", you confirm that you are satisfied with the property and authorize the irreversible release of funds to the vendor.'})]})})})]})}}}]);
//# sourceMappingURL=956.209f4725.chunk.js.map