"use strict";(self.webpackChunkreal_estate_marketplace=self.webpackChunkreal_estate_marketplace||[]).push([[678],{8852(e,t,s){s.d(t,{A:()=>i});var a=s(9379),l=s(5043),r=s(5369),n=s(579);const i=e=>{let{value:t,onChange:s,placeholder:i="",className:o="",error:c=!1,fieldKey:d,type:m="text",min:x,max:p,step:g,multiline:u=!1,rows:h=4}=e;const[y,b]=(0,l.useState)(!1),j=(0,l.useMemo)(()=>"memory_".concat(d),[d]),f=(0,l.useCallback)(()=>{try{const e=localStorage.getItem(j);return e?JSON.parse(e):[]}catch(e){return[]}},[j]),v=(0,l.useMemo)(()=>{const e=f();if(!t||t.toString().length<1)return e.slice(0,8);const s=t.toString().toLowerCase();return e.filter(e=>{var t;return null===e||void 0===e||null===(t=e.v)||void 0===t?void 0:t.toString().toLowerCase().includes(s)}).slice(0,8)},[t,f]),N=(0,l.useCallback)(e=>{const t=(null!==e&&void 0!==e?e:"").toString().trim();if(t)try{const e=f(),s=[{v:t,t:Date.now()},...e.filter(e=>(null===e||void 0===e?void 0:e.v)!==t)].slice(0,12);localStorage.setItem(j,JSON.stringify(s))}catch(s){}},[f,j]),w=(0,l.useCallback)(()=>{N(t),setTimeout(()=>b(!1),200)},[N,t]),A=(0,l.useCallback)(()=>{f().length>0&&b(!0)},[f]),k=(0,l.useCallback)(e=>{s(e.v),b(!1)},[s]),S=(0,l.useCallback)(()=>{localStorage.removeItem(j),b(!1)},[j]),C={value:t||"",onChange:e=>s(e.target.value),onBlur:w,onFocus:A,placeholder:i,className:"w-full px-4 py-3 border-2 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300 ".concat(c?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-blue-500"," ").concat(o)};return(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("div",{className:"relative",children:[u?(0,n.jsx)("textarea",(0,a.A)({rows:h},C)):(0,n.jsx)("input",(0,a.A)({type:m,min:x,max:p,step:g},C)),f().length>0&&(0,n.jsx)("button",{type:"button",onClick:S,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-red-500",title:"Clear history",children:(0,n.jsx)(r.QCr,{className:"h-4 w-4"})})]}),y&&v.length>0&&(0,n.jsxs)("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-b-xl shadow-lg z-50 max-h-60 overflow-y-auto",children:[(0,n.jsxs)("div",{className:"px-4 py-2 bg-blue-50 border-b border-blue-200 flex items-center text-xs text-blue-700 uppercase tracking-wide font-semibold",children:[(0,n.jsx)(r.OKX,{className:"mr-2"})," Recent entries (",v.length,")"]}),v.map((e,t)=>(0,n.jsxs)("button",{type:"button",onClick:()=>k(e),className:"w-full px-4 py-3 text-left hover:bg-blue-50 border-b border-gray-100 last:border-b-0 transition-colors text-sm",children:[(0,n.jsx)("span",{className:"font-medium",children:e.v}),(0,n.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:new Date(e.t).toLocaleDateString()})]},"".concat(j,"-").concat(t)))]})]})}},2678(e,t,s){s.r(t),s.d(t,{default:()=>u});var a=s(5043),l=s(8852),r=s(3216),n=s(5016),i=s(4345),o=s(3484),c=s(5369),d=s(2339),m=s(9722),x=s(1876);const p=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{if(!e||0===e.length)throw new Error("No files provided");const l=localStorage.getItem("token");if(!l)throw new Error("Authentication required");const r=10485760,n=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","image/jpeg","image/jpg","image/png"],i=e.filter(e=>e.size>r?"File ".concat(e.name," exceeds 10MB limit"):n.includes(e.type)?null:"File ".concat(e.name," has invalid type"));if(i.length>0)throw new Error("Invalid files: ".concat(i.join(", ")));const o=new FormData;e.forEach(e=>{o.append("documents",e)}),t&&o.append("applicationId",t);const c=await m.A.post((0,x.e9)("/upload/mortgage/documents"),o,{headers:{Authorization:"Bearer ".concat(l),"Content-Type":"multipart/form-data"},onUploadProgress:e=>{if(s&&e.total){const t=Math.round(100*e.loaded/e.total);s(t)}}});if(c.data&&c.data.success){return{success:!0,data:c.data.data.uploaded.map((t,s)=>({type:"bank_statement",url:t.url,name:e[s].name,uploadedAt:(new Date).toISOString(),publicId:t.publicId})),uploadedFiles:c.data.data.uploaded}}var a;throw new Error((null===(a=c.data)||void 0===a?void 0:a.message)||"Upload failed")}catch(n){var l,r;return console.error("Error uploading mortgage documents:",n),{success:!1,error:(null===(l=n.response)||void 0===l||null===(r=l.data)||void 0===r?void 0:r.message)||n.message||"Failed to upload documents"}}};var g=s(579);const u=()=>{const{user:e}=(0,n.As)(),{properties:t,loading:s}=(0,i.NC)(),{getUserApplications:u,getApplicationsByStatus:h,refreshApplications:y}=(0,o.Q)(),b=(0,r.Zp)(),[j,f]=(0,a.useState)("all"),[v,N]=(0,a.useState)("all"),[w,A]=(0,a.useState)("any"),[k,S]=(0,a.useState)("all"),[C,P]=(0,a.useState)("all"),[M,T]=(0,a.useState)(35e6),[I,E]=(0,a.useState)(7e6),[F,L]=(0,a.useState)(15),[q,D]=(0,a.useState)(13.5),[R,B]=(0,a.useState)(!1),[_,K]=(0,a.useState)(!1),[Y,z]=(0,a.useState)(null),[O,V]=(0,a.useState)("employed"),[U,J]=(0,a.useState)(""),[G,X]=(0,a.useState)(""),[H,Q]=(0,a.useState)(""),[Z,$]=(0,a.useState)(""),[W,ee]=(0,a.useState)(""),[te,se]=(0,a.useState)(""),[ae,le]=(0,a.useState)(""),[re,ne]=(0,a.useState)([]),[ie,oe]=(0,a.useState)(!1),[ce,de]=(0,a.useState)([]),[me,xe]=(0,a.useState)(""),[pe,ge]=(0,a.useState)(!1),[ue,he]=(0,a.useState)(0),[ye,be]=(0,a.useState)(!1);(0,a.useEffect)(()=>{e&&(async()=>{try{const e=localStorage.getItem("token");if(!e)return;const t=await m.A.get((0,x.e9)("/mortgage-banks"),{headers:{Authorization:"Bearer ".concat(e)}});t.data.success&&de(t.data.data||[])}catch(e){console.error("Error loading mortgage banks:",e)}})()},[e]);const je=e=>{const t=Array.from(e.target.files);ne(t)},fe=e=>{d.Ay.success("Navigating to page ".concat(e))},ve=(0,a.useMemo)(()=>{if(!t||0===t.length)return[];return t.filter(e=>e.price&&e.price>0).map(e=>{var t;const s=e.id||e._id||e.propertyId,a="number"===typeof e.price?e.price:parseFloat(e.price)||0,l="office"===e.typeSlug||"retail"===e.typeSlug||"warehouse"===e.typeSlug?25:20,r="office"===e.typeSlug||"retail"===e.typeSlug||"warehouse"===e.typeSlug?15:20,n=((e,t,s)=>{const a=t/100/12,l=12*s;return 0===a?e/l:e*a*Math.pow(1+a,l)/(Math.pow(1+a,l)-1)})(a-a*(l/100),13.5,r),i=["apartment","house","villa","penthouse","townhouse","bungalow","studio"].includes(e.typeSlug)?"residential":"commercial",o=["Mortgage Ready"];e.isVerified&&o.push("Verified"),e.yearBuilt&&(new Date).getFullYear()-e.yearBuilt<=5&&o.push("New");let c="";return c=e.location?"string"===typeof e.location?e.location:"".concat(e.city||"",", ").concat(e.state||"").trim():e.city||e.state?"".concat(e.city||"",", ").concat(e.state||"").trim():"Location not specified",{id:s,_id:s,title:e.title||"Untitled Property",location:c,price:a,image:e.image||(null===(t=e.images)||void 0===t?void 0:t[0])||"/placeholder.jpg",bedrooms:e.bedrooms||0,bathrooms:e.bathrooms||0,area:e.area||e.sqft||0,tags:o,monthlyPayment:Math.round(n),downPaymentPercent:l,loanTerm:r,interestRate:13.5,category:i,isPreApproved:!1,isNewDevelopment:e.yearBuilt&&(new Date).getFullYear()-e.yearBuilt<=2,isRecentlyAdded:e.createdAt&&new Date(e.createdAt)>new Date(Date.now()-2592e6),originalProperty:e}}).filter(e=>e.price>0)},[t]),Ne=(0,a.useMemo)(()=>{switch(j){case"pre-approved":return ve.filter(e=>e.isPreApproved);case"residential":return ve.filter(e=>"residential"===e.category);case"commercial":return ve.filter(e=>"commercial"===e.category);case"new-developments":return ve.filter(e=>e.isNewDevelopment);case"recently-added":return ve.filter(e=>e.isRecentlyAdded);default:return ve}},[j,ve]),we=u(),Ae=(h("pending"),h("under_review"),h("approved"),we.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)).slice(0,5)),ke=M-I,Se=q/100/12,Ce=12*F,Pe=ke*(Se*Math.pow(1+Se,Ce))/(Math.pow(1+Se,Ce)-1),Me=Pe*Ce-ke,Te=Pe*Ce;return(0,g.jsxs)("div",{className:"p-4 sm:p-6 pb-8 sm:pb-6",children:[(0,g.jsxs)("div",{className:"mb-8",children:[(0,g.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Mortgage"}),(0,g.jsx)("p",{className:"text-gray-600",children:"Find the perfect mortgage solution for your dream home"})]}),(0,g.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,g.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Mortgage Summary"}),(0,g.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg w-fit mx-auto mb-2",children:(0,g.jsx)(c.rQ8,{className:"text-brand-blue text-xl"})}),(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"Estimated Price Range"}),(0,g.jsx)("p",{className:"text-lg font-bold text-gray-900",children:"\u20a625-45M"})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"p-3 bg-green-100 rounded-lg w-fit mx-auto mb-2",children:(0,g.jsx)(c.MxO,{className:"text-green-600 text-xl"})}),(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"Recommended Down Payment"}),(0,g.jsx)("p",{className:"text-lg font-bold text-gray-900",children:"\u20a68.5M"})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"p-3 bg-orange-100 rounded-lg w-fit mx-auto mb-2",children:(0,g.jsx)(c.gdQ,{className:"text-brand-orange text-xl"})}),(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"Current Avg. Interest Rate"}),(0,g.jsx)("p",{className:"text-lg font-bold text-gray-900",children:"13.5%"})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"p-3 bg-purple-100 rounded-lg w-fit mx-auto mb-2",children:(0,g.jsx)(c.itz,{className:"text-purple-600 text-xl"})}),(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"Typical Loan Term"}),(0,g.jsx)("p",{className:"text-lg font-bold text-gray-900",children:"15-25 yrs"})]})]}),(0,g.jsxs)("div",{className:"bg-brand-blue rounded-lg p-4 text-white",children:[(0,g.jsx)("h3",{className:"font-semibold mb-2",children:"Get Pre-qualified Today"}),(0,g.jsx)("p",{className:"text-sm mb-3",children:"Get a personalized estimate of how much you can borrow before you start house hunting. No impact on your credit score."}),(0,g.jsxs)("button",{onClick:()=>{if(!e)return d.Ay.error("Please login to start pre-qualification"),void b("/");V("employed"),J(""),X(""),Q(""),$(""),ee(""),se(""),le(""),ne([]),oe(!1),xe(""),K(!0)},className:"bg-yellow-500 hover:bg-yellow-600 text-black px-4 py-2 rounded-lg font-medium flex items-center space-x-2",title:"Start mortgage pre-qualification process",children:[(0,g.jsx)("span",{children:"Start Pre-qualification"}),(0,g.jsx)(c.Z0P,{})]})]})]}),(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,g.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Current Mortgage Rates"}),(0,g.jsx)("div",{className:"space-y-3 mb-6",children:[{type:"30-Year Fixed",rate:13.5,change:-.25,trend:"down"},{type:"15-Year Fixed",rate:12.8,change:-.15,trend:"down"},{type:"10-Year Fixed",rate:12.2,change:-.75,trend:"down"},{type:"5/1 ARM",rate:11.9,change:.05,trend:"up"}].map((e,t)=>(0,g.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"font-medium text-gray-900",children:e.type}),(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"down"===e.trend?(0,g.jsxs)("span",{className:"text-green-600 flex items-center",children:[(0,g.jsx)(c.$TP,{className:"mr-1"}),Math.abs(e.change),"% from last week"]}):(0,g.jsxs)("span",{className:"text-red-600 flex items-center",children:[(0,g.jsx)(c.uCC,{className:"mr-1"}),"+",e.change,"% from last week"]})})]}),(0,g.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:[e.rate,"%"]})]},t))}),(0,g.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[(0,g.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"Rate Trends"}),(0,g.jsx)("div",{className:"h-32 bg-white rounded border flex items-end justify-between px-2",children:[13.2,13.8,14.1,13.9,13.5,13.5].map((e,t)=>(0,g.jsxs)("div",{className:"flex flex-col items-center",children:[(0,g.jsx)("div",{className:"w-6 bg-brand-blue rounded-t mb-1",style:{height:"".concat(20*(e-12),"%")}}),(0,g.jsx)("span",{className:"text-xs text-gray-600",children:["Jun","Jul","Aug","Sep","Oct","Nov"][t]})]},t))})]}),(0,g.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Last updated: June 15, 2023 | Source: AfricaEstate Partners"}),(0,g.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Rates are subject to change"}),(0,g.jsx)("a",{href:"#",className:"text-sm text-brand-blue hover:underline",children:"View Detailed Trends"})]})]}),(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow mb-8",children:[(0,g.jsxs)("div",{className:"p-4 sm:p-6 border-b border-gray-200",children:[(0,g.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Mortgage Summary - Eligible Properties"}),(0,g.jsx)("div",{className:"flex space-x-4 sm:space-x-6 mb-4 overflow-x-auto pb-2 -mx-6 px-6 scrollbar-hide",children:(()=>{const e={all:ve.length,"pre-approved":ve.filter(e=>e.isPreApproved).length,residential:ve.filter(e=>"residential"===e.category).length,commercial:ve.filter(e=>"commercial"===e.category).length,"new-developments":ve.filter(e=>e.isNewDevelopment).length,"recently-added":ve.filter(e=>e.isRecentlyAdded).length};return[{key:"all",label:"All Eligible"},{key:"pre-approved",label:"Pre-Approved"},{key:"residential",label:"Residential"},{key:"commercial",label:"Commercial"},{key:"new-developments",label:"New Developments"},{key:"recently-added",label:"Recently Added"}].map(t=>(0,g.jsxs)("button",{onClick:()=>f(t.key),className:"pb-2 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap flex-shrink-0 px-1 ".concat(j===t.key?"border-brand-blue text-brand-blue":"border-transparent text-gray-500 hover:text-gray-700"),children:[(0,g.jsx)("span",{className:"hidden sm:inline",children:t.label}),(0,g.jsx)("span",{className:"sm:hidden",children:t.label.split(" ")[0]}),(0,g.jsxs)("span",{className:"ml-1",children:["(",e[t.key],")"]})]},t.key))})()}),(0,g.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,g.jsxs)("select",{value:v,onChange:e=>N(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,g.jsx)("option",{value:"all",children:"Location (All locations)"}),(0,g.jsx)("option",{value:"lagos",children:"Lagos"}),(0,g.jsx)("option",{value:"abuja",children:"Abuja"}),(0,g.jsx)("option",{value:"port-harcourt",children:"Port Harcourt"})]}),(0,g.jsxs)("select",{value:w,onChange:e=>A(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,g.jsx)("option",{value:"any",children:"Price Range (Any price)"}),(0,g.jsx)("option",{value:"20-30m",children:"\u20a620M - \u20a630M"}),(0,g.jsx)("option",{value:"30-40m",children:"\u20a630M - \u20a640M"}),(0,g.jsx)("option",{value:"40-50m",children:"\u20a640M - \u20a650M"})]}),(0,g.jsxs)("select",{value:k,onChange:e=>S(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,g.jsx)("option",{value:"all",children:"Property Type (All types)"}),(0,g.jsx)("option",{value:"apartment",children:"Apartment"}),(0,g.jsx)("option",{value:"villa",children:"Villa"}),(0,g.jsx)("option",{value:"penthouse",children:"Penthouse"})]}),(0,g.jsxs)("select",{value:C,onChange:e=>P(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,g.jsx)("option",{value:"all",children:"Mortgage Eligibility (All eligibility)"}),(0,g.jsx)("option",{value:"ready",children:"Mortgage Ready"}),(0,g.jsx)("option",{value:"pre-approved",children:"Pre-Approved"})]}),(0,g.jsxs)("button",{onClick:()=>{const e={location:v,priceRange:w,propertyType:k,eligibility:C};d.Ay.success("Filters applied successfully!"),console.log("Applied filters:",e)},className:"btn-primary flex items-center space-x-2",title:"Apply current filter selections",children:[(0,g.jsx)(c.YsJ,{}),(0,g.jsx)("span",{children:"Filter Results"})]}),(0,g.jsx)("button",{onClick:()=>{N("all"),A("any"),S("all"),P("all"),d.Ay.success("Filters reset successfully!")},className:"p-2 text-gray-500 hover:text-gray-700",title:"Reset all filters to default",children:(0,g.jsx)(c.Swo,{})})]})]}),(0,g.jsxs)("div",{className:"p-4 sm:p-6 pb-8",children:[(0,g.jsxs)("p",{className:"text-gray-600 mb-6",children:["Found ",Ne.length," mortgage-eligible ","all"===j?"properties":j.replace("-"," ")]}),(0,g.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:Ne.map(t=>(0,g.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsx)("img",{src:t.image,alt:t.title,className:"w-full h-48 object-cover"}),(0,g.jsx)("div",{className:"absolute top-2 right-2 flex flex-col space-y-1",children:t.tags.map((e,t)=>(0,g.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("Mortgage Ready"===e?"bg-green-100 text-green-800":"Verified"===e?"bg-blue-100 text-blue-800":"Featured"===e?"bg-purple-100 text-purple-800":"bg-yellow-100 text-yellow-800"),children:e},t))})]}),(0,g.jsxs)("div",{className:"p-4",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t.title}),(0,g.jsx)("p",{className:"text-gray-600 mb-3",children:t.location}),(0,g.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-4",children:[(0,g.jsxs)("span",{className:"flex items-center",children:[(0,g.jsx)(c.TiC,{className:"mr-1"}),t.bedrooms," beds"]}),(0,g.jsxs)("span",{className:"flex items-center",children:[(0,g.jsx)(c.F6e,{className:"mr-1"}),t.bathrooms," baths"]}),(0,g.jsxs)("span",{className:"flex items-center",children:[(0,g.jsx)(c.c7S,{className:"mr-1"}),t.area," m\xb2"]})]}),(0,g.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[(0,g.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Estimated Monthly Payment"}),(0,g.jsxs)("p",{className:"text-xl font-bold text-gray-900",children:["\u20a6",t.monthlyPayment.toLocaleString(),"/month"]}),(0,g.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[t.downPaymentPercent,"% Down Payment \u2022 ",t.loanTerm," yrs Loan Term \u2022 ",t.interestRate,"% Interest Rate"]})]}),(0,g.jsxs)("div",{className:"flex space-x-2",children:[(0,g.jsx)("button",{onClick:()=>{return e=t.id,void b("/property/".concat(e));var e},className:"flex-1 btn-outline text-sm",title:"View property details",children:"View Property"}),(0,g.jsx)("button",{onClick:()=>(t=>{if(console.log("Apply for Mortgage clicked, property:",t,"user:",e),!e)return d.Ay.error("Please login to apply for mortgage"),void b("/");z(t),B(!0)})(t),className:"flex-1 btn-primary text-sm",title:"Apply for mortgage on this property",children:"Apply for Mortgage"})]})]})]},t.id))}),(0,g.jsx)("div",{className:"mt-6 flex justify-center",children:(0,g.jsxs)("div",{className:"flex space-x-2",children:[[1,2,3,4,5].map(e=>(0,g.jsx)("button",{onClick:()=>fe(e),className:"px-3 py-2 rounded-lg text-sm ".concat(1===e?"bg-brand-blue text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),title:"Go to page ".concat(e),children:e},e)),(0,g.jsx)("span",{className:"px-3 py-2 text-gray-500",children:"..."}),(0,g.jsx)("button",{onClick:()=>fe(25),className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm hover:bg-gray-200",title:"Go to page 25",children:"25"})]})}),(0,g.jsx)("p",{className:"text-xs text-gray-500 mt-4 text-center",children:"All properties are verified by PropertyArk for mortgage eligibility."})]})]}),(0,g.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-6",children:[(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Mortgage Calculator"}),(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Home Price"}),(0,g.jsx)(l.A,{type:"number",fieldKey:"mortgage.calculator.homePrice",value:M,onChange:e=>T(parseInt(e||0)),className:"w-full"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Down Payment"}),(0,g.jsx)(l.A,{type:"number",fieldKey:"mortgage.calculator.downPayment",value:I,onChange:e=>E(parseInt(e||0)),className:"w-full"})]}),(0,g.jsxs)("div",{children:[(0,g.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Loan Term (Years): ",F," Years"]}),(0,g.jsx)("input",{type:"range",min:"5",max:"30",value:F,onChange:e=>L(parseInt(e.target.value)),className:"w-full"}),(0,g.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,g.jsx)("span",{children:"5 yrs"}),(0,g.jsx)("span",{children:"30 yrs"})]})]}),(0,g.jsxs)("div",{children:[(0,g.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Interest Rate (%): ",q,"%"]}),(0,g.jsx)("input",{type:"range",min:"8",max:"18",step:"0.1",value:q,onChange:e=>D(parseFloat(e.target.value)),className:"w-full"}),(0,g.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,g.jsx)("span",{children:"8%"}),(0,g.jsx)("span",{children:"18%"})]})]})]}),(0,g.jsxs)("div",{className:"mt-6 space-y-2",children:[(0,g.jsxs)("div",{className:"flex justify-between",children:[(0,g.jsx)("span",{className:"text-sm text-gray-600",children:"Loan Amount:"}),(0,g.jsxs)("span",{className:"font-medium",children:["\u20a6",ke.toLocaleString()]})]}),(0,g.jsxs)("div",{className:"flex justify-between",children:[(0,g.jsx)("span",{className:"text-sm text-gray-600",children:"Total Interest:"}),(0,g.jsxs)("span",{className:"font-medium",children:["\u20a6",Me.toLocaleString()]})]}),(0,g.jsxs)("div",{className:"flex justify-between",children:[(0,g.jsx)("span",{className:"text-sm text-gray-600",children:"Total Payment:"}),(0,g.jsxs)("span",{className:"font-medium",children:["\u20a6",Te.toLocaleString()]})]}),(0,g.jsx)("div",{className:"border-t pt-2",children:(0,g.jsxs)("div",{className:"flex justify-between",children:[(0,g.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Monthly Payment:"}),(0,g.jsxs)("span",{className:"text-lg font-bold text-brand-blue",children:["\u20a6",Math.round(Pe).toLocaleString()," / month"]})]})})]}),(0,g.jsx)("p",{className:"text-xs text-gray-500 mt-4",children:"This is an estimate only"}),(0,g.jsx)("a",{href:"#",className:"text-sm text-brand-blue hover:underline",children:"Detailed Calculator"})]}),(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Approved Lender Partners"}),(0,g.jsx)("div",{className:"space-y-3",children:[{name:"First Bank of Nigeria",rating:4.7,rate:13.2},{name:"Access Bank",rating:4.7,rate:13.2},{name:"UBA Mortgages",rating:4.7,rate:13.2},{name:"Zenith Bank",rating:4.7,rate:13.2}].map((e,t)=>(0,g.jsxs)("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,g.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,g.jsx)(c.gt3,{className:"text-yellow-500 text-sm"}),(0,g.jsx)("span",{className:"text-sm text-gray-600",children:e.rating})]})]}),(0,g.jsxs)("div",{className:"text-right",children:[(0,g.jsxs)("p",{className:"font-medium text-gray-900",children:[e.rate,"%"]}),(0,g.jsx)(c.Z0P,{className:"text-gray-400"})]})]},t))}),(0,g.jsx)("p",{className:"text-sm text-gray-600 mt-4",children:"7 lenders available in your area"}),(0,g.jsx)("a",{href:"#",className:"text-sm text-brand-blue hover:underline",children:"Compare All"})]}),(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Application Status"}),0===Ae.length?(0,g.jsxs)("div",{className:"text-center py-8",children:[(0,g.jsx)("p",{className:"text-gray-500 mb-4",children:"No applications yet"}),(0,g.jsx)("button",{onClick:()=>b("/mortgage"),className:"text-sm text-blue-600 hover:underline",children:"Apply for Mortgage"})]}):(0,g.jsx)("div",{className:"space-y-4",children:Ae.map(e=>{var t,s,a;return(0,g.jsxs)("div",{className:"flex items-start space-x-3 p-3 hover:bg-gray-50 rounded-lg",children:[(0,g.jsx)("div",{className:"p-2 rounded-full ".concat("approved"===e.status?"bg-green-100":"rejected"===e.status?"bg-red-100":"under_review"===e.status?"bg-blue-100":"bg-yellow-100"),children:"approved"===e.status?(0,g.jsx)(c.A7C,{className:"text-green-600"}):"rejected"===e.status?(0,g.jsx)(c._Hm,{className:"text-red-600"}):"under_review"===e.status?(0,g.jsx)(c.__w,{className:"text-blue-600"}):(0,g.jsx)(c.w_X,{className:"text-yellow-600"})}),(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,g.jsx)("p",{className:"text-sm font-medium text-gray-900",children:new Date(e.createdAt).toLocaleDateString()}),(0,g.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("approved"===e.status?"bg-green-100 text-green-800":"rejected"===e.status?"bg-red-100 text-red-800":"under_review"===e.status?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),children:e.status.replace("_"," ")})]}),(0,g.jsx)("p",{className:"text-sm font-medium text-gray-900",children:(null===(t=e.property)||void 0===t?void 0:t.title)||"Prequalification Request"}),(0,g.jsxs)("p",{className:"text-xs text-gray-600",children:["Amount: \u20a6",(null===(s=e.requestedAmount)||void 0===s?void 0:s.toLocaleString())||"0"," | Bank: ",(null===(a=e.mortgageBank)||void 0===a?void 0:a.name)||"N/A"]})]}),(0,g.jsx)("button",{onClick:()=>b("/mortgages/applications/".concat(e._id||e.id)),className:"text-sm text-blue-600 hover:underline",children:"View"})]},e._id||e.id)})}),we.length>0&&(0,g.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,g.jsx)("button",{onClick:()=>b("/mortgages/applications"),className:"text-sm text-blue-600 hover:underline w-full text-center",children:"View All Applications"})})]}),(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Educational Resources"}),(0,g.jsx)("div",{className:"space-y-3",children:["Understanding Mortgage Types in Nigeria","How to Improve Your Mortgage Approval Chances","First-Time Homebuyer's Guide","Nigerian Mortgage Glossary"].map((e,t)=>(0,g.jsxs)("div",{className:"flex items-center space-x-3 p-2 hover:bg-gray-50 rounded-lg",children:[(0,g.jsx)(c.t69,{className:"text-gray-400"}),(0,g.jsx)("span",{className:"text-sm text-gray-700",children:e})]},t))}),(0,g.jsx)("p",{className:"text-sm text-gray-600 mt-4",children:"75 Resources available"}),(0,g.jsx)("a",{href:"#",className:"text-sm text-brand-blue hover:underline",children:"Compare All"})]})]}),R&&Y&&(0,g.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,g.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[(0,g.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Apply for Mortgage"}),(0,g.jsx)("p",{className:"text-gray-600 mb-6",children:Y.title}),(0,g.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[(0,g.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Property Details"}),(0,g.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,g.jsxs)("div",{children:[(0,g.jsxs)("p",{children:[(0,g.jsx)("strong",{children:"Property Price:"})," \u20a6",Y.price.toLocaleString()]}),(0,g.jsxs)("p",{children:[(0,g.jsx)("strong",{children:"Loan Amount:"})," \u20a6",Math.round(.8*Y.price).toLocaleString()]})]}),(0,g.jsxs)("div",{children:[(0,g.jsxs)("p",{children:[(0,g.jsx)("strong",{children:"Down Payment:"})," \u20a6",Math.round(.2*Y.price).toLocaleString()]}),(0,g.jsxs)("p",{children:[(0,g.jsx)("strong",{children:"Monthly Payment:"})," \u20a6",Math.round(.8*Y.price*.185/12).toLocaleString()]})]})]})]}),(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)("div",{children:[(0,g.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Mortgage Bank ",(0,g.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,g.jsxs)("select",{value:me,onChange:e=>xe(e.target.value),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 border-gray-300",children:[(0,g.jsx)("option",{value:"",children:"Choose a mortgage bank"}),ce.map(e=>(0,g.jsx)("option",{value:e._id,children:e.name},e._id))]}),0===ce.length&&(0,g.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"No mortgage banks are currently available. Please try again later."}),me&&(e=>{const t=ce.find(e=>e._id===me||e.id===me),s=(null===t||void 0===t||null===(e=t.mortgageProducts)||void 0===e?void 0:e.filter(e=>e.isActive))||[];return s.length>0?(0,g.jsxs)("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,g.jsxs)("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:[null===t||void 0===t?void 0:t.name," - Available Products & Rates"]}),(0,g.jsx)("div",{className:"space-y-3",children:s.map((e,t)=>{var s,a;return(0,g.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,g.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("h5",{className:"font-semibold text-gray-900 text-sm",children:e.name}),e.description&&(0,g.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:e.description})]}),(0,g.jsxs)("div",{className:"ml-4 text-right",children:[(0,g.jsxs)("div",{className:"text-lg font-bold text-blue-600",children:[e.interestRate,"%"]}),(0,g.jsx)("div",{className:"text-xs text-gray-500 capitalize",children:e.interestRateType})]})]}),(0,g.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-3 pt-3 border-t border-gray-100",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-xs text-gray-500",children:"Loan Range"}),(0,g.jsxs)("p",{className:"text-xs font-medium text-gray-900 mt-1",children:["\u20a6",null===(s=e.minLoanAmount)||void 0===s?void 0:s.toLocaleString()," - \u20a6",null===(a=e.maxLoanAmount)||void 0===a?void 0:a.toLocaleString()]})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-xs text-gray-500",children:"Down Payment"}),(0,g.jsxs)("p",{className:"text-xs font-medium text-gray-900 mt-1",children:[e.minDownPaymentPercent,"% min"]})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-xs text-gray-500",children:"Max Term"}),(0,g.jsxs)("p",{className:"text-xs font-medium text-gray-900 mt-1",children:[e.maxLoanTerm," years"]})]}),e.eligibilityCriteria&&(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-xs text-gray-500",children:"Requirements"}),(0,g.jsxs)("div",{className:"text-xs text-gray-900 mt-1 space-y-0.5",children:[e.eligibilityCriteria.minMonthlyIncome>0&&(0,g.jsxs)("p",{children:["Income: \u20a6",e.eligibilityCriteria.minMonthlyIncome.toLocaleString(),"/mo"]}),e.eligibilityCriteria.minCreditScore>0&&(0,g.jsxs)("p",{children:["Credit: ",e.eligibilityCriteria.minCreditScore,"+"]})]})]})]})]},t)})}),(0,g.jsx)("p",{className:"text-xs text-gray-600 mt-3 italic",children:"* Rates and terms shown are indicative. Final terms subject to bank review and approval."})]}):!t||t.mortgageProducts&&0!==t.mortgageProducts.length?null:(0,g.jsx)("div",{className:"mt-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,g.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,g.jsx)(c.MxO,{className:"inline mr-2"}),t.name," has no active mortgage products available at this time."]})})})()]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employment Type"}),(0,g.jsxs)("div",{className:"flex space-x-4",children:[(0,g.jsxs)("label",{className:"flex items-center",children:[(0,g.jsx)("input",{type:"radio",value:"employed",checked:"employed"===O,onChange:e=>V(e.target.value),className:"mr-2"}),"Employed"]}),(0,g.jsxs)("label",{className:"flex items-center",children:[(0,g.jsx)("input",{type:"radio",value:"self-employed",checked:"self-employed"===O,onChange:e=>V(e.target.value),className:"mr-2"}),"Self-Employed"]})]})]}),"employed"===O&&(0,g.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employer Name"}),(0,g.jsx)(l.A,{fieldKey:"mortgage.app.employerName",value:U,onChange:e=>J(e),placeholder:"Company Name"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Job Title"}),(0,g.jsx)(l.A,{fieldKey:"mortgage.app.jobTitle",value:G,onChange:e=>X(e),placeholder:"Your Position"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monthly Income (\u20a6)"}),(0,g.jsx)(l.A,{type:"number",fieldKey:"mortgage.app.monthlyIncome",value:H,onChange:e=>Q(e),placeholder:"500000"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Years of Employment"}),(0,g.jsx)(l.A,{type:"number",fieldKey:"mortgage.app.yearsOfEmployment",value:Z,onChange:e=>$(e),placeholder:"5"})]})]}),"self-employed"===O&&(0,g.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Name"}),(0,g.jsx)(l.A,{fieldKey:"mortgage.app.businessName",value:W,onChange:e=>ee(e),placeholder:"Business Name"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Type"}),(0,g.jsx)(l.A,{fieldKey:"mortgage.app.businessType",value:te,onChange:e=>se(e),placeholder:"e.g., Consulting, Trading"})]}),(0,g.jsxs)("div",{className:"col-span-2",children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monthly Business Income (\u20a6)"}),(0,g.jsx)(l.A,{type:"number",fieldKey:"mortgage.app.businessMonthlyIncome",value:ae,onChange:e=>le(e),placeholder:"750000"})]})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Statements (Last 6 months)"}),(0,g.jsx)("input",{type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png",onChange:je,disabled:ye||pe,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"}),re.length>0&&(0,g.jsxs)("div",{className:"mt-2",children:[(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"Selected files:"}),(0,g.jsx)("ul",{className:"text-sm text-gray-500",children:re.map((e,t)=>(0,g.jsxs)("li",{children:["\u2022 ",e.name," (",(e.size/1024/1024).toFixed(2)," MB)"]},t))})]}),ye&&(0,g.jsxs)("div",{className:"mt-3",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-1",children:[(0,g.jsx)("span",{children:"Uploading documents..."}),(0,g.jsxs)("span",{children:[ue,"%"]})]}),(0,g.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,g.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(ue,"%")}})})]})]}),(0,g.jsx)("div",{children:(0,g.jsxs)("label",{className:"flex items-start",children:[(0,g.jsx)("input",{type:"checkbox",checked:ie,onChange:e=>oe(e.target.checked),className:"mr-2 mt-1"}),(0,g.jsx)("span",{className:"text-sm text-gray-700",children:"I accept the mortgage terms and conditions and agree to provide additional documents as required by the vendor."})]})})]}),(0,g.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,g.jsx)("button",{onClick:()=>{B(!1),z(null),V("employed"),J(""),X(""),Q(""),$(""),ee(""),se(""),le(""),ne([]),oe(!1)},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,g.jsx)("button",{onClick:async()=>{if(!ie)return void d.Ay.error("Please accept the terms and conditions");if("employed"===O&&(!U||!G||!H||!Z))return void d.Ay.error("Please fill in all employment details");if("self-employed"===O&&(!W||!te||!ae))return void d.Ay.error("Please fill in all business details");if(!me)return void d.Ay.error("Please select a mortgage bank");if(!Y)return void d.Ay.error("No property selected");if(!ce.find(e=>e._id===me||e.id===me))return void d.Ay.error("Selected bank not found");const e=Y.id||Y._id||Y.propertyId;if(!e)return void d.Ay.error("Invalid property ID");const t="number"===typeof Y.price?Y.price:parseFloat(Y.price)||0,s="commercial"===Y.category?25:20,a="commercial"===Y.category?15:25,l=Math.round(t*(s/100)),r=t-l,n={type:O,employerName:"employed"===O?U:void 0,jobTitle:"employed"===O?G:void 0,monthlyIncome:parseFloat("employed"===O?H:ae)||0,yearsOfEmployment:parseFloat(Z)||0,businessName:"self-employed"===O?W:void 0,businessType:"self-employed"===O?te:void 0};ge(!0),he(0),be(!1);try{const t=localStorage.getItem("token");if(!t)throw new Error("Authentication required. Please login again.");let s=[];if(re&&re.length>0){be(!0),he(0);const e=await p(re,null,e=>{he(e)});if(be(!1),!e.success)throw new Error(e.error||"Failed to upload documents");s=e.data||[],d.Ay.success("Successfully uploaded ".concat(s.length," document(s)"))}const o=await m.A.post((0,x.e9)("/mortgages/apply"),{propertyId:e,mortgageBankId:me,requestedAmount:r,downPayment:l,loanTermYears:a,interestRate:18.5,employmentDetails:n,documents:s},{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});var i;if(!o.data||!o.data.success)throw new Error((null===(i=o.data)||void 0===i?void 0:i.message)||"Failed to submit application");d.Ay.success('Mortgage application submitted successfully for "'.concat(Y.title,'"!')),setTimeout(()=>{d.Ay.info("Loan Amount: \u20a6".concat(r.toLocaleString()," | ")+"Down Payment: \u20a6".concat(l.toLocaleString()," | ")+"Term: ".concat(a," years"))},1500),B(!1),z(null),xe(""),V("employed"),J(""),X(""),Q(""),$(""),ee(""),se(""),le(""),ne([]),oe(!1),setTimeout(()=>{y&&y()},1e3),setTimeout(()=>{b("/mortgages/applications")},3e3)}catch(g){console.error("Error submitting mortgage application:",g);let e="Failed to submit mortgage application. Please try again.";if(g.response){const t=g.response.status,s=g.response.data;if(401===t)e="Authentication failed. Please login again.",setTimeout(()=>b("/"),2e3);else if(400===t){var o,c;e=(null===s||void 0===s?void 0:s.message)||(null===s||void 0===s||null===(o=s.errors)||void 0===o||null===(c=o[0])||void 0===c?void 0:c.msg)||"Invalid application data. Please check all fields."}else e=404===t?"Property or bank not found. Please refresh and try again.":500===t?"Server error. Please try again later or contact support.":(null===s||void 0===s?void 0:s.message)||"Error: ".concat(t,". Please try again.")}else g.request?e="Network error. Please check your internet connection and try again.":g.message&&(e=g.message);d.Ay.error(e)}finally{ge(!1),be(!1),he(0)}},disabled:pe||ye,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:ye?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.w_X,{className:"animate-spin"}),(0,g.jsxs)("span",{children:["Uploading Documents (",ue,"%)..."]})]}):pe?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.w_X,{className:"animate-spin"}),(0,g.jsx)("span",{children:"Submitting Application..."})]}):(0,g.jsx)("span",{children:"Submit Application"})})]})]})}),_&&(0,g.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,g.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[(0,g.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Get Pre-qualified for a Mortgage"}),(0,g.jsx)("p",{className:"text-gray-600 mb-6",children:"Fill out this form to get pre-qualified and see how much you can borrow. No impact on your credit score."}),(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)("div",{children:[(0,g.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Mortgage Bank ",(0,g.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,g.jsxs)("select",{value:me,onChange:e=>xe(e.target.value),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 border-gray-300",children:[(0,g.jsx)("option",{value:"",children:"Choose a mortgage bank"}),ce.map(e=>(0,g.jsx)("option",{value:e._id,children:e.name},e._id))]}),0===ce.length&&(0,g.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"No mortgage banks are currently available. Please try again later."})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employment Type"}),(0,g.jsxs)("div",{className:"flex space-x-4",children:[(0,g.jsxs)("label",{className:"flex items-center",children:[(0,g.jsx)("input",{type:"radio",value:"employed",checked:"employed"===O,onChange:e=>V(e.target.value),className:"mr-2"}),"Employed"]}),(0,g.jsxs)("label",{className:"flex items-center",children:[(0,g.jsx)("input",{type:"radio",value:"self-employed",checked:"self-employed"===O,onChange:e=>V(e.target.value),className:"mr-2"}),"Self-Employed"]})]})]}),"employed"===O&&(0,g.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employer Name"}),(0,g.jsx)(l.A,{fieldKey:"mortgage.prequal.employerName",value:U,onChange:e=>J(e),placeholder:"Company Name"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Job Title"}),(0,g.jsx)(l.A,{fieldKey:"mortgage.prequal.jobTitle",value:G,onChange:e=>X(e),placeholder:"Your Position"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monthly Income (\u20a6)"}),(0,g.jsx)(l.A,{type:"number",fieldKey:"mortgage.prequal.monthlyIncome",value:H,onChange:e=>Q(e),placeholder:"500000"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Years of Employment"}),(0,g.jsx)(l.A,{type:"number",fieldKey:"mortgage.prequal.yearsOfEmployment",value:Z,onChange:e=>$(e),placeholder:"5"})]})]}),"self-employed"===O&&(0,g.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Name"}),(0,g.jsx)(l.A,{fieldKey:"mortgage.prequal.businessName",value:W,onChange:e=>ee(e),placeholder:"Business Name"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Type"}),(0,g.jsx)(l.A,{fieldKey:"mortgage.prequal.businessType",value:te,onChange:e=>se(e),placeholder:"e.g., Consulting, Trading"})]}),(0,g.jsxs)("div",{className:"col-span-2",children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monthly Business Income (\u20a6)"}),(0,g.jsx)(l.A,{type:"number",fieldKey:"mortgage.prequal.businessMonthlyIncome",value:ae,onChange:e=>le(e),placeholder:"750000"})]})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Statements (Last 6 months) - Optional"}),(0,g.jsx)("input",{type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png",onChange:je,disabled:ye||pe,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"}),re.length>0&&(0,g.jsxs)("div",{className:"mt-2",children:[(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"Selected files:"}),(0,g.jsx)("ul",{className:"text-sm text-gray-500",children:re.map((e,t)=>(0,g.jsxs)("li",{children:["\u2022 ",e.name," (",(e.size/1024/1024).toFixed(2)," MB)"]},t))})]}),ye&&(0,g.jsxs)("div",{className:"mt-3",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-1",children:[(0,g.jsx)("span",{children:"Uploading documents..."}),(0,g.jsxs)("span",{children:[ue,"%"]})]}),(0,g.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,g.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(ue,"%")}})})]})]}),(0,g.jsx)("div",{children:(0,g.jsxs)("label",{className:"flex items-start",children:[(0,g.jsx)("input",{type:"checkbox",checked:ie,onChange:e=>oe(e.target.checked),className:"mr-2 mt-1"}),(0,g.jsx)("span",{className:"text-sm text-gray-700",children:"I accept the mortgage pre-qualification terms and conditions and agree to provide additional documents as required."})]})})]}),(0,g.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,g.jsx)("button",{onClick:()=>{K(!1),V("employed"),J(""),X(""),Q(""),$(""),ee(""),se(""),le(""),ne([]),oe(!1),xe("")},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,g.jsx)("button",{onClick:async()=>{if(!ie)return void d.Ay.error("Please accept the terms and conditions");if("employed"===O&&(!U||!G||!H||!Z))return void d.Ay.error("Please fill in all employment details");if("self-employed"===O&&(!W||!te||!ae))return void d.Ay.error("Please fill in all business details");if(!me)return void d.Ay.error("Please select a mortgage bank");if(!ce.find(e=>e._id===me||e.id===me))return void d.Ay.error("Selected bank not found");const e={type:O,employerName:"employed"===O?U:void 0,jobTitle:"employed"===O?G:void 0,monthlyIncome:parseFloat("employed"===O?H:ae)||0,yearsOfEmployment:parseFloat(Z)||0,businessName:"self-employed"===O?W:void 0,businessType:"self-employed"===O?te:void 0};ge(!0),he(0),be(!1);try{const s=localStorage.getItem("token");if(!s)throw new Error("Authentication required. Please login again.");let a=[];if(re&&re.length>0){be(!0),he(0);const e=await p(re,null,e=>{he(e)});if(be(!1),!e.success)throw new Error(e.error||"Failed to upload documents");a=e.data||[],d.Ay.success("Successfully uploaded ".concat(a.length," document(s)"))}const l=await m.A.post((0,x.e9)("/mortgages/prequalify"),{mortgageBankId:me,employmentDetails:e,documents:a},{headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"}});var t;if(!l.data||!l.data.success)throw new Error((null===(t=l.data)||void 0===t?void 0:t.message)||"Failed to submit pre-qualification request");{const{data:e}=l.data;d.Ay.success("Pre-qualification request submitted successfully!",{duration:5e3}),setTimeout(()=>{var t,s,a;(0,d.Ay)((0,g.jsxs)("div",{className:"p-4",children:[(0,g.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Prequalification Estimates"}),(0,g.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,g.jsxs)("p",{children:[(0,g.jsx)("strong",{children:"Estimated Max Loan:"})," \u20a6",(null===(t=e.estimatedMaxLoan)||void 0===t?void 0:t.toLocaleString())||"0"]}),(0,g.jsxs)("p",{children:[(0,g.jsx)("strong",{children:"Estimated Property Value:"})," \u20a6",(null===(s=e.estimatedPropertyValue)||void 0===s?void 0:s.toLocaleString())||"0"]}),(0,g.jsxs)("p",{children:[(0,g.jsx)("strong",{children:"Estimated Down Payment:"})," \u20a6",(null===(a=e.estimatedDownPayment)||void 0===a?void 0:a.toLocaleString())||"0"]}),(0,g.jsx)("p",{className:"mt-2 text-gray-600",children:"You will be contacted within 24 hours with your pre-qualification results."})]})]}),{duration:1e4,icon:"\u2705"})},1500),setTimeout(()=>{y&&y()},2e3),K(!1),V("employed"),J(""),X(""),Q(""),$(""),ee(""),se(""),le(""),ne([]),oe(!1),xe("")}}catch(l){var s,a;console.error("Prequalification submission error:",l);const e=(null===(s=l.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||l.message||"Failed to submit pre-qualification request. Please try again.";d.Ay.error(e)}finally{ge(!1),be(!1),he(0)}},disabled:pe||ye,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:ye?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.w_X,{className:"animate-spin"}),(0,g.jsxs)("span",{children:["Uploading Documents (",ue,"%)..."]})]}):pe?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.w_X,{className:"animate-spin"}),(0,g.jsx)("span",{children:"Submitting Request..."})]}):(0,g.jsx)("span",{children:"Submit Pre-qualification"})})]})]})})]})}}}]);
//# sourceMappingURL=678.4284d988.chunk.js.map