{"version":3,"file":"static/js/678.4284d988.chunk.js","mappings":"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","sources":["components/MemoryInput.js","utils/mortgageDocumentUpload.js","pages/Mortgage.js"],"sourcesContent":["import React, { useCallback, useMemo, useState } from 'react';\nimport { FaHistory, FaTimes } from 'react-icons/fa';\n\nconst MemoryInput = ({\n  value,\n  onChange,\n  placeholder = '',\n  className = '',\n  error = false,\n  fieldKey, // unique storage key per field, e.g., 'title', 'price'\n  type = 'text',\n  min,\n  max,\n  step,\n  multiline = false,\n  rows = 4,\n}) => {\n  const [showSuggestions, setShowSuggestions] = useState(false);\n\n  const storageKey = useMemo(() => `memory_${fieldKey}`, [fieldKey]);\n\n  const getMemory = useCallback(() => {\n    try {\n      const raw = localStorage.getItem(storageKey);\n      return raw ? JSON.parse(raw) : [];\n    } catch {\n      return [];\n    }\n  }, [storageKey]);\n\n  const filteredSuggestions = useMemo(() => {\n    const memory = getMemory();\n    if (!value || value.toString().length < 1) {\n      // Show all suggestions when field is empty\n      return memory.slice(0, 8);\n    }\n    const lower = value.toString().toLowerCase();\n    return memory\n      .filter((m) => m?.v?.toString().toLowerCase().includes(lower))\n      .slice(0, 8);\n  }, [value, getMemory]);\n\n  const saveToMemory = useCallback(\n    (val) => {\n      const trimmed = (val ?? '').toString().trim();\n      if (!trimmed) return;\n      try {\n        const memory = getMemory();\n        const newList = [\n          { v: trimmed, t: Date.now() },\n          ...memory.filter((m) => m?.v !== trimmed),\n        ].slice(0, 12);\n        localStorage.setItem(storageKey, JSON.stringify(newList));\n      } catch {\n        // ignore\n      }\n    },\n    [getMemory, storageKey]\n  );\n\n  const handleBlur = useCallback(() => {\n    saveToMemory(value);\n    setTimeout(() => setShowSuggestions(false), 200);\n  }, [saveToMemory, value]);\n\n  const handleFocus = useCallback(() => {\n    const memory = getMemory();\n    if (memory.length > 0) setShowSuggestions(true);\n  }, [getMemory]);\n\n  const handleSelect = useCallback(\n    (suggestion) => {\n      onChange(suggestion.v);\n      setShowSuggestions(false);\n    },\n    [onChange]\n  );\n\n  const clearMemory = useCallback(() => {\n    localStorage.removeItem(storageKey);\n    setShowSuggestions(false);\n  }, [storageKey]);\n\n  const commonProps = {\n    value: value || '', // Ensure value is never null/undefined\n    onChange: (e) => onChange(e.target.value),\n    onBlur: handleBlur,\n    onFocus: handleFocus,\n    placeholder,\n    className:\n      `w-full px-4 py-3 border-2 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300 ${\n        error ? 'border-red-300 focus:border-red-500' : 'border-gray-200 focus:border-blue-500'\n      } ${className}`,\n  };\n\n  return (\n    <div className=\"relative\">\n      <div className=\"relative\">\n        {multiline ? (\n          <textarea rows={rows} {...commonProps} />\n        ) : (\n          <input type={type} min={min} max={max} step={step} {...commonProps} />\n        )}\n\n        {getMemory().length > 0 && (\n          <button\n            type=\"button\"\n            onClick={clearMemory}\n            className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-red-500\"\n            title=\"Clear history\"\n          >\n            <FaTimes className=\"h-4 w-4\" />\n          </button>\n        )}\n      </div>\n\n      {showSuggestions && filteredSuggestions.length > 0 && (\n        <div className=\"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-b-xl shadow-lg z-50 max-h-60 overflow-y-auto\">\n          <div className=\"px-4 py-2 bg-blue-50 border-b border-blue-200 flex items-center text-xs text-blue-700 uppercase tracking-wide font-semibold\">\n            <FaHistory className=\"mr-2\" /> Recent entries ({filteredSuggestions.length})\n          </div>\n          {filteredSuggestions.map((s, idx) => (\n            <button\n              key={`${storageKey}-${idx}`}\n              type=\"button\"\n              onClick={() => handleSelect(s)}\n              className=\"w-full px-4 py-3 text-left hover:bg-blue-50 border-b border-gray-100 last:border-b-0 transition-colors text-sm\"\n            >\n              <span className=\"font-medium\">{s.v}</span>\n              <span className=\"text-xs text-gray-500 ml-2\">\n                {new Date(s.t).toLocaleDateString()}\n              </span>\n            </button>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MemoryInput;\n\n\n","/**\r\n * Mortgage Document Upload Utility\r\n * Handles uploading documents for mortgage applications to Cloudinary via backend\r\n */\r\n\r\nimport axios from 'axios';\r\nimport { getApiUrl } from './apiConfig';\r\n\r\n/**\r\n * Upload mortgage documents to backend (which uploads to Cloudinary)\r\n * @param {File[]} files - Array of File objects to upload\r\n * @param {string} applicationId - Optional application ID if application already exists\r\n * @param {Function} onProgress - Optional progress callback (progress: number) => void\r\n * @returns {Promise<{success: boolean, data?: Array, error?: string}>}\r\n */\r\nexport const uploadMortgageDocuments = async (files, applicationId = null, onProgress = null) => {\r\n  try {\r\n    if (!files || files.length === 0) {\r\n      throw new Error('No files provided');\r\n    }\r\n\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      throw new Error('Authentication required');\r\n    }\r\n\r\n    // Validate files\r\n    const maxSize = 10 * 1024 * 1024; // 10MB\r\n    const allowedTypes = [\r\n      'application/pdf',\r\n      'application/msword',\r\n      'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n      'text/plain',\r\n      'image/jpeg',\r\n      'image/jpg',\r\n      'image/png'\r\n    ];\r\n\r\n    const invalidFiles = files.filter(file => {\r\n      if (file.size > maxSize) {\r\n        return `File ${file.name} exceeds 10MB limit`;\r\n      }\r\n      if (!allowedTypes.includes(file.type)) {\r\n        return `File ${file.name} has invalid type`;\r\n      }\r\n      return null;\r\n    });\r\n\r\n    if (invalidFiles.length > 0) {\r\n      throw new Error(`Invalid files: ${invalidFiles.join(', ')}`);\r\n    }\r\n\r\n    // Create FormData\r\n    const formData = new FormData();\r\n    files.forEach(file => {\r\n      formData.append('documents', file);\r\n    });\r\n    \r\n    if (applicationId) {\r\n      formData.append('applicationId', applicationId);\r\n    }\r\n\r\n    // Upload to backend\r\n    const response = await axios.post(\r\n      getApiUrl('/upload/mortgage/documents'),\r\n      formData,\r\n      {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'multipart/form-data'\r\n        },\r\n        onUploadProgress: (progressEvent) => {\r\n          if (onProgress && progressEvent.total) {\r\n            const percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total);\r\n            onProgress(percentCompleted);\r\n          }\r\n        }\r\n      }\r\n    );\r\n\r\n    if (response.data && response.data.success) {\r\n      // Transform uploaded files to document format expected by backend\r\n      const documents = response.data.data.uploaded.map((file, index) => ({\r\n        type: 'bank_statement', // Default type, can be enhanced later\r\n        url: file.url,\r\n        name: files[index].name,\r\n        uploadedAt: new Date().toISOString(),\r\n        publicId: file.publicId\r\n      }));\r\n\r\n      return {\r\n        success: true,\r\n        data: documents,\r\n        uploadedFiles: response.data.data.uploaded\r\n      };\r\n    } else {\r\n      throw new Error(response.data?.message || 'Upload failed');\r\n    }\r\n  } catch (error) {\r\n    console.error('Error uploading mortgage documents:', error);\r\n    return {\r\n      success: false,\r\n      error: error.response?.data?.message || error.message || 'Failed to upload documents'\r\n    };\r\n  }\r\n};\r\n\r\n/**\r\n * Upload a single document\r\n * @param {File} file - File to upload\r\n * @param {string} applicationId - Optional application ID\r\n * @param {Function} onProgress - Optional progress callback\r\n * @returns {Promise<{success: boolean, data?: Object, error?: string}>}\r\n */\r\nexport const uploadSingleMortgageDocument = async (file, applicationId = null, onProgress = null) => {\r\n  const result = await uploadMortgageDocuments([file], applicationId, onProgress);\r\n  \r\n  if (result.success) {\r\n    return {\r\n      success: true,\r\n      data: result.data[0]\r\n    };\r\n  }\r\n  \r\n  return result;\r\n};\r\n\r\n","import React, { useState, useMemo, useEffect } from 'react';\r\nimport MemoryInput from '../components/MemoryInput';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { useProperty } from '../contexts/PropertyContext';\r\nimport { useMortgage } from '../contexts/MortgageContext';\r\nimport { FaHome, FaMoneyBillWave, FaPercentage, FaCalendar, FaArrowRight, FaBed, FaBath, FaRuler, FaFilter, FaRedo, FaCheck, FaClock, FaTimes, FaFileAlt, FaStar, FaArrowDown, FaArrowUp, FaCheckCircle, FaTimesCircle, FaInfoCircle } from 'react-icons/fa';\r\nimport toast from 'react-hot-toast';\r\nimport axios from 'axios';\r\nimport { uploadMortgageDocuments } from '../utils/mortgageDocumentUpload';\r\nimport { getApiUrl } from '../utils/apiConfig';\r\n\r\nconst Mortgage = () => {\r\n  const { user } = useAuth();\r\n  const { properties, loading: propertiesLoading } = useProperty();\r\n  const { getUserApplications, getApplicationsByStatus, refreshApplications } = useMortgage();\r\n  const navigate = useNavigate();\r\n  const [activeTab, setActiveTab] = useState('all');\r\n  const [selectedLocation, setSelectedLocation] = useState('all');\r\n  const [selectedPriceRange, setSelectedPriceRange] = useState('any');\r\n  const [selectedPropertyType, setSelectedPropertyType] = useState('all');\r\n  const [selectedEligibility, setSelectedEligibility] = useState('all');\r\n  \r\n  // Mortgage calculator state\r\n  const [homePrice, setHomePrice] = useState(35000000);\r\n  const [downPayment, setDownPayment] = useState(7000000);\r\n  const [loanTerm, setLoanTerm] = useState(15);\r\n  const [interestRate, setInterestRate] = useState(13.5);\r\n\r\n  // Button handlers\r\n  const handlePreQualification = () => {\r\n    if (!user) {\r\n      toast.error('Please login to start pre-qualification');\r\n      navigate('/');\r\n      return;\r\n    }\r\n    // Reset form state\r\n    setEmploymentType('employed');\r\n    setEmployerName('');\r\n    setJobTitle('');\r\n    setMonthlyIncome('');\r\n    setYearsOfEmployment('');\r\n    setBusinessName('');\r\n    setBusinessType('');\r\n    setBusinessMonthlyIncome('');\r\n    setBankStatements([]);\r\n    setAcceptTerms(false);\r\n    setSelectedBankId('');\r\n    setShowPrequalificationModal(true);\r\n  };\r\n\r\n  const handleViewProperty = (propertyId) => {\r\n    navigate(`/property/${propertyId}`);\r\n  };\r\n\r\n  const [showMortgageModal, setShowMortgageModal] = useState(false);\r\n  const [showPrequalificationModal, setShowPrequalificationModal] = useState(false);\r\n  const [selectedProperty, setSelectedProperty] = useState(null);\r\n  const [employmentType, setEmploymentType] = useState('employed');\r\n  const [employerName, setEmployerName] = useState('');\r\n  const [jobTitle, setJobTitle] = useState('');\r\n  const [monthlyIncome, setMonthlyIncome] = useState('');\r\n  const [yearsOfEmployment, setYearsOfEmployment] = useState('');\r\n  const [businessName, setBusinessName] = useState('');\r\n  const [businessType, setBusinessType] = useState('');\r\n  const [businessMonthlyIncome, setBusinessMonthlyIncome] = useState('');\r\n  const [bankStatements, setBankStatements] = useState([]);\r\n  const [acceptTerms, setAcceptTerms] = useState(false);\r\n  const [banks, setBanks] = useState([]);\r\n  const [selectedBankId, setSelectedBankId] = useState('');\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [uploadProgress, setUploadProgress] = useState(0);\r\n  const [isUploading, setIsUploading] = useState(false);\r\n\r\n  // Load approved mortgage banks\r\n  useEffect(() => {\r\n    const loadBanks = async () => {\r\n      try {\r\n        const token = localStorage.getItem('token');\r\n        if (!token) return;\r\n\r\n        const response = await axios.get(getApiUrl('/mortgage-banks'), {\r\n          headers: { Authorization: `Bearer ${token}` }\r\n        });\r\n\r\n        if (response.data.success) {\r\n          setBanks(response.data.data || []);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error loading mortgage banks:', error);\r\n      }\r\n    };\r\n\r\n    if (user) {\r\n      loadBanks();\r\n    }\r\n  }, [user]);\r\n\r\n  const handleApplyMortgage = (property) => {\r\n    console.log('Apply for Mortgage clicked, property:', property, 'user:', user);\r\n    \r\n    if (!user) {\r\n      toast.error('Please login to apply for mortgage');\r\n      navigate('/');\r\n      return;\r\n    }\r\n    \r\n    setSelectedProperty(property);\r\n    setShowMortgageModal(true);\r\n  };\r\n\r\n  const handleFileUpload = (event) => {\r\n    const files = Array.from(event.target.files);\r\n    setBankStatements(files);\r\n  };\r\n\r\n  const handlePrequalificationSubmission = async () => {\r\n    // Validation\r\n    if (!acceptTerms) {\r\n      toast.error('Please accept the terms and conditions');\r\n      return;\r\n    }\r\n\r\n    if (employmentType === 'employed' && (!employerName || !jobTitle || !monthlyIncome || !yearsOfEmployment)) {\r\n      toast.error('Please fill in all employment details');\r\n      return;\r\n    }\r\n\r\n    if (employmentType === 'self-employed' && (!businessName || !businessType || !businessMonthlyIncome)) {\r\n      toast.error('Please fill in all business details');\r\n      return;\r\n    }\r\n\r\n    if (!selectedBankId) {\r\n      toast.error('Please select a mortgage bank');\r\n      return;\r\n    }\r\n\r\n    const selectedBank = banks.find(b => b._id === selectedBankId || b.id === selectedBankId);\r\n    if (!selectedBank) {\r\n      toast.error('Selected bank not found');\r\n      return;\r\n    }\r\n\r\n    // Prepare employment details\r\n    const employmentDetails = {\r\n      type: employmentType,\r\n      employerName: employmentType === 'employed' ? employerName : undefined,\r\n      jobTitle: employmentType === 'employed' ? jobTitle : undefined,\r\n      monthlyIncome: parseFloat(employmentType === 'employed' ? monthlyIncome : businessMonthlyIncome) || 0,\r\n      yearsOfEmployment: parseFloat(yearsOfEmployment) || 0,\r\n      businessName: employmentType === 'self-employed' ? businessName : undefined,\r\n      businessType: employmentType === 'self-employed' ? businessType : undefined\r\n    };\r\n\r\n    setIsSubmitting(true);\r\n    setUploadProgress(0);\r\n    setIsUploading(false);\r\n\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        throw new Error('Authentication required. Please login again.');\r\n      }\r\n\r\n      // Upload documents first if any files are provided\r\n      let documents = [];\r\n      if (bankStatements && bankStatements.length > 0) {\r\n        setIsUploading(true);\r\n        setUploadProgress(0);\r\n        \r\n        const uploadResult = await uploadMortgageDocuments(\r\n          bankStatements,\r\n          null, // applicationId - not created yet\r\n          (progress) => {\r\n            setUploadProgress(progress);\r\n          }\r\n        );\r\n\r\n        setIsUploading(false);\r\n\r\n        if (!uploadResult.success) {\r\n          throw new Error(uploadResult.error || 'Failed to upload documents');\r\n        }\r\n\r\n        documents = uploadResult.data || [];\r\n        toast.success(`Successfully uploaded ${documents.length} document(s)`);\r\n      }\r\n\r\n      // Submit prequalification request to backend\r\n      const response = await axios.post(\r\n        getApiUrl('/mortgages/prequalify'),\r\n        {\r\n          mortgageBankId: selectedBankId,\r\n          employmentDetails: employmentDetails,\r\n          documents: documents\r\n        },\r\n        {\r\n          headers: { \r\n            Authorization: `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          }\r\n        }\r\n      );\r\n\r\n      if (response.data && response.data.success) {\r\n        const { data } = response.data;\r\n        \r\n        // Display prequalification results\r\n        toast.success('Pre-qualification request submitted successfully!', {\r\n          duration: 5000\r\n        });\r\n        \r\n        // Show results in a detailed toast\r\n        setTimeout(() => {\r\n          toast(\r\n            <div className=\"p-4\">\r\n              <h3 className=\"font-semibold text-lg mb-2\">Prequalification Estimates</h3>\r\n              <div className=\"space-y-2 text-sm\">\r\n                <p><strong>Estimated Max Loan:</strong> {data.estimatedMaxLoan?.toLocaleString() || '0'}</p>\r\n                <p><strong>Estimated Property Value:</strong> {data.estimatedPropertyValue?.toLocaleString() || '0'}</p>\r\n                <p><strong>Estimated Down Payment:</strong> {data.estimatedDownPayment?.toLocaleString() || '0'}</p>\r\n                <p className=\"mt-2 text-gray-600\">You will be contacted within 24 hours with your pre-qualification results.</p>\r\n              </div>\r\n            </div>,\r\n            {\r\n              duration: 10000,\r\n              icon: ''\r\n            }\r\n          );\r\n        }, 1500);\r\n        \r\n        // Refresh applications to show the new prequalification\r\n        setTimeout(() => {\r\n          if (refreshApplications) {\r\n            refreshApplications();\r\n          }\r\n        }, 2000);\r\n        \r\n        // Reset form\r\n        setShowPrequalificationModal(false);\r\n        setEmploymentType('employed');\r\n        setEmployerName('');\r\n        setJobTitle('');\r\n        setMonthlyIncome('');\r\n        setYearsOfEmployment('');\r\n        setBusinessName('');\r\n        setBusinessType('');\r\n        setBusinessMonthlyIncome('');\r\n        setBankStatements([]);\r\n        setAcceptTerms(false);\r\n        setSelectedBankId('');\r\n      } else {\r\n        throw new Error(response.data?.message || 'Failed to submit pre-qualification request');\r\n      }\r\n    } catch (error) {\r\n      console.error('Prequalification submission error:', error);\r\n      const errorMessage = error.response?.data?.message || error.message || 'Failed to submit pre-qualification request. Please try again.';\r\n      toast.error(errorMessage);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n      setIsUploading(false);\r\n      setUploadProgress(0);\r\n    }\r\n  };\r\n\r\n  const handleConfirmMortgageApplication = async () => {\r\n    // Validation\r\n    if (!acceptTerms) {\r\n      toast.error('Please accept the terms and conditions');\r\n      return;\r\n    }\r\n\r\n    if (employmentType === 'employed' && (!employerName || !jobTitle || !monthlyIncome || !yearsOfEmployment)) {\r\n      toast.error('Please fill in all employment details');\r\n      return;\r\n    }\r\n\r\n    if (employmentType === 'self-employed' && (!businessName || !businessType || !businessMonthlyIncome)) {\r\n      toast.error('Please fill in all business details');\r\n      return;\r\n    }\r\n\r\n    if (!selectedBankId) {\r\n      toast.error('Please select a mortgage bank');\r\n      return;\r\n    }\r\n\r\n    if (!selectedProperty) {\r\n      toast.error('No property selected');\r\n      return;\r\n    }\r\n\r\n    const selectedBank = banks.find(b => b._id === selectedBankId || b.id === selectedBankId);\r\n    if (!selectedBank) {\r\n      toast.error('Selected bank not found');\r\n      return;\r\n    }\r\n\r\n    // Get property ID - handle both id and _id formats\r\n    const propertyId = selectedProperty.id || selectedProperty._id || selectedProperty.propertyId;\r\n    if (!propertyId) {\r\n      toast.error('Invalid property ID');\r\n      return;\r\n    }\r\n\r\n    // Calculate loan terms\r\n    const propertyPrice = typeof selectedProperty.price === 'number' ? selectedProperty.price : parseFloat(selectedProperty.price) || 0;\r\n    const downPaymentPercent = selectedProperty.category === 'commercial' ? 25 : 20;\r\n    const loanTermYears = selectedProperty.category === 'commercial' ? 15 : 25;\r\n    const defaultInterestRate = 18.5; // Default rate, could be from bank products later\r\n    \r\n    const downPayment = Math.round(propertyPrice * (downPaymentPercent / 100));\r\n    const requestedAmount = propertyPrice - downPayment;\r\n\r\n    // Prepare employment details\r\n    const employmentDetails = {\r\n      type: employmentType,\r\n      employerName: employmentType === 'employed' ? employerName : undefined,\r\n      jobTitle: employmentType === 'employed' ? jobTitle : undefined,\r\n      monthlyIncome: parseFloat(employmentType === 'employed' ? monthlyIncome : businessMonthlyIncome) || 0,\r\n      yearsOfEmployment: parseFloat(yearsOfEmployment) || 0,\r\n      businessName: employmentType === 'self-employed' ? businessName : undefined,\r\n      businessType: employmentType === 'self-employed' ? businessType : undefined\r\n    };\r\n\r\n    setIsSubmitting(true);\r\n    setUploadProgress(0);\r\n    setIsUploading(false);\r\n\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        throw new Error('Authentication required. Please login again.');\r\n      }\r\n\r\n      // Upload documents first if any files are provided\r\n      let documents = [];\r\n      if (bankStatements && bankStatements.length > 0) {\r\n        setIsUploading(true);\r\n        setUploadProgress(0);\r\n        \r\n        const uploadResult = await uploadMortgageDocuments(\r\n          bankStatements,\r\n          null, // applicationId - not created yet\r\n          (progress) => {\r\n            setUploadProgress(progress);\r\n          }\r\n        );\r\n\r\n        setIsUploading(false);\r\n\r\n        if (!uploadResult.success) {\r\n          throw new Error(uploadResult.error || 'Failed to upload documents');\r\n        }\r\n\r\n        documents = uploadResult.data || [];\r\n        toast.success(`Successfully uploaded ${documents.length} document(s)`);\r\n      }\r\n\r\n      // Submit to backend API only (no localStorage)\r\n      const response = await axios.post(\r\n        getApiUrl('/mortgages/apply'),\r\n        {\r\n          propertyId: propertyId, // Proper ID format (id or _id)\r\n          mortgageBankId: selectedBankId,\r\n          requestedAmount: requestedAmount,\r\n          downPayment: downPayment,\r\n          loanTermYears: loanTermYears,\r\n          interestRate: defaultInterestRate,\r\n          employmentDetails: employmentDetails,\r\n          documents: documents // Now contains Cloudinary URLs\r\n        },\r\n        {\r\n          headers: { \r\n            Authorization: `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n          }\r\n        }\r\n      );\r\n\r\n      if (response.data && response.data.success) {\r\n        // Success - reset form and show success message\r\n        toast.success(`Mortgage application submitted successfully for \"${selectedProperty.title}\"!`);\r\n        \r\n        // Show application details\r\n        setTimeout(() => {\r\n          toast.info(\r\n            `Loan Amount: ${requestedAmount.toLocaleString()} | ` +\r\n            `Down Payment: ${downPayment.toLocaleString()} | ` +\r\n            `Term: ${loanTermYears} years`\r\n          );\r\n        }, 1500);\r\n\r\n        // Reset form\r\n        setShowMortgageModal(false);\r\n        setSelectedProperty(null);\r\n        setSelectedBankId('');\r\n        setEmploymentType('employed');\r\n        setEmployerName('');\r\n        setJobTitle('');\r\n        setMonthlyIncome('');\r\n        setYearsOfEmployment('');\r\n        setBusinessName('');\r\n        setBusinessType('');\r\n        setBusinessMonthlyIncome('');\r\n        setBankStatements([]);\r\n        setAcceptTerms(false);\r\n\r\n        // Refresh applications to show the new one\r\n        setTimeout(() => {\r\n          if (refreshApplications) {\r\n            refreshApplications();\r\n          }\r\n        }, 1000);\r\n\r\n        // Navigate to applications page\r\n        setTimeout(() => {\r\n          navigate('/mortgages/applications');\r\n        }, 3000);\r\n      } else {\r\n        throw new Error(response.data?.message || 'Failed to submit application');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error submitting mortgage application:', error);\r\n      \r\n      // Handle different error types\r\n      let errorMessage = 'Failed to submit mortgage application. Please try again.';\r\n      \r\n      if (error.response) {\r\n        // Server responded with error status\r\n        const status = error.response.status;\r\n        const data = error.response.data;\r\n        \r\n        if (status === 401) {\r\n          errorMessage = 'Authentication failed. Please login again.';\r\n          setTimeout(() => navigate('/'), 2000);\r\n        } else if (status === 400) {\r\n          errorMessage = data?.message || data?.errors?.[0]?.msg || 'Invalid application data. Please check all fields.';\r\n        } else if (status === 404) {\r\n          errorMessage = 'Property or bank not found. Please refresh and try again.';\r\n        } else if (status === 500) {\r\n          errorMessage = 'Server error. Please try again later or contact support.';\r\n        } else {\r\n          errorMessage = data?.message || `Error: ${status}. Please try again.`;\r\n        }\r\n      } else if (error.request) {\r\n        // Request made but no response\r\n        errorMessage = 'Network error. Please check your internet connection and try again.';\r\n      } else if (error.message) {\r\n        errorMessage = error.message;\r\n      }\r\n      \r\n      toast.error(errorMessage);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n      setIsUploading(false);\r\n      setUploadProgress(0);\r\n    }\r\n  };\r\n\r\n  const handleFilterResults = () => {\r\n    // Apply filters based on current selections\r\n    const filters = {\r\n      location: selectedLocation,\r\n      priceRange: selectedPriceRange,\r\n      propertyType: selectedPropertyType,\r\n      eligibility: selectedEligibility\r\n    };\r\n    toast.success('Filters applied successfully!');\r\n    console.log('Applied filters:', filters);\r\n  };\r\n\r\n  const handleResetFilters = () => {\r\n    setSelectedLocation('all');\r\n    setSelectedPriceRange('any');\r\n    setSelectedPropertyType('all');\r\n    setSelectedEligibility('all');\r\n    toast.success('Filters reset successfully!');\r\n  };\r\n\r\n  const handlePagination = (pageNumber) => {\r\n    toast.success(`Navigating to page ${pageNumber}`);\r\n  };\r\n\r\n  // Mock mortgage rates data\r\n  const mortgageRates = [\r\n    { type: '30-Year Fixed', rate: 13.5, change: -0.25, trend: 'down' },\r\n    { type: '15-Year Fixed', rate: 12.8, change: -0.15, trend: 'down' },\r\n    { type: '10-Year Fixed', rate: 12.2, change: -0.75, trend: 'down' },\r\n    { type: '5/1 ARM', rate: 11.9, change: 0.05, trend: 'up' }\r\n  ];\r\n\r\n  // Helper function to calculate monthly mortgage payment\r\n  const calculateMonthlyPayment = (principal, annualRate, years) => {\r\n    const monthlyRate = annualRate / 100 / 12;\r\n    const numberOfPayments = years * 12;\r\n    if (monthlyRate === 0) {\r\n      return principal / numberOfPayments;\r\n    }\r\n    return (principal * monthlyRate * Math.pow(1 + monthlyRate, numberOfPayments)) /\r\n           (Math.pow(1 + monthlyRate, numberOfPayments) - 1);\r\n  };\r\n\r\n  // Transform real properties for mortgage page (any property can be financed via mortgage)\r\n  const allEligibleProperties = useMemo(() => {\r\n    if (!properties || properties.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    const defaultInterestRate = 13.5;\r\n    const defaultLoanTerm = 20;\r\n    const defaultDownPaymentPercent = 20;\r\n\r\n    return properties\r\n      .filter(prop => prop.price && prop.price > 0) // Only properties with valid prices\r\n      .map((prop) => {\r\n        const propertyId = prop.id || prop._id || prop.propertyId;\r\n        const price = typeof prop.price === 'number' ? prop.price : parseFloat(prop.price) || 0;\r\n        const downPaymentPercent = prop.typeSlug === 'office' || prop.typeSlug === 'retail' || prop.typeSlug === 'warehouse' ? 25 : defaultDownPaymentPercent;\r\n        const loanTerm = prop.typeSlug === 'office' || prop.typeSlug === 'retail' || prop.typeSlug === 'warehouse' ? 15 : defaultLoanTerm;\r\n        const downPayment = price * (downPaymentPercent / 100);\r\n        const loanAmount = price - downPayment;\r\n        const monthlyPayment = calculateMonthlyPayment(loanAmount, defaultInterestRate, loanTerm);\r\n\r\n        // Determine category\r\n        const residentialTypes = ['apartment', 'house', 'villa', 'penthouse', 'townhouse', 'bungalow', 'studio'];\r\n        const category = residentialTypes.includes(prop.typeSlug) ? 'residential' : 'commercial';\r\n\r\n        // Build tags\r\n        const tags = ['Mortgage Ready'];\r\n        if (prop.isVerified) tags.push('Verified');\r\n        // Add more tags based on property features\r\n        if (prop.yearBuilt && new Date().getFullYear() - prop.yearBuilt <= 5) {\r\n          tags.push('New');\r\n        }\r\n\r\n        // Determine location string\r\n        let locationStr = '';\r\n        if (prop.location) {\r\n          locationStr = typeof prop.location === 'string' ? prop.location : \r\n            `${prop.city || ''}, ${prop.state || ''}`.trim();\r\n        } else if (prop.city || prop.state) {\r\n          locationStr = `${prop.city || ''}, ${prop.state || ''}`.trim();\r\n        } else {\r\n          locationStr = 'Location not specified';\r\n        }\r\n\r\n        return {\r\n          id: propertyId,\r\n          _id: propertyId, // For MongoDB compatibility\r\n          title: prop.title || 'Untitled Property',\r\n          location: locationStr,\r\n          price: price,\r\n          image: prop.image || prop.images?.[0] || '/placeholder.jpg',\r\n          bedrooms: prop.bedrooms || 0,\r\n          bathrooms: prop.bathrooms || 0,\r\n          area: prop.area || prop.sqft || 0,\r\n          tags: tags,\r\n          monthlyPayment: Math.round(monthlyPayment),\r\n          downPaymentPercent: downPaymentPercent,\r\n          loanTerm: loanTerm,\r\n          interestRate: defaultInterestRate,\r\n          category: category,\r\n          isPreApproved: false, // Could be enhanced with actual pre-approval data\r\n          isNewDevelopment: prop.yearBuilt && new Date().getFullYear() - prop.yearBuilt <= 2,\r\n          isRecentlyAdded: prop.createdAt && new Date(prop.createdAt) > new Date(Date.now() - 30 * 24 * 60 * 60 * 1000),\r\n          // Keep original property data for reference\r\n          originalProperty: prop\r\n        };\r\n      })\r\n      .filter(prop => prop.price > 0); // Ensure valid price\r\n  }, [properties]);\r\n\r\n  // Filter properties based on active tab\r\n  const eligibleProperties = useMemo(() => {\r\n    switch (activeTab) {\r\n      case 'pre-approved':\r\n        return allEligibleProperties.filter(p => p.isPreApproved);\r\n      case 'residential':\r\n        return allEligibleProperties.filter(p => p.category === 'residential');\r\n      case 'commercial':\r\n        return allEligibleProperties.filter(p => p.category === 'commercial');\r\n      case 'new-developments':\r\n        return allEligibleProperties.filter(p => p.isNewDevelopment);\r\n      case 'recently-added':\r\n        return allEligibleProperties.filter(p => p.isRecentlyAdded);\r\n      case 'all':\r\n      default:\r\n        return allEligibleProperties;\r\n    }\r\n  }, [activeTab, allEligibleProperties]);\r\n\r\n  // Mock lender partners data\r\n  const lenderPartners = [\r\n    { name: \"First Bank of Nigeria\", rating: 4.7, rate: 13.2 },\r\n    { name: \"Access Bank\", rating: 4.7, rate: 13.2 },\r\n    { name: \"UBA Mortgages\", rating: 4.7, rate: 13.2 },\r\n    { name: \"Zenith Bank\", rating: 4.7, rate: 13.2 }\r\n  ];\r\n\r\n  // Get real application status data from context\r\n  const userApplications = getUserApplications();\r\n  const pendingApplications = getApplicationsByStatus('pending');\r\n  const underReviewApplications = getApplicationsByStatus('under_review');\r\n  const approvedApplications = getApplicationsByStatus('approved');\r\n  \r\n  // Get recent applications for status display\r\n  const recentApplications = userApplications\r\n    .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))\r\n    .slice(0, 5);\r\n\r\n  // Mock educational resources\r\n  const educationalResources = [\r\n    \"Understanding Mortgage Types in Nigeria\",\r\n    \"How to Improve Your Mortgage Approval Chances\",\r\n    \"First-Time Homebuyer's Guide\",\r\n    \"Nigerian Mortgage Glossary\"\r\n  ];\r\n\r\n  // Calculate mortgage details\r\n  const loanAmount = homePrice - downPayment;\r\n  const monthlyRate = interestRate / 100 / 12;\r\n  const numberOfPayments = loanTerm * 12;\r\n  const monthlyPayment = loanAmount * (monthlyRate * Math.pow(1 + monthlyRate, numberOfPayments)) / (Math.pow(1 + monthlyRate, numberOfPayments) - 1);\r\n  const totalInterest = (monthlyPayment * numberOfPayments) - loanAmount;\r\n  const totalPayment = monthlyPayment * numberOfPayments;\r\n\r\n  const getStatusIcon = (status) => {\r\n    switch (status) {\r\n      case 'completed':\r\n        return <FaCheck className=\"text-green-600\" />;\r\n      case 'in-progress':\r\n        return <FaClock className=\"text-yellow-600\" />;\r\n      case 'pending':\r\n        return <FaTimes className=\"text-gray-400\" />;\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'completed':\r\n        return 'bg-green-100 text-green-800';\r\n      case 'in-progress':\r\n        return 'bg-yellow-100 text-yellow-800';\r\n      case 'pending':\r\n        return 'bg-gray-100 text-gray-800';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-4 sm:p-6 pb-8 sm:pb-6\">\r\n      {/* Header */}\r\n      <div className=\"mb-8\">\r\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Mortgage</h1>\r\n        <p className=\"text-gray-600\">\r\n          Find the perfect mortgage solution for your dream home\r\n        </p>\r\n      </div>\r\n\r\n      {/* Top Section - Mortgage Summary and Rates */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8\">\r\n        {/* Mortgage Summary */}\r\n        <div className=\"bg-white rounded-lg shadow p-6\">\r\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Mortgage Summary</h2>\r\n          \r\n          <div className=\"grid grid-cols-2 gap-4 mb-6\">\r\n            <div className=\"text-center\">\r\n              <div className=\"p-3 bg-blue-100 rounded-lg w-fit mx-auto mb-2\">\r\n                <FaHome className=\"text-brand-blue text-xl\" />\r\n              </div>\r\n              <p className=\"text-sm text-gray-600\">Estimated Price Range</p>\r\n              <p className=\"text-lg font-bold text-gray-900\">25-45M</p>\r\n            </div>\r\n            <div className=\"text-center\">\r\n              <div className=\"p-3 bg-green-100 rounded-lg w-fit mx-auto mb-2\">\r\n                <FaMoneyBillWave className=\"text-green-600 text-xl\" />\r\n              </div>\r\n              <p className=\"text-sm text-gray-600\">Recommended Down Payment</p>\r\n              <p className=\"text-lg font-bold text-gray-900\">8.5M</p>\r\n            </div>\r\n            <div className=\"text-center\">\r\n              <div className=\"p-3 bg-orange-100 rounded-lg w-fit mx-auto mb-2\">\r\n                <FaPercentage className=\"text-brand-orange text-xl\" />\r\n              </div>\r\n              <p className=\"text-sm text-gray-600\">Current Avg. Interest Rate</p>\r\n              <p className=\"text-lg font-bold text-gray-900\">13.5%</p>\r\n            </div>\r\n            <div className=\"text-center\">\r\n              <div className=\"p-3 bg-purple-100 rounded-lg w-fit mx-auto mb-2\">\r\n                <FaCalendar className=\"text-purple-600 text-xl\" />\r\n              </div>\r\n              <p className=\"text-sm text-gray-600\">Typical Loan Term</p>\r\n              <p className=\"text-lg font-bold text-gray-900\">15-25 yrs</p>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-brand-blue rounded-lg p-4 text-white\">\r\n            <h3 className=\"font-semibold mb-2\">Get Pre-qualified Today</h3>\r\n            <p className=\"text-sm mb-3\">Get a personalized estimate of how much you can borrow before you start house hunting. No impact on your credit score.</p>\r\n            <button \r\n              onClick={handlePreQualification}\r\n              className=\"bg-yellow-500 hover:bg-yellow-600 text-black px-4 py-2 rounded-lg font-medium flex items-center space-x-2\"\r\n              title=\"Start mortgage pre-qualification process\"\r\n            >\r\n              <span>Start Pre-qualification</span>\r\n              <FaArrowRight />\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Current Mortgage Rates */}\r\n        <div className=\"bg-white rounded-lg shadow p-6\">\r\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Current Mortgage Rates</h2>\r\n          \r\n          <div className=\"space-y-3 mb-6\">\r\n            {mortgageRates.map((rate, index) => (\r\n              <div key={index} className=\"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0\">\r\n                <div>\r\n                  <p className=\"font-medium text-gray-900\">{rate.type}</p>\r\n                  <p className=\"text-sm text-gray-600\">\r\n                    {rate.trend === 'down' ? (\r\n                      <span className=\"text-green-600 flex items-center\">\r\n                        <FaArrowDown className=\"mr-1\" />\r\n                        {Math.abs(rate.change)}% from last week\r\n                      </span>\r\n                    ) : (\r\n                      <span className=\"text-red-600 flex items-center\">\r\n                        <FaArrowUp className=\"mr-1\" />\r\n                        +{rate.change}% from last week\r\n                      </span>\r\n                    )}\r\n                  </p>\r\n                </div>\r\n                <p className=\"text-xl font-bold text-gray-900\">{rate.rate}%</p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <div className=\"bg-gray-50 rounded-lg p-4 mb-4\">\r\n            <h3 className=\"font-medium text-gray-900 mb-2\">Rate Trends</h3>\r\n            <div className=\"h-32 bg-white rounded border flex items-end justify-between px-2\">\r\n              {[13.2, 13.8, 14.1, 13.9, 13.5, 13.5].map((height, index) => (\r\n                <div key={index} className=\"flex flex-col items-center\">\r\n                  <div\r\n                    className=\"w-6 bg-brand-blue rounded-t mb-1\"\r\n                    style={{ height: `${(height - 12) * 20}%` }}\r\n                  ></div>\r\n                  <span className=\"text-xs text-gray-600\">{['Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov'][index]}</span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <p className=\"text-xs text-gray-500 mb-2\">Last updated: June 15, 2023 | Source: AfricaEstate Partners</p>\r\n          <p className=\"text-xs text-gray-500 mb-2\">Rates are subject to change</p>\r\n          <a href=\"#\" className=\"text-sm text-brand-blue hover:underline\">View Detailed Trends</a>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Eligible Properties Section */}\r\n      <div className=\"bg-white rounded-lg shadow mb-8\">\r\n        <div className=\"p-4 sm:p-6 border-b border-gray-200\">\r\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">Mortgage Summary - Eligible Properties</h2>\r\n          \r\n          {/* Tabs */}\r\n          <div className=\"flex space-x-4 sm:space-x-6 mb-4 overflow-x-auto pb-2 -mx-6 px-6 scrollbar-hide\">\r\n            {(() => {\r\n              // Calculate counts for each tab\r\n              const tabCounts = {\r\n                'all': allEligibleProperties.length,\r\n                'pre-approved': allEligibleProperties.filter(p => p.isPreApproved).length,\r\n                'residential': allEligibleProperties.filter(p => p.category === 'residential').length,\r\n                'commercial': allEligibleProperties.filter(p => p.category === 'commercial').length,\r\n                'new-developments': allEligibleProperties.filter(p => p.isNewDevelopment).length,\r\n                'recently-added': allEligibleProperties.filter(p => p.isRecentlyAdded).length\r\n              };\r\n              \r\n              return [\r\n                { key: 'all', label: 'All Eligible' },\r\n                { key: 'pre-approved', label: 'Pre-Approved' },\r\n                { key: 'residential', label: 'Residential' },\r\n                { key: 'commercial', label: 'Commercial' },\r\n                { key: 'new-developments', label: 'New Developments' },\r\n                { key: 'recently-added', label: 'Recently Added' }\r\n              ].map((tab) => (\r\n                <button\r\n                  key={tab.key}\r\n                  onClick={() => setActiveTab(tab.key)}\r\n                  className={`pb-2 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap flex-shrink-0 px-1 ${\r\n                    activeTab === tab.key\r\n                      ? 'border-brand-blue text-brand-blue'\r\n                      : 'border-transparent text-gray-500 hover:text-gray-700'\r\n                  }`}\r\n                >\r\n                  <span className=\"hidden sm:inline\">{tab.label}</span>\r\n                  <span className=\"sm:hidden\">{tab.label.split(' ')[0]}</span>\r\n                  <span className=\"ml-1\">({tabCounts[tab.key]})</span>\r\n                </button>\r\n              ));\r\n            })()}\r\n          </div>\r\n\r\n          {/* Filter Bar */}\r\n          <div className=\"flex flex-wrap gap-4 items-center\">\r\n            <select\r\n              value={selectedLocation}\r\n              onChange={(e) => setSelectedLocation(e.target.value)}\r\n              className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm\"\r\n            >\r\n              <option value=\"all\">Location (All locations)</option>\r\n              <option value=\"lagos\">Lagos</option>\r\n              <option value=\"abuja\">Abuja</option>\r\n              <option value=\"port-harcourt\">Port Harcourt</option>\r\n            </select>\r\n            \r\n            <select\r\n              value={selectedPriceRange}\r\n              onChange={(e) => setSelectedPriceRange(e.target.value)}\r\n              className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm\"\r\n            >\r\n              <option value=\"any\">Price Range (Any price)</option>\r\n              <option value=\"20-30m\">20M - 30M</option>\r\n              <option value=\"30-40m\">30M - 40M</option>\r\n              <option value=\"40-50m\">40M - 50M</option>\r\n            </select>\r\n            \r\n            <select\r\n              value={selectedPropertyType}\r\n              onChange={(e) => setSelectedPropertyType(e.target.value)}\r\n              className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm\"\r\n            >\r\n              <option value=\"all\">Property Type (All types)</option>\r\n              <option value=\"apartment\">Apartment</option>\r\n              <option value=\"villa\">Villa</option>\r\n              <option value=\"penthouse\">Penthouse</option>\r\n            </select>\r\n            \r\n            <select\r\n              value={selectedEligibility}\r\n              onChange={(e) => setSelectedEligibility(e.target.value)}\r\n              className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm\"\r\n            >\r\n              <option value=\"all\">Mortgage Eligibility (All eligibility)</option>\r\n              <option value=\"ready\">Mortgage Ready</option>\r\n              <option value=\"pre-approved\">Pre-Approved</option>\r\n            </select>\r\n            \r\n            <button \r\n              onClick={handleFilterResults}\r\n              className=\"btn-primary flex items-center space-x-2\"\r\n              title=\"Apply current filter selections\"\r\n            >\r\n              <FaFilter />\r\n              <span>Filter Results</span>\r\n            </button>\r\n            \r\n            <button \r\n              onClick={handleResetFilters}\r\n              className=\"p-2 text-gray-500 hover:text-gray-700\"\r\n              title=\"Reset all filters to default\"\r\n            >\r\n              <FaRedo />\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"p-4 sm:p-6 pb-8\">\r\n          <p className=\"text-gray-600 mb-6\">Found {eligibleProperties.length} mortgage-eligible {activeTab === 'all' ? 'properties' : activeTab.replace('-', ' ')}</p>\r\n          \r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6\">\r\n            {eligibleProperties.map((property) => (\r\n              <div key={property.id} className=\"border border-gray-200 rounded-lg overflow-hidden\">\r\n                <div className=\"relative\">\r\n                  <img\r\n                    src={property.image}\r\n                    alt={property.title}\r\n                    className=\"w-full h-48 object-cover\"\r\n                  />\r\n                  <div className=\"absolute top-2 right-2 flex flex-col space-y-1\">\r\n                    {property.tags.map((tag, index) => (\r\n                      <span\r\n                        key={index}\r\n                        className={`px-2 py-1 text-xs font-medium rounded-full ${\r\n                          tag === 'Mortgage Ready' ? 'bg-green-100 text-green-800' :\r\n                          tag === 'Verified' ? 'bg-blue-100 text-blue-800' :\r\n                          tag === 'Featured' ? 'bg-purple-100 text-purple-800' :\r\n                          'bg-yellow-100 text-yellow-800'\r\n                        }`}\r\n                      >\r\n                        {tag}\r\n                      </span>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"p-4\">\r\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">{property.title}</h3>\r\n                  <p className=\"text-gray-600 mb-3\">{property.location}</p>\r\n                  \r\n                  <div className=\"flex items-center space-x-4 text-sm text-gray-600 mb-4\">\r\n                    <span className=\"flex items-center\">\r\n                      <FaBed className=\"mr-1\" />\r\n                      {property.bedrooms} beds\r\n                    </span>\r\n                    <span className=\"flex items-center\">\r\n                      <FaBath className=\"mr-1\" />\r\n                      {property.bathrooms} baths\r\n                    </span>\r\n                    <span className=\"flex items-center\">\r\n                      <FaRuler className=\"mr-1\" />\r\n                      {property.area} m\r\n                    </span>\r\n                  </div>\r\n                  \r\n                  <div className=\"bg-gray-50 rounded-lg p-3 mb-4\">\r\n                    <p className=\"text-sm text-gray-600 mb-1\">Estimated Monthly Payment</p>\r\n                    <p className=\"text-xl font-bold text-gray-900\">{property.monthlyPayment.toLocaleString()}/month</p>\r\n                    <div className=\"text-xs text-gray-500 mt-1\">\r\n                      {property.downPaymentPercent}% Down Payment  {property.loanTerm} yrs Loan Term  {property.interestRate}% Interest Rate\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"flex space-x-2\">\r\n                    <button \r\n                      onClick={() => handleViewProperty(property.id)}\r\n                      className=\"flex-1 btn-outline text-sm\"\r\n                      title=\"View property details\"\r\n                    >\r\n                      View Property\r\n                    </button>\r\n                    <button \r\n                      onClick={() => handleApplyMortgage(property)}\r\n                      className=\"flex-1 btn-primary text-sm\"\r\n                      title=\"Apply for mortgage on this property\"\r\n                    >\r\n                      Apply for Mortgage\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n          \r\n          <div className=\"mt-6 flex justify-center\">\r\n            <div className=\"flex space-x-2\">\r\n              {[1, 2, 3, 4, 5].map((page) => (\r\n                <button\r\n                  key={page}\r\n                  onClick={() => handlePagination(page)}\r\n                  className={`px-3 py-2 rounded-lg text-sm ${\r\n                    page === 1\r\n                      ? 'bg-brand-blue text-white'\r\n                      : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n                  }`}\r\n                  title={`Go to page ${page}`}\r\n                >\r\n                  {page}\r\n                </button>\r\n              ))}\r\n              <span className=\"px-3 py-2 text-gray-500\">...</span>\r\n              <button \r\n                onClick={() => handlePagination(25)}\r\n                className=\"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm hover:bg-gray-200\"\r\n                title=\"Go to page 25\"\r\n              >\r\n                25\r\n              </button>\r\n            </div>\r\n          </div>\r\n          \r\n          <p className=\"text-xs text-gray-500 mt-4 text-center\">\r\n            All properties are verified by PropertyArk for mortgage eligibility.\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Bottom Section - Calculator, Lenders, Application Status, Resources */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-6\">\r\n        {/* Quick Mortgage Calculator */}\r\n        <div className=\"bg-white rounded-lg shadow p-6\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Quick Mortgage Calculator</h3>\r\n          \r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Home Price</label>\r\n              <MemoryInput\r\n                type=\"number\"\r\n                fieldKey=\"mortgage.calculator.homePrice\"\r\n                value={homePrice}\r\n                onChange={(val) => setHomePrice(parseInt(val || 0))}\r\n                className=\"w-full\"\r\n              />\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Down Payment</label>\r\n              <MemoryInput\r\n                type=\"number\"\r\n                fieldKey=\"mortgage.calculator.downPayment\"\r\n                value={downPayment}\r\n                onChange={(val) => setDownPayment(parseInt(val || 0))}\r\n                className=\"w-full\"\r\n              />\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Loan Term (Years): {loanTerm} Years\r\n              </label>\r\n              <input\r\n                type=\"range\"\r\n                min=\"5\"\r\n                max=\"30\"\r\n                value={loanTerm}\r\n                onChange={(e) => setLoanTerm(parseInt(e.target.value))}\r\n                className=\"w-full\"\r\n              />\r\n              <div className=\"flex justify-between text-xs text-gray-500\">\r\n                <span>5 yrs</span>\r\n                <span>30 yrs</span>\r\n              </div>\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Interest Rate (%): {interestRate}%\r\n              </label>\r\n              <input\r\n                type=\"range\"\r\n                min=\"8\"\r\n                max=\"18\"\r\n                step=\"0.1\"\r\n                value={interestRate}\r\n                onChange={(e) => setInterestRate(parseFloat(e.target.value))}\r\n                className=\"w-full\"\r\n              />\r\n              <div className=\"flex justify-between text-xs text-gray-500\">\r\n                <span>8%</span>\r\n                <span>18%</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"mt-6 space-y-2\">\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-sm text-gray-600\">Loan Amount:</span>\r\n              <span className=\"font-medium\">{loanAmount.toLocaleString()}</span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-sm text-gray-600\">Total Interest:</span>\r\n              <span className=\"font-medium\">{totalInterest.toLocaleString()}</span>\r\n            </div>\r\n            <div className=\"flex justify-between\">\r\n              <span className=\"text-sm text-gray-600\">Total Payment:</span>\r\n              <span className=\"font-medium\">{totalPayment.toLocaleString()}</span>\r\n            </div>\r\n            <div className=\"border-t pt-2\">\r\n              <div className=\"flex justify-between\">\r\n                <span className=\"text-sm font-medium text-gray-900\">Monthly Payment:</span>\r\n                <span className=\"text-lg font-bold text-brand-blue\">{Math.round(monthlyPayment).toLocaleString()} / month</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <p className=\"text-xs text-gray-500 mt-4\">This is an estimate only</p>\r\n          <a href=\"#\" className=\"text-sm text-brand-blue hover:underline\">Detailed Calculator</a>\r\n        </div>\r\n\r\n        {/* Approved Lender Partners */}\r\n        <div className=\"bg-white rounded-lg shadow p-6\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Approved Lender Partners</h3>\r\n          \r\n          <div className=\"space-y-3\">\r\n            {lenderPartners.map((lender, index) => (\r\n              <div key={index} className=\"flex items-center justify-between p-3 border border-gray-200 rounded-lg\">\r\n                <div>\r\n                  <p className=\"font-medium text-gray-900\">{lender.name}</p>\r\n                  <div className=\"flex items-center space-x-1\">\r\n                    <FaStar className=\"text-yellow-500 text-sm\" />\r\n                    <span className=\"text-sm text-gray-600\">{lender.rating}</span>\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-right\">\r\n                  <p className=\"font-medium text-gray-900\">{lender.rate}%</p>\r\n                  <FaArrowRight className=\"text-gray-400\" />\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n          \r\n          <p className=\"text-sm text-gray-600 mt-4\">7 lenders available in your area</p>\r\n          <a href=\"#\" className=\"text-sm text-brand-blue hover:underline\">Compare All</a>\r\n        </div>\r\n\r\n        {/* Application Status */}\r\n        <div className=\"bg-white rounded-lg shadow p-6\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Application Status</h3>\r\n          \r\n          {recentApplications.length === 0 ? (\r\n            <div className=\"text-center py-8\">\r\n              <p className=\"text-gray-500 mb-4\">No applications yet</p>\r\n              <button\r\n                onClick={() => navigate('/mortgage')}\r\n                className=\"text-sm text-blue-600 hover:underline\"\r\n              >\r\n                Apply for Mortgage\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-4\">\r\n              {recentApplications.map((application) => (\r\n                <div key={application._id || application.id} className=\"flex items-start space-x-3 p-3 hover:bg-gray-50 rounded-lg\">\r\n                  <div className={`p-2 rounded-full ${\r\n                    application.status === 'approved' ? 'bg-green-100' :\r\n                    application.status === 'rejected' ? 'bg-red-100' :\r\n                    application.status === 'under_review' ? 'bg-blue-100' :\r\n                    'bg-yellow-100'\r\n                  }`}>\r\n                    {application.status === 'approved' ? <FaCheckCircle className=\"text-green-600\" /> :\r\n                     application.status === 'rejected' ? <FaTimesCircle className=\"text-red-600\" /> :\r\n                     application.status === 'under_review' ? <FaInfoCircle className=\"text-blue-600\" /> :\r\n                     <FaClock className=\"text-yellow-600\" />}\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"flex items-center space-x-2 mb-1\">\r\n                      <p className=\"text-sm font-medium text-gray-900\">\r\n                        {new Date(application.createdAt).toLocaleDateString()}\r\n                      </p>\r\n                      <span className={`px-2 py-1 text-xs rounded-full ${\r\n                        application.status === 'approved' ? 'bg-green-100 text-green-800' :\r\n                        application.status === 'rejected' ? 'bg-red-100 text-red-800' :\r\n                        application.status === 'under_review' ? 'bg-blue-100 text-blue-800' :\r\n                        'bg-yellow-100 text-yellow-800'\r\n                      }`}>\r\n                        {application.status.replace('_', ' ')}\r\n                      </span>\r\n                    </div>\r\n                    <p className=\"text-sm font-medium text-gray-900\">\r\n                      {application.property?.title || 'Prequalification Request'}\r\n                    </p>\r\n                    <p className=\"text-xs text-gray-600\">\r\n                      Amount: {application.requestedAmount?.toLocaleString() || '0'} | \r\n                      Bank: {application.mortgageBank?.name || 'N/A'}\r\n                    </p>\r\n                  </div>\r\n                  <button\r\n                    onClick={() => navigate(`/mortgages/applications/${application._id || application.id}`)}\r\n                    className=\"text-sm text-blue-600 hover:underline\"\r\n                  >\r\n                    View\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n          \r\n          {userApplications.length > 0 && (\r\n            <div className=\"mt-4 pt-4 border-t border-gray-200\">\r\n              <button\r\n                onClick={() => navigate('/mortgages/applications')}\r\n                className=\"text-sm text-blue-600 hover:underline w-full text-center\"\r\n              >\r\n                View All Applications\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Educational Resources */}\r\n        <div className=\"bg-white rounded-lg shadow p-6\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Educational Resources</h3>\r\n          \r\n          <div className=\"space-y-3\">\r\n            {educationalResources.map((resource, index) => (\r\n              <div key={index} className=\"flex items-center space-x-3 p-2 hover:bg-gray-50 rounded-lg\">\r\n                <FaFileAlt className=\"text-gray-400\" />\r\n                <span className=\"text-sm text-gray-700\">{resource}</span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n          \r\n          <p className=\"text-sm text-gray-600 mt-4\">75 Resources available</p>\r\n          <a href=\"#\" className=\"text-sm text-brand-blue hover:underline\">Compare All</a>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Mortgage Application Modal */}\r\n      {showMortgageModal && selectedProperty && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n          <div className=\"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6\">\r\n            <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Apply for Mortgage</h3>\r\n            <p className=\"text-gray-600 mb-6\">{selectedProperty.title}</p>\r\n            \r\n            {/* Property Summary */}\r\n            <div className=\"bg-gray-50 p-4 rounded-lg mb-6\">\r\n              <h4 className=\"font-semibold text-gray-900 mb-2\">Property Details</h4>\r\n              <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n                <div>\r\n                  <p><strong>Property Price:</strong> {selectedProperty.price.toLocaleString()}</p>\r\n                  <p><strong>Loan Amount:</strong> {Math.round(selectedProperty.price * 0.8).toLocaleString()}</p>\r\n                </div>\r\n                <div>\r\n                  <p><strong>Down Payment:</strong> {Math.round(selectedProperty.price * 0.2).toLocaleString()}</p>\r\n                  <p><strong>Monthly Payment:</strong> {Math.round((selectedProperty.price * 0.8 * 0.185) / 12).toLocaleString()}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-6\">\r\n              {/* Bank Selection */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Select Mortgage Bank <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <select\r\n                  value={selectedBankId}\r\n                  onChange={(e) => setSelectedBankId(e.target.value)}\r\n                  className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 border-gray-300\"\r\n                >\r\n                  <option value=\"\">Choose a mortgage bank</option>\r\n                  {banks.map((bank) => (\r\n                    <option key={bank._id} value={bank._id}>\r\n                      {bank.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n                {banks.length === 0 && (\r\n                  <p className=\"mt-1 text-xs text-gray-500\">\r\n                    No mortgage banks are currently available. Please try again later.\r\n                  </p>\r\n                )}\r\n\r\n                {/* Display Bank Products with Rates */}\r\n                {selectedBankId && (() => {\r\n                  const selectedBank = banks.find(b => b._id === selectedBankId || b.id === selectedBankId);\r\n                  const activeProducts = selectedBank?.mortgageProducts?.filter(p => p.isActive) || [];\r\n                  \r\n                  if (activeProducts.length > 0) {\r\n                    return (\r\n                      <div className=\"mt-4 bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n                        <h4 className=\"text-sm font-semibold text-gray-900 mb-3\">\r\n                          {selectedBank?.name} - Available Products & Rates\r\n                        </h4>\r\n                        <div className=\"space-y-3\">\r\n                          {activeProducts.map((product, index) => (\r\n                            <div \r\n                              key={index} \r\n                              className=\"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\"\r\n                            >\r\n                              <div className=\"flex items-start justify-between mb-2\">\r\n                                <div className=\"flex-1\">\r\n                                  <h5 className=\"font-semibold text-gray-900 text-sm\">{product.name}</h5>\r\n                                  {product.description && (\r\n                                    <p className=\"text-xs text-gray-600 mt-1\">{product.description}</p>\r\n                                  )}\r\n                                </div>\r\n                                <div className=\"ml-4 text-right\">\r\n                                  <div className=\"text-lg font-bold text-blue-600\">\r\n                                    {product.interestRate}%\r\n                                  </div>\r\n                                  <div className=\"text-xs text-gray-500 capitalize\">\r\n                                    {product.interestRateType}\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                              \r\n                              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 mt-3 pt-3 border-t border-gray-100\">\r\n                                <div>\r\n                                  <p className=\"text-xs text-gray-500\">Loan Range</p>\r\n                                  <p className=\"text-xs font-medium text-gray-900 mt-1\">\r\n                                    {product.minLoanAmount?.toLocaleString()} - {product.maxLoanAmount?.toLocaleString()}\r\n                                  </p>\r\n                                </div>\r\n                                <div>\r\n                                  <p className=\"text-xs text-gray-500\">Down Payment</p>\r\n                                  <p className=\"text-xs font-medium text-gray-900 mt-1\">\r\n                                    {product.minDownPaymentPercent}% min\r\n                                  </p>\r\n                                </div>\r\n                                <div>\r\n                                  <p className=\"text-xs text-gray-500\">Max Term</p>\r\n                                  <p className=\"text-xs font-medium text-gray-900 mt-1\">\r\n                                    {product.maxLoanTerm} years\r\n                                  </p>\r\n                                </div>\r\n                                {product.eligibilityCriteria && (\r\n                                  <div>\r\n                                    <p className=\"text-xs text-gray-500\">Requirements</p>\r\n                                    <div className=\"text-xs text-gray-900 mt-1 space-y-0.5\">\r\n                                      {product.eligibilityCriteria.minMonthlyIncome > 0 && (\r\n                                        <p>Income: {product.eligibilityCriteria.minMonthlyIncome.toLocaleString()}/mo</p>\r\n                                      )}\r\n                                      {product.eligibilityCriteria.minCreditScore > 0 && (\r\n                                        <p>Credit: {product.eligibilityCriteria.minCreditScore}+</p>\r\n                                      )}\r\n                                    </div>\r\n                                  </div>\r\n                                )}\r\n                              </div>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                        <p className=\"text-xs text-gray-600 mt-3 italic\">\r\n                          * Rates and terms shown are indicative. Final terms subject to bank review and approval.\r\n                        </p>\r\n                      </div>\r\n                    );\r\n                  } else if (selectedBank && (!selectedBank.mortgageProducts || selectedBank.mortgageProducts.length === 0)) {\r\n                    return (\r\n                      <div className=\"mt-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\r\n                        <p className=\"text-sm text-yellow-800\">\r\n                          <FaMoneyBillWave className=\"inline mr-2\" />\r\n                          {selectedBank.name} has no active mortgage products available at this time.\r\n                        </p>\r\n                      </div>\r\n                    );\r\n                  }\r\n                  return null;\r\n                })()}\r\n              </div>\r\n              {/* Employment Type */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Employment Type</label>\r\n                <div className=\"flex space-x-4\">\r\n                  <label className=\"flex items-center\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      value=\"employed\"\r\n                      checked={employmentType === 'employed'}\r\n                      onChange={(e) => setEmploymentType(e.target.value)}\r\n                      className=\"mr-2\"\r\n                    />\r\n                    Employed\r\n                  </label>\r\n                  <label className=\"flex items-center\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      value=\"self-employed\"\r\n                      checked={employmentType === 'self-employed'}\r\n                      onChange={(e) => setEmploymentType(e.target.value)}\r\n                      className=\"mr-2\"\r\n                    />\r\n                    Self-Employed\r\n                  </label>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Employment Details */}\r\n              {employmentType === 'employed' && (\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Employer Name</label>\r\n                    <MemoryInput\r\n                      fieldKey=\"mortgage.app.employerName\"\r\n                      value={employerName}\r\n                      onChange={(val) => setEmployerName(val)}\r\n                      placeholder=\"Company Name\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Job Title</label>\r\n                    <MemoryInput\r\n                      fieldKey=\"mortgage.app.jobTitle\"\r\n                      value={jobTitle}\r\n                      onChange={(val) => setJobTitle(val)}\r\n                      placeholder=\"Your Position\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Monthly Income ()</label>\r\n                    <MemoryInput\r\n                      type=\"number\"\r\n                      fieldKey=\"mortgage.app.monthlyIncome\"\r\n                      value={monthlyIncome}\r\n                      onChange={(val) => setMonthlyIncome(val)}\r\n                      placeholder=\"500000\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Years of Employment</label>\r\n                    <MemoryInput\r\n                      type=\"number\"\r\n                      fieldKey=\"mortgage.app.yearsOfEmployment\"\r\n                      value={yearsOfEmployment}\r\n                      onChange={(val) => setYearsOfEmployment(val)}\r\n                      placeholder=\"5\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Business Details */}\r\n              {employmentType === 'self-employed' && (\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Business Name</label>\r\n                    <MemoryInput\r\n                      fieldKey=\"mortgage.app.businessName\"\r\n                      value={businessName}\r\n                      onChange={(val) => setBusinessName(val)}\r\n                      placeholder=\"Business Name\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Business Type</label>\r\n                    <MemoryInput\r\n                      fieldKey=\"mortgage.app.businessType\"\r\n                      value={businessType}\r\n                      onChange={(val) => setBusinessType(val)}\r\n                      placeholder=\"e.g., Consulting, Trading\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"col-span-2\">\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Monthly Business Income ()</label>\r\n                    <MemoryInput\r\n                      type=\"number\"\r\n                      fieldKey=\"mortgage.app.businessMonthlyIncome\"\r\n                      value={businessMonthlyIncome}\r\n                      onChange={(val) => setBusinessMonthlyIncome(val)}\r\n                      placeholder=\"750000\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Bank Statements Upload */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Bank Statements (Last 6 months)</label>\r\n                <input\r\n                  type=\"file\"\r\n                  multiple\r\n                  accept=\".pdf,.jpg,.jpeg,.png\"\r\n                  onChange={handleFileUpload}\r\n                  disabled={isUploading || isSubmitting}\r\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                />\r\n                {bankStatements.length > 0 && (\r\n                  <div className=\"mt-2\">\r\n                    <p className=\"text-sm text-gray-600\">Selected files:</p>\r\n                    <ul className=\"text-sm text-gray-500\">\r\n                      {bankStatements.map((file, index) => (\r\n                        <li key={index}> {file.name} ({(file.size / 1024 / 1024).toFixed(2)} MB)</li>\r\n                      ))}\r\n                    </ul>\r\n                  </div>\r\n                )}\r\n                {isUploading && (\r\n                  <div className=\"mt-3\">\r\n                    <div className=\"flex items-center justify-between text-sm text-gray-600 mb-1\">\r\n                      <span>Uploading documents...</span>\r\n                      <span>{uploadProgress}%</span>\r\n                    </div>\r\n                    <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                      <div\r\n                        className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\r\n                        style={{ width: `${uploadProgress}%` }}\r\n                      ></div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Terms and Conditions */}\r\n              <div>\r\n                <label className=\"flex items-start\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={acceptTerms}\r\n                    onChange={(e) => setAcceptTerms(e.target.checked)}\r\n                    className=\"mr-2 mt-1\"\r\n                  />\r\n                  <span className=\"text-sm text-gray-700\">\r\n                    I accept the mortgage terms and conditions and agree to provide additional documents as required by the vendor.\r\n                  </span>\r\n                </label>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex space-x-3 mt-6\">\r\n              <button\r\n                onClick={() => {\r\n                  setShowMortgageModal(false);\r\n                  setSelectedProperty(null);\r\n                  setEmploymentType('employed');\r\n                  setEmployerName('');\r\n                  setJobTitle('');\r\n                  setMonthlyIncome('');\r\n                  setYearsOfEmployment('');\r\n                  setBusinessName('');\r\n                  setBusinessType('');\r\n                  setBusinessMonthlyIncome('');\r\n                  setBankStatements([]);\r\n                  setAcceptTerms(false);\r\n                }}\r\n                className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                onClick={handleConfirmMortgageApplication}\r\n                disabled={isSubmitting || isUploading}\r\n                className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2\"\r\n              >\r\n                {isUploading ? (\r\n                  <>\r\n                    <FaClock className=\"animate-spin\" />\r\n                    <span>Uploading Documents ({uploadProgress}%)...</span>\r\n                  </>\r\n                ) : isSubmitting ? (\r\n                  <>\r\n                    <FaClock className=\"animate-spin\" />\r\n                    <span>Submitting Application...</span>\r\n                  </>\r\n                ) : (\r\n                  <span>Submit Application</span>\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Prequalification Modal */}\r\n      {showPrequalificationModal && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n          <div className=\"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6\">\r\n            <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Get Pre-qualified for a Mortgage</h3>\r\n            <p className=\"text-gray-600 mb-6\">Fill out this form to get pre-qualified and see how much you can borrow. No impact on your credit score.</p>\r\n            \r\n            <div className=\"space-y-6\">\r\n              {/* Bank Selection */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Select Mortgage Bank <span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <select\r\n                  value={selectedBankId}\r\n                  onChange={(e) => setSelectedBankId(e.target.value)}\r\n                  className=\"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 border-gray-300\"\r\n                >\r\n                  <option value=\"\">Choose a mortgage bank</option>\r\n                  {banks.map((bank) => (\r\n                    <option key={bank._id} value={bank._id}>\r\n                      {bank.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n                {banks.length === 0 && (\r\n                  <p className=\"mt-1 text-xs text-gray-500\">\r\n                    No mortgage banks are currently available. Please try again later.\r\n                  </p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Employment Type */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Employment Type</label>\r\n                <div className=\"flex space-x-4\">\r\n                  <label className=\"flex items-center\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      value=\"employed\"\r\n                      checked={employmentType === 'employed'}\r\n                      onChange={(e) => setEmploymentType(e.target.value)}\r\n                      className=\"mr-2\"\r\n                    />\r\n                    Employed\r\n                  </label>\r\n                  <label className=\"flex items-center\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      value=\"self-employed\"\r\n                      checked={employmentType === 'self-employed'}\r\n                      onChange={(e) => setEmploymentType(e.target.value)}\r\n                      className=\"mr-2\"\r\n                    />\r\n                    Self-Employed\r\n                  </label>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Employment Details */}\r\n              {employmentType === 'employed' && (\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Employer Name</label>\r\n                    <MemoryInput\r\n                      fieldKey=\"mortgage.prequal.employerName\"\r\n                      value={employerName}\r\n                      onChange={(val) => setEmployerName(val)}\r\n                      placeholder=\"Company Name\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Job Title</label>\r\n                    <MemoryInput\r\n                      fieldKey=\"mortgage.prequal.jobTitle\"\r\n                      value={jobTitle}\r\n                      onChange={(val) => setJobTitle(val)}\r\n                      placeholder=\"Your Position\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Monthly Income ()</label>\r\n                    <MemoryInput\r\n                      type=\"number\"\r\n                      fieldKey=\"mortgage.prequal.monthlyIncome\"\r\n                      value={monthlyIncome}\r\n                      onChange={(val) => setMonthlyIncome(val)}\r\n                      placeholder=\"500000\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Years of Employment</label>\r\n                    <MemoryInput\r\n                      type=\"number\"\r\n                      fieldKey=\"mortgage.prequal.yearsOfEmployment\"\r\n                      value={yearsOfEmployment}\r\n                      onChange={(val) => setYearsOfEmployment(val)}\r\n                      placeholder=\"5\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Business Details */}\r\n              {employmentType === 'self-employed' && (\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Business Name</label>\r\n                    <MemoryInput\r\n                      fieldKey=\"mortgage.prequal.businessName\"\r\n                      value={businessName}\r\n                      onChange={(val) => setBusinessName(val)}\r\n                      placeholder=\"Business Name\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Business Type</label>\r\n                    <MemoryInput\r\n                      fieldKey=\"mortgage.prequal.businessType\"\r\n                      value={businessType}\r\n                      onChange={(val) => setBusinessType(val)}\r\n                      placeholder=\"e.g., Consulting, Trading\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"col-span-2\">\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Monthly Business Income ()</label>\r\n                    <MemoryInput\r\n                      type=\"number\"\r\n                      fieldKey=\"mortgage.prequal.businessMonthlyIncome\"\r\n                      value={businessMonthlyIncome}\r\n                      onChange={(val) => setBusinessMonthlyIncome(val)}\r\n                      placeholder=\"750000\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Bank Statements Upload */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Bank Statements (Last 6 months) - Optional</label>\r\n                <input\r\n                  type=\"file\"\r\n                  multiple\r\n                  accept=\".pdf,.jpg,.jpeg,.png\"\r\n                  onChange={handleFileUpload}\r\n                  disabled={isUploading || isSubmitting}\r\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                />\r\n                {bankStatements.length > 0 && (\r\n                  <div className=\"mt-2\">\r\n                    <p className=\"text-sm text-gray-600\">Selected files:</p>\r\n                    <ul className=\"text-sm text-gray-500\">\r\n                      {bankStatements.map((file, index) => (\r\n                        <li key={index}> {file.name} ({(file.size / 1024 / 1024).toFixed(2)} MB)</li>\r\n                      ))}\r\n                    </ul>\r\n                  </div>\r\n                )}\r\n                {isUploading && (\r\n                  <div className=\"mt-3\">\r\n                    <div className=\"flex items-center justify-between text-sm text-gray-600 mb-1\">\r\n                      <span>Uploading documents...</span>\r\n                      <span>{uploadProgress}%</span>\r\n                    </div>\r\n                    <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                      <div\r\n                        className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\r\n                        style={{ width: `${uploadProgress}%` }}\r\n                      ></div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Terms and Conditions */}\r\n              <div>\r\n                <label className=\"flex items-start\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={acceptTerms}\r\n                    onChange={(e) => setAcceptTerms(e.target.checked)}\r\n                    className=\"mr-2 mt-1\"\r\n                  />\r\n                  <span className=\"text-sm text-gray-700\">\r\n                    I accept the mortgage pre-qualification terms and conditions and agree to provide additional documents as required.\r\n                  </span>\r\n                </label>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex space-x-3 mt-6\">\r\n              <button\r\n                onClick={() => {\r\n                  setShowPrequalificationModal(false);\r\n                  setEmploymentType('employed');\r\n                  setEmployerName('');\r\n                  setJobTitle('');\r\n                  setMonthlyIncome('');\r\n                  setYearsOfEmployment('');\r\n                  setBusinessName('');\r\n                  setBusinessType('');\r\n                  setBusinessMonthlyIncome('');\r\n                  setBankStatements([]);\r\n                  setAcceptTerms(false);\r\n                  setSelectedBankId('');\r\n                }}\r\n                className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                onClick={handlePrequalificationSubmission}\r\n                disabled={isSubmitting || isUploading}\r\n                className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2\"\r\n              >\r\n                {isUploading ? (\r\n                  <>\r\n                    <FaClock className=\"animate-spin\" />\r\n                    <span>Uploading Documents ({uploadProgress}%)...</span>\r\n                  </>\r\n                ) : isSubmitting ? (\r\n                  <>\r\n                    <FaClock className=\"animate-spin\" />\r\n                    <span>Submitting Request...</span>\r\n                  </>\r\n                ) : (\r\n                  <span>Submit Pre-qualification</span>\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Mortgage;\r\n\r\n\r\n\r\n"],"names":["_ref","value","onChange","placeholder","className","error","fieldKey","type","min","max","step","multiline","rows","showSuggestions","setShowSuggestions","useState","storageKey","useMemo","concat","getMemory","useCallback","raw","localStorage","getItem","JSON","parse","_unused","filteredSuggestions","memory","toString","length","slice","lower","toLowerCase","filter","m","_m$v","v","includes","saveToMemory","val","trimmed","trim","newList","t","Date","now","setItem","stringify","_unused2","handleBlur","setTimeout","handleFocus","handleSelect","suggestion","clearMemory","removeItem","commonProps","e","target","onBlur","onFocus","_jsxs","children","_jsx","_objectSpread","onClick","title","FaTimes","FaHistory","map","s","idx","toLocaleDateString","uploadMortgageDocuments","async","files","applicationId","arguments","undefined","onProgress","Error","token","maxSize","allowedTypes","invalidFiles","file","size","name","join","formData","FormData","forEach","append","response","axios","post","getApiUrl","headers","onUploadProgress","progressEvent","total","percentCompleted","Math","round","loaded","data","success","uploaded","index","url","uploadedAt","toISOString","publicId","uploadedFiles","_response$data","message","_error$response","_error$response$data","console","Mortgage","user","useAuth","properties","loading","propertiesLoading","useProperty","getUserApplications","getApplicationsByStatus","refreshApplications","useMortgage","navigate","useNavigate","activeTab","setActiveTab","selectedLocation","setSelectedLocation","selectedPriceRange","setSelectedPriceRange","selectedPropertyType","setSelectedPropertyType","selectedEligibility","setSelectedEligibility","homePrice","setHomePrice","downPayment","setDownPayment","loanTerm","setLoanTerm","interestRate","setInterestRate","showMortgageModal","setShowMortgageModal","showPrequalificationModal","setShowPrequalificationModal","selectedProperty","setSelectedProperty","employmentType","setEmploymentType","employerName","setEmployerName","jobTitle","setJobTitle","monthlyIncome","setMonthlyIncome","yearsOfEmployment","setYearsOfEmployment","businessName","setBusinessName","businessType","setBusinessType","businessMonthlyIncome","setBusinessMonthlyIncome","bankStatements","setBankStatements","acceptTerms","setAcceptTerms","banks","setBanks","selectedBankId","setSelectedBankId","isSubmitting","setIsSubmitting","uploadProgress","setUploadProgress","isUploading","setIsUploading","useEffect","get","Authorization","loadBanks","handleFileUpload","event","Array","from","handlePagination","pageNumber","toast","allEligibleProperties","prop","price","_prop$images","propertyId","id","_id","parseFloat","downPaymentPercent","typeSlug","monthlyPayment","calculateMonthlyPayment","principal","annualRate","years","monthlyRate","numberOfPayments","pow","category","tags","isVerified","push","yearBuilt","getFullYear","locationStr","location","city","state","image","images","bedrooms","bathrooms","area","sqft","isPreApproved","isNewDevelopment","isRecentlyAdded","createdAt","originalProperty","eligibleProperties","p","userApplications","recentApplications","sort","a","b","loanAmount","totalInterest","totalPayment","FaHome","FaMoneyBillWave","FaPercentage","FaCalendar","handlePreQualification","FaArrowRight","rate","change","trend","FaArrowDown","abs","FaArrowUp","height","style","href","tabCounts","key","label","tab","split","handleFilterResults","filters","priceRange","propertyType","eligibility","log","FaFilter","handleResetFilters","FaRedo","replace","property","src","alt","tag","FaBed","FaBath","FaRuler","toLocaleString","handleViewProperty","handleApplyMortgage","page","MemoryInput","parseInt","rating","lender","FaStar","application","_application$property","_application$requeste","_application$mortgage","status","FaCheckCircle","FaTimesCircle","FaInfoCircle","FaClock","requestedAmount","mortgageBank","resource","FaFileAlt","bank","_selectedBank$mortgag","selectedBank","find","activeProducts","mortgageProducts","isActive","product","_product$minLoanAmoun","_product$maxLoanAmoun","description","interestRateType","minLoanAmount","maxLoanAmount","minDownPaymentPercent","maxLoanTerm","eligibilityCriteria","minMonthlyIncome","minCreditScore","checked","multiple","accept","disabled","toFixed","width","propertyPrice","loanTermYears","employmentDetails","documents","uploadResult","progress","mortgageBankId","_response$data2","info","errorMessage","_data$errors","_data$errors$","errors","msg","request","_Fragment","duration","_data$estimatedMaxLoa","_data$estimatedProper","_data$estimatedDownPa","estimatedMaxLoan","estimatedPropertyValue","estimatedDownPayment","icon"],"sourceRoot":""}