{"version":3,"file":"static/js/843.6789b5b2.chunk.js","mappings":"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","sources":["components/Breadcrumbs.js","components/PropertyPurchaseButton.js","pages/PropertyDetail.js","services/inspectionService.js"],"sourcesContent":["import React from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport { FaChevronRight, FaHome } from 'react-icons/fa';\n\nconst Breadcrumbs = ({ items }) => {\n  const location = useLocation();\n  \n  // Auto-generate breadcrumbs from route if items not provided\n  const pathnames = location.pathname.split('/').filter((x) => x);\n  \n  const breadcrumbItems = items || [\n    { label: 'Home', path: '/' },\n    ...pathnames.map((name, index) => {\n      const routeTo = `/${pathnames.slice(0, index + 1).join('/')}`;\n      const label = name\n        .split('-')\n        .map(word => word.charAt(0).toUpperCase() + word.slice(1))\n        .join(' ');\n      return { label, path: routeTo };\n    })\n  ];\n\n  return (\n    <nav className=\"flex items-center space-x-2 text-sm text-gray-600 mb-4\" aria-label=\"Breadcrumb\">\n      <ol className=\"flex items-center space-x-2\">\n        {breadcrumbItems.map((item, index) => {\n          const isLast = index === breadcrumbItems.length - 1;\n          \n          return (\n            <li key={item.path || index} className=\"flex items-center\">\n              {index === 0 && (\n                <FaHome className=\"h-4 w-4 text-gray-400 mr-2\" aria-hidden=\"true\" />\n              )}\n              {isLast ? (\n                <span className=\"text-gray-900 font-medium\" aria-current=\"page\">\n                  {item.label}\n                </span>\n              ) : (\n                <>\n                  <Link \n                    to={item.path} \n                    className=\"hover:text-blue-600 transition-colors\"\n                    aria-label={`Navigate to ${item.label}`}\n                  >\n                    {item.label}\n                  </Link>\n                  <FaChevronRight className=\"h-3 w-3 text-gray-400 mx-2\" aria-hidden=\"true\" />\n                </>\n              )}\n            </li>\n          );\n        })}\n      </ol>\n    </nav>\n  );\n};\n\nexport default Breadcrumbs;\n\n","import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { FaShoppingCart, FaShieldAlt } from 'react-icons/fa';\r\nimport toast from 'react-hot-toast';\r\nimport EscrowPaymentFlow from './EscrowPaymentFlow';\r\n\r\nconst PropertyPurchaseButton = ({ property, className = '' }) => {\r\n  const { user } = useAuth();\r\n  const [showPaymentFlow, setShowPaymentFlow] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (showPaymentFlow) {\r\n      const { style } = document.body;\r\n      const previousOverflow = style.overflow;\r\n      style.overflow = 'hidden';\r\n      return () => {\r\n        style.overflow = previousOverflow;\r\n      };\r\n    }\r\n    return undefined;\r\n  }, [showPaymentFlow]);\r\n\r\n  const handlePurchaseClick = () => {\r\n    if (!user) {\r\n      toast.error('Login is temporarily unavailable while we rebuild the auth experience.');\r\n      return;\r\n    }\r\n    setShowPaymentFlow(true);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <button\r\n        onClick={handlePurchaseClick}\r\n        className={`w-full bg-brand-blue hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors flex items-center justify-center space-x-2 ${className}`}\r\n      >\r\n        <FaShoppingCart className=\"h-5 w-5\" />\r\n        <span>Buy with Escrow Protection</span>\r\n        <FaShieldAlt className=\"h-4 w-4\" />\r\n      </button>\r\n\r\n      {showPaymentFlow && (\r\n        <EscrowPaymentFlow\r\n          property={property}\r\n          onClose={() => setShowPaymentFlow(false)}\r\n          isModal={true}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PropertyPurchaseButton;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useParams, Link, useNavigate } from 'react-router-dom';\r\nimport { useProperty } from '../contexts/PropertyContext';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { FaBed, FaBath, FaRulerCombined, FaHeart, FaShare, FaPhone, FaEnvelope, FaMapMarkerAlt, FaCalendar, FaShoppingCart, FaWhatsapp, FaCreditCard, FaLock, FaArrowLeft } from 'react-icons/fa';\r\nimport toast from 'react-hot-toast';\r\nimport { createInspectionRequest } from '../services/inspectionService';\r\nimport Breadcrumbs from '../components/Breadcrumbs';\r\nimport PropertyPurchaseButton from '../components/PropertyPurchaseButton';\r\n\r\nconst PropertyDetail = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const { properties, loading, error, toggleFavorite } = useProperty();\r\n  const { user, setAuthRedirect } = useAuth();\r\n  const [property, setProperty] = useState(null);\r\n  const [activeImage, setActiveImage] = useState(0);\r\n  const [showInquiryModal, setShowInquiryModal] = useState(false);\r\n  const [inquiryMessage, setInquiryMessage] = useState('');\r\n  const [showScheduleModal, setShowScheduleModal] = useState(false);\r\n  const [preferredDate, setPreferredDate] = useState('');\r\n  const [preferredTime, setPreferredTime] = useState('');\r\n  const [isFavorite, setIsFavorite] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (properties && id) {\r\n      const foundProperty = properties.find(p => \r\n        p.id === id || \r\n        p.propertyId === id || \r\n        p.numericId === parseInt(id) ||\r\n        p.id === `prop_${id}` ||\r\n        p.id?.toString() === id?.toString()\r\n      );\r\n      \r\n      if (foundProperty) {\r\n        // Ensure location data is properly set\r\n        if (foundProperty.location && typeof foundProperty.location === 'string' && foundProperty.location.includes('undefined')) {\r\n          // If location string has undefined, reconstruct from separate properties\r\n          const parts = [\r\n            foundProperty.address,\r\n            foundProperty.city,\r\n            foundProperty.state\r\n          ].filter(part => part && part !== 'undefined' && part !== undefined && part !== null);\r\n          \r\n          if (parts.length > 0) {\r\n            foundProperty.location = parts.join(', ');\r\n          }\r\n        }\r\n        \r\n        setProperty(foundProperty);\r\n        // Reset activeImage when property changes\r\n        setActiveImage(0);\r\n      }\r\n    }\r\n  }, [properties, id]);\r\n\r\n  // Check if property is favorited\r\n  useEffect(() => {\r\n    if (property && user) {\r\n      const key = `favorites_${user.id}`;\r\n      const favorites = new Set(JSON.parse(localStorage.getItem(key) || '[]'));\r\n      setIsFavorite(favorites.has(property.id));\r\n    } else {\r\n      setIsFavorite(false);\r\n    }\r\n  }, [property, user]);\r\n\r\n  // Get the current image URL based on activeImage index\r\n  const getCurrentImage = () => {\r\n    if (!property) return 'https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=800&h=600&fit=crop';\r\n    \r\n    // Check if property has images array\r\n    if (property.images && Array.isArray(property.images) && property.images.length > 0) {\r\n      // Ensure activeImage is within bounds\r\n      const safeIndex = Math.max(0, Math.min(activeImage, property.images.length - 1));\r\n      const currentImage = property.images[safeIndex];\r\n      \r\n      // Handle both string URLs and object with url property\r\n      if (typeof currentImage === 'string') {\r\n        return currentImage;\r\n      } else if (currentImage && currentImage.url) {\r\n        return currentImage.url;\r\n      }\r\n    }\r\n    \r\n    // Fallback to property.image if available\r\n    if (property.image) {\r\n      return property.image;\r\n    }\r\n    \r\n    return 'https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=800&h=600&fit=crop';\r\n  };\r\n\r\n  // Get image URL for thumbnails\r\n  const getImageUrl = (image) => {\r\n    if (typeof image === 'string') {\r\n      return image;\r\n    } else if (image && image.url) {\r\n      return image.url;\r\n    }\r\n    return 'https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=80&h=80&fit=crop';\r\n  };\r\n\r\n  const handleToggleFavorite = async () => {\r\n    if (!user) {\r\n      toast.error('Please login to add favorites');\r\n      // User can continue viewing the property without being forced to login\r\n      return;\r\n    }\r\n    \r\n    if (!property || !property.id) {\r\n      toast.error('Property information not available');\r\n      return;\r\n    }\r\n\r\n    const storageKey = `favorites_${user.id}`;\r\n    const wasFavorite = isFavorite;\r\n    const propertyIdStr = String(property.id);\r\n\r\n    // Optimistic UI update\r\n    setIsFavorite(!wasFavorite);\r\n    let updatedFavorites;\r\n    try {\r\n      const existing = new Set(JSON.parse(localStorage.getItem(storageKey) || '[]'));\r\n      if (wasFavorite) {\r\n        existing.delete(propertyIdStr);\r\n        toast.success('Property removed from saved properties');\r\n      } else {\r\n        existing.add(propertyIdStr);\r\n        toast.success('Property added to saved properties');\r\n      }\r\n      updatedFavorites = Array.from(existing);\r\n      localStorage.setItem(storageKey, JSON.stringify(updatedFavorites));\r\n    } catch {\r\n      // ignore localStorage errors\r\n    }\r\n\r\n    try {\r\n      const result = await toggleFavorite(propertyIdStr, property);\r\n      if (!result || result.success === undefined) {\r\n        throw new Error('Failed to toggle favorite on server');\r\n      }\r\n      \r\n      // Dispatch event to notify other components (like Dashboard)\r\n      window.dispatchEvent(new CustomEvent('favoritesUpdated', {\r\n        detail: { propertyId: propertyIdStr, favorited: !wasFavorite }\r\n      }));\r\n      \r\n      // Also trigger a storage event for cross-tab synchronization\r\n      if (updatedFavorites) {\r\n        window.dispatchEvent(new StorageEvent('storage', {\r\n          key: storageKey,\r\n          newValue: JSON.stringify(updatedFavorites)\r\n        }));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error toggling favorite:', error);\r\n\r\n      // Revert optimistic UI on error\r\n      setIsFavorite(wasFavorite);\r\n      try {\r\n        const existing = new Set(JSON.parse(localStorage.getItem(storageKey) || '[]'));\r\n        if (wasFavorite) {\r\n          existing.add(propertyIdStr);\r\n        } else {\r\n          existing.delete(propertyIdStr);\r\n        }\r\n        localStorage.setItem(storageKey, JSON.stringify(Array.from(existing)));\r\n      } catch {\r\n        // ignore localStorage errors\r\n      }\r\n\r\n      toast.error('Failed to update saved properties. Please try again.');\r\n    }\r\n  };\r\n\r\n  const handleShareProperty = async () => {\r\n    if (navigator.share) {\r\n      try {\r\n        await navigator.share({\r\n          title: property.title,\r\n          text: property.description,\r\n          url: window.location.href\r\n        });\r\n      } catch (error) {\r\n        console.log('Error sharing:', error);\r\n        handleCopyLink();\r\n      }\r\n    } else {\r\n      handleCopyLink();\r\n    }\r\n  };\r\n\r\n  const handleCopyLink = () => {\r\n    navigator.clipboard.writeText(window.location.href).then(() => {\r\n      toast.success('Property link copied to clipboard!');\r\n    }).catch(() => {\r\n      toast.error('Failed to copy link');\r\n    });\r\n  };\r\n\r\n  const createInquiry = (property, inquiryType, message = '') => {\r\n    if (!user || !property) return;\r\n\r\n    // Check if inquiry already exists for this property and user\r\n    const existingInquiries = JSON.parse(localStorage.getItem('inquiries') || '[]');\r\n    const existingInquiry = existingInquiries.find(\r\n      inq => inq.propertyId === property.id && \r\n             (inq.userId === user.id || inq.buyerId === user.id) &&\r\n             (inq.status === 'new' || inq.status === 'pending' || inq.status === 'contacted')\r\n    );\r\n\r\n    // If inquiry already exists, don't create duplicate\r\n    if (existingInquiry) {\r\n      return existingInquiry;\r\n    }\r\n\r\n    // Create new inquiry\r\n    const inquiry = {\r\n      id: `inquiry-${Date.now()}`,\r\n      propertyId: property.id,\r\n      propertyTitle: property.title,\r\n      propertyLocation: typeof property.location === 'string' \r\n        ? property.location \r\n        : property.location?.address || property.location?.city || 'Location not specified',\r\n      propertyPrice: property.price || 0,\r\n      propertyImage: property.images?.[0]?.url || property.image || property.images?.[0] || '',\r\n      propertyBedrooms: property.bedrooms || property.details?.bedrooms || 0,\r\n      propertyBathrooms: property.bathrooms || property.details?.bathrooms || 0,\r\n      propertyArea: property.area || property.details?.sqft || 0,\r\n      userId: user.id,\r\n      buyerId: user.id,\r\n      buyerName: `${user.firstName} ${user.lastName}`,\r\n      buyerEmail: user.email,\r\n      buyerPhone: user.phone || '',\r\n      vendorId: property.vendorId || property.owner?.id || property.vendor?.id || '',\r\n      vendorName: property.owner?.firstName \r\n        ? `${property.owner.firstName} ${property.owner.lastName || ''}`.trim()\r\n        : property.vendor?.firstName \r\n        ? `${property.vendor.firstName} ${property.vendor.lastName || ''}`.trim()\r\n        : 'Property Vendor',\r\n      vendorEmail: property.owner?.email || property.vendor?.email || property.vendorEmail || '',\r\n      vendorPhone: property.owner?.phone || property.vendorPhone || property.contactPhone || property.vendor?.phone || '',\r\n      inquiryType: inquiryType, // 'call' or 'message'\r\n      message: message || `I'm interested in ${property.title}. Please contact me.`,\r\n      status: 'new',\r\n      createdAt: new Date().toISOString(),\r\n      updatedAt: new Date().toISOString(),\r\n      responses: []\r\n    };\r\n\r\n    // Save to localStorage\r\n    existingInquiries.push(inquiry);\r\n    localStorage.setItem('inquiries', JSON.stringify(existingInquiries));\r\n\r\n    // Dispatch event to notify dashboard\r\n    window.dispatchEvent(new CustomEvent('inquiriesUpdated', {\r\n      detail: { inquiry, action: 'created' }\r\n    }));\r\n    \r\n    // Also trigger a storage event for cross-tab synchronization\r\n    window.dispatchEvent(new StorageEvent('storage', {\r\n      key: 'inquiries',\r\n      newValue: JSON.stringify(existingInquiries)\r\n    }));\r\n\r\n    return inquiry;\r\n  };\r\n\r\n  const handleContactOwner = () => {\r\n    console.log('Contact Owner clicked, property:', property, 'user:', user);\r\n    \r\n    if (!user) {\r\n      toast.error('Please login to contact property vendor');\r\n      // User can continue viewing the property without being forced to login\r\n      return;\r\n    }\r\n    \r\n    // Create inquiry\r\n    createInquiry(property, 'message', `I'm interested in ${property.title}. Please contact me via WhatsApp.`);\r\n    \r\n    // Get vendor's phone number\r\n    const vendorPhone = property?.owner?.phone || property?.vendorPhone || property?.contactPhone || property?.vendor?.phone;\r\n    \r\n    if (!vendorPhone) {\r\n      toast.error('Vendor phone number not available');\r\n      return;\r\n    }\r\n    \r\n    // Format phone number for WhatsApp\r\n    // Remove all non-digit characters\r\n    let formattedPhone = vendorPhone.replace(/\\D/g, '');\r\n    \r\n    // Handle Nigerian phone numbers (country code: 234)\r\n    if (formattedPhone.startsWith('234')) {\r\n      // Already has country code, no change needed\r\n    } else if (formattedPhone.startsWith('0')) {\r\n      // Remove leading 0 and add country code\r\n      formattedPhone = '234' + formattedPhone.substring(1);\r\n    } else {\r\n      // Add country code if missing\r\n      formattedPhone = '234' + formattedPhone;\r\n    }\r\n    \r\n    // Create WhatsApp message\r\n    const propertyTitle = property?.title || 'Property';\r\n    const propertyPrice = property?.price ? `â‚¦${property.price.toLocaleString()}` : '';\r\n    const message = encodeURIComponent(\r\n      `Hi, I'm interested in your property: ${propertyTitle}${propertyPrice ? ` (${propertyPrice})` : ''}. Could you please provide more information?`\r\n    );\r\n    \r\n    // Open WhatsApp\r\n    const whatsappUrl = `https://wa.me/${formattedPhone}?text=${message}`;\r\n    window.open(whatsappUrl, '_blank');\r\n    \r\n    toast.success('Opening WhatsApp... Inquiry saved to My Inquiries.');\r\n  };\r\n\r\n  const handleSendInquiry = () => {\r\n    if (!inquiryMessage.trim()) {\r\n      toast.error('Please enter your message');\r\n      return;\r\n    }\r\n    \r\n    // Simulate sending inquiry\r\n    toast.success('Inquiry sent successfully! The vendor will contact you soon.');\r\n    setShowInquiryModal(false);\r\n    setInquiryMessage('');\r\n  };\r\n\r\n  const handleScheduleViewing = () => {\r\n    if (!user) {\r\n      toast.error('Please login to schedule a viewing');\r\n      // User can continue viewing the property without being forced to login\r\n      return;\r\n    }\r\n    // Open scheduling modal to pick date/time\r\n    setShowScheduleModal(true);\r\n  };\r\n\r\n  const handleConfirmSchedule = async () => {\r\n    if (!preferredDate || !preferredTime) {\r\n      toast.error('Please select a preferred date and time');\r\n      return;\r\n    }\r\n\r\n    const viewingRequest = {\r\n      id: `viewing-${Date.now()}`,\r\n      propertyId: property.id,\r\n      propertyTitle: property.title,\r\n      propertyLocation: property.location,\r\n      userId: user.id,\r\n      userName: `${user.firstName} ${user.lastName}`,\r\n      userEmail: user.email,\r\n      status: 'pending_vendor',\r\n      requestedAt: new Date().toISOString(),\r\n      preferredDate,\r\n      preferredTime,\r\n      message: '',\r\n      agentContact: property.agent || {\r\n        name: 'Property Agent',\r\n        phone: '+234-XXX-XXXX',\r\n        email: 'agent@example.com'\r\n      },\r\n      // Map to inspection request fields expected by vendor screen\r\n      projectId: property.id,\r\n      projectName: property.title,\r\n      projectLocation: property.location?.address || property.location || '',\r\n      buyerName: `${user.firstName} ${user.lastName}`,\r\n      buyerEmail: user.email,\r\n      vendorId: property.vendorId || property.owner?.id || undefined,\r\n      vendorEmail: property.vendorEmail || property.owner?.email || undefined\r\n    };\r\n    try {\r\n      await createInspectionRequest(viewingRequest);\r\n      // Event is dispatched by createInspectionRequest service\r\n      setShowScheduleModal(false);\r\n      setPreferredDate('');\r\n      setPreferredTime('');\r\n      toast.success('Viewing scheduled! The vendor has been notified.');\r\n      toast(`Agent: ${viewingRequest.agentContact.name} | Phone: ${viewingRequest.agentContact.phone}`);\r\n    } catch (e) {\r\n      toast.error('Failed to create request');\r\n    }\r\n  };\r\n\r\n  const handleCallVendor = () => {\r\n    if (!user) {\r\n      toast.error('Please login to call property vendor');\r\n      // User can continue viewing the property without being forced to login\r\n      return;\r\n    }\r\n\r\n    // Create inquiry\r\n    createInquiry(property, 'call', `I'm interested in ${property.title}. Please contact me via phone call.`);\r\n    \r\n    // Get vendor's phone number\r\n    const vendorPhone = property?.owner?.phone || property?.vendorPhone || property?.contactPhone || property?.vendor?.phone;\r\n    \r\n    if (!vendorPhone) {\r\n      toast.error('Vendor phone number not available');\r\n      return;\r\n    }\r\n    \r\n    // Format phone number for tel: link\r\n    // Remove all non-digit characters\r\n    let formattedPhone = vendorPhone.replace(/\\D/g, '');\r\n    \r\n    // Handle Nigerian phone numbers (country code: 234)\r\n    if (formattedPhone.startsWith('234')) {\r\n      // Already has country code\r\n    } else if (formattedPhone.startsWith('0')) {\r\n      // Remove leading 0 and add country code\r\n      formattedPhone = '234' + formattedPhone.substring(1);\r\n    } else {\r\n      // Assume it's a local number, add country code\r\n      formattedPhone = '234' + formattedPhone;\r\n    }\r\n    \r\n    // Create tel: link and trigger phone dialer\r\n    window.location.href = `tel:+${formattedPhone}`;\r\n    \r\n    toast.success('Inquiry saved to My Inquiries.');\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-2xl font-bold text-red-600 mb-4\">Error Loading Property</h2>\r\n          <p className=\"text-gray-600\">{error}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!property) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n        <div className=\"text-center\">\r\n          <Breadcrumbs items={[\r\n            { label: 'Home', path: '/' },\r\n            { label: 'Properties', path: '/properties' },\r\n            { label: 'Property Not Found', path: '#' }\r\n          ]} />\r\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Property Not Found</h2>\r\n          <p className=\"text-gray-600\">The property you're looking for doesn't exist.</p>\r\n          <Link to=\"/properties\" className=\"mt-4 inline-block text-blue-600 hover:text-blue-500\">\r\n            Back to Properties\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Breadcrumb items for property detail\r\n  const breadcrumbItems = [\r\n    { label: 'Home', path: '/' },\r\n    { label: 'Properties', path: '/properties' },\r\n    { label: property?.title || 'Property Details', path: `#` }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        {/* Breadcrumb */}\r\n        <div className=\"mb-8\">\r\n          <Breadcrumbs items={breadcrumbItems} />\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n          {/* Main Content */}\r\n          <div className=\"lg:col-span-2\">\r\n            {/* Image Gallery */}\r\n            <div className=\"mb-8\">\r\n              <div className=\"relative\">\r\n                <img\r\n                  src={getCurrentImage()}\r\n                  alt={property.title}\r\n                  className=\"w-full h-96 object-cover rounded-lg\"\r\n                  key={`main-image-${activeImage}`}\r\n                />\r\n                <div className=\"absolute top-4 right-4 flex gap-2\">\r\n                  <span className=\"bg-blue-600 text-white px-3 py-1 rounded-full text-sm font-medium\">\r\n                    â‚¦{property.price?.toLocaleString()}\r\n                  </span>\r\n                  <button\r\n                    onClick={handleToggleFavorite}\r\n                    className={`bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition-colors ${\r\n                      isFavorite ? 'text-red-500' : ''\r\n                    }`}\r\n                    title={isFavorite ? 'Remove from favorites' : 'Add to favorites'}\r\n                  >\r\n                    <FaHeart className={isFavorite ? 'fill-current' : ''} />\r\n                  </button>\r\n                  <button\r\n                    onClick={handleShareProperty}\r\n                    className=\"bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition-colors\"\r\n                  >\r\n                    <FaShare />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              \r\n              {/* Thumbnail Images */}\r\n              {property.images && Array.isArray(property.images) && property.images.length > 1 && (\r\n                <div className=\"mt-4 flex space-x-2 overflow-x-auto pb-2\">\r\n                  {property.images.map((image, index) => (\r\n                    <button\r\n                      key={`thumb-${index}`}\r\n                      type=\"button\"\r\n                      onClick={(e) => {\r\n                        e.preventDefault();\r\n                        setActiveImage(index);\r\n                      }}\r\n                      className={`flex-shrink-0 w-20 h-20 rounded-md overflow-hidden border-2 transition-all ${\r\n                        activeImage === index \r\n                          ? 'border-blue-500 ring-2 ring-blue-300 ring-offset-2' \r\n                          : 'border-gray-200 hover:border-gray-300'\r\n                      }`}\r\n                    >\r\n                      <img\r\n                        src={getImageUrl(image)}\r\n                        alt={`${property.title} ${index + 1}`}\r\n                        className=\"w-full h-full object-cover\"\r\n                      />\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Property Details */}\r\n            <div className=\"bg-white rounded-lg shadow p-6 mb-8\">\r\n              <h1 className=\"text-3xl font-bold text-gray-900 mb-4\">{property.title}</h1>\r\n              <p className=\"text-lg text-gray-600 mb-6\">\r\n                {(() => {\r\n                  if (typeof property.location === 'string') {\r\n                    return property.location;\r\n                  }\r\n                  if (property.location && typeof property.location === 'object') {\r\n                    const address = property.location.address || '';\r\n                    const city = property.location.city || '';\r\n                    const state = property.location.state || '';\r\n                    const result = [address, city, state].filter(Boolean).join(', ');\r\n                    return result || 'Location not specified';\r\n                  }\r\n                  return 'Location not specified';\r\n                })()}\r\n              </p>\r\n              \r\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6\">\r\n                <div className=\"text-center\">\r\n                  <div className=\"text-2xl font-bold text-blue-600 flex items-center justify-center\">\r\n                    <FaBed className=\"mr-2\" />\r\n                    {property.bedrooms || property.details?.bedrooms || 0}\r\n                  </div>\r\n                  <div className=\"text-sm text-gray-500\">Bedrooms</div>\r\n                </div>\r\n                <div className=\"text-center\">\r\n                  <div className=\"text-2xl font-bold text-blue-600 flex items-center justify-center\">\r\n                    <FaBath className=\"mr-2\" />\r\n                    {property.bathrooms || property.details?.bathrooms || 0}\r\n                  </div>\r\n                  <div className=\"text-sm text-gray-500\">Bathrooms</div>\r\n                </div>\r\n                <div className=\"text-center\">\r\n                  <div className=\"text-2xl font-bold text-blue-600 flex items-center justify-center\">\r\n                    <FaRulerCombined className=\"mr-2\" />\r\n                    {property.area || property.details?.sqft || 0}\r\n                  </div>\r\n                  <div className=\"text-sm text-gray-500\">Sq Ft</div>\r\n                </div>\r\n                <div className=\"text-center\">\r\n                  <div className=\"text-2xl font-bold text-blue-600 capitalize\">\r\n                    {property.type}\r\n                  </div>\r\n                  <div className=\"text-sm text-gray-500\">Type</div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"border-t pt-6\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Description</h3>\r\n                <p className=\"text-gray-600 leading-relaxed\">{property.description}</p>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Amenities */}\r\n            {property.amenities && property.amenities.length > 0 && (\r\n              <div className=\"bg-white rounded-lg shadow p-6 mb-8\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Amenities</h3>\r\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\r\n                  {property.amenities.map((amenity, index) => (\r\n                    <div key={index} className=\"flex items-center\">\r\n                      <svg className=\"w-5 h-5 text-green-500 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\r\n                      </svg>\r\n                      <span className=\"text-gray-700\">{amenity}</span>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Sidebar */}\r\n          <div className=\"lg:col-span-1\">\r\n            {/* Quick Actions */}\r\n            <div className=\"bg-white rounded-lg shadow p-6 mb-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Quick Actions</h3>\r\n              <div className=\"space-y-3\">\r\n                <button\r\n                  onClick={handleContactOwner}\r\n                  className=\"w-full bg-green-600 text-white py-3 px-4 rounded-md hover:bg-green-700 transition-colors flex items-center justify-center\"\r\n                >\r\n                  <FaWhatsapp className=\"mr-2\" />\r\n                  Contact Vendor\r\n                </button>\r\n                <button\r\n                  onClick={handleScheduleViewing}\r\n                  className=\"w-full bg-green-600 text-white py-3 px-4 rounded-md hover:bg-green-700 transition-colors flex items-center justify-center\"\r\n                >\r\n                  <FaCalendar className=\"mr-2\" />\r\n                  Schedule Viewing\r\n                </button>\r\n                <button\r\n                  onClick={handleCallVendor}\r\n                  className=\"w-full bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700 transition-colors flex items-center justify-center\"\r\n                >\r\n                  <FaPhone className=\"mr-2\" />\r\n                  Call Vendor\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Vendor Information */}\r\n            <div className=\"bg-white rounded-lg shadow p-6 mb-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Property Vendor</h3>\r\n              <div className=\"space-y-3\">\r\n                <div className=\"flex items-center\">\r\n                  <div className=\"w-12 h-12 bg-gray-300 rounded-full flex items-center justify-center mr-3\">\r\n                    <span className=\"text-gray-600 font-semibold\">\r\n                      {property.owner?.firstName?.[0] || property.vendor?.firstName?.[0] || 'V'}\r\n                      {property.owner?.lastName?.[0] || property.vendor?.lastName?.[0] || 'D'}\r\n                    </span>\r\n                  </div>\r\n                  <div>\r\n                    <div className=\"font-semibold text-gray-900\">\r\n                      {property.owner?.firstName || property.vendor?.firstName || 'Vendor'} {property.owner?.lastName || property.vendor?.lastName || ''}\r\n                    </div>\r\n                    <div className=\"text-sm text-gray-500\">Property Vendor</div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"pt-3 border-t\">\r\n                  <div className=\"flex items-start text-gray-600 mb-3\">\r\n                    <FaMapMarkerAlt className=\"mr-2 mt-0.5 flex-shrink-0\" />\r\n                    <span className=\"text-sm\">\r\n                      {(() => {\r\n                        // First, try to get location from separate address, city, state properties (most reliable)\r\n                        const address = property.address || '';\r\n                        const city = property.city || '';\r\n                        const state = property.state || '';\r\n                        const zipCode = property.zipCode || '';\r\n                        \r\n                        if (address || city || state) {\r\n                          const parts = [address, city, state, zipCode].filter(part => part && part !== '' && part !== null && part !== undefined && part !== 'undefined');\r\n                          if (parts.length > 0) {\r\n                            return parts.join(', ');\r\n                          }\r\n                        }\r\n                        \r\n                        // Handle object location - check if fields exist and are not undefined\r\n                        if (property.location && typeof property.location === 'object') {\r\n                          const objAddress = property.location.address;\r\n                          const objCity = property.location.city;\r\n                          const objState = property.location.state;\r\n                          const objZipCode = property.location.zipCode;\r\n                          \r\n                          const parts = [objAddress, objCity, objState, objZipCode].filter(part => part && part !== '' && part !== null && part !== undefined && part !== 'undefined');\r\n                          if (parts.length > 0) {\r\n                            return parts.join(', ');\r\n                          }\r\n                        }\r\n                        \r\n                        // Handle string location (from transformed properties) - but check it doesn't contain \"undefined\"\r\n                        if (typeof property.location === 'string' && property.location.trim() !== '' && !property.location.includes('undefined')) {\r\n                          return property.location;\r\n                        }\r\n                        \r\n                        return 'Location not specified';\r\n                      })()}\r\n                    </span>\r\n                  </div>\r\n                  \r\n                  {/* Listing Date */}\r\n                  {property.createdAt && (\r\n                    <div className=\"flex items-center text-gray-600 mb-3 text-sm\">\r\n                      <FaCalendar className=\"mr-2\" />\r\n                      <span>\r\n                        Listed: {(() => {\r\n                          const date = new Date(property.createdAt);\r\n                          if (isNaN(date.getTime())) {\r\n                            return property.createdAt;\r\n                          }\r\n                          return date.toLocaleDateString('en-US', { \r\n                            year: 'numeric', \r\n                            month: 'long', \r\n                            day: 'numeric' \r\n                          });\r\n                        })()}\r\n                      </span>\r\n                    </div>\r\n                  )}\r\n                  \r\n                  <div className=\"flex items-center text-gray-600 text-sm\">\r\n                    <span>Views: {property.views || 0}</span>\r\n                    <span className=\"mx-2\">â€¢</span>\r\n                    <span>\r\n                      {property.isVerified ? 'âœ… Verified' : 'â³ Pending Verification'}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Purchase Information */}\r\n            <div className=\"bg-white rounded-lg shadow p-6 mb-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Purchase Information</h3>\r\n              <div className=\"space-y-3\">\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">Property Value:</span>\r\n                  <span className=\"font-semibold\">â‚¦{property.price?.toLocaleString()}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">Property Type:</span>\r\n                  <span className=\"font-semibold capitalize\">{property.status?.replace('-', ' ')}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">Escrow Fee (0.5%):</span>\r\n                  <span className=\"font-semibold\">â‚¦{Math.round((property.price || 0) * 0.005).toLocaleString()}</span>\r\n                </div>\r\n                <div className=\"flex justify-between border-t pt-3\">\r\n                  <span className=\"text-gray-900 font-semibold\">Total Amount:</span>\r\n                  <span className=\"font-bold text-lg\">â‚¦{Math.round((property.price || 0) * 1.005).toLocaleString()}</span>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"mt-4 space-y-2\">\r\n                <PropertyPurchaseButton\r\n                  property={property}\r\n                  className=\"bg-green-600 hover:bg-green-700\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Property Info */}\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Property Information</h3>\r\n              <div className=\"space-y-3\">\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">Property ID:</span>\r\n                  <span className=\"font-medium\">{property.id}</span>\r\n                </div>\r\n                {property.createdAt && (\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Listed:</span>\r\n                    <span className=\"font-medium\">\r\n                      {(() => {\r\n                        const date = new Date(property.createdAt);\r\n                        if (isNaN(date.getTime())) {\r\n                          return property.createdAt || property.dateListed || 'N/A';\r\n                        }\r\n                        return date.toLocaleDateString('en-US', { \r\n                          year: 'numeric', \r\n                          month: 'short', \r\n                          day: 'numeric' \r\n                        });\r\n                      })()}\r\n                    </span>\r\n                  </div>\r\n                )}\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">Status:</span>\r\n                  <span className=\"font-medium text-green-600\">Available</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">Vendor:</span>\r\n                  <span className=\"font-medium\">{property.ownerName || `${property.owner?.firstName || property.vendor?.firstName || ''} ${property.owner?.lastName || property.vendor?.lastName || ''}`.trim() || 'Vendor'}</span>\r\n                </div>\r\n                \r\n                {/* Location link */}\r\n                {property.location?.googleMapsUrl && (\r\n                  <div className=\"border-t pt-4 mt-4\">\r\n                    <h4 className=\"text-sm font-semibold text-gray-700 mb-3\">Location</h4>\r\n                    <div className=\"space-y-2\">\r\n                      <a\r\n                        href={property.location.googleMapsUrl}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        className=\"inline-flex items-center w-full px-3 py-2 bg-blue-50 text-blue-700 rounded-md hover:bg-blue-100 transition-colors text-sm\"\r\n                      >\r\n                        <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                        </svg>\r\n                        Show on Google map\r\n                      </a>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Inquiry Modal */}\r\n      {showInquiryModal && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n          <div className=\"bg-white rounded-lg max-w-md w-full p-6\">\r\n            <div className=\"flex justify-between items-center mb-4\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900\">Send Inquiry</h3>\r\n              <button\r\n                onClick={() => setShowInquiryModal(false)}\r\n                className=\"text-gray-400 hover:text-gray-600\"\r\n              >\r\n                <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                </svg>\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"mb-4\">\r\n              <p className=\"text-sm text-gray-600\">\r\n                Send a message to the property vendor about <strong>{property.title}</strong>\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Your Message</label>\r\n                <textarea\r\n                  value={inquiryMessage}\r\n                  onChange={(e) => setInquiryMessage(e.target.value)}\r\n                  rows={4}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                  placeholder=\"I'm interested in this property. Could you please provide more information about...\"\r\n                />\r\n              </div>\r\n              \r\n              <div className=\"flex gap-3\">\r\n                <button\r\n                  onClick={() => setShowInquiryModal(false)}\r\n                  className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  onClick={handleSendInquiry}\r\n                  className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors\"\r\n                >\r\n                  Send Message\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Schedule Viewing Modal */}\r\n      {showScheduleModal && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n          <div className=\"bg-white rounded-lg max-w-md w-full p-6\">\r\n            <div className=\"flex justify-between items-center mb-4\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900\">Schedule Viewing</h3>\r\n              <button\r\n                onClick={() => setShowScheduleModal(false)}\r\n                className=\"text-gray-400 hover:text-gray-600\"\r\n              >\r\n                <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                </svg>\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Preferred Date</label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={preferredDate}\r\n                  onChange={(e) => setPreferredDate(e.target.value)}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Preferred Time</label>\r\n                <input\r\n                  type=\"time\"\r\n                  value={preferredTime}\r\n                  onChange={(e) => setPreferredTime(e.target.value)}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"flex gap-3 pt-2\">\r\n                <button\r\n                  onClick={() => setShowScheduleModal(false)}\r\n                  className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  onClick={handleConfirmSchedule}\r\n                  className=\"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors\"\r\n                >\r\n                  Confirm\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PropertyDetail;","import notificationService from './notificationService';\r\n\r\nconst COLLECTION = 'inspectionRequests';\r\nconst VIEWING_REQUESTS_KEY = 'viewingRequests';\r\nconst INSPECTION_ACTIVITY_KEY = 'inspectionActivityLog';\r\nconst ANALYTICS_EVENT = 'inspectionAnalyticsUpdated';\r\nconst ACTIVITY_EVENT = 'inspectionActivity';\r\n\r\nconst defaultAnalytics = {\r\n  totalRequests: 0,\r\n  pendingResponses: 0,\r\n  confirmed: 0,\r\n  vendorProposals: 0,\r\n  buyerReschedules: 0,\r\n  cancelledByBuyer: 0,\r\n  cancelledByVendor: 0,\r\n  timeline: []\r\n};\r\n\r\nconst safeWindowDispatch = (eventName, detail) => {\r\n  if (typeof window === 'undefined') return;\r\n  if (eventName === 'storage') {\r\n    try {\r\n      window.dispatchEvent(new StorageEvent('storage', detail));\r\n    } catch {\r\n      window.dispatchEvent(new CustomEvent('storage', { detail }));\r\n    }\r\n    return;\r\n  }\r\n  if (typeof window.dispatchEvent === 'function') {\r\n    window.dispatchEvent(new CustomEvent(eventName, { detail }));\r\n  }\r\n};\r\n\r\nconst getStoredRequests = () => {\r\n  try {\r\n    return JSON.parse(localStorage.getItem(VIEWING_REQUESTS_KEY) || '[]');\r\n  } catch {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst saveStoredRequests = (requests) => {\r\n  localStorage.setItem(VIEWING_REQUESTS_KEY, JSON.stringify(requests));\r\n};\r\n\r\nconst getActivityLog = () => {\r\n  try {\r\n    return JSON.parse(localStorage.getItem(INSPECTION_ACTIVITY_KEY) || '[]');\r\n  } catch {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst saveActivityLog = (log) => {\r\n  localStorage.setItem(INSPECTION_ACTIVITY_KEY, JSON.stringify(log));\r\n};\r\n\r\nconst buildActivityPayload = (action, request) => ({\r\n  action,\r\n  requestId: request.id,\r\n  propertyTitle: request.propertyTitle || request.projectTitle || request.projectName || request.title || 'Property',\r\n  buyerId: request.buyerId || request.userId,\r\n  vendorId: request.vendorId,\r\n  vendorEmail: request.vendorEmail,\r\n  status: request.status,\r\n  timestamp: new Date().toISOString()\r\n});\r\n\r\nconst formatDateTimeLabel = (date, time) => {\r\n  if (!date && !time) return '';\r\n  if (!time) return date;\r\n  if (!date) return time;\r\n  return `${date} ${time}`;\r\n};\r\n\r\nconst buildInspectionNotificationEntries = (action, request, payload) => {\r\n  const entries = [];\r\n  const propertyTitle = payload.propertyTitle;\r\n  const buyerName = request.buyerName || request.userName || 'Buyer';\r\n  const vendorName = request.vendorName || request.vendor || request.owner || 'Vendor';\r\n  const preferredLabel = formatDateTimeLabel(request.preferredDate, request.preferredTime);\r\n  const confirmedLabel = formatDateTimeLabel(request.confirmedDate, request.confirmedTime);\r\n  const proposedLabel = formatDateTimeLabel(request.proposedDate, request.proposedTime);\r\n\r\n  const pushForVendor = (title, message) => {\r\n    if (request.vendorId || request.vendorEmail) {\r\n      entries.push({\r\n        recipientId: request.vendorId,\r\n        recipientEmail: request.vendorEmail,\r\n        roles: ['vendor'],\r\n        type: action,\r\n        title,\r\n        message,\r\n        priority: 'medium',\r\n        metadata: { requestId: request.id, propertyTitle, buyerName, vendorName }\r\n      });\r\n    }\r\n  };\r\n\r\n  const pushForBuyer = (title, message) => {\r\n    if (request.buyerId || request.userId || request.buyerEmail || request.userEmail) {\r\n      entries.push({\r\n        recipientId: request.buyerId || request.userId,\r\n        recipientEmail: request.buyerEmail || request.userEmail,\r\n        roles: ['buyer'],\r\n        type: action,\r\n        title,\r\n        message,\r\n        priority: 'medium',\r\n        metadata: { requestId: request.id, propertyTitle, buyerName, vendorName }\r\n      });\r\n    }\r\n  };\r\n\r\n  switch (action) {\r\n    case 'inspection_requested':\r\n      pushForVendor('New inspection request', `${buyerName} requested to view ${propertyTitle} ${preferredLabel ? `on ${preferredLabel}` : ''}`.trim());\r\n      break;\r\n    case 'inspection_confirmed':\r\n      pushForBuyer('Inspection confirmed', `${vendorName} confirmed ${propertyTitle} ${confirmedLabel ? `for ${confirmedLabel}` : ''}`.trim());\r\n      break;\r\n    case 'vendor_proposed_new_time':\r\n      pushForBuyer('Vendor proposed new time', `${vendorName} suggested ${proposedLabel || 'another slot'} for ${propertyTitle}`);\r\n      break;\r\n    case 'buyer_rescheduled':\r\n      pushForVendor('Buyer requested new time', `${buyerName} rescheduled ${propertyTitle} ${preferredLabel ? `to ${preferredLabel}` : ''}`.trim());\r\n      break;\r\n    case 'inspection_cancelled_by_buyer':\r\n      pushForVendor('Inspection cancelled by buyer', `${buyerName} cancelled ${propertyTitle}`);\r\n      break;\r\n    case 'inspection_cancelled_by_vendor':\r\n      pushForBuyer('Inspection cancelled by vendor', `${vendorName} cancelled ${propertyTitle}`);\r\n      break;\r\n    case 'inspection_declined':\r\n      pushForBuyer('Inspection declined', `${vendorName} declined the request for ${propertyTitle}`);\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n\r\n  return entries;\r\n};\r\n\r\nconst persistInspectionNotifications = (entries = []) => {\r\n  if (!entries.length || typeof window === 'undefined') return;\r\n  const payloads = entries\r\n    .filter((entry) => entry.recipientId)\r\n    .map((entry) => ({\r\n      recipientId: entry.recipientId,\r\n      type: entry.type,\r\n      title: entry.title,\r\n      message: entry.message,\r\n      priority: entry.priority || 'medium',\r\n      metadata: {\r\n        ...(entry.metadata || {}),\r\n        source: entry.metadata?.source || 'inspection_client_sync'\r\n      },\r\n      data: entry.metadata || {}\r\n    }));\r\n\r\n  if (!payloads.length) return;\r\n\r\n  notificationService.createInspectionNotifications(payloads)\r\n    .then((result) => {\r\n      if (!result?.success) {\r\n        console.warn('Failed to persist inspection notifications', result);\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error persisting inspection notifications:', error);\r\n    });\r\n};\r\n\r\nconst logInspectionActivity = (action, request) => {\r\n  if (!action || !request) return;\r\n  const payload = buildActivityPayload(action, request);\r\n  const log = getActivityLog();\r\n  log.unshift(payload);\r\n  if (log.length > 200) {\r\n    log.pop();\r\n  }\r\n  saveActivityLog(log);\r\n  safeWindowDispatch(ACTIVITY_EVENT, payload);\r\n  safeWindowDispatch(ANALYTICS_EVENT, payload);\r\n  const notifications = buildInspectionNotificationEntries(action, request, payload);\r\n  if (notifications.length) {\r\n    safeWindowDispatch('inspectionNotification', { action, payload, notifications, request });\r\n    persistInspectionNotifications(notifications);\r\n  }\r\n};\r\n\r\nconst deriveActionFromStatus = (previous, next, updates = {}) => {\r\n  const status = (next?.status || updates.status || '').toLowerCase();\r\n  if (!status && (updates.proposedDate || updates.proposedTime)) {\r\n    return 'vendor_proposed_new_time';\r\n  }\r\n  switch (status) {\r\n    case 'accepted':\r\n    case 'confirmed':\r\n      return 'inspection_confirmed';\r\n    case 'proposed_new_time':\r\n      return 'vendor_proposed_new_time';\r\n    case 'buyer_rescheduled':\r\n      return 'buyer_rescheduled';\r\n    case 'cancelled_by_buyer':\r\n      return 'inspection_cancelled_by_buyer';\r\n    case 'cancelled_by_vendor':\r\n      return 'inspection_cancelled_by_vendor';\r\n    case 'declined':\r\n      return 'inspection_declined';\r\n    default:\r\n      if (previous && previous.status !== next?.status) {\r\n        return `inspection_status_${next?.status || 'updated'}`;\r\n      }\r\n      return null;\r\n  }\r\n};\r\n\r\nconst getDateKey = (isoDate) => {\r\n  const date = isoDate ? new Date(isoDate) : new Date();\r\n  return date.toISOString().slice(0, 10);\r\n};\r\n\r\nconst matchesBuyer = (request, buyerId) => {\r\n  if (!buyerId) return false;\r\n  return request?.buyerId === buyerId || request?.userId === buyerId;\r\n};\r\n\r\nconst matchesVendor = (request, vendorId, vendorEmail) => {\r\n  if (!vendorId && !vendorEmail) return false;\r\n  return (vendorId && request?.vendorId === vendorId) || (vendorEmail && request?.vendorEmail === vendorEmail);\r\n};\r\n\r\nexport const getInspectionAnalytics = ({ role = 'buyer', userId, vendorId, vendorEmail } = {}) => {\r\n  if (typeof window === 'undefined') return { ...defaultAnalytics };\r\n  if (role === 'buyer' && !userId) return { ...defaultAnalytics };\r\n  if (role === 'vendor' && !vendorId && !vendorEmail) return { ...defaultAnalytics };\r\n\r\n  const requests = getStoredRequests();\r\n  const relevant = requests.filter((req) =>\r\n    role === 'buyer' ? matchesBuyer(req, userId) : matchesVendor(req, vendorId || req.vendorId, vendorEmail)\r\n  );\r\n\r\n  const analytics = {\r\n    totalRequests: relevant.length,\r\n    pendingResponses: 0,\r\n    confirmed: 0,\r\n    vendorProposals: 0,\r\n    buyerReschedules: 0,\r\n    cancelledByBuyer: 0,\r\n    cancelledByVendor: 0,\r\n    timeline: []\r\n  };\r\n\r\n  const pendingStatuses = ['pending', 'pending_vendor', 'pending_vendor_confirmation'];\r\n  const log = getActivityLog();\r\n  const activityFilter = (entry) =>\r\n    role === 'buyer' ? entry?.buyerId === userId : matchesVendor(entry, vendorId, vendorEmail);\r\n\r\n  relevant.forEach((req) => {\r\n    const status = (req.status || '').toLowerCase();\r\n    if (pendingStatuses.includes(status)) {\r\n      analytics.pendingResponses += 1;\r\n    }\r\n    if (['accepted', 'confirmed'].includes(status)) {\r\n      analytics.confirmed += 1;\r\n    }\r\n    if (status === 'proposed_new_time') {\r\n      analytics.vendorProposals += 1;\r\n    }\r\n    if (status === 'buyer_rescheduled') {\r\n      analytics.buyerReschedules += 1;\r\n    }\r\n    if (status === 'cancelled_by_buyer') {\r\n      analytics.cancelledByBuyer += 1;\r\n    }\r\n    if (['cancelled_by_vendor', 'declined'].includes(status)) {\r\n      analytics.cancelledByVendor += 1;\r\n    }\r\n  });\r\n\r\n  const lastSevenDays = Array.from({ length: 7 }).map((_, idx) => {\r\n    const date = new Date();\r\n    date.setDate(date.getDate() - (6 - idx));\r\n    const dateKey = date.toISOString().slice(0, 10);\r\n    const dailyCount = log.filter((entry) => activityFilter(entry) && getDateKey(entry.timestamp) === dateKey).length;\r\n    return { date: dateKey, count: dailyCount };\r\n  });\r\n\r\n  analytics.timeline = lastSevenDays;\r\n  return analytics;\r\n};\r\n\r\nexport const createInspectionRequest = async (requestData) => {\r\n  try {\r\n    // Skip API call for now since it's returning 404, go directly to localStorage\r\n    console.log('Using localStorage for creating inspection requests (API unavailable)');\r\n    \r\n    // Fallback to localStorage\r\n    const existing = getStoredRequests();\r\n    const newRequest = {\r\n      id: `viewing-${Date.now()}`,\r\n      ...requestData,\r\n      createdAt: new Date().toISOString(),\r\n      status: 'pending'\r\n    };\r\n    existing.push(newRequest);\r\n    saveStoredRequests(existing);\r\n    \r\n    // Dispatch event to notify Dashboard and other components\r\n    safeWindowDispatch('viewingsUpdated', {\r\n      viewingRequest: newRequest,\r\n      action: 'created'\r\n    });\r\n    \r\n    // Also trigger a storage event for cross-tab synchronization\r\n    safeWindowDispatch('storage', {\r\n      key: VIEWING_REQUESTS_KEY,\r\n      newValue: JSON.stringify(existing)\r\n    });\r\n    logInspectionActivity('inspection_requested', newRequest);\r\n    \r\n    return newRequest;\r\n  } catch (error) {\r\n    console.error('Error creating inspection request:', error);\r\n    // Final fallback to localStorage\r\n    const existing = getStoredRequests();\r\n    const newRequest = {\r\n      id: `viewing-${Date.now()}`,\r\n      ...requestData,\r\n      createdAt: new Date().toISOString(),\r\n      status: 'pending'\r\n    };\r\n    existing.push(newRequest);\r\n    saveStoredRequests(existing);\r\n    \r\n    // Dispatch event to notify Dashboard and other components\r\n    safeWindowDispatch('viewingsUpdated', {\r\n      viewingRequest: newRequest,\r\n      action: 'created'\r\n    });\r\n    \r\n    // Also trigger a storage event for cross-tab synchronization\r\n    safeWindowDispatch('storage', {\r\n      key: VIEWING_REQUESTS_KEY,\r\n      newValue: JSON.stringify(existing)\r\n    });\r\n    logInspectionActivity('inspection_requested', newRequest);\r\n    \r\n    return newRequest;\r\n  }\r\n};\r\n\r\nexport const listInspectionRequestsByVendor = async (vendorId, vendorEmail) => {\r\n  try {\r\n    // Skip API call for now since it's returning 404, go directly to localStorage\r\n    console.log('Using localStorage for inspection requests (API unavailable)');\r\n    \r\n    // Fallback to localStorage\r\n    const local = getStoredRequests();\r\n    \r\n    // Filter by vendorId or vendorEmail\r\n    const filtered = local.filter((r) => \r\n      (vendorId && r.vendorId === vendorId) || \r\n      (vendorEmail && r.vendorEmail === vendorEmail)\r\n    );\r\n    \r\n    // Sort newest first\r\n    filtered.sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));\r\n    \r\n    return filtered;\r\n  } catch (error) {\r\n    console.error('Error listing inspection requests:', error);\r\n    // Final fallback to localStorage\r\n    const local = getStoredRequests();\r\n    const filtered = local.filter((r) => \r\n      (vendorId && r.vendorId === vendorId) || \r\n      (vendorEmail && r.vendorEmail === vendorEmail)\r\n    );\r\n    return filtered.sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));\r\n  }\r\n};\r\n\r\nexport const listInspectionRequestsByBuyer = async (buyerId) => {\r\n  try {\r\n    // Skip API call for now since it's returning 404, go directly to localStorage\r\n    console.log('Using localStorage for buyer inspection requests (API unavailable)');\r\n    \r\n    // Fallback to localStorage\r\n    const local = getStoredRequests();\r\n    const filtered = local.filter((r) => r.buyerId === buyerId);\r\n    return filtered.sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));\r\n  } catch (error) {\r\n    console.error('Error listing buyer inspection requests:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\nexport const updateInspectionRequest = async (requestId, updates) => {\r\n  try {\r\n    // Skip API call for now since it's returning 404, go directly to localStorage\r\n    console.log('Using localStorage for updating inspection requests (API unavailable)');\r\n    \r\n    // Fallback to localStorage\r\n    const all = getStoredRequests();\r\n    let nextRecord = null;\r\n    const updated = all.map((r) => {\r\n      if (r.id === requestId) {\r\n        nextRecord = { ...r, ...updates, updatedAt: new Date().toISOString() };\r\n        return nextRecord;\r\n      }\r\n      return r;\r\n    });\r\n    if (!nextRecord) {\r\n      saveStoredRequests(all);\r\n      return false;\r\n    }\r\n    saveStoredRequests(updated);\r\n    \r\n    // Dispatch event to notify Dashboard and other components when status changes\r\n    safeWindowDispatch('viewingsUpdated', {\r\n      requestId,\r\n      updates,\r\n      action: 'updated'\r\n    });\r\n    \r\n    // Also trigger a storage event for cross-tab synchronization\r\n    safeWindowDispatch('storage', {\r\n      key: VIEWING_REQUESTS_KEY,\r\n      newValue: JSON.stringify(updated)\r\n    });\r\n    const action = deriveActionFromStatus(all.find((r) => r.id === requestId), nextRecord, updates);\r\n    if (action) {\r\n      logInspectionActivity(action, nextRecord);\r\n    }\r\n    \r\n    return true;\r\n  } catch (error) {\r\n    console.error('Error updating inspection request:', error);\r\n    // Final fallback to localStorage\r\n    const all = getStoredRequests();\r\n    let nextRecord = null;\r\n    const updated = all.map((r) => {\r\n      if (r.id === requestId) {\r\n        nextRecord = { ...r, ...updates, updatedAt: new Date().toISOString() };\r\n        return nextRecord;\r\n      }\r\n      return r;\r\n    });\r\n    if (!nextRecord) {\r\n      saveStoredRequests(all);\r\n      return false;\r\n    }\r\n    saveStoredRequests(updated);\r\n    \r\n    // Dispatch event to notify Dashboard and other components when status changes\r\n    safeWindowDispatch('viewingsUpdated', {\r\n      requestId,\r\n      updates,\r\n      action: 'updated'\r\n    });\r\n    \r\n    // Also trigger a storage event for cross-tab synchronization\r\n    safeWindowDispatch('storage', {\r\n      key: VIEWING_REQUESTS_KEY,\r\n      newValue: JSON.stringify(updated)\r\n    });\r\n    const action = deriveActionFromStatus(all.find((r) => r.id === requestId), nextRecord, updates);\r\n    if (action) {\r\n      logInspectionActivity(action, nextRecord);\r\n    }\r\n    \r\n    return true;\r\n  }\r\n};\r\n\r\nexport const syncLocalInspectionRequests = async () => {\r\n  try {\r\n    // Try to sync with API if available\r\n    const local = getStoredRequests();\r\n    console.log('Inspection requests stored locally:', local.length);\r\n    return { synced: local.length };\r\n  } catch (error) {\r\n    console.error('syncLocalInspectionRequests failed:', error);\r\n    return { synced: 0 };\r\n  }\r\n};\r\n\r\nexport default {\r\n  createInspectionRequest,\r\n  listInspectionRequestsByVendor,\r\n  listInspectionRequestsByBuyer,\r\n  updateInspectionRequest,\r\n  syncLocalInspectionRequests,\r\n  getInspectionAnalytics\r\n};"],"names":["_ref","items","pathnames","useLocation","pathname","split","filter","x","breadcrumbItems","label","path","map","name","index","routeTo","concat","slice","join","word","charAt","toUpperCase","_jsx","className","children","item","isLast","length","_jsxs","FaHome","_Fragment","Link","to","FaChevronRight","property","user","useAuth","showPaymentFlow","setShowPaymentFlow","useState","useEffect","style","document","body","previousOverflow","overflow","onClick","handlePurchaseClick","toast","error","FaShoppingCart","FaShieldAlt","EscrowPaymentFlow","onClose","isModal","PropertyDetail","_property$price","_property$details4","_property$details5","_property$details6","_property$owner9","_property$owner9$firs","_property$vendor7","_property$vendor7$fir","_property$owner0","_property$owner0$last","_property$vendor8","_property$vendor8$las","_property$owner1","_property$vendor9","_property$owner10","_property$vendor0","_property$price2","_property$status","_property$owner11","_property$vendor1","_property$owner12","_property$vendor10","_property$location4","id","useParams","properties","loading","toggleFavorite","useNavigate","useProperty","setAuthRedirect","setProperty","activeImage","setActiveImage","showInquiryModal","setShowInquiryModal","inquiryMessage","setInquiryMessage","showScheduleModal","setShowScheduleModal","preferredDate","setPreferredDate","preferredTime","setPreferredTime","isFavorite","setIsFavorite","foundProperty","find","p","_p$id","propertyId","numericId","parseInt","toString","location","includes","parts","address","city","state","part","undefined","key","favorites","Set","JSON","parse","localStorage","getItem","has","getImageUrl","image","url","handleCopyLink","navigator","clipboard","writeText","window","href","then","success","catch","createInquiry","inquiryType","_property$location","_property$location2","_property$images","_property$images$","_property$images2","_property$details","_property$details2","_property$details3","_property$owner","_property$vendor","_property$owner2","_property$vendor2","_property$owner3","_property$vendor3","_property$owner4","_property$vendor4","message","arguments","existingInquiries","existingInquiry","inq","userId","buyerId","status","inquiry","Date","now","propertyTitle","title","propertyLocation","propertyPrice","price","propertyImage","images","propertyBedrooms","bedrooms","details","propertyBathrooms","bathrooms","propertyArea","area","sqft","buyerName","firstName","lastName","buyerEmail","email","buyerPhone","phone","vendorId","owner","vendor","vendorName","trim","vendorEmail","vendorPhone","contactPhone","createdAt","toISOString","updatedAt","responses","push","setItem","stringify","dispatchEvent","CustomEvent","detail","action","StorageEvent","newValue","Breadcrumbs","src","getCurrentImage","Array","isArray","safeIndex","Math","max","min","currentImage","alt","toLocaleString","async","storageKey","wasFavorite","propertyIdStr","String","updatedFavorites","existing","delete","add","from","_unused","result","Error","favorited","console","_unused2","FaHeart","share","text","description","log","FaShare","type","e","preventDefault","Boolean","FaBed","FaBath","FaRulerCombined","amenities","amenity","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","handleContactOwner","_property$owner5","_property$vendor5","formattedPhone","replace","startsWith","substring","encodeURIComponent","whatsappUrl","open","FaWhatsapp","handleScheduleViewing","FaCalendar","handleCallVendor","_property$owner8","_property$vendor6","FaPhone","FaMapMarkerAlt","zipCode","date","isNaN","getTime","toLocaleDateString","year","month","day","views","isVerified","round","PropertyPurchaseButton","dateListed","ownerName","googleMapsUrl","target","rel","value","onChange","rows","placeholder","handleSendInquiry","_property$location3","_property$owner6","_property$owner7","viewingRequest","userName","userEmail","requestedAt","agentContact","agent","projectId","projectName","projectLocation","createInspectionRequest","VIEWING_REQUESTS_KEY","INSPECTION_ACTIVITY_KEY","defaultAnalytics","totalRequests","pendingResponses","confirmed","vendorProposals","buyerReschedules","cancelledByBuyer","cancelledByVendor","timeline","safeWindowDispatch","eventName","getStoredRequests","saveStoredRequests","requests","getActivityLog","_unused3","formatDateTimeLabel","time","logInspectionActivity","request","payload","buildActivityPayload","requestId","projectTitle","timestamp","unshift","pop","saveActivityLog","notifications","buildInspectionNotificationEntries","entries","preferredLabel","confirmedLabel","confirmedDate","confirmedTime","proposedLabel","proposedDate","proposedTime","pushForVendor","recipientId","recipientEmail","roles","priority","metadata","pushForBuyer","payloads","entry","_entry$metadata","_objectSpread","source","data","notificationService","createInspectionNotifications","warn","persistInspectionNotifications","deriveActionFromStatus","previous","next","updates","toLowerCase","matchesVendor","getInspectionAnalytics","role","relevant","req","matchesBuyer","analytics","pendingStatuses","forEach","lastSevenDays","_","idx","setDate","getDate","dateKey","dailyCount","activityFilter","isoDate","count","newRequest","requestData","listInspectionRequestsByVendor","filtered","r","sort","a","b","updateInspectionRequest","all","nextRecord","updated"],"sourceRoot":""}