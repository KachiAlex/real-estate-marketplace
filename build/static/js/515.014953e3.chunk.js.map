{"version":3,"file":"static/js/515.014953e3.chunk.js","mappings":"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","sources":["components/Breadcrumbs.js","components/PropertyCardSkeleton.js","components/SimplePaymentModal.js","components/PropertyVerificationNew.js","utils/verificationStatus.js","components/VendorInspectionRequests.js","components/NotificationDropdown.js","components/VendorViewsChart.js","components/VendorConversionChart.js","pages/VendorDashboard.js","services/inspectionService.js","utils/authToken.js"],"sourcesContent":["import React from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport { FaChevronRight, FaHome } from 'react-icons/fa';\n\nconst Breadcrumbs = ({ items }) => {\n  const location = useLocation();\n  \n  // Auto-generate breadcrumbs from route if items not provided\n  const pathnames = location.pathname.split('/').filter((x) => x);\n  \n  const breadcrumbItems = items || [\n    { label: 'Home', path: '/' },\n    ...pathnames.map((name, index) => {\n      const routeTo = `/${pathnames.slice(0, index + 1).join('/')}`;\n      const label = name\n        .split('-')\n        .map(word => word.charAt(0).toUpperCase() + word.slice(1))\n        .join(' ');\n      return { label, path: routeTo };\n    })\n  ];\n\n  return (\n    <nav className=\"flex items-center space-x-2 text-sm text-gray-600 mb-4\" aria-label=\"Breadcrumb\">\n      <ol className=\"flex items-center space-x-2\">\n        {breadcrumbItems.map((item, index) => {\n          const isLast = index === breadcrumbItems.length - 1;\n          \n          return (\n            <li key={item.path || index} className=\"flex items-center\">\n              {index === 0 && (\n                <FaHome className=\"h-4 w-4 text-gray-400 mr-2\" aria-hidden=\"true\" />\n              )}\n              {isLast ? (\n                <span className=\"text-gray-900 font-medium\" aria-current=\"page\">\n                  {item.label}\n                </span>\n              ) : (\n                <>\n                  <Link \n                    to={item.path} \n                    className=\"hover:text-blue-600 transition-colors\"\n                    aria-label={`Navigate to ${item.label}`}\n                  >\n                    {item.label}\n                  </Link>\n                  <FaChevronRight className=\"h-3 w-3 text-gray-400 mx-2\" aria-hidden=\"true\" />\n                </>\n              )}\n            </li>\n          );\n        })}\n      </ol>\n    </nav>\n  );\n};\n\nexport default Breadcrumbs;\n\n","import React from 'react';\n\nconst PropertyCardSkeleton = ({ count = 1 }) => {\n  const skeletons = Array.from({ length: count }, (_, i) => (\n    <div key={i} className=\"bg-white rounded-xl shadow-md overflow-hidden animate-pulse\">\n      {/* Image skeleton */}\n      <div className=\"w-full h-48 bg-gray-300\"></div>\n      \n      {/* Content skeleton */}\n      <div className=\"p-6\">\n        {/* Price skeleton */}\n        <div className=\"h-8 w-32 bg-gray-300 rounded mb-3\"></div>\n        \n        {/* Title skeleton */}\n        <div className=\"h-6 w-full bg-gray-300 rounded mb-2\"></div>\n        <div className=\"h-6 w-3/4 bg-gray-300 rounded mb-4\"></div>\n        \n        {/* Location skeleton */}\n        <div className=\"h-4 w-2/3 bg-gray-300 rounded mb-4\"></div>\n        \n        {/* Features skeleton */}\n        <div className=\"flex items-center space-x-4 mb-4\">\n          <div className=\"h-4 w-16 bg-gray-300 rounded\"></div>\n          <div className=\"h-4 w-16 bg-gray-300 rounded\"></div>\n          <div className=\"h-4 w-16 bg-gray-300 rounded\"></div>\n        </div>\n        \n        {/* Description skeleton */}\n        <div className=\"space-y-2 mb-4\">\n          <div className=\"h-4 w-full bg-gray-300 rounded\"></div>\n          <div className=\"h-4 w-5/6 bg-gray-300 rounded\"></div>\n        </div>\n        \n        {/* Button skeleton */}\n        <div className=\"h-10 w-full bg-gray-300 rounded\"></div>\n      </div>\n    </div>\n  ));\n\n  return <>{skeletons}</>;\n};\n\nexport default PropertyCardSkeleton;\n\n","import React, { useState, useEffect } from 'react';\nimport { FaTimes, FaCheckCircle, FaCreditCard, FaLock } from 'react-icons/fa';\n\nconst SimplePaymentModal = ({ \n  isOpen, \n  onClose, \n  amount = 50000, \n  propertyTitle,\n  onPaymentSuccess,\n  onPaymentError \n}) => {\n  const [paymentStep, setPaymentStep] = useState('details');\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [paymentComplete, setPaymentComplete] = useState(false);\n  const [paymentMethod, setPaymentMethod] = useState('card'); // 'card' or 'transfer'\n  const [formData, setFormData] = useState({\n    email: '',\n    cardNumber: '',\n    expiry: '',\n    cvv: '',\n    cardName: '',\n    accountName: '',\n    bankName: '',\n    transferReference: ''\n  });\n\n  // Reset form when modal opens\n  useEffect(() => {\n    if (isOpen) {\n      setPaymentStep('details');\n      setIsProcessing(false);\n      setPaymentComplete(false);\n      setFormData({\n        email: '',\n        cardNumber: '',\n        expiry: '',\n        cvv: '',\n        cardName: '',\n        accountName: '',\n        bankName: '',\n        transferReference: ''\n      });\n      setPaymentMethod('card');\n    }\n  }, [isOpen]);\n\n  const formatCardNumber = (value) => {\n    const cleaned = value.replace(/\\s/g, '');\n    const chunks = cleaned.match(/.{1,4}/g) || [];\n    return chunks.join(' ');\n  };\n\n  const formatExpiry = (value) => {\n    const cleaned = value.replace(/\\D/g, '');\n    if (cleaned.length >= 2) {\n      return cleaned.slice(0, 2) + '/' + cleaned.slice(2, 4);\n    }\n    return cleaned;\n  };\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    \n    if (name === 'cardNumber') {\n      setFormData(prev => ({\n        ...prev,\n        [name]: formatCardNumber(value)\n      }));\n    } else if (name === 'expiry') {\n      setFormData(prev => ({\n        ...prev,\n        [name]: formatExpiry(value)\n      }));\n    } else {\n      setFormData(prev => ({\n        ...prev,\n        [name]: value\n      }));\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    // Basic validation\n    if (!formData.email) {\n      alert('Please fill in your email address');\n      return;\n    }\n\n    if (paymentMethod === 'card') {\n      if (!formData.cardNumber || !formData.expiry || !formData.cvv) {\n        alert('Please fill in all card details');\n        return;\n      }\n    } else if (paymentMethod === 'transfer') {\n      if (!formData.accountName || !formData.bankName || !formData.transferReference) {\n        alert('Please fill in all transfer details');\n        return;\n      }\n    }\n\n    setIsProcessing(true);\n    setPaymentStep('processing');\n\n    // Simulate payment processing\n    setTimeout(() => {\n      setIsProcessing(false);\n      setPaymentStep('success');\n      setPaymentComplete(true);\n      \n      // Generate mock payment reference\n      const paymentRef = paymentMethod === 'card' \n        ? 'CARD_' + Date.now()\n        : 'TRANSFER_' + Date.now();\n      \n      // Call success callback\n      if (onPaymentSuccess) {\n        onPaymentSuccess({\n          reference: paymentRef,\n          amount: amount,\n          method: paymentMethod,\n          status: 'successful',\n          timestamp: new Date().toISOString()\n        });\n      }\n    }, paymentMethod === 'card' ? 2000 : 1500);\n  };\n\n  const handleClose = () => {\n    if (paymentComplete) {\n      onClose();\n    } else {\n      if (window.confirm('Are you sure you want to cancel this payment?')) {\n        onClose();\n      }\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\">\n      <div className=\"flex min-h-screen items-center justify-center p-4\">\n        <div className=\"fixed inset-0 bg-black bg-opacity-50\" onClick={handleClose}></div>\n        \n        <div className=\"relative bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto\">\n          {/* Header */}\n          <div className=\"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 rounded-t-lg\">\n            <div className=\"flex justify-between items-start\">\n              <div>\n                <h3 className=\"text-xl font-bold\">Property Verification Payment</h3>\n                <p className=\"text-blue-100 text-sm mt-1\">{propertyTitle || 'Property Verification'}</p>\n              </div>\n              <button\n                onClick={handleClose}\n                className=\"text-white hover:text-blue-200 transition-colors\"\n              >\n                <FaTimes size={20} />\n              </button>\n            </div>\n          </div>\n\n          {/* Content */}\n          <div className=\"p-6\">\n            {paymentStep === 'details' && (\n              <form onSubmit={handleSubmit} className=\"space-y-4\">\n                {/* Amount Display */}\n                <div className=\"bg-gray-50 p-4 rounded-lg text-center\">\n                  <p className=\"text-sm text-gray-600\">Payment Amount</p>\n                  <p className=\"text-2xl font-bold text-gray-900\">{amount.toLocaleString()}</p>\n                  <p className=\"text-xs text-gray-500 mt-1\">Property Verification Fee</p>\n                </div>\n\n                {/* Payment Method Selection */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Payment Method\n                  </label>\n                  <div className=\"grid grid-cols-2 gap-3\">\n                    <button\n                      type=\"button\"\n                      onClick={() => setPaymentMethod('card')}\n                      className={`p-3 border rounded-lg text-sm font-medium transition-colors ${\n                        paymentMethod === 'card'\n                          ? 'border-blue-500 bg-blue-50 text-blue-700'\n                          : 'border-gray-300 bg-white text-gray-700 hover:border-gray-400'\n                      }`}\n                    >\n                      <FaCreditCard className=\"inline mr-2\" />\n                      Card Payment\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => setPaymentMethod('transfer')}\n                      className={`p-3 border rounded-lg text-sm font-medium transition-colors ${\n                        paymentMethod === 'transfer'\n                          ? 'border-blue-500 bg-blue-50 text-blue-700'\n                          : 'border-gray-300 bg-white text-gray-700 hover:border-gray-400'\n                      }`}\n                    >\n                      <span className=\"inline mr-2\"></span>\n                      Bank Transfer\n                    </button>\n                  </div>\n                </div>\n\n                {/* Email */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Email Address\n                  </label>\n                  <input\n                    type=\"email\"\n                    name=\"email\"\n                    value={formData.email}\n                    onChange={handleInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    placeholder=\"your@email.com\"\n                    required\n                  />\n                </div>\n\n                {/* Card Payment Form */}\n                {paymentMethod === 'card' && (\n                  <div className=\"space-y-3\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Card Number\n                      </label>\n                      <input\n                        type=\"text\"\n                        name=\"cardNumber\"\n                        value={formData.cardNumber}\n                        onChange={handleInputChange}\n                        maxLength={19}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                        placeholder=\"1234 5678 9012 3456\"\n                        required\n                      />\n                    </div>\n\n                    <div className=\"grid grid-cols-2 gap-3\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Expiry Date\n                        </label>\n                        <input\n                          type=\"text\"\n                          name=\"expiry\"\n                          value={formData.expiry}\n                          onChange={handleInputChange}\n                          maxLength={5}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                          placeholder=\"MM/YY\"\n                          required\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          CVV\n                        </label>\n                        <input\n                          type=\"text\"\n                          name=\"cvv\"\n                          value={formData.cvv}\n                          onChange={handleInputChange}\n                          maxLength={4}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                          placeholder=\"123\"\n                          required\n                        />\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {/* Bank Transfer Form */}\n                {paymentMethod === 'transfer' && (\n                  <div className=\"space-y-3\">\n                    <div className=\"bg-blue-50 p-4 rounded-lg\">\n                      <h4 className=\"font-semibold text-blue-900 mb-2\">Bank Transfer Details</h4>\n                      <div className=\"text-sm text-blue-800 space-y-1\">\n                        <p><strong>Bank:</strong> Test Bank PLC</p>\n                        <p><strong>Account Name:</strong> PropertyArk Verification</p>\n                        <p><strong>Account Number:</strong> 1234567890</p>\n                        <p><strong>Amount:</strong> {amount.toLocaleString()}</p>\n                      </div>\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Your Account Name\n                      </label>\n                      <input\n                        type=\"text\"\n                        name=\"accountName\"\n                        value={formData.accountName}\n                        onChange={handleInputChange}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                        placeholder=\"John Doe\"\n                        required\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Bank Name\n                      </label>\n                      <input\n                        type=\"text\"\n                        name=\"bankName\"\n                        value={formData.bankName}\n                        onChange={handleInputChange}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                        placeholder=\"Your Bank Name\"\n                        required\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Transfer Reference/Transaction ID\n                      </label>\n                      <input\n                        type=\"text\"\n                        name=\"transferReference\"\n                        value={formData.transferReference}\n                        onChange={handleInputChange}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                        placeholder=\"Transaction ID from your bank\"\n                        required\n                      />\n                    </div>\n                  </div>\n                )}\n\n                {/* Security Note */}\n                <div className=\"flex items-center text-sm text-gray-600 bg-blue-50 p-3 rounded-lg\">\n                  <FaLock className=\"text-blue-600 mr-2\" />\n                  <span>Your payment information is secure and encrypted</span>\n                </div>\n\n                {/* Submit Button */}\n                <button\n                  type=\"submit\"\n                  className=\"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center justify-center\"\n                >\n                  <FaCreditCard className=\"mr-2\" />\n                  Pay {amount.toLocaleString()}\n                </button>\n              </form>\n            )}\n\n            {paymentStep === 'processing' && (\n              <div className=\"text-center py-8\">\n                <div className=\"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4\">\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n                </div>\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Processing Payment</h3>\n                <p className=\"text-gray-600\">Please wait while we process your payment...</p>\n              </div>\n            )}\n\n            {paymentStep === 'success' && (\n              <div className=\"text-center py-8\">\n                <div className=\"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4\">\n                  <FaCheckCircle className=\"text-green-600 text-2xl\" />\n                </div>\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Payment Successful!</h3>\n                <p className=\"text-gray-600 mb-4\">Your property verification payment has been processed successfully.</p>\n                <div className=\"bg-gray-50 p-3 rounded-lg text-sm\">\n                  <p className=\"text-gray-600\">Payment Reference: <span className=\"font-mono font-semibold\">PAY_{Date.now()}</span></p>\n                  <p className=\"text-gray-600\">Amount: <span className=\"font-semibold\">{amount.toLocaleString()}</span></p>\n                </div>\n                <button\n                  onClick={handleClose}\n                  className=\"mt-6 w-full bg-green-600 text-white py-3 rounded-lg font-medium hover:bg-green-700 transition-colors\"\n                >\n                  Continue\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SimplePaymentModal;\n","import React, { useState, useEffect, useMemo } from 'react';\nimport { FaTimes, FaCheckCircle, FaExclamationTriangle, FaSpinner, FaShieldAlt, FaMoneyBillWave, FaCreditCard } from 'react-icons/fa';\nimport { getApiUrl } from '../utils/apiConfig';\nimport { useAuth } from '../contexts/AuthContext';\nimport { authenticatedFetch } from '../utils/authToken';\nimport SimplePaymentModal from './SimplePaymentModal';\n\nconst PropertyVerification = ({ property, onClose, onSuccess }) => {\n  const { user } = useAuth();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [successMessage, setSuccessMessage] = useState('');\n  const [showPaymentModal, setShowPaymentModal] = useState(false);\n  const [paymentComplete, setPaymentComplete] = useState(false);\n  const [paymentData, setPaymentData] = useState(null); // Store payment data\n  const [submitting, setSubmitting] = useState(false); // Track submission state\n  const [config, setConfig] = useState(null);\n  const [configLoading, setConfigLoading] = useState(true);\n  \n  const [formValues, setFormValues] = useState({\n    propertyName: '',\n    propertyUrl: '',\n    propertyLocation: '',\n    message: '',\n    preferredBadgeColor: '#10B981'\n  });\n\n  // Initialize form with property data\n  useEffect(() => {\n    if (!property) return;\n    \n    const derivedLocation = (() => {\n      const location = property.location;\n      if (!location) return '';\n      if (typeof location === 'string') return location;\n      const parts = [location.address, location.city, location.state].filter(Boolean);\n      return parts.join(', ');\n    })();\n\n    // Generate property URL automatically\n    const generatePropertyUrl = () => {\n      if (property?.shareUrl || property?.listingUrl) {\n        return property.shareUrl || property.listingUrl;\n      }\n      \n      // Generate URL from property data\n      const baseUrl = 'https://real-estate-marketplace-37544.web.app';\n      const propertyId = property?.id || property?._id;\n      const propertyTitle = property?.title || property?.name || 'property';\n      \n      if (propertyId) {\n        // Create a clean URL-friendly slug from title\n        const slug = propertyTitle\n          .toLowerCase()\n          .replace(/[^a-z0-9]+/g, '-')\n          .replace(/^-+|-+$/g, '');\n        \n        return `${baseUrl}/property/${propertyId}/${slug}`;\n      }\n      \n      return `${baseUrl}/properties`;\n    };\n\n    setFormValues(prev => ({\n      ...prev,\n      propertyName: property.title || property.name || prev.propertyName,\n      propertyUrl: generatePropertyUrl(),\n      propertyLocation: derivedLocation || prev.propertyLocation\n    }));\n  }, [property]);\n\n  // Fetch verification config\n  useEffect(() => {\n    const fetchConfig = async () => {\n      try {\n        setConfigLoading(true);\n        const response = await fetch(getApiUrl('/verification/config'));\n        const data = await response.json();\n        \n        if (!response.ok || !data.success) {\n          throw new Error(data.message || 'Unable to load verification configuration');\n        }\n        \n        setConfig(data.data);\n        setFormValues(prev => ({\n          ...prev,\n          preferredBadgeColor: data.data?.verificationBadgeColor || prev.preferredBadgeColor\n        }));\n      } catch (err) {\n        console.warn('PropertyVerification: failed to load config', err);\n        // Use default config if fetch fails\n        setConfig({\n          verificationFee: 50000,\n          currency: 'NGN',\n          supportedDocuments: ['title_deed', 'survey_plan', 'building_approval', 'tax_clearance'],\n          processingTime: '3-5 business days'\n        });\n      } finally {\n        setConfigLoading(false);\n      }\n    };\n\n    fetchConfig();\n  }, []);\n\n  const verificationFee = useMemo(() => {\n    return config?.verificationFee || 50000;\n  }, [config?.verificationFee]);\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormValues(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const handlePaymentSuccess = async (paymentData) => {\n    console.log('PropertyVerification: Payment successful', paymentData);\n    setPaymentComplete(true);\n    setSuccessMessage(' Payment completed successfully! Please review your details and submit the verification request.');\n    setPaymentData(paymentData); // Store payment data for submission\n  };\n\n  const handleVerificationSubmit = async () => {\n    if (!paymentData) {\n      setError('No payment data found. Please complete payment first.');\n      return;\n    }\n\n    setSubmitting(true);\n    setError('');\n    \n    try {\n      // DEBUG: Check token before sending\n      const token = localStorage.getItem('token') || localStorage.getItem('firebaseToken');\n      const user = JSON.parse(localStorage.getItem('currentUser') || '{}');\n      console.log('DEBUG: Verification submission', {\n        hasToken: !!token,\n        tokenLength: token?.length,\n        userEmail: user?.email,\n        userId: user?.uid\n      });\n\n      const applicationData = {\n        propertyId: property?.id,\n        propertyName: formValues.propertyName || property?.title,\n        propertyUrl: formValues.propertyUrl || property?.propertyUrl,\n        propertyLocation: formValues.propertyLocation || property?.location,\n        message: formValues.message,\n        preferredBadgeColor: formValues.preferredBadgeColor,\n        paymentReference: paymentData.reference,\n        paymentAmount: paymentData.amount,\n        paymentStatus: 'completed'\n      };\n\n      const response = await authenticatedFetch(getApiUrl('/verification/applications'), {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(applicationData)\n      });\n\n      if (response.ok) {\n        const result = await response.json();\n        console.log('PropertyVerification: Application submitted successfully', result);\n        \n        // Update property status in local state to reflect verification requested\n        if (property?.id) {\n          const verificationStatus = JSON.parse(localStorage.getItem('propertyVerificationStatus') || '{}');\n          verificationStatus[property.id] = {\n            status: 'requested',\n            requestedAt: new Date().toISOString(),\n            applicationId: result.data?.applicationId\n          };\n          localStorage.setItem('propertyVerificationStatus', JSON.stringify(verificationStatus));\n        }\n        \n        if (onSuccess) {\n          onSuccess({\n            ...result,\n            propertyId: property?.id,\n            status: 'requested'\n          });\n        }\n        \n        setSuccessMessage(' Verification request submitted successfully! Your property is now under review.');\n        \n        // Close modal after showing success message\n        setTimeout(() => {\n          onClose();\n        }, 2000);\n      } else {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.message || 'Failed to submit verification application');\n      }\n    } catch (error) {\n      console.error('PropertyVerification: Error submitting application', error);\n      setError(error.message || 'Failed to submit verification application. Please try again.');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  const handlePaymentError = (error) => {\n    console.error('PropertyVerification: Payment failed', error);\n    setError('Payment failed. Please try again.');\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    \n    // Basic validation\n    if (!formValues.propertyName || !formValues.propertyUrl || !formValues.propertyLocation) {\n      setError('Please fill in all required fields');\n      return;\n    }\n\n    // Show payment modal\n    setShowPaymentModal(true);\n    setError('');\n  };\n\n  const badgePreviewColor = formValues.preferredBadgeColor || '#10B981';\n\n  if (configLoading) {\n    return (\n      <div className=\"fixed inset-0 z-50 overflow-y-auto\">\n        <div className=\"flex min-h-screen items-center justify-center p-4\">\n          <div className=\"bg-white rounded-lg shadow-xl max-w-md w-full p-6 text-center\">\n            <FaSpinner className=\"animate-spin text-blue-600 text-4xl mx-auto mb-4\" />\n            <h3 className=\"text-lg font-semibold\">Loading Verification</h3>\n            <p className=\"text-gray-600\">Please wait...</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <div className=\"fixed inset-0 z-50 overflow-y-auto\">\n        <div className=\"flex min-h-screen items-center justify-center p-4\">\n          <div className=\"fixed inset-0 bg-black bg-opacity-50\" onClick={onClose}></div>\n          \n          <div className=\"relative bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n            {/* Header */}\n            <div className=\"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 rounded-t-lg\">\n              <div className=\"flex justify-between items-start\">\n                <div>\n                  <h3 className=\"text-xl font-bold flex items-center\">\n                    <FaShieldAlt className=\"mr-2\" />\n                    Property Verification\n                  </h3>\n                  <p className=\"text-blue-100 text-sm mt-1\">\n                    Get your property verified with the PropertyArk trust badge\n                  </p>\n                </div>\n                <button\n                  onClick={onClose}\n                  className=\"text-white hover:text-blue-200 transition-colors\"\n                >\n                  <FaTimes size={20} />\n                </button>\n              </div>\n            </div>\n\n            {/* Content */}\n            <div className=\"p-6\">\n              {successMessage ? (\n                <div className=\"text-center py-8\">\n                  <FaCheckCircle className=\"text-green-600 text-5xl mx-auto mb-4\" />\n                  <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">Success!</h3>\n                  <p className=\"text-gray-600 mb-6\">{successMessage}</p>\n                  \n                  {/* Show submission button after payment is complete */}\n                  {paymentComplete && !submitting && (\n                    <div className=\"space-y-4\">\n                      <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                        <h4 className=\"font-medium text-blue-900 mb-2\">Review Your Details</h4>\n                        <div className=\"text-left space-y-2 text-sm text-blue-800\">\n                          <p><strong>Property:</strong> {formValues.propertyName}</p>\n                          <p><strong>Location:</strong> {formValues.propertyLocation}</p>\n                          <p><strong>Payment Reference:</strong> {paymentData?.reference}</p>\n                          <p><strong>Amount:</strong> {paymentData?.amount?.toLocaleString()}</p>\n                        </div>\n                      </div>\n                      \n                      <div className=\"flex space-x-3 justify-center\">\n                        <button\n                          onClick={handleVerificationSubmit}\n                          className=\"px-6 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors flex items-center\"\n                        >\n                          <FaCheckCircle className=\"mr-2\" />\n                          Submit Verification Request\n                        </button>\n                        \n                        <button\n                          onClick={() => setShowPaymentModal(false)}\n                          className=\"px-6 py-3 bg-gray-600 text-white rounded-lg font-medium hover:bg-gray-700 transition-colors\"\n                        >\n                          Cancel\n                        </button>\n                      </div>\n                    </div>\n                  )}\n                  \n                  {/* Show loading state during submission */}\n                  {submitting && (\n                    <div className=\"flex items-center justify-center\">\n                      <FaSpinner className=\"animate-spin text-blue-600 text-2xl mr-3\" />\n                      <span className=\"text-gray-600\">Submitting verification request...</span>\n                    </div>\n                  )}\n                </div>\n              ) : (\n                <form onSubmit={handleSubmit} className=\"space-y-6\">\n                  {/* Error Message */}\n                  {error && (\n                    <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center\">\n                      <FaExclamationTriangle className=\"text-red-600 mr-3\" />\n                      <span className=\"text-red-800\">{error}</span>\n                    </div>\n                  )}\n\n                  {/* Property Information */}\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Property Name *\n                      </label>\n                      <input\n                        type=\"text\"\n                        name=\"propertyName\"\n                        value={formValues.propertyName}\n                        onChange={handleInputChange}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                        required\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Property URL *\n                      </label>\n                      <input\n                        type=\"url\"\n                        name=\"propertyUrl\"\n                        value={formValues.propertyUrl}\n                        onChange={handleInputChange}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50\"\n                        placeholder=\"https://...\"\n                        readOnly\n                      />\n                      <p className=\"text-xs text-gray-500 mt-1\">\n                         Auto-generated from property details\n                      </p>\n                    </div>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Property Location *\n                    </label>\n                    <input\n                      type=\"text\"\n                      name=\"propertyLocation\"\n                      value={formValues.propertyLocation}\n                      onChange={handleInputChange}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"City, State\"\n                      required\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Additional Message\n                    </label>\n                    <textarea\n                      name=\"message\"\n                      value={formValues.message}\n                      onChange={handleInputChange}\n                      rows={4}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"Any additional information about the property...\"\n                    />\n                  </div>\n\n                  {/* Badge Color Preview */}\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Verification Badge Color\n                    </label>\n                    <div className=\"flex items-center space-x-3\">\n                      <div\n                        className=\"w-8 h-8 rounded-full border-2 border-gray-300\"\n                        style={{ backgroundColor: badgePreviewColor }}\n                      ></div>\n                      <span className=\"text-sm text-gray-600\">Preview of your verification badge</span>\n                    </div>\n                  </div>\n\n                  {/* Fee Information */}\n                  <div className=\"bg-gray-50 p-4 rounded-lg\">\n                    <div className=\"flex justify-between items-center\">\n                      <div>\n                        <h4 className=\"font-semibold text-gray-900\">Verification Fee</h4>\n                        <p className=\"text-sm text-gray-600\">One-time payment for property verification</p>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"text-2xl font-bold text-gray-900\">{verificationFee.toLocaleString()}</p>\n                        <p className=\"text-xs text-gray-500\">Processing time: {config?.processingTime || '3-5 business days'}</p>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Submit Button */}\n                  <button\n                    type=\"submit\"\n                    disabled={loading}\n                    className=\"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center\"\n                  >\n                    {loading ? (\n                      <>\n                        <FaSpinner className=\"animate-spin mr-2\" />\n                        Processing...\n                      </>\n                    ) : (\n                      <>\n                        <FaCreditCard className=\"mr-2\" />\n                        Pay {verificationFee.toLocaleString()} for Verification\n                      </>\n                    )}\n                  </button>\n                </form>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Simple Payment Modal */}\n      <SimplePaymentModal\n        isOpen={showPaymentModal}\n        onClose={() => setShowPaymentModal(false)}\n        amount={verificationFee}\n        propertyTitle={formValues.propertyName}\n        onPaymentSuccess={handlePaymentSuccess}\n        onPaymentError={handlePaymentError}\n      />\n    </>\n  );\n};\n\nexport default PropertyVerification;\n","// Utility functions for property verification status\n\nexport const getVerificationStatus = (propertyId) => {\n  if (!propertyId) return null;\n  \n  try {\n    const verificationStatus = JSON.parse(localStorage.getItem('propertyVerificationStatus') || '{}');\n    return verificationStatus[propertyId] || null;\n  } catch (error) {\n    console.error('Error getting verification status:', error);\n    return null;\n  }\n};\n\nexport const isVerificationRequested = (propertyId) => {\n  const status = getVerificationStatus(propertyId);\n  return status?.status === 'requested';\n};\n\nexport const isVerificationApproved = (propertyId) => {\n  const status = getVerificationStatus(propertyId);\n  return status?.status === 'approved';\n};\n\nexport const setVerificationStatus = (propertyId, status, additionalData = {}) => {\n  if (!propertyId) return;\n  \n  try {\n    const verificationStatus = JSON.parse(localStorage.getItem('propertyVerificationStatus') || '{}');\n    verificationStatus[propertyId] = {\n      status,\n      updatedAt: new Date().toISOString(),\n      ...additionalData\n    };\n    localStorage.setItem('propertyVerificationStatus', JSON.stringify(verificationStatus));\n  } catch (error) {\n    console.error('Error setting verification status:', error);\n  }\n};\n\nexport const getVerificationButtonText = (propertyId) => {\n  if (isVerificationApproved(propertyId)) {\n    return 'Verified';\n  }\n  if (isVerificationRequested(propertyId)) {\n    return 'Verification Requested';\n  }\n  return 'Get Verified';\n};\n\nexport const getVerificationButtonClass = (propertyId) => {\n  if (isVerificationApproved(propertyId)) {\n    return 'bg-green-600 text-white cursor-not-allowed';\n  }\n  if (isVerificationRequested(propertyId)) {\n    return 'bg-yellow-600 text-white cursor-not-allowed';\n  }\n  return 'bg-blue-600 text-white hover:bg-blue-700';\n};\n","import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { FaCalendar, FaClock, FaMapMarkerAlt, FaUser, FaPhone, FaEnvelope, FaCheckCircle, FaTimesCircle, FaCalendarAlt, FaEye } from 'react-icons/fa';\r\nimport { listInspectionRequestsByVendor, updateInspectionRequest, getInspectionAnalytics } from '../services/inspectionService';\r\nimport toast from 'react-hot-toast';\r\n\r\nconst VendorInspectionRequests = () => {\r\n  const { user } = useAuth();\r\n  const [requests, setRequests] = useState([]);\r\n  const [analytics, setAnalytics] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showResponseModal, setShowResponseModal] = useState(false);\r\n  const [selectedRequest, setSelectedRequest] = useState(null);\r\n  const [responseType, setResponseType] = useState('accept');\r\n  const [proposedDate, setProposedDate] = useState('');\r\n  const [proposedTime, setProposedTime] = useState('');\r\n  const [vendorMessage, setVendorMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    loadInspectionRequests();\r\n  }, [user]);\r\n\r\n  useEffect(() => {\r\n    if (!user?.id && !user?.email) {\r\n      setAnalytics(null);\r\n      return;\r\n    }\r\n    setAnalytics(getInspectionAnalytics({ role: 'vendor', vendorId: user?.id, vendorEmail: user?.email }));\r\n\r\n    const handleAnalyticsUpdate = (event) => {\r\n      const detail = event.detail || event;\r\n      if (detail?.vendorId && detail.vendorId !== user?.id) return;\r\n      setAnalytics(getInspectionAnalytics({ role: 'vendor', vendorId: user?.id, vendorEmail: user?.email }));\r\n    };\r\n\r\n    window.addEventListener('inspectionAnalyticsUpdated', handleAnalyticsUpdate);\r\n    return () => window.removeEventListener('inspectionAnalyticsUpdated', handleAnalyticsUpdate);\r\n  }, [user?.id, user?.email]);\r\n\r\n  const loadInspectionRequests = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const data = await listInspectionRequestsByVendor(user?.id, user?.email);\r\n      setRequests(data);\r\n      if (user?.id || user?.email) {\r\n        setAnalytics(getInspectionAnalytics({ role: 'vendor', vendorId: user?.id, vendorEmail: user?.email }));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading inspection requests:', error);\r\n      toast.error('Failed to load inspection requests');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRespondToRequest = (request, initialType = 'accept') => {\r\n    setSelectedRequest(request);\r\n    setShowResponseModal(true);\r\n    setProposedDate(request.preferredDate);\r\n    setProposedTime(request.preferredTime);\r\n    setVendorMessage('');\r\n    setResponseType(initialType);\r\n  };\r\n\r\n  const handleSubmitResponse = async () => {\r\n    if (!selectedRequest) return;\r\n\r\n    try {\r\n      let updates = {};\r\n      \r\n      if (responseType === 'accept') {\r\n        updates = {\r\n          status: 'accepted',\r\n          confirmedDate: selectedRequest.preferredDate,\r\n          confirmedTime: selectedRequest.preferredTime,\r\n          vendorMessage: vendorMessage || 'Viewing confirmed. Looking forward to showing you the property!'\r\n        };\r\n      } else if (responseType === 'propose') {\r\n        if (!proposedDate || !proposedTime) {\r\n          toast.error('Please select a proposed date and time');\r\n          return;\r\n        }\r\n        updates = {\r\n          status: 'proposed_new_time',\r\n          proposedDate,\r\n          proposedTime,\r\n          vendorMessage: vendorMessage || 'I would like to propose a different time. Please let me know if this works for you.'\r\n        };\r\n      } else if (responseType === 'decline') {\r\n        updates = {\r\n          status: 'declined',\r\n          vendorMessage: vendorMessage || 'Unfortunately, I am not available at the requested time.'\r\n        };\r\n      }\r\n\r\n      const success = await updateInspectionRequest(selectedRequest.id, updates);\r\n      \r\n      if (success) {\r\n        toast.success(`Request ${responseType === 'accept' ? 'accepted' : responseType === 'propose' ? 'updated with new time' : 'declined'}`);\r\n        setShowResponseModal(false);\r\n        setSelectedRequest(null);\r\n        loadInspectionRequests(); // Reload requests\r\n      } else {\r\n        toast.error('Failed to update request');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating request:', error);\r\n      toast.error('Failed to update request');\r\n    }\r\n  };\r\n\r\n  const getStatusBadge = (status) => {\r\n    const badges = {\r\n      'pending_vendor': { color: 'bg-yellow-100 text-yellow-800', text: 'Pending Response' },\r\n      'accepted': { color: 'bg-green-100 text-green-800', text: 'Accepted' },\r\n      'proposed_new_time': { color: 'bg-blue-100 text-blue-800', text: 'New Time Proposed' },\r\n      'declined': { color: 'bg-red-100 text-red-800', text: 'Declined' },\r\n      'buyer_rescheduled': { color: 'bg-purple-100 text-purple-800', text: 'Buyer Rescheduled' },\r\n      'cancelled_by_buyer': { color: 'bg-gray-200 text-gray-700', text: 'Cancelled by Buyer' },\r\n      'cancelled_by_vendor': { color: 'bg-gray-200 text-gray-700', text: 'Cancelled by You' }\r\n    };\r\n    \r\n    const badge = badges[status] || badges['pending_vendor'];\r\n    return (\r\n      <span className={`px-2 py-1 rounded-full text-xs font-medium ${badge.color}`}>\r\n        {badge.text}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  const formatDateTime = (date, time) => {\r\n    if (!date || !time) return 'Not specified';\r\n    try {\r\n      const dateObj = new Date(`${date}T${time}`);\r\n      return dateObj.toLocaleDateString() + ' at ' + dateObj.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n    } catch {\r\n      return `${date} at ${time}`;\r\n    }\r\n  };\r\n\r\n  const handleAcceptBuyerReschedule = async (request) => {\r\n    const ok = await updateInspectionRequest(request.id, {\r\n      status: 'accepted',\r\n      confirmedDate: request.preferredDate,\r\n      confirmedTime: request.preferredTime,\r\n      vendorMessage: 'Buyer reschedule accepted'\r\n    });\r\n    if (ok) {\r\n      toast.success('Rescheduled inspection confirmed');\r\n      loadInspectionRequests();\r\n    } else {\r\n      toast.error('Failed to confirm reschedule');\r\n    }\r\n  };\r\n\r\n  const handleVendorCancel = async (request) => {\r\n    const confirmCancel = window.confirm('Cancel this inspection? The buyer will be notified.');\r\n    if (!confirmCancel) return;\r\n    const ok = await updateInspectionRequest(request.id, {\r\n      status: 'cancelled_by_vendor',\r\n      vendorMessage: 'Vendor cancelled the appointment',\r\n      cancelledAt: new Date().toISOString()\r\n    });\r\n    if (ok) {\r\n      toast.success('Inspection cancelled');\r\n      loadInspectionRequests();\r\n    } else {\r\n      toast.error('Failed to cancel inspection');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center p-8\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n        <span className=\"ml-2\">Loading inspection requests...</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h2 className=\"text-2xl font-bold text-gray-900\">Property Viewing Requests</h2>\r\n        <button\r\n          onClick={loadInspectionRequests}\r\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n        >\r\n          Refresh\r\n        </button>\r\n      </div>\r\n\r\n      {analytics && (\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n          <div className=\"bg-blue-50 border border-blue-100 rounded-xl p-4\">\r\n            <p className=\"text-sm text-blue-600\">Pending Responses</p>\r\n            <p className=\"text-3xl font-semibold text-blue-900\">{analytics.pendingResponses}</p>\r\n          </div>\r\n          <div className=\"bg-green-50 border border-green-100 rounded-xl p-4\">\r\n            <p className=\"text-sm text-green-600\">Confirmed</p>\r\n            <p className=\"text-3xl font-semibold text-green-900\">{analytics.confirmed}</p>\r\n          </div>\r\n          <div className=\"bg-purple-50 border border-purple-100 rounded-xl p-4\">\r\n            <p className=\"text-sm text-purple-600\">Buyer Reschedules</p>\r\n            <p className=\"text-3xl font-semibold text-purple-900\">{analytics.buyerReschedules}</p>\r\n          </div>\r\n          <div className=\"bg-red-50 border border-red-100 rounded-xl p-4\">\r\n            <p className=\"text-sm text-red-600\">Buyer Cancellations</p>\r\n            <p className=\"text-3xl font-semibold text-red-900\">{analytics.cancelledByBuyer}</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {requests.length === 0 ? (\r\n        <div className=\"text-center py-12\">\r\n          <FaCalendar className=\"mx-auto text-4xl text-gray-400 mb-4\" />\r\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No viewing requests yet</h3>\r\n          <p className=\"text-gray-500\">When buyers request to view your properties, they will appear here.</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"grid gap-6\">\r\n          {requests.map((request) => (\r\n            <div key={request.id} className=\"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow\">\r\n              <div className=\"flex items-start justify-between mb-4\">\r\n                <div className=\"flex-1\">\r\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\r\n                    {request.propertyTitle || request.projectName}\r\n                  </h3>\r\n                  <div className=\"flex items-center text-sm text-gray-600 mb-2\">\r\n                    <FaMapMarkerAlt className=\"mr-2\" />\r\n                    {request.propertyLocation || request.projectLocation}\r\n                  </div>\r\n                  <div className=\"flex items-center text-sm text-gray-600\">\r\n                    <FaUser className=\"mr-2\" />\r\n                    {request.buyerName || request.userName}\r\n                  </div>\r\n                </div>\r\n                <div className=\"ml-4\">\r\n                  {getStatusBadge(request.status)}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\r\n                <div className=\"flex items-center text-sm text-gray-600\">\r\n                  <FaCalendar className=\"mr-2\" />\r\n                  <span>Requested: {formatDateTime(request.preferredDate, request.preferredTime)}</span>\r\n                </div>\r\n                {request.confirmedDate && request.confirmedTime && (\r\n                  <div className=\"flex items-center text-sm text-green-600\">\r\n                    <FaCheckCircle className=\"mr-2\" />\r\n                    <span>Confirmed: {formatDateTime(request.confirmedDate, request.confirmedTime)}</span>\r\n                  </div>\r\n                )}\r\n                {request.proposedDate && request.proposedTime && request.status === 'proposed_new_time' && (\r\n                  <div className=\"flex items-center text-sm text-blue-600\">\r\n                    <FaCalendarAlt className=\"mr-2\" />\r\n                    <span>Proposed: {formatDateTime(request.proposedDate, request.proposedTime)}</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {request.message && (\r\n                <div className=\"mb-4 p-3 bg-gray-50 rounded-lg\">\r\n                  <p className=\"text-sm text-gray-700\">\r\n                    <strong>Buyer's message:</strong> {request.message}\r\n                  </p>\r\n                </div>\r\n              )}\r\n\r\n              {request.vendorMessage && (\r\n                <div className=\"mb-4 p-3 bg-blue-50 rounded-lg\">\r\n                  <p className=\"text-sm text-gray-700\">\r\n                    <strong>Your response:</strong> {request.vendorMessage}\r\n                  </p>\r\n                </div>\r\n              )}\r\n\r\n              {request.buyerMessage && (\r\n                <div className=\"mb-4 p-3 bg-purple-50 rounded-lg\">\r\n                  <p className=\"text-sm text-gray-700\">\r\n                    <strong>Buyer update:</strong> {request.buyerMessage}\r\n                  </p>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center space-x-4 text-sm text-gray-600\">\r\n                  <span className=\"flex items-center\">\r\n                    <FaPhone className=\"mr-1\" />\r\n                    {request.buyerPhone || 'Not provided'}\r\n                  </span>\r\n                  <span className=\"flex items-center\">\r\n                    <FaEnvelope className=\"mr-1\" />\r\n                    {request.buyerEmail || request.userEmail}\r\n                  </span>\r\n                </div>\r\n\r\n                {request.status === 'pending_vendor' && (\r\n                  <button\r\n                    onClick={() => handleRespondToRequest(request)}\r\n                    className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n                  >\r\n                    Respond\r\n                  </button>\r\n                )}\r\n\r\n                {request.status === 'buyer_rescheduled' && (\r\n                  <div className=\"flex flex-wrap gap-3\">\r\n                    <button\r\n                      onClick={() => handleAcceptBuyerReschedule(request)}\r\n                      className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\r\n                    >\r\n                      Accept New Time\r\n                    </button>\r\n                    <button\r\n                      onClick={() => handleRespondToRequest(request, 'propose')}\r\n                      className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n                    >\r\n                      Propose Another Time\r\n                    </button>\r\n                  </div>\r\n                )}\r\n\r\n                {request.status === 'accepted' && (\r\n                  <div className=\"flex flex-wrap gap-3\">\r\n                    <button\r\n                      onClick={() => handleRespondToRequest(request, 'propose')}\r\n                      className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n                    >\r\n                      Reschedule\r\n                    </button>\r\n                    <button\r\n                      onClick={() => handleVendorCancel(request)}\r\n                      className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\r\n                    >\r\n                      Cancel\r\n                    </button>\r\n                  </div>\r\n                )}\r\n\r\n                {request.status === 'cancelled_by_buyer' && (\r\n                  <span className=\"text-sm text-gray-500\">Buyer cancelled this appointment</span>\r\n                )}\r\n\r\n                {request.status === 'cancelled_by_vendor' && (\r\n                  <span className=\"text-sm text-gray-500\">You cancelled this appointment</span>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Response Modal */}\r\n      {showResponseModal && selectedRequest && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n          <div className=\"bg-white rounded-lg max-w-md w-full p-6\">\r\n            <h3 className=\"text-lg font-semibold mb-4\">Respond to Viewing Request</h3>\r\n            \r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Response Type</label>\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"flex items-center\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      value=\"accept\"\r\n                      checked={responseType === 'accept'}\r\n                      onChange={(e) => setResponseType(e.target.value)}\r\n                      className=\"mr-2\"\r\n                    />\r\n                    Accept as requested\r\n                  </label>\r\n                  <label className=\"flex items-center\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      value=\"propose\"\r\n                      checked={responseType === 'propose'}\r\n                      onChange={(e) => setResponseType(e.target.value)}\r\n                      className=\"mr-2\"\r\n                    />\r\n                    Propose different time\r\n                  </label>\r\n                  <label className=\"flex items-center\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      value=\"decline\"\r\n                      checked={responseType === 'decline'}\r\n                      onChange={(e) => setResponseType(e.target.value)}\r\n                      className=\"mr-2\"\r\n                    />\r\n                    Decline request\r\n                  </label>\r\n                </div>\r\n              </div>\r\n\r\n              {responseType === 'propose' && (\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Proposed Date</label>\r\n                    <input\r\n                      type=\"date\"\r\n                      value={proposedDate}\r\n                      onChange={(e) => setProposedDate(e.target.value)}\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">Proposed Time</label>\r\n                    <input\r\n                      type=\"time\"\r\n                      value={proposedTime}\r\n                      onChange={(e) => setProposedTime(e.target.value)}\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Message (Optional)</label>\r\n                <textarea\r\n                  value={vendorMessage}\r\n                  onChange={(e) => setVendorMessage(e.target.value)}\r\n                  rows={3}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                  placeholder=\"Add a personal message...\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex justify-end space-x-3 mt-6\">\r\n              <button\r\n                onClick={() => setShowResponseModal(false)}\r\n                className=\"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                onClick={handleSubmitResponse}\r\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\"\r\n              >\r\n                Submit Response\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VendorInspectionRequests;\r\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport { \r\n  FaBell, \r\n  FaTimes, \r\n  FaCheck, \r\n  FaArchive, \r\n  FaTrash, \r\n  FaExclamationTriangle,\r\n  FaInfoCircle,\r\n  FaCheckCircle,\r\n  FaTimesCircle,\r\n  FaSpinner,\r\n  FaComments,\r\n  FaStar\r\n} from 'react-icons/fa';\r\nimport { useNotifications } from '../contexts/NotificationContext';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport toast from 'react-hot-toast';\r\nimport { getApiUrl } from '../utils/apiConfig';\r\n\r\nconst NotificationDropdown = () => {\r\n  const {\r\n    notifications,\r\n    unreadCount,\r\n    loading,\r\n    markAsRead,\r\n    markAllAsRead,\r\n    archiveNotification,\r\n    deleteNotification,\r\n    refreshNotifications\r\n  } = useNotifications();\r\n\r\n  const { user } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [actionLoading, setActionLoading] = useState(null);\r\n  const dropdownRef = useRef(null);\r\n  const [showRatingModal, setShowRatingModal] = useState(false);\r\n  const [ratingTarget, setRatingTarget] = useState(null);\r\n  const [ratingStars, setRatingStars] = useState(0);\r\n  const [ratingComment, setRatingComment] = useState('');\r\n\r\n  // Close dropdown when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  const handleMarkAsRead = async (notificationId) => {\r\n    setActionLoading(notificationId);\r\n    try {\r\n      const result = await markAsRead(notificationId);\r\n      if (result.success) {\r\n        toast.success('Notification marked as read');\r\n      } else {\r\n        toast.error(result.message || 'Failed to mark as read');\r\n      }\r\n    } catch (error) {\r\n      toast.error('Error marking notification as read');\r\n    } finally {\r\n      setActionLoading(null);\r\n    }\r\n  };\r\n\r\n  const handleMarkAllAsRead = async () => {\r\n    setActionLoading('all');\r\n    try {\r\n      const result = await markAllAsRead();\r\n      if (result.success) {\r\n        toast.success('All notifications marked as read');\r\n      } else {\r\n        toast.error(result.message || 'Failed to mark all as read');\r\n      }\r\n    } catch (error) {\r\n      toast.error('Error marking all notifications as read');\r\n    } finally {\r\n      setActionLoading(null);\r\n    }\r\n  };\r\n\r\n  const handleArchive = async (notificationId) => {\r\n    setActionLoading(notificationId);\r\n    try {\r\n      const result = await archiveNotification(notificationId);\r\n      if (result.success) {\r\n        toast.success('Notification archived');\r\n      } else {\r\n        toast.error(result.message || 'Failed to archive');\r\n      }\r\n    } catch (error) {\r\n      toast.error('Error archiving notification');\r\n    } finally {\r\n      setActionLoading(null);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (notificationId) => {\r\n    if (window.confirm('Are you sure you want to delete this notification?')) {\r\n      setActionLoading(notificationId);\r\n      try {\r\n        const result = await deleteNotification(notificationId);\r\n        if (result.success) {\r\n          toast.success('Notification deleted');\r\n        } else {\r\n          toast.error(result.message || 'Failed to delete');\r\n        }\r\n      } catch (error) {\r\n        toast.error('Error deleting notification');\r\n      } finally {\r\n        setActionLoading(null);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSendMessage = async (notification) => {\r\n    try {\r\n      const { data } = notification;\r\n      const buyerId = data?.buyerId || user.id;\r\n      const vendorId = data?.vendorId;\r\n      const propertyId = data?.propertyId;\r\n      \r\n      if (!vendorId || !propertyId) {\r\n        toast.error('Unable to start chat: missing vendor or property');\r\n        return;\r\n      }\r\n      \r\n      const payload = {\r\n        buyerId,\r\n        vendorId,\r\n        propertyId,\r\n        starterId: user.id,\r\n        initialMessage: `Hi, I'm interested in this property.`\r\n      };\r\n      \r\n      const res = await fetch(getApiUrl('/chats/start'), {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload)\r\n      });\r\n      \r\n      const json = await res.json();\r\n      if (res.ok) {\r\n        setIsOpen(false);\r\n        navigate('/messages', { state: { chatId: json.chatId } });\r\n        toast.success('Chat started!');\r\n      } else {\r\n        toast.error(json.error || 'Failed to start chat');\r\n      }\r\n    } catch (err) {\r\n      console.error('Error starting chat:', err);\r\n      toast.error('Error starting chat');\r\n    }\r\n  };\r\n\r\n  const getInspectionTargetPath = (notification) => {\r\n    const role = notification?.data?.recipientRoles?.[0] || notification?.data?.role;\r\n    if (role === 'vendor') {\r\n      return '/vendor/inspections';\r\n    }\r\n    if (role === 'buyer') {\r\n      return '/buyer/inspections';\r\n    }\r\n    // fallback by current user role\r\n    if (user?.role === 'vendor' || user?.roles?.includes('vendor')) {\r\n      return '/vendor/inspections';\r\n    }\r\n    return '/buyer/inspections';\r\n  };\r\n\r\n  const handleOpenInspection = (notification) => {\r\n    const path = getInspectionTargetPath(notification);\r\n    const params = new URLSearchParams();\r\n    if (notification?.data?.requestId) {\r\n      params.set('inspectionId', notification.data.requestId);\r\n    }\r\n    if (notification?.data?.propertyTitle) {\r\n      params.set('property', notification.data.propertyTitle);\r\n    }\r\n    const target = params.toString() ? `${path}?${params.toString()}` : path;\r\n    setIsOpen(false);\r\n    navigate(target);\r\n  };\r\n\r\n  const handleRate = (notification) => {\r\n    const { data } = notification;\r\n    const rateeId = data?.vendorId || data?.buyerId;\r\n    const roleOfRatee = data?.vendorId ? 'vendor' : 'buyer';\r\n    setRatingTarget({ \r\n      rateeId, \r\n      roleOfRatee, \r\n      transactionId: data?.transactionId, \r\n      propertyId: data?.propertyId \r\n    });\r\n    setShowRatingModal(true);\r\n    setIsOpen(false);\r\n  };\r\n\r\n  const handleRatingSubmit = async () => {\r\n    if (!ratingTarget || ratingStars === 0) {\r\n      toast.error('Please select a rating');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      const res = await fetch(getApiUrl('/ratings'), {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          raterId: user.id,\r\n          rateeId: ratingTarget.rateeId,\r\n          transactionId: ratingTarget.transactionId,\r\n          propertyId: ratingTarget.propertyId,\r\n          roleOfRatee: ratingTarget.roleOfRatee,\r\n          stars: ratingStars,\r\n          comment: ratingComment\r\n        })\r\n      });\r\n      \r\n      const json = await res.json();\r\n      if (res.ok) {\r\n        toast.success('Rating submitted successfully!');\r\n        setShowRatingModal(false);\r\n        setRatingStars(0);\r\n        setRatingComment('');\r\n        setRatingTarget(null);\r\n      } else {\r\n        toast.error(json.error || 'Failed to submit rating');\r\n      }\r\n    } catch (err) {\r\n      console.error('Error submitting rating:', err);\r\n      toast.error('Error submitting rating');\r\n    }\r\n  };\r\n\r\n  const getNotificationIcon = (type, priority) => {\r\n    const iconClass = `text-lg ${\r\n      priority === 'urgent' ? 'text-red-500' :\r\n      priority === 'high' ? 'text-orange-500' :\r\n      priority === 'medium' ? 'text-blue-500' :\r\n      'text-gray-500'\r\n    }`;\r\n\r\n    switch (type) {\r\n      case 'property_verified':\r\n      case 'property_approval':\r\n        return <FaCheckCircle className={iconClass} />;\r\n      case 'property_rejected':\r\n        return <FaTimesCircle className={iconClass} />;\r\n      case 'property_inquiry':\r\n        return <FaInfoCircle className={iconClass} />;\r\n      case 'escrow_created':\r\n      case 'escrow_payment_received':\r\n      case 'payment_received':\r\n      case 'escrow_completed':\r\n        return <FaCheckCircle className={iconClass} />;\r\n      case 'escrow_disputed':\r\n      case 'escrow_timeout':\r\n        return <FaExclamationTriangle className={iconClass} />;\r\n      case 'user_suspended':\r\n        return <FaTimesCircle className={iconClass} />;\r\n      case 'user_activated':\r\n        return <FaCheckCircle className={iconClass} />;\r\n      default:\r\n        return <FaInfoCircle className={iconClass} />;\r\n    }\r\n  };\r\n\r\n  const getPriorityColor = (priority) => {\r\n    switch (priority) {\r\n      case 'urgent':\r\n        return 'border-l-red-500 bg-red-50';\r\n      case 'high':\r\n        return 'border-l-orange-500 bg-orange-50';\r\n      case 'medium':\r\n        return 'border-l-blue-500 bg-blue-50';\r\n      default:\r\n        return 'border-l-gray-500 bg-gray-50';\r\n    }\r\n  };\r\n\r\n  const formatTimeAgo = (dateString) => {\r\n    const date = new Date(dateString);\r\n    const now = new Date();\r\n    const diffInSeconds = Math.floor((now - date) / 1000);\r\n\r\n    if (diffInSeconds < 60) return 'Just now';\r\n    if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)}m ago`;\r\n    if (diffInSeconds < 86400) return `${Math.floor(diffInSeconds / 3600)}h ago`;\r\n    if (diffInSeconds < 2592000) return `${Math.floor(diffInSeconds / 86400)}d ago`;\r\n    return date.toLocaleDateString();\r\n  };\r\n\r\n  const handleBellClick = () => {\r\n    // Navigate to alerts page when bell icon is clicked\r\n    navigate('/alerts');\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative\" ref={dropdownRef}>\r\n      {/* Notification Bell */}\r\n      <button\r\n        onClick={handleBellClick}\r\n        className=\"relative p-2 text-gray-700 hover:text-brand-orange transition-colors\"\r\n      >\r\n        <FaBell className=\"text-xl\" />\r\n        {unreadCount > 0 && (\r\n          <span className=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center\">\r\n            {unreadCount > 99 ? '99+' : unreadCount}\r\n          </span>\r\n        )}\r\n      </button>\r\n\r\n      {/* Dropdown */}\r\n      {isOpen && (\r\n        <div className=\"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-lg border border-gray-200 z-50\">\r\n          {/* Header */}\r\n          <div className=\"p-4 border-b border-gray-200\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900\">\r\n                Notifications\r\n                {unreadCount > 0 && (\r\n                  <span className=\"ml-2 bg-red-100 text-red-800 text-sm px-2 py-1 rounded-full\">\r\n                    {unreadCount} unread\r\n                  </span>\r\n                )}\r\n              </h3>\r\n              <button\r\n                onClick={() => setIsOpen(false)}\r\n                className=\"text-gray-400 hover:text-gray-600\"\r\n              >\r\n                <FaTimes />\r\n              </button>\r\n            </div>\r\n            \r\n            {unreadCount > 0 && (\r\n              <button\r\n                onClick={handleMarkAllAsRead}\r\n                disabled={actionLoading === 'all'}\r\n                className=\"mt-2 text-sm text-blue-600 hover:text-blue-800 disabled:opacity-50\"\r\n              >\r\n                {actionLoading === 'all' ? (\r\n                  <FaSpinner className=\"animate-spin inline mr-1\" />\r\n                ) : (\r\n                  <FaCheck className=\"inline mr-1\" />\r\n                )}\r\n                Mark all as read\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Notifications List */}\r\n          <div className=\"max-h-96 overflow-y-auto\">\r\n            {loading ? (\r\n              <div className=\"p-8 text-center\">\r\n                <FaSpinner className=\"animate-spin text-2xl text-gray-400 mx-auto mb-2\" />\r\n                <p className=\"text-gray-500\">Loading notifications...</p>\r\n              </div>\r\n            ) : notifications.length === 0 ? (\r\n              <div className=\"p-8 text-center\">\r\n                <FaBell className=\"text-4xl text-gray-300 mx-auto mb-2\" />\r\n                <p className=\"text-gray-500\">No notifications yet</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"divide-y divide-gray-100\">\r\n                {notifications.slice(0, 10).map((notification) => (\r\n                  <div\r\n                    key={notification._id}\r\n                    className={`p-4 border-l-4 ${getPriorityColor(notification.priority)} ${\r\n                      notification.status === 'unread' ? 'bg-blue-50' : 'bg-white'\r\n                    }`}\r\n                  >\r\n                    <div className=\"flex items-start space-x-3\">\r\n                      <div className=\"flex-shrink-0 mt-1\">\r\n                        {getNotificationIcon(notification.type, notification.priority)}\r\n                      </div>\r\n                      \r\n                      <div className=\"flex-1 min-w-0\">\r\n                        <div className=\"flex items-start justify-between\">\r\n                          <div className=\"flex-1\">\r\n                            <p className={`text-sm font-medium ${\r\n                              notification.status === 'unread' ? 'text-gray-900' : 'text-gray-700'\r\n                            }`}>\r\n                              {notification.title}\r\n                            </p>\r\n                            <p className=\"text-sm text-gray-600 mt-1\">\r\n                              {notification.message}\r\n                            </p>\r\n                            <p className=\"text-xs text-gray-500 mt-2\">\r\n                              {formatTimeAgo(notification.createdAt)}\r\n                            </p>\r\n                          </div>\r\n                          \r\n                          {notification.status === 'unread' && (\r\n                            <div className=\"flex-shrink-0 ml-2\">\r\n                              <div className=\"w-2 h-2 bg-blue-500 rounded-full\"></div>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                        \r\n                        {/* Actions */}\r\n                        <div className=\"flex items-center flex-wrap gap-2 mt-3\">\r\n                          {/* Inspection deep links */}\r\n                          {notification.type?.startsWith('inspection_') && (\r\n                            <button\r\n                              onClick={() => handleOpenInspection(notification)}\r\n                              className=\"text-xs text-indigo-600 hover:text-indigo-800 flex items-center\"\r\n                            >\r\n                              <FaInfoCircle className=\"mr-1\" />\r\n                              View inspection\r\n                            </button>\r\n                          )}\r\n\r\n                          {/* Send Message for inquiry/payment */}\r\n                          {(notification.type === 'property_inquiry' || notification.type === 'payment_received') && (\r\n                            <button\r\n                              onClick={() => handleSendMessage(notification)}\r\n                              className=\"text-xs text-green-600 hover:text-green-800 flex items-center\"\r\n                            >\r\n                              <FaComments className=\"mr-1\" />\r\n                              Send Message\r\n                            </button>\r\n                          )}\r\n                          \r\n                          {/* Rate after payment */}\r\n                          {notification.type === 'payment_received' && (\r\n                            <button\r\n                              onClick={() => handleRate(notification)}\r\n                              className=\"text-xs text-yellow-600 hover:text-yellow-800 flex items-center\"\r\n                            >\r\n                              <FaStar className=\"mr-1\" />\r\n                              Rate {notification.data?.vendorId ? 'Vendor' : 'Buyer'}\r\n                            </button>\r\n                          )}\r\n                          \r\n                          {notification.status === 'unread' && (\r\n                            <button\r\n                              onClick={() => handleMarkAsRead(notification._id)}\r\n                              disabled={actionLoading === notification._id}\r\n                              className=\"text-xs text-blue-600 hover:text-blue-800 disabled:opacity-50 flex items-center\"\r\n                            >\r\n                              {actionLoading === notification._id ? (\r\n                                <FaSpinner className=\"animate-spin mr-1\" />\r\n                              ) : (\r\n                                <FaCheck className=\"mr-1\" />\r\n                              )}\r\n                              Mark read\r\n                            </button>\r\n                          )}\r\n                          \r\n                          <button\r\n                            onClick={() => handleArchive(notification._id)}\r\n                            disabled={actionLoading === notification._id}\r\n                            className=\"text-xs text-gray-600 hover:text-gray-800 disabled:opacity-50 flex items-center\"\r\n                          >\r\n                            {actionLoading === notification._id ? (\r\n                              <FaSpinner className=\"animate-spin mr-1\" />\r\n                            ) : (\r\n                              <FaArchive className=\"mr-1\" />\r\n                            )}\r\n                            Archive\r\n                          </button>\r\n                          \r\n                          <button\r\n                            onClick={() => handleDelete(notification._id)}\r\n                            disabled={actionLoading === notification._id}\r\n                            className=\"text-xs text-red-600 hover:text-red-800 disabled:opacity-50 flex items-center\"\r\n                          >\r\n                            {actionLoading === notification._id ? (\r\n                              <FaSpinner className=\"animate-spin mr-1\" />\r\n                            ) : (\r\n                              <FaTrash className=\"mr-1\" />\r\n                            )}\r\n                            Delete\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Footer */}\r\n          {notifications.length > 10 && (\r\n            <div className=\"p-4 border-t border-gray-200\">\r\n              <button\r\n                onClick={refreshNotifications}\r\n                className=\"w-full text-sm text-blue-600 hover:text-blue-800\"\r\n              >\r\n                View all notifications\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Rating Modal */}\r\n      {showRatingModal && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-[60]\">\r\n          <div className=\"bg-white rounded-lg max-w-md w-full p-6 shadow-xl\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">\r\n              Rate {ratingTarget?.roleOfRatee === 'vendor' ? 'Vendor' : 'Buyer'}\r\n            </h3>\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Rating</label>\r\n                <div className=\"flex space-x-1\">\r\n                  {[1, 2, 3, 4, 5].map((star) => (\r\n                    <button\r\n                      key={star}\r\n                      onClick={() => setRatingStars(star)}\r\n                      className={`text-3xl transition-colors ${star <= ratingStars ? 'text-yellow-400' : 'text-gray-300'}`}\r\n                    >\r\n                      <FaStar />\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Comment (Optional)</label>\r\n                <textarea\r\n                  value={ratingComment}\r\n                  onChange={(e) => setRatingComment(e.target.value)}\r\n                  rows={3}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                  placeholder=\"Share your experience...\"\r\n                />\r\n              </div>\r\n              <div className=\"flex justify-end gap-3\">\r\n                <button\r\n                  onClick={() => {\r\n                    setShowRatingModal(false);\r\n                    setRatingStars(0);\r\n                    setRatingComment('');\r\n                    setRatingTarget(null);\r\n                  }}\r\n                  className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  onClick={handleRatingSubmit}\r\n                  disabled={ratingStars === 0}\r\n                  className=\"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                >\r\n                  Submit Rating\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotificationDropdown;\r\n","import React from 'react';\nimport { Line } from 'react-chartjs-2';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend\n} from 'chart.js';\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend\n);\n\nconst VendorViewsChart = ({ properties = [] }) => {\n  // Build simple \"views over properties\" series using current data\n  const labels = properties.map((p, index) => p.title || `Property ${index + 1}`);\n  const viewsData = properties.map(p => p.views || 0);\n\n  const data = {\n    labels,\n    datasets: [\n      {\n        label: 'Views',\n        data: viewsData,\n        borderColor: '#2563EB',\n        backgroundColor: '#2563EB20',\n        borderWidth: 2,\n        tension: 0.3,\n        pointRadius: 4,\n        pointBackgroundColor: '#2563EB'\n      }\n    ]\n  };\n\n  const options = {\n    responsive: true,\n    maintainAspectRatio: false,\n    plugins: {\n      legend: {\n        display: false\n      },\n      tooltip: {\n        callbacks: {\n          label: (context) => `Views: ${context.parsed.y}`\n        }\n      }\n    },\n    scales: {\n      y: {\n        beginAtZero: true,\n        ticks: {\n          precision: 0\n        }\n      }\n    }\n  };\n\n  if (!properties.length) {\n    return (\n      <div className=\"h-64 flex items-center justify-center text-sm text-gray-500\">\n        No property data available yet.\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-64\">\n      <Line data={data} options={options} />\n    </div>\n  );\n};\n\nexport default VendorViewsChart;\n\n\n","import React from 'react';\nimport { Bar } from 'react-chartjs-2';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend\n} from 'chart.js';\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend\n);\n\nconst VendorConversionChart = ({ properties = [] }) => {\n  const labels = properties.map((p, index) => p.title || `Property ${index + 1}`);\n  const conversionRates = properties.map(p => {\n    const views = p.views || 0;\n    const inquiries = p.inquiries || 0;\n    if (!views) return 0;\n    return ((inquiries / views) * 100).toFixed(1);\n  });\n\n  const data = {\n    labels,\n    datasets: [\n      {\n        label: 'Conversion Rate (%)',\n        data: conversionRates,\n        backgroundColor: '#10B98180',\n        borderColor: '#10B981',\n        borderWidth: 1\n      }\n    ]\n  };\n\n  const options = {\n    responsive: true,\n    maintainAspectRatio: false,\n    plugins: {\n      legend: {\n        display: false\n      },\n      tooltip: {\n        callbacks: {\n          label: (context) => `Conversion: ${context.parsed.y}%`\n        }\n      }\n    },\n    scales: {\n      y: {\n        beginAtZero: true,\n        max: 100,\n        ticks: {\n          callback: (val) => `${val}%`\n        }\n      }\n    }\n  };\n\n  if (!properties.length) {\n    return (\n      <div className=\"h-64 flex items-center justify-center text-sm text-gray-500\">\n        No property data available yet.\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-64\">\n      <Bar data={data} options={options} />\n    </div>\n  );\n};\n\nexport default VendorConversionChart;\n\n\n","import React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { useProperty } from '../contexts/PropertyContext';\r\nimport { useNotifications } from '../contexts/NotificationContext';\r\nimport { FaHome, FaChartLine, FaEye, FaHeart, FaEnvelope, FaCalendar, FaDollarSign, FaPlus, FaEdit, FaTrash, FaMapMarkerAlt, FaBed, FaBath, FaRulerCombined, FaPhone, FaCheck, FaTimes, FaExclamationTriangle, FaSpinner } from 'react-icons/fa';\r\nimport PropertyVerification from '../components/PropertyVerificationNew';\r\nimport { getVerificationStatus, isVerificationRequested, isVerificationApproved, getVerificationButtonText, getVerificationButtonClass } from '../utils/verificationStatus';\r\nimport VendorInspectionRequests from '../components/VendorInspectionRequests';\r\nimport NotificationDropdown from '../components/NotificationDropdown';\r\nimport PropertyCardSkeleton from '../components/PropertyCardSkeleton';\r\nimport Breadcrumbs from '../components/Breadcrumbs';\r\nimport VendorViewsChart from '../components/VendorViewsChart';\r\nimport VendorConversionChart from '../components/VendorConversionChart';\r\nimport toast from 'react-hot-toast';\r\nimport { getApiUrl } from '../utils/apiConfig';\r\nimport { authenticatedFetch } from '../utils/authToken';\r\n\r\nconst VendorDashboard = () => {\r\n  const { user } = useAuth();\r\n  const { deleteProperty } = useProperty();\r\n  useNotifications(); // Keep for side effects\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const [activeTab, setActiveTab] = useState(() => {\r\n    // Set initial tab based on current route\r\n    if (location.pathname === '/vendor/properties') {\r\n      return 'properties';\r\n    }\r\n    return 'overview';\r\n  });\r\n\r\n  // Update active tab when route changes\r\n  useEffect(() => {\r\n    if (location.pathname === '/vendor/properties') {\r\n      setActiveTab('properties');\r\n    } else if (location.pathname === '/vendor/dashboard') {\r\n      setActiveTab('overview');\r\n    }\r\n  }, [location.pathname]);\r\n  \r\n  // Determine vendor type\r\n  const isAgent = user?.vendorData?.vendorCategory === 'agent';\r\n  const isPropertyOwner = user?.vendorData?.vendorCategory === 'property_owner';\r\n  const [properties, setProperties] = useState([]);\r\n  const [propertiesLoading, setPropertiesLoading] = useState(true);\r\n  const [analytics, setAnalytics] = useState({\r\n    totalProperties: 0,\r\n    activeListings: 0,\r\n    pendingListings: 0,\r\n    soldProperties: 0,\r\n    totalViews: 0,\r\n    totalInquiries: 0,\r\n    totalRevenue: 0,\r\n    averagePrice: 0,\r\n    conversionRate: 0,\r\n    monthlyViews: 0,\r\n    monthlyInquiries: 0\r\n  });\r\n  const [inquiries, setInquiries] = useState([]);\r\n  const [viewingRequests, setViewingRequests] = useState([]);\r\n  const [showProposalModal, setShowProposalModal] = useState(false);\r\n  const [proposalDate, setProposalDate] = useState('');\r\n  const [proposalTime, setProposalTime] = useState('');\r\n  const [selectedRequestId, setSelectedRequestId] = useState(null);\r\n  const [showVerificationModal, setShowVerificationModal] = useState(false);\r\n  const [selectedProperty, setSelectedProperty] = useState(null);\r\n  const [verificationRequests, setVerificationRequests] = useState([]);\r\n  const [verificationRequestsLoading, setVerificationRequestsLoading] = useState(false);\r\n\r\n\r\n  // Sync tab with route\r\n  useEffect(() => {\r\n    if (location.pathname.startsWith('/vendor/add-property')) {\r\n      setActiveTab('add');\r\n    } else if (location.pathname.startsWith('/vendor/properties')) {\r\n      setActiveTab('properties');\r\n    } else if (location.pathname.startsWith('/vendor/dashboard')) {\r\n      // keep current or default to overview\r\n    }\r\n  }, [location.pathname]);\r\n\r\n  // Fetch vendor's properties from localStorage and backend API\r\n  const fetchVendorProperties = useCallback(async () => {\r\n    if (!user) {\r\n      setProperties([]);\r\n      setPropertiesLoading(false);\r\n      return;\r\n    }\r\n\r\n    setPropertiesLoading(true);\r\n    \r\n    try {\r\n      const userId = user?.id || user?.uid;\r\n      const userEmail = user?.email;\r\n      \r\n      console.log('VendorDashboard: Fetching properties for user:', { userId, userEmail });\r\n      \r\n      if (!userId && !userEmail) {\r\n        console.log('VendorDashboard: No user ID or email found');\r\n        setProperties([]);\r\n        setPropertiesLoading(false);\r\n        return;\r\n      }\r\n\r\n      // Fetch properties from localStorage as primary source\r\n      let allProps = [];\r\n\r\n      try {\r\n        const localProperties = JSON.parse(localStorage.getItem('mockProperties') || '[]');\r\n        const userLocalProps = localProperties.filter(prop => {\r\n          const matchesId = prop.ownerId === userId || prop.ownerId === user?.id;\r\n          const matchesEmail = prop.ownerEmail === userEmail;\r\n          return matchesId || matchesEmail;\r\n        });\r\n        \r\n        if (userLocalProps.length > 0) {\r\n          console.log('VendorDashboard: Found', userLocalProps.length, 'properties in localStorage');\r\n          \r\n          allProps = userLocalProps.map(prop => ({\r\n            ...prop,\r\n            source: 'localStorage',\r\n            createdAt: prop.createdAt ? new Date(prop.createdAt) : new Date()\r\n          }));\r\n        }\r\n      } catch (err) {\r\n        console.warn('VendorDashboard: Error reading localStorage:', err);\r\n      }\r\n\r\n      // Also try to fetch from backend API\r\n      try {\r\n        const response = await authenticatedFetch(getApiUrl('/properties'), {\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          }\r\n        });\r\n        \r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          const apiProps = Array.isArray(data.data) ? data.data : (Array.isArray(data) ? data : []);\r\n          \r\n          console.log('VendorDashboard: Found', apiProps.length, 'properties from backend');\r\n          \r\n          // Merge API properties with localStorage, preferring API data\r\n          apiProps.forEach(prop => {\r\n            const existingIndex = allProps.findIndex(p => p.id === prop.id);\r\n            if (existingIndex >= 0) {\r\n              allProps[existingIndex] = {\r\n                ...allProps[existingIndex],\r\n                ...prop,\r\n                source: 'api',\r\n                createdAt: prop.createdAt ? new Date(prop.createdAt) : new Date()\r\n              };\r\n            } else {\r\n              allProps.push({\r\n                ...prop,\r\n                source: 'api',\r\n                createdAt: prop.createdAt ? new Date(prop.createdAt) : new Date()\r\n              });\r\n            }\r\n          });\r\n        }\r\n      } catch (err) {\r\n        console.warn('VendorDashboard: Error fetching from backend API:', err);\r\n      }\r\n\r\n      // Sort by createdAt descending\r\n      allProps.sort((a, b) => {\r\n        const dateA = a.createdAt instanceof Date ? a.createdAt : new Date(a.createdAt || 0);\r\n        const dateB = b.createdAt instanceof Date ? b.createdAt : new Date(b.createdAt || 0);\r\n        return dateB - dateA;\r\n      });\r\n      \r\n      console.log('VendorDashboard: Total properties found:', allProps.length);\r\n\r\n      // Normalize property data for display\r\n      const normalizedProps = allProps.map(property => {\r\n        const details = property.details || {};\r\n        const images = property.images || [];\r\n        const primaryImage = images.find(img => img.isPrimary)?.url || \r\n                           (typeof images[0] === 'string' ? images[0] : images[0]?.url) ||\r\n                           'https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=400&h=300&fit=crop';\r\n        \r\n        // Determine display status based on approval and listing type\r\n        let displayStatus = 'pending';\r\n        if (property.approvalStatus === 'approved' || property.verificationStatus === 'approved') {\r\n          displayStatus = 'active';\r\n        } else if (property.approvalStatus === 'rejected' || property.verificationStatus === 'rejected') {\r\n          displayStatus = 'rejected';\r\n        } else if (property.approvalStatus === 'pending' || property.verificationStatus === 'pending') {\r\n          displayStatus = 'pending';\r\n        }\r\n\r\n        return {\r\n          ...property,\r\n          image: primaryImage,\r\n          bedrooms: property.bedrooms || details.bedrooms || 0,\r\n          bathrooms: property.bathrooms || details.bathrooms || 0,\r\n          area: property.area || details.sqft || 0,\r\n          location: typeof property.location === 'object' \r\n            ? `${property.location.address || ''}, ${property.location.city || ''}, ${property.location.state || ''}`.replace(/^, |, $/g, '')\r\n            : property.location || 'Location not specified',\r\n          status: displayStatus,\r\n          views: property.views || 0,\r\n          inquiries: property.inquiriesCount || 0,\r\n          favorites: property.favoritesCount || 0,\r\n          dateListed: property.createdAt instanceof Date \r\n            ? property.createdAt.toISOString().split('T')[0]\r\n            : (typeof property.createdAt === 'string' ? property.createdAt.split('T')[0] : 'Unknown'),\r\n          lastUpdated: property.updatedAt?.toDate?.()?.toISOString?.()?.split('T')[0] ||\r\n                      (typeof property.updatedAt === 'string' ? property.updatedAt.split('T')[0] : null)\r\n        };\r\n      });\r\n\r\n      console.log('VendorDashboard: Total properties loaded:', normalizedProps.length);\r\n      setProperties(normalizedProps);\r\n\r\n    } catch (error) {\r\n      console.error('VendorDashboard: Error fetching properties:', error);\r\n      toast.error('Failed to load properties');\r\n    } finally {\r\n      setPropertiesLoading(false);\r\n    }\r\n  }, [user]);\r\n\r\n  // Load verification requests when user or auth state changes\r\n  const fetchVerificationRequests = useCallback(async () => {\r\n    if (!user) {\r\n      setVerificationRequests([]);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setVerificationRequestsLoading(true);\r\n      const response = await authenticatedFetch(getApiUrl('/verification/applications/mine'), {\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      const data = await response.json();\r\n      if (response.ok && data.success) {\r\n        setVerificationRequests(Array.isArray(data.data) ? data.data : []);\r\n      } else {\r\n        console.warn('VendorDashboard: Failed to load verification requests', data?.message);\r\n      }\r\n    } catch (error) {\r\n      console.error('VendorDashboard: Error fetching verification requests', error);\r\n    } finally {\r\n      setVerificationRequestsLoading(false);\r\n    }\r\n  }, [user]);\r\n\r\n  // Load vendor's properties when user changes\r\n  useEffect(() => {\r\n    fetchVendorProperties();\r\n  }, [user, fetchVendorProperties]);\r\n\r\n  useEffect(() => {\r\n    if (!user) {\r\n      setVerificationRequests([]);\r\n      return;\r\n    }\r\n    fetchVerificationRequests();\r\n  }, [user, fetchVerificationRequests]);\r\n\r\n  // Load vendor analytics summary from backend\r\n  useEffect(() => {\r\n    const fetchVendorAnalytics = async () => {\r\n      if (!user) return;\r\n\r\n      try {\r\n        const res = await authenticatedFetch(getApiUrl('/dashboard/vendor'), {\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          }\r\n        });\r\n\r\n        const data = await res.json();\r\n        if (!res.ok || !data.success) {\r\n          console.warn('VendorDashboard: Failed to load backend analytics summary');\r\n          return;\r\n        }\r\n\r\n        const summary = data.data || {};\r\n        setAnalytics(prev => ({\r\n          ...prev,\r\n          totalProperties: summary.totalProperties ?? prev.totalProperties,\r\n          activeListings: summary.activeListings ?? prev.activeListings,\r\n          pendingListings: summary.pendingListings ?? prev.pendingListings,\r\n          soldProperties: summary.soldProperties ?? prev.soldProperties,\r\n          totalViews: summary.totalViews ?? prev.totalViews,\r\n          totalInquiries: summary.totalInquiries ?? prev.totalInquiries,\r\n          totalRevenue: summary.totalRevenue ?? prev.totalRevenue,\r\n          conversionRate: summary.conversionRate ?? prev.conversionRate\r\n        }));\r\n      } catch (error) {\r\n        console.warn('VendorDashboard: Error fetching backend analytics summary', error);\r\n      }\r\n    };\r\n\r\n    fetchVendorAnalytics();\r\n  }, [user]);\r\n\r\n  // Removed: Firestore sync is no longer needed\r\n\r\n  // Load mock inquiries and viewing requests\r\n  useEffect(() => {\r\n    // Mock inquiries data\r\n    setInquiries([\r\n      {\r\n        id: 1,\r\n        propertyId: 1,\r\n        propertyTitle: \"Luxury Apartment in Victoria Island\",\r\n        buyerName: \"John Adebayo\",\r\n        buyerEmail: \"john@email.com\",\r\n        buyerPhone: \"+234 801 234 5678\",\r\n        message: \"I'm interested in viewing this property. When would be a good time?\",\r\n        status: \"new\",\r\n        date: \"2024-01-20\",\r\n        priority: \"high\"\r\n      },\r\n      {\r\n        id: 2,\r\n        propertyId: 2,\r\n        propertyTitle: \"Modern Family House in Lekki\",\r\n        buyerName: \"Sarah Johnson\",\r\n        buyerEmail: \"sarah@email.com\",\r\n        buyerPhone: \"+234 802 345 6789\",\r\n        message: \"Could you provide more details about the neighborhood and amenities?\",\r\n        status: \"contacted\",\r\n        date: \"2024-01-19\",\r\n        priority: \"medium\"\r\n      }\r\n    ]);\r\n\r\n    // Load viewing requests created by buyers from localStorage\r\n    try {\r\n      const stored = JSON.parse(localStorage.getItem('viewingRequests') || '[]');\r\n      setViewingRequests(stored);\r\n    } catch (e) {\r\n      setViewingRequests([]);\r\n    }\r\n  }, []);\r\n\r\n  const handleVerificationCtaClick = (property) => {\r\n    // Check if verification is already requested or approved\r\n    if (isVerificationApproved(property.id)) {\r\n      toast('This property is already verified!', { icon: '' });\r\n      return;\r\n    }\r\n    \r\n    if (isVerificationRequested(property.id)) {\r\n      toast('Verification already requested for this property.', { icon: '' });\r\n      return;\r\n    }\r\n\r\n    setSelectedProperty(property);\r\n    setShowVerificationModal(true);\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'active': return 'bg-green-100 text-green-800';\r\n      case 'pending': return 'bg-yellow-100 text-yellow-800';\r\n      case 'sold': return 'bg-blue-100 text-blue-800';\r\n      case 'inactive': return 'bg-gray-100 text-gray-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const getStatusIcon = (status) => {\r\n    switch (status) {\r\n      case 'active': return <FaCheck className=\"text-green-600\" />;\r\n      case 'pending': return <FaExclamationTriangle className=\"text-yellow-600\" />;\r\n      case 'sold': return <FaDollarSign className=\"text-blue-600\" />;\r\n      case 'inactive': return <FaTimes className=\"text-gray-600\" />;\r\n      default: return <FaTimes className=\"text-gray-600\" />;\r\n    }\r\n  };\r\n\r\n  const getPriorityColor = (priority) => {\r\n    switch (priority) {\r\n      case 'high': return 'bg-red-100 text-red-800';\r\n      case 'medium': return 'bg-yellow-100 text-yellow-800';\r\n      case 'low': return 'bg-green-100 text-green-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const handleVerificationSuccess = (result) => {\r\n    const payload = typeof result === 'string' ? { message: result } : result || {};\r\n    const successMessage = payload.message || 'Verification request submitted successfully!';\r\n    const application = payload.application;\r\n\r\n    toast.success(successMessage);\r\n    setShowVerificationModal(false);\r\n    setSelectedProperty(null);\r\n\r\n    if (application) {\r\n      setVerificationRequests((prev = []) => {\r\n        if (!Array.isArray(prev)) return [application];\r\n        const exists = prev.some((request) => request.id === application.id);\r\n        if (exists) {\r\n          return prev.map((request) => (request.id === application.id ? application : request));\r\n        }\r\n        return [...prev, application];\r\n      });\r\n\r\n      if (application.propertyId) {\r\n        setProperties((prev = []) =>\r\n          prev.map((property) => {\r\n            if (!property) return property;\r\n            const identifiers = [\r\n              property.id,\r\n              property.propertyId,\r\n              property.numericId,\r\n              property.referenceCode\r\n            ]\r\n              .filter((value) => value !== undefined && value !== null)\r\n              .map((value) => value.toString());\r\n\r\n            if (!identifiers.includes(application.propertyId.toString())) {\r\n              return property;\r\n            }\r\n\r\n            return {\r\n              ...property,\r\n              verificationStatus: application.status || 'pending',\r\n              isVerified: application.status === 'approved'\r\n            };\r\n          })\r\n        );\r\n      }\r\n    }\r\n\r\n    // Refresh data from backend to keep everything in sync\r\n    fetchVendorProperties();\r\n    fetchVerificationRequests();\r\n  };\r\n\r\n  const handleRequestVerification = (property) => {\r\n    setSelectedProperty(property);\r\n    setShowVerificationModal(true);\r\n  };\r\n\r\n  const verificationStatusByProperty = useMemo(() => {\r\n    const statusMap = {};\r\n    verificationRequests.forEach((request) => {\r\n      const propertyKey =\r\n        request.propertyId ??\r\n        request.property?.id ??\r\n        request.property?.propertyId ??\r\n        request.property?.propertyRef;\r\n\r\n      if (propertyKey === undefined || propertyKey === null) {\r\n        return;\r\n      }\r\n\r\n      statusMap[propertyKey.toString()] = request.status || 'pending';\r\n    });\r\n    return statusMap;\r\n  }, [verificationRequests]);\r\n\r\n  const getPropertyVerificationState = useCallback(\r\n    (property) => {\r\n      if (!property) return 'not_requested';\r\n      if (property.isVerified) return 'approved';\r\n\r\n      const candidateKeys = [\r\n        property.id,\r\n        property.propertyId,\r\n        property.numericId,\r\n        property.referenceCode\r\n      ]\r\n        .filter((value) => value !== undefined && value !== null)\r\n        .map((value) => value.toString());\r\n\r\n      for (const key of candidateKeys) {\r\n        if (verificationStatusByProperty[key]) {\r\n          return verificationStatusByProperty[key];\r\n        }\r\n      }\r\n\r\n      return property.verificationStatus || 'not_requested';\r\n    },\r\n    [verificationStatusByProperty]\r\n  );\r\n\r\n  const getVerificationBadgeMeta = useCallback((status) => {\r\n    switch (status) {\r\n      case 'approved':\r\n        return { label: ' Verified', badgeClass: 'bg-green-100 text-green-800' };\r\n      case 'pending':\r\n        return { label: 'Verification requested', badgeClass: 'bg-yellow-100 text-yellow-800' };\r\n      case 'rejected':\r\n        return { label: 'Verification rejected', badgeClass: 'bg-red-100 text-red-800' };\r\n      default:\r\n        return { label: 'Not verified', badgeClass: 'bg-gray-100 text-gray-800' };\r\n    }\r\n  }, []);\r\n\r\n  const getVerificationCtaMeta = useCallback((status) => {\r\n    if (status === 'approved') {\r\n      return { show: false };\r\n    }\r\n    if (status === 'pending') {\r\n      return { show: true, label: 'Verification requested', disabled: true };\r\n    }\r\n    if (status === 'rejected') {\r\n      return { show: true, label: 'Resubmit verification', disabled: false };\r\n    }\r\n    return { show: true, label: 'Get Verified', disabled: false };\r\n  }, []);\r\n\r\n  const handleDeleteProperty = async (propertyId) => {\r\n    if (!user) {\r\n      toast.error('Please login to manage your properties');\r\n      navigate('/');\r\n      return;\r\n    }\r\n\r\n    // Use toast for confirmation with a custom action\r\n    const confirmed = window.confirm('Are you sure you want to delete this property? This action cannot be undone.');\r\n    if (!confirmed) return;\r\n\r\n    // Optimistic update - remove from local state immediately\r\n    setProperties((prev) => prev.filter((p) => p.id !== propertyId));\r\n\r\n    // Delete from backend\r\n    await deleteProperty(propertyId);\r\n    \r\n    // Refresh list from Firestore to ensure consistency\r\n    await fetchVendorProperties();\r\n  };\r\n\r\n  const getUserInitials = () => {\r\n    if (user?.displayName) {\r\n      return user.displayName.split(' ').map(n => n[0]).join('').toUpperCase();\r\n    }\r\n    if (user?.firstName && user?.lastName) {\r\n      return `${user.firstName[0]}${user.lastName[0]}`.toUpperCase();\r\n    }\r\n    if (user?.email) {\r\n      return user.email[0].toUpperCase();\r\n    }\r\n    return 'V';\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      {/* Main Content Area */}\r\n      <div className=\"w-full max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\r\n        {/* Header with Profile and Notifications */}\r\n        <div className=\"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between\">\r\n          <div className=\"flex items-center gap-4\">\r\n            {/* Profile Picture */}\r\n            <div className=\"w-12 h-12 bg-gradient-to-r from-brand-blue to-blue-600 rounded-full flex items-center justify-center\">\r\n              {user?.photoURL || user?.avatar ? (\r\n                <img \r\n                  src={user.photoURL || user.avatar} \r\n                  alt=\"User avatar\" \r\n                  className=\"w-12 h-12 rounded-full object-cover\"\r\n                />\r\n              ) : (\r\n                <span className=\"text-lg font-medium text-white\">{getUserInitials()}</span>\r\n              )}\r\n            </div>\r\n            <div>\r\n              <h2 className=\"text-lg font-semibold text-gray-900\">\r\n                {user?.displayName || `${user?.firstName || ''} ${user?.lastName || ''}`.trim() || 'Vendor Account'}\r\n              </h2>\r\n              <p className=\"text-sm text-gray-600\">\r\n                {isAgent ? 'Real Estate Agent' : 'Property Owner'}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Notification Icon */}\r\n          <div className=\"relative md:self-auto self-start\">\r\n            <NotificationDropdown />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Welcome Section */}\r\n        <div className=\"mb-8\" style={{ marginTop: '0px' }}>\r\n          <div className=\"welcome-section\">\r\n            <h1 className=\"text-2xl font-bold mb-2\">Welcome back, {user?.firstName || 'Vendor'}!</h1>\r\n            <p className=\"text-blue-100 mb-4\">\r\n              {isAgent \r\n                ? `Help clients find their dream properties in ${user?.vendorData?.agentLocation || 'your area'}. Manage your listings, track inquiries, and grow your real estate business.`\r\n                : 'Manage your properties, track inquiries, schedule viewings, and grow your real estate portfolio. List, edit, and monitor all your property listings in one place.'\r\n              }\r\n            </p>\r\n\r\n            {/* Vendor ID Card */}\r\n            {user?.vendorCode && (\r\n              <div className=\"bg-white/10 backdrop-blur-sm rounded-lg p-4 mb-4 border border-white/20\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <p className=\"text-blue-200 text-sm\">Your Vendor ID (share with prospects)</p>\r\n                    <p className=\"text-2xl font-mono font-bold text-white tracking-wider\">{user.vendorCode}</p>\r\n                  </div>\r\n                  <button\r\n                    onClick={() => {\r\n                      navigator.clipboard.writeText(user.vendorCode);\r\n                      toast.success('Vendor ID copied to clipboard!');\r\n                    }}\r\n                    className=\"bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2\"\r\n                  >\r\n                    <FaCheck className=\"text-sm\" />\r\n                    Copy\r\n                  </button>\r\n                </div>\r\n                <p className=\"text-blue-200 text-xs mt-2\">\r\n                  Buyers can search for your properties using this ID in the Properties tab.\r\n                </p>\r\n              </div>\r\n            )}\r\n\r\n            {/* Stats Cards */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n              <div \r\n                className=\"stats-card cursor-pointer hover:bg-blue-700 transition-colors\"\r\n                onClick={() => navigate('/vendor/properties')}\r\n                title=\"View your properties\"\r\n              >\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <div className=\"text-2xl font-bold text-white\">{analytics.activeListings || 0}</div>\r\n                    <div className=\"text-blue-200 text-sm\">{isAgent ? 'Managed Properties' : 'Active Listings'}</div>\r\n                  </div>\r\n                  <FaHome className=\"text-blue-300 text-xl\" />\r\n                </div>\r\n              </div>\r\n              \r\n              <div \r\n                className=\"stats-card cursor-pointer hover:bg-blue-700 transition-colors\"\r\n                onClick={() => {\r\n                  setActiveTab('analytics');\r\n                  window.scrollTo({ top: 0, behavior: 'smooth' });\r\n                }}\r\n                title=\"View analytics\"\r\n              >\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <div className=\"text-2xl font-bold text-white\">{analytics.totalViews?.toLocaleString() || 0}</div>\r\n                    <div className=\"text-blue-200 text-sm\">Total Views</div>\r\n                  </div>\r\n                  <FaEye className=\"text-blue-300 text-xl\" />\r\n                </div>\r\n              </div>\r\n              \r\n              <div \r\n                className=\"stats-card cursor-pointer hover:bg-blue-700 transition-colors\"\r\n                onClick={() => {\r\n                  setActiveTab('inquiries');\r\n                  window.scrollTo({ top: 0, behavior: 'smooth' });\r\n                }}\r\n                title=\"View inquiries\"\r\n              >\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <div className=\"text-2xl font-bold text-white\">{analytics.totalInquiries || 0}</div>\r\n                    <div className=\"text-blue-200 text-sm\">Inquiries</div>\r\n                  </div>\r\n                  <FaEnvelope className=\"text-blue-300 text-xl\" />\r\n                </div>\r\n              </div>\r\n              \r\n              <div \r\n                className=\"stats-card cursor-pointer hover:bg-blue-700 transition-colors\"\r\n                onClick={() => {\r\n                  setActiveTab('analytics');\r\n                  window.scrollTo({ top: 0, behavior: 'smooth' });\r\n                }}\r\n                title=\"View analytics\"\r\n              >\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <div className=\"text-2xl font-bold text-white\">{analytics.conversionRate || 0}%</div>\r\n                    <div className=\"text-blue-200 text-sm\">Conversion Rate</div>\r\n                  </div>\r\n                  <FaChartLine className=\"text-blue-300 text-xl\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n      {/* Tab Navigation */}\r\n      <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 mb-6\">\r\n        <div className=\"border-b border-gray-200\">\r\n          <nav\r\n            className=\"flex overflow-x-auto no-scrollbar px-4 sm:px-6\"\r\n            aria-label=\"Vendor dashboard sections\"\r\n          >\r\n            <div className=\"flex min-w-max divide-x divide-transparent\">\r\n            {[\r\n              { id: 'overview', label: 'Overview', icon: FaChartLine },\r\n              { id: 'properties', label: 'My Properties', icon: FaHome },\r\n              { id: 'inquiries', label: 'Inquiries', icon: FaEnvelope },\r\n              { id: 'viewings', label: 'Viewing Requests', icon: FaCalendar },\r\n              { id: 'analytics', label: 'Analytics', icon: FaChartLine }\r\n            ].map((tab) => (\r\n              <button\r\n                key={tab.id}\r\n                onClick={() => {\r\n                  // Stay within the same component; avoid route changes that could reset auth\r\n                  setActiveTab(tab.id);\r\n                }}\r\n                className={`flex items-center space-x-2 py-4 px-3 border-b-2 font-medium text-sm transition-colors ${\r\n                  activeTab === tab.id\r\n                    ? 'border-brand-blue text-brand-blue'\r\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                }`}\r\n              >\r\n                <tab.icon className=\"h-4 w-4\" />\r\n                <span>{tab.label}</span>\r\n              </button>\r\n            ))}\r\n            </div>\r\n          </nav>\r\n        </div>\r\n\r\n        <div className=\"p-6\">\r\n          {/* Overview Tab */}\r\n          {activeTab === 'overview' && (\r\n            <div className=\"space-y-6\">\r\n              {/* Recent Activity */}\r\n              <div>\r\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Recent Activity</h3>\r\n                <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                  <div className=\"space-y-3\">\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <div className=\"p-2 bg-green-100 rounded-full\">\r\n                        <FaEye className=\"h-4 w-4 text-green-600\" />\r\n                      </div>\r\n                      <div className=\"flex-1\">\r\n                        <p className=\"text-sm text-gray-900\">New view on \"Luxury Apartment in Victoria Island\"</p>\r\n                        <p className=\"text-xs text-gray-500\">2 minutes ago</p>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <div className=\"p-2 bg-blue-100 rounded-full\">\r\n                        <FaEnvelope className=\"h-4 w-4 text-blue-600\" />\r\n                      </div>\r\n                      <div className=\"flex-1\">\r\n                        <p className=\"text-sm text-gray-900\">New inquiry from John Adebayo</p>\r\n                        <p className=\"text-xs text-gray-500\">15 minutes ago</p>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <div className=\"p-2 bg-orange-100 rounded-full\">\r\n                        <FaHeart className=\"h-4 w-4 text-orange-600\" />\r\n                      </div>\r\n                      <div className=\"flex-1\">\r\n                        <p className=\"text-sm text-gray-900\">Property added to favorites</p>\r\n                        <p className=\"text-xs text-gray-500\">1 hour ago</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Agent Information (for agents only) */}\r\n              {isAgent && (\r\n                <div className=\"mb-6\">\r\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Agent Profile</h3>\r\n                  <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-6\">\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                      <div>\r\n                        <h4 className=\"font-medium text-gray-900 mb-2\">Business Information</h4>\r\n                        <div className=\"space-y-2 text-sm\">\r\n                          <p><span className=\"font-medium\">Company:</span> {user?.vendorData?.businessName}</p>\r\n                          <p><span className=\"font-medium\">Location:</span> {user?.vendorData?.agentLocation}</p>\r\n                          <p><span className=\"font-medium\">Experience:</span> {user?.vendorData?.experience}</p>\r\n                        </div>\r\n                      </div>\r\n                      <div>\r\n                        <h4 className=\"font-medium text-gray-900 mb-2\">Contact Information</h4>\r\n                        <div className=\"space-y-2 text-sm\">\r\n                          <p><span className=\"font-medium\">Phone:</span> {user?.phone}</p>\r\n                          <p><span className=\"font-medium\">Email:</span> {user?.email}</p>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"mt-4 pt-4 border-t border-blue-200\">\r\n                      <p className=\"text-sm text-blue-700\">\r\n                         <strong>Tip:</strong> Keep your profile updated to attract more clients in {user?.vendorData?.agentLocation}.\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Quick Actions */}\r\n              <div>\r\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Quick Actions</h3>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                        <button \r\n                    onClick={() => {\r\n                      setActiveTab('add');\r\n                      navigate('/vendor/add-property');\r\n                    }}\r\n                      className=\"flex items-center space-x-3 p-4 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors\"\r\n                      title=\"Add new property\"\r\n                  >\r\n                    <div className=\"p-2 bg-blue-100 rounded-full\">\r\n                      <p className=\"font-medium text-gray-900\">Update Listings</p>\r\n                      <p className=\"text-sm text-gray-500\">Edit property details</p>\r\n                    </div>\r\n                  </button>\r\n                  <button\r\n                    className=\"flex items-center space-x-3 p-4 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors\"\r\n                    title=\"View performance analytics\"\r\n                  >\r\n                    <div className=\"p-2 bg-purple-100 rounded-full\">\r\n                      <FaChartLine className=\"h-5 w-5 text-purple-600\" />\r\n                    </div>\r\n                    <div className=\"text-left\">\r\n                      <p className=\"font-medium text-gray-900\">View Analytics</p>\r\n                      <p className=\"text-sm text-gray-500\">Check performance</p>\r\n                    </div>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Properties Tab */}\r\n          {activeTab === 'properties' && (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900\">My Properties</h3>\r\n                <div className=\"flex flex-wrap items-center gap-3\">\r\n                  <button \r\n                    onClick={fetchVendorProperties}\r\n                    className=\"btn-secondary flex items-center space-x-2\"\r\n                    disabled={propertiesLoading}\r\n                  >\r\n                    {propertiesLoading ? (\r\n                      <FaSpinner className=\"h-4 w-4 animate-spin\" />\r\n                    ) : (\r\n                      <span>Refresh</span>\r\n                    )}\r\n                  </button>\r\n                <button \r\n                  onClick={() => navigate('/vendor/add-property')}\r\n                  className=\"btn-primary flex items-center space-x-2\"\r\n                >\r\n                  <FaPlus className=\"h-4 w-4\" />\r\n                  <span>Add Property</span>\r\n                </button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Loading State */}\r\n              {propertiesLoading && (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                  <PropertyCardSkeleton count={6} />\r\n                </div>\r\n              )}\r\n\r\n              {/* No Properties State */}\r\n              {!propertiesLoading && properties.length === 0 && (\r\n                <div className=\"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300\">\r\n                  <FaHome className=\"mx-auto h-12 w-12 text-gray-400\" />\r\n                  <h3 className=\"mt-4 text-lg font-medium text-gray-900\">No properties yet</h3>\r\n                  <p className=\"mt-2 text-sm text-gray-500\">\r\n                    Get started by adding your first property listing.\r\n                  </p>\r\n                  <button \r\n                    onClick={() => navigate('/vendor/add-property')}\r\n                    className=\"mt-4 btn-primary inline-flex items-center space-x-2\"\r\n                  >\r\n                    <FaPlus className=\"h-4 w-4\" />\r\n                    <span>Add Your First Property</span>\r\n                  </button>\r\n                </div>\r\n              )}\r\n\r\n              {/* Properties Grid */}\r\n              {!propertiesLoading && properties.length > 0 && (\r\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6\">\r\n                {properties.map((property) => {\r\n                  const verificationStatus = getVerificationStatus(property.id);\r\n                  const buttonText = getVerificationButtonText(property.id);\r\n                  const buttonClass = getVerificationButtonClass(property.id);\r\n                  const isDisabled = isVerificationApproved(property.id) || isVerificationRequested(property.id);\r\n\r\n                  return (\r\n                  <div key={property.id} className=\"property-card\">\r\n                    <div className=\"relative\">\r\n                      <img\r\n                        src={property.image}\r\n                        alt={property.title}\r\n                        className=\"w-full h-48 object-cover rounded-t-lg\"\r\n                      />\r\n                      <div className=\"absolute top-3 left-3 flex flex-col space-y-1\">\r\n                        <span className={`px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(property.status)}`}>\r\n                          {property.status.charAt(0).toUpperCase() + property.status.slice(1)}\r\n                        </span>\r\n                        {property.source === 'localStorage' && !property.savedToFirestore && (\r\n                          <span className=\"px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800\" title=\"This property is stored locally and may be lost if you clear browser data\">\r\n                             Local Only\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                      <div className=\"absolute top-3 right-3 flex space-x-2\">\r\n                        <button\r\n                          className=\"p-2 bg-white bg-opacity-90 rounded-full hover:bg-opacity-100 transition-all\"\r\n                          title=\"Edit property\"\r\n                          aria-label=\"Edit property\"\r\n                          onClick={() => navigate('/vendor/add-property', { state: { propertyToEdit: property } })}\r\n                        >\r\n                          <FaEdit className=\"h-4 w-4 text-gray-600\" />\r\n                        </button>\r\n                        <button\r\n                          className=\"p-2 bg-white bg-opacity-90 rounded-full hover:bg-opacity-100 transition-all\"\r\n                          title=\"Delete property\"\r\n                          aria-label=\"Delete property\"\r\n                          onClick={() => handleDeleteProperty(property.id)}\r\n                        >\r\n                          <FaTrash className=\"h-4 w-4 text-red-600\" />\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"p-4\">\r\n                      <div className=\"text-2xl font-bold text-gray-900 mb-1\">\r\n                        {(property.price || 0).toLocaleString()}\r\n                      </div>\r\n                      <h3 className=\"font-semibold text-gray-900 mb-1\">{property.title}</h3>\r\n                      <p className=\"text-gray-600 text-sm mb-3 flex items-center\">\r\n                        <FaMapMarkerAlt className=\"h-3 w-3 mr-1\" />\r\n                        {(() => {\r\n                          if (typeof property.location === 'string') {\r\n                            return property.location;\r\n                          }\r\n                          if (property.location && typeof property.location === 'object') {\r\n                            if (property.location.address) {\r\n                              return property.location.address;\r\n                            }\r\n                            const city = property.location.city || '';\r\n                            const state = property.location.state || '';\r\n                            return `${city}${city && state ? ', ' : ''}${state}`.trim();\r\n                          }\r\n                          return 'Location not specified';\r\n                        })()}\r\n                      </p>\r\n                      \r\n                      <div className=\"flex items-center space-x-4 text-sm text-gray-600 mb-4\">\r\n                        <div className=\"flex items-center space-x-1\">\r\n                          <FaBed className=\"h-3 w-3\" />\r\n                          <span>{property.bedrooms || property.details?.bedrooms || 0}</span>\r\n                        </div>\r\n                        <div className=\"flex items-center space-x-1\">\r\n                          <FaBath className=\"h-3 w-3\" />\r\n                          <span>{property.bathrooms || property.details?.bathrooms || 0}</span>\r\n                        </div>\r\n                        <div className=\"flex items-center space-x-1\">\r\n                          <FaRulerCombined className=\"h-3 w-3\" />\r\n                          <span>{property.area || property.details?.sqft || 0}m</span>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"grid grid-cols-3 gap-4 text-center text-sm\">\r\n                        <div>\r\n                          <div className=\"font-semibold text-gray-900\">{property.views}</div>\r\n                          <div className=\"text-gray-500\">Views</div>\r\n                        </div>\r\n                        <div>\r\n                          <div className=\"font-semibold text-gray-900\">{property.inquiries}</div>\r\n                          <div className=\"text-gray-500\">Inquiries</div>\r\n                        </div>\r\n                        <div>\r\n                          <div className=\"font-semibold text-gray-900\">{property.favorites}</div>\r\n                          <div className=\"text-gray-500\">Favorites</div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"mt-4 pt-4 border-t border-gray-200\">\r\n                        <div className=\"flex items-center justify-between text-xs text-gray-500 mb-3\">\r\n                          <span>Listed: {new Date(property.dateListed).toLocaleDateString()}</span>\r\n                          <span>Updated: {new Date(property.lastUpdated).toLocaleDateString()}</span>\r\n                        </div>\r\n                        \r\n                        {/* Verification Status and Button */}\r\n                        <div className=\"flex items-center justify-between\">\r\n                          <div className=\"flex items-center space-x-2\">\r\n                            {verificationStatus && (\r\n                              <span className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                                verificationStatus.status === 'approved' \r\n                                  ? 'bg-green-100 text-green-800'\r\n                                  : verificationStatus.status === 'requested'\r\n                                  ? 'bg-yellow-100 text-yellow-800'\r\n                                  : 'bg-gray-100 text-gray-800'\r\n                              }`}>\r\n                                {verificationStatus.status === 'approved' \r\n                                  ? ' Verified'\r\n                                  : verificationStatus.status === 'requested'\r\n                                  ? ' Verification Requested'\r\n                                  : 'Not Verified'\r\n                                }\r\n                              </span>\r\n                            )}\r\n                          </div>\r\n\r\n                          <button\r\n                            onClick={() => handleVerificationCtaClick(property)}\r\n                            disabled={isDisabled}\r\n                            className={`px-3 py-1 text-xs rounded-md transition-colors ${buttonClass}`}\r\n                          >\r\n                            {buttonText}\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  );\r\n                })}\r\n              </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Inquiries Tab */}\r\n          {activeTab === 'inquiries' && (\r\n            <div className=\"space-y-6\">\r\n              <div className=\"flex flex-col gap-3 md:flex-row md:items-center md:justify-between\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900\">Property Inquiries & Viewings</h3>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  <select className=\"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-full sm:w-auto\">\r\n                    <option>All Inquiries</option>\r\n                    <option>New</option>\r\n                    <option>Contacted</option>\r\n                    <option>Follow-up</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-4\">\r\n                {inquiries.map((inquiry) => (\r\n                  <div key={inquiry.id} className=\"bg-white border border-gray-200 rounded-lg p-6\">\r\n                    <div className=\"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between\">\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"flex items-center space-x-3 mb-2\">\r\n                          <h4 className=\"font-semibold text-gray-900\">{inquiry.buyerName}</h4>\r\n                          <span className={`px-2 py-1 rounded-full text-xs font-medium ${getPriorityColor(inquiry.priority)}`}>\r\n                            {inquiry.priority}\r\n                          </span>\r\n                          <span className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                            inquiry.status === 'new' ? 'bg-blue-100 text-blue-800' : 'bg-green-100 text-green-800'\r\n                          }`}>\r\n                            {inquiry.status}\r\n                          </span>\r\n                        </div>\r\n                        <p className=\"text-sm text-gray-600 mb-2\">Property: {inquiry.propertyTitle}</p>\r\n                        <p className=\"text-gray-700 mb-3\">{inquiry.message}</p>\r\n                        <div className=\"flex items-center space-x-4 text-sm text-gray-500\">\r\n                          <span className=\"flex items-center\">\r\n                            <FaEnvelope className=\"h-3 w-3 mr-1\" />\r\n                            {inquiry.buyerEmail}\r\n                          </span>\r\n                          <span className=\"flex items-center\">\r\n                            <FaPhone className=\"h-3 w-3 mr-1\" />\r\n                            {inquiry.buyerPhone}\r\n                          </span>\r\n                          <span className=\"flex items-center\">\r\n                            <FaCalendar className=\"h-3 w-3 mr-1\" />\r\n                            {new Date(inquiry.date).toLocaleDateString()}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex flex-col sm:flex-row gap-2 sm:ml-4\">\r\n                        <button className=\"px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors text-center\">\r\n                          Reply\r\n                        </button>\r\n                        <button className=\"px-3 py-2 bg-gray-100 text-gray-700 rounded text-sm hover:bg-gray-200 transition-colors text-center\">\r\n                          Mark as Contacted\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              {/* Viewing Requests */}\r\n              <div className=\"pt-4\">\r\n                <h4 className=\"text-md font-semibold text-gray-900 mb-3\">Viewing Requests</h4>\r\n                {viewingRequests.length === 0 ? (\r\n                  <p className=\"text-sm text-gray-500\">No viewing requests yet.</p>\r\n                ) : (\r\n                  <div className=\"space-y-3\">\r\n                    {viewingRequests.map((req) => (\r\n                      <div key={req.id} className=\"bg-white border border-gray-200 rounded-lg p-4\">\r\n                        <div className=\"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between\">\r\n                          <div className=\"flex-1\">\r\n                            <div className=\"flex items-center gap-2 mb-1\">\r\n                              <span className=\"text-sm font-semibold text-gray-900\">{req.userName || 'Buyer'}</span>\r\n                              <span className={`px-2 py-0.5 rounded-full text-xs ${req.status==='confirmed' ? 'bg-green-100 text-green-700' : 'bg-yellow-100 text-yellow-700'}`}>{req.status || 'pending'}</span>\r\n                            </div>\r\n                            <p className=\"text-sm text-gray-700\">Property: {req.propertyTitle}</p>\r\n                            <p className=\"text-xs text-gray-500\">Requested: {new Date(req.requestedAt).toLocaleString()}</p>\r\n                            <div className=\"mt-2 text-sm text-gray-700\">\r\n                              <p>Preferred: {req.preferredDate || ''} {req.preferredTime || ''}</p>\r\n                              {req.vendorProposalDate && (\r\n                                <p className=\"text-blue-700\">\r\n                                  Your proposal: {req.vendorProposalDate} {req.vendorProposalTime || ''}\r\n                                </p>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"flex flex-col sm:flex-row gap-2 sm:ml-4\">\r\n                            <button\r\n                              onClick={() => {\r\n                                setSelectedRequestId(req.id);\r\n                                setProposalDate('');\r\n                                setProposalTime('');\r\n                                setShowProposalModal(true);\r\n                              }}\r\n                              className=\"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors\"\r\n                            >\r\n                              Propose Alternative\r\n                            </button>\r\n                            <button\r\n                              onClick={() => {\r\n                                const updated = viewingRequests.map(r => r.id === req.id ? { ...r, status: 'confirmed' } : r);\r\n                                setViewingRequests(updated);\r\n                                localStorage.setItem('viewingRequests', JSON.stringify(updated));\r\n                              }}\r\n                              className=\"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700 transition-colors\"\r\n                            >\r\n                              Confirm\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Viewing Requests Tab */}\r\n          {activeTab === 'viewings' && (\r\n            <VendorInspectionRequests />\r\n          )}\r\n\r\n          {activeTab === 'analytics' && (\r\n            <div className=\"space-y-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900\">Property Performance Analytics</h3>\r\n              \r\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n                <div className=\"bg-white border border-gray-200 rounded-lg p-6\">\r\n                  <h4 className=\"font-semibold text-gray-900 mb-4\">Views by Property</h4>\r\n                  <VendorViewsChart properties={properties} />\r\n                </div>\r\n                \r\n                <div className=\"bg-white border border-gray-200 rounded-lg p-6\">\r\n                  <h4 className=\"font-semibold text-gray-900 mb-4\">Inquiry Conversion by Property</h4>\r\n                  <VendorConversionChart properties={properties} />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"bg-white border border-gray-200 rounded-lg p-6\">\r\n                <h4 className=\"font-semibold text-gray-900 mb-4\">Property Performance Summary</h4>\r\n                <div className=\"overflow-x-auto\">\r\n                  <table className=\"min-w-full divide-y divide-gray-200\">\r\n                    <thead className=\"bg-gray-50\">\r\n                      <tr>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Property</th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Views</th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Inquiries</th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Favorites</th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Conversion</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                      {properties.map((property) => (\r\n                        <tr key={property.id}>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                            <div className=\"flex items-center\">\r\n                              <img className=\"h-10 w-10 rounded-lg object-cover\" src={property.image} alt={property.title} />\r\n                              <div className=\"ml-4\">\r\n                                <div className=\"text-sm font-medium text-gray-900\">{property.title}</div>\r\n                                <div className=\"text-sm text-gray-500\">{property.location}</div>\r\n                              </div>\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{property.views}</td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{property.inquiries}</td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{property.favorites}</td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                            {((property.inquiries / property.views) * 100).toFixed(1)}%\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      {/* Proposal Modal */}\r\n      {showProposalModal && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n          <div className=\"bg-white rounded-lg max-w-md w-full p-6\">\r\n            <div className=\"flex justify-between items-center mb-4\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900\">Propose Alternative Date</h3>\r\n              <button onClick={() => setShowProposalModal(false)} className=\"text-gray-400 hover:text-gray-600\">\r\n                <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" /></svg>\r\n              </button>\r\n            </div>\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Date</label>\r\n                <input type=\"date\" value={proposalDate} onChange={(e) => setProposalDate(e.target.value)} className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\" />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Time</label>\r\n                <input type=\"time\" value={proposalTime} onChange={(e) => setProposalTime(e.target.value)} className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\" />\r\n              </div>\r\n              <div className=\"flex gap-3 pt-2\">\r\n                <button onClick={() => setShowProposalModal(false)} className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors\">Cancel</button>\r\n                <button\r\n                  onClick={() => {\r\n                    if (!proposalDate || !proposalTime || !selectedRequestId) return;\r\n                    const updated = viewingRequests.map(r => r.id === selectedRequestId ? { ...r, vendorProposalDate: proposalDate, vendorProposalTime: proposalTime, status: 'proposed' } : r);\r\n                    setViewingRequests(updated);\r\n                    localStorage.setItem('viewingRequests', JSON.stringify(updated));\r\n                    setShowProposalModal(false);\r\n                  }}\r\n                  className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors\"\r\n                >\r\n                  Send Proposal\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Property Verification Modal */}\r\n      {showVerificationModal && selectedProperty && (\r\n        <PropertyVerification\r\n          property={selectedProperty}\r\n          onClose={() => {\r\n            setShowVerificationModal(false);\r\n            // Refresh the properties to show updated verification status\r\n            setTimeout(() => {\r\n              window.location.reload();\r\n            }, 1000);\r\n          }}\r\n          onSuccess={() => {\r\n            setShowVerificationModal(false);\r\n            toast.success('Verification request submitted successfully!', { icon: '' });\r\n            // Refresh the properties to show updated verification status\r\n            setTimeout(() => {\r\n              window.location.reload();\r\n            }, 1000);\r\n          }}\r\n        />\r\n      )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VendorDashboard;\r\n","import notificationService from './notificationService';\r\n\r\nconst COLLECTION = 'inspectionRequests';\r\nconst VIEWING_REQUESTS_KEY = 'viewingRequests';\r\nconst INSPECTION_ACTIVITY_KEY = 'inspectionActivityLog';\r\nconst ANALYTICS_EVENT = 'inspectionAnalyticsUpdated';\r\nconst ACTIVITY_EVENT = 'inspectionActivity';\r\n\r\nconst defaultAnalytics = {\r\n  totalRequests: 0,\r\n  pendingResponses: 0,\r\n  confirmed: 0,\r\n  vendorProposals: 0,\r\n  buyerReschedules: 0,\r\n  cancelledByBuyer: 0,\r\n  cancelledByVendor: 0,\r\n  timeline: []\r\n};\r\n\r\nconst safeWindowDispatch = (eventName, detail) => {\r\n  if (typeof window === 'undefined') return;\r\n  if (eventName === 'storage') {\r\n    try {\r\n      window.dispatchEvent(new StorageEvent('storage', detail));\r\n    } catch {\r\n      window.dispatchEvent(new CustomEvent('storage', { detail }));\r\n    }\r\n    return;\r\n  }\r\n  if (typeof window.dispatchEvent === 'function') {\r\n    window.dispatchEvent(new CustomEvent(eventName, { detail }));\r\n  }\r\n};\r\n\r\nconst getStoredRequests = () => {\r\n  try {\r\n    return JSON.parse(localStorage.getItem(VIEWING_REQUESTS_KEY) || '[]');\r\n  } catch {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst saveStoredRequests = (requests) => {\r\n  localStorage.setItem(VIEWING_REQUESTS_KEY, JSON.stringify(requests));\r\n};\r\n\r\nconst getActivityLog = () => {\r\n  try {\r\n    return JSON.parse(localStorage.getItem(INSPECTION_ACTIVITY_KEY) || '[]');\r\n  } catch {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst saveActivityLog = (log) => {\r\n  localStorage.setItem(INSPECTION_ACTIVITY_KEY, JSON.stringify(log));\r\n};\r\n\r\nconst buildActivityPayload = (action, request) => ({\r\n  action,\r\n  requestId: request.id,\r\n  propertyTitle: request.propertyTitle || request.projectTitle || request.projectName || request.title || 'Property',\r\n  buyerId: request.buyerId || request.userId,\r\n  vendorId: request.vendorId,\r\n  vendorEmail: request.vendorEmail,\r\n  status: request.status,\r\n  timestamp: new Date().toISOString()\r\n});\r\n\r\nconst formatDateTimeLabel = (date, time) => {\r\n  if (!date && !time) return '';\r\n  if (!time) return date;\r\n  if (!date) return time;\r\n  return `${date} ${time}`;\r\n};\r\n\r\nconst buildInspectionNotificationEntries = (action, request, payload) => {\r\n  const entries = [];\r\n  const propertyTitle = payload.propertyTitle;\r\n  const buyerName = request.buyerName || request.userName || 'Buyer';\r\n  const vendorName = request.vendorName || request.vendor || request.owner || 'Vendor';\r\n  const preferredLabel = formatDateTimeLabel(request.preferredDate, request.preferredTime);\r\n  const confirmedLabel = formatDateTimeLabel(request.confirmedDate, request.confirmedTime);\r\n  const proposedLabel = formatDateTimeLabel(request.proposedDate, request.proposedTime);\r\n\r\n  const pushForVendor = (title, message) => {\r\n    if (request.vendorId || request.vendorEmail) {\r\n      entries.push({\r\n        recipientId: request.vendorId,\r\n        recipientEmail: request.vendorEmail,\r\n        roles: ['vendor'],\r\n        type: action,\r\n        title,\r\n        message,\r\n        priority: 'medium',\r\n        metadata: { requestId: request.id, propertyTitle, buyerName, vendorName }\r\n      });\r\n    }\r\n  };\r\n\r\n  const pushForBuyer = (title, message) => {\r\n    if (request.buyerId || request.userId || request.buyerEmail || request.userEmail) {\r\n      entries.push({\r\n        recipientId: request.buyerId || request.userId,\r\n        recipientEmail: request.buyerEmail || request.userEmail,\r\n        roles: ['buyer'],\r\n        type: action,\r\n        title,\r\n        message,\r\n        priority: 'medium',\r\n        metadata: { requestId: request.id, propertyTitle, buyerName, vendorName }\r\n      });\r\n    }\r\n  };\r\n\r\n  switch (action) {\r\n    case 'inspection_requested':\r\n      pushForVendor('New inspection request', `${buyerName} requested to view ${propertyTitle} ${preferredLabel ? `on ${preferredLabel}` : ''}`.trim());\r\n      break;\r\n    case 'inspection_confirmed':\r\n      pushForBuyer('Inspection confirmed', `${vendorName} confirmed ${propertyTitle} ${confirmedLabel ? `for ${confirmedLabel}` : ''}`.trim());\r\n      break;\r\n    case 'vendor_proposed_new_time':\r\n      pushForBuyer('Vendor proposed new time', `${vendorName} suggested ${proposedLabel || 'another slot'} for ${propertyTitle}`);\r\n      break;\r\n    case 'buyer_rescheduled':\r\n      pushForVendor('Buyer requested new time', `${buyerName} rescheduled ${propertyTitle} ${preferredLabel ? `to ${preferredLabel}` : ''}`.trim());\r\n      break;\r\n    case 'inspection_cancelled_by_buyer':\r\n      pushForVendor('Inspection cancelled by buyer', `${buyerName} cancelled ${propertyTitle}`);\r\n      break;\r\n    case 'inspection_cancelled_by_vendor':\r\n      pushForBuyer('Inspection cancelled by vendor', `${vendorName} cancelled ${propertyTitle}`);\r\n      break;\r\n    case 'inspection_declined':\r\n      pushForBuyer('Inspection declined', `${vendorName} declined the request for ${propertyTitle}`);\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n\r\n  return entries;\r\n};\r\n\r\nconst persistInspectionNotifications = (entries = []) => {\r\n  if (!entries.length || typeof window === 'undefined') return;\r\n  const payloads = entries\r\n    .filter((entry) => entry.recipientId)\r\n    .map((entry) => ({\r\n      recipientId: entry.recipientId,\r\n      type: entry.type,\r\n      title: entry.title,\r\n      message: entry.message,\r\n      priority: entry.priority || 'medium',\r\n      metadata: {\r\n        ...(entry.metadata || {}),\r\n        source: entry.metadata?.source || 'inspection_client_sync'\r\n      },\r\n      data: entry.metadata || {}\r\n    }));\r\n\r\n  if (!payloads.length) return;\r\n\r\n  notificationService.createInspectionNotifications(payloads)\r\n    .then((result) => {\r\n      if (!result?.success) {\r\n        console.warn('Failed to persist inspection notifications', result);\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error persisting inspection notifications:', error);\r\n    });\r\n};\r\n\r\nconst logInspectionActivity = (action, request) => {\r\n  if (!action || !request) return;\r\n  const payload = buildActivityPayload(action, request);\r\n  const log = getActivityLog();\r\n  log.unshift(payload);\r\n  if (log.length > 200) {\r\n    log.pop();\r\n  }\r\n  saveActivityLog(log);\r\n  safeWindowDispatch(ACTIVITY_EVENT, payload);\r\n  safeWindowDispatch(ANALYTICS_EVENT, payload);\r\n  const notifications = buildInspectionNotificationEntries(action, request, payload);\r\n  if (notifications.length) {\r\n    safeWindowDispatch('inspectionNotification', { action, payload, notifications, request });\r\n    persistInspectionNotifications(notifications);\r\n  }\r\n};\r\n\r\nconst deriveActionFromStatus = (previous, next, updates = {}) => {\r\n  const status = (next?.status || updates.status || '').toLowerCase();\r\n  if (!status && (updates.proposedDate || updates.proposedTime)) {\r\n    return 'vendor_proposed_new_time';\r\n  }\r\n  switch (status) {\r\n    case 'accepted':\r\n    case 'confirmed':\r\n      return 'inspection_confirmed';\r\n    case 'proposed_new_time':\r\n      return 'vendor_proposed_new_time';\r\n    case 'buyer_rescheduled':\r\n      return 'buyer_rescheduled';\r\n    case 'cancelled_by_buyer':\r\n      return 'inspection_cancelled_by_buyer';\r\n    case 'cancelled_by_vendor':\r\n      return 'inspection_cancelled_by_vendor';\r\n    case 'declined':\r\n      return 'inspection_declined';\r\n    default:\r\n      if (previous && previous.status !== next?.status) {\r\n        return `inspection_status_${next?.status || 'updated'}`;\r\n      }\r\n      return null;\r\n  }\r\n};\r\n\r\nconst getDateKey = (isoDate) => {\r\n  const date = isoDate ? new Date(isoDate) : new Date();\r\n  return date.toISOString().slice(0, 10);\r\n};\r\n\r\nconst matchesBuyer = (request, buyerId) => {\r\n  if (!buyerId) return false;\r\n  return request?.buyerId === buyerId || request?.userId === buyerId;\r\n};\r\n\r\nconst matchesVendor = (request, vendorId, vendorEmail) => {\r\n  if (!vendorId && !vendorEmail) return false;\r\n  return (vendorId && request?.vendorId === vendorId) || (vendorEmail && request?.vendorEmail === vendorEmail);\r\n};\r\n\r\nexport const getInspectionAnalytics = ({ role = 'buyer', userId, vendorId, vendorEmail } = {}) => {\r\n  if (typeof window === 'undefined') return { ...defaultAnalytics };\r\n  if (role === 'buyer' && !userId) return { ...defaultAnalytics };\r\n  if (role === 'vendor' && !vendorId && !vendorEmail) return { ...defaultAnalytics };\r\n\r\n  const requests = getStoredRequests();\r\n  const relevant = requests.filter((req) =>\r\n    role === 'buyer' ? matchesBuyer(req, userId) : matchesVendor(req, vendorId || req.vendorId, vendorEmail)\r\n  );\r\n\r\n  const analytics = {\r\n    totalRequests: relevant.length,\r\n    pendingResponses: 0,\r\n    confirmed: 0,\r\n    vendorProposals: 0,\r\n    buyerReschedules: 0,\r\n    cancelledByBuyer: 0,\r\n    cancelledByVendor: 0,\r\n    timeline: []\r\n  };\r\n\r\n  const pendingStatuses = ['pending', 'pending_vendor', 'pending_vendor_confirmation'];\r\n  const log = getActivityLog();\r\n  const activityFilter = (entry) =>\r\n    role === 'buyer' ? entry?.buyerId === userId : matchesVendor(entry, vendorId, vendorEmail);\r\n\r\n  relevant.forEach((req) => {\r\n    const status = (req.status || '').toLowerCase();\r\n    if (pendingStatuses.includes(status)) {\r\n      analytics.pendingResponses += 1;\r\n    }\r\n    if (['accepted', 'confirmed'].includes(status)) {\r\n      analytics.confirmed += 1;\r\n    }\r\n    if (status === 'proposed_new_time') {\r\n      analytics.vendorProposals += 1;\r\n    }\r\n    if (status === 'buyer_rescheduled') {\r\n      analytics.buyerReschedules += 1;\r\n    }\r\n    if (status === 'cancelled_by_buyer') {\r\n      analytics.cancelledByBuyer += 1;\r\n    }\r\n    if (['cancelled_by_vendor', 'declined'].includes(status)) {\r\n      analytics.cancelledByVendor += 1;\r\n    }\r\n  });\r\n\r\n  const lastSevenDays = Array.from({ length: 7 }).map((_, idx) => {\r\n    const date = new Date();\r\n    date.setDate(date.getDate() - (6 - idx));\r\n    const dateKey = date.toISOString().slice(0, 10);\r\n    const dailyCount = log.filter((entry) => activityFilter(entry) && getDateKey(entry.timestamp) === dateKey).length;\r\n    return { date: dateKey, count: dailyCount };\r\n  });\r\n\r\n  analytics.timeline = lastSevenDays;\r\n  return analytics;\r\n};\r\n\r\nexport const createInspectionRequest = async (requestData) => {\r\n  try {\r\n    // Skip API call for now since it's returning 404, go directly to localStorage\r\n    console.log('Using localStorage for creating inspection requests (API unavailable)');\r\n    \r\n    // Fallback to localStorage\r\n    const existing = getStoredRequests();\r\n    const newRequest = {\r\n      id: `viewing-${Date.now()}`,\r\n      ...requestData,\r\n      createdAt: new Date().toISOString(),\r\n      status: 'pending'\r\n    };\r\n    existing.push(newRequest);\r\n    saveStoredRequests(existing);\r\n    \r\n    // Dispatch event to notify Dashboard and other components\r\n    safeWindowDispatch('viewingsUpdated', {\r\n      viewingRequest: newRequest,\r\n      action: 'created'\r\n    });\r\n    \r\n    // Also trigger a storage event for cross-tab synchronization\r\n    safeWindowDispatch('storage', {\r\n      key: VIEWING_REQUESTS_KEY,\r\n      newValue: JSON.stringify(existing)\r\n    });\r\n    logInspectionActivity('inspection_requested', newRequest);\r\n    \r\n    return newRequest;\r\n  } catch (error) {\r\n    console.error('Error creating inspection request:', error);\r\n    // Final fallback to localStorage\r\n    const existing = getStoredRequests();\r\n    const newRequest = {\r\n      id: `viewing-${Date.now()}`,\r\n      ...requestData,\r\n      createdAt: new Date().toISOString(),\r\n      status: 'pending'\r\n    };\r\n    existing.push(newRequest);\r\n    saveStoredRequests(existing);\r\n    \r\n    // Dispatch event to notify Dashboard and other components\r\n    safeWindowDispatch('viewingsUpdated', {\r\n      viewingRequest: newRequest,\r\n      action: 'created'\r\n    });\r\n    \r\n    // Also trigger a storage event for cross-tab synchronization\r\n    safeWindowDispatch('storage', {\r\n      key: VIEWING_REQUESTS_KEY,\r\n      newValue: JSON.stringify(existing)\r\n    });\r\n    logInspectionActivity('inspection_requested', newRequest);\r\n    \r\n    return newRequest;\r\n  }\r\n};\r\n\r\nexport const listInspectionRequestsByVendor = async (vendorId, vendorEmail) => {\r\n  try {\r\n    // Skip API call for now since it's returning 404, go directly to localStorage\r\n    console.log('Using localStorage for inspection requests (API unavailable)');\r\n    \r\n    // Fallback to localStorage\r\n    const local = getStoredRequests();\r\n    \r\n    // Filter by vendorId or vendorEmail\r\n    const filtered = local.filter((r) => \r\n      (vendorId && r.vendorId === vendorId) || \r\n      (vendorEmail && r.vendorEmail === vendorEmail)\r\n    );\r\n    \r\n    // Sort newest first\r\n    filtered.sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));\r\n    \r\n    return filtered;\r\n  } catch (error) {\r\n    console.error('Error listing inspection requests:', error);\r\n    // Final fallback to localStorage\r\n    const local = getStoredRequests();\r\n    const filtered = local.filter((r) => \r\n      (vendorId && r.vendorId === vendorId) || \r\n      (vendorEmail && r.vendorEmail === vendorEmail)\r\n    );\r\n    return filtered.sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));\r\n  }\r\n};\r\n\r\nexport const listInspectionRequestsByBuyer = async (buyerId) => {\r\n  try {\r\n    // Skip API call for now since it's returning 404, go directly to localStorage\r\n    console.log('Using localStorage for buyer inspection requests (API unavailable)');\r\n    \r\n    // Fallback to localStorage\r\n    const local = getStoredRequests();\r\n    const filtered = local.filter((r) => r.buyerId === buyerId);\r\n    return filtered.sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));\r\n  } catch (error) {\r\n    console.error('Error listing buyer inspection requests:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\nexport const updateInspectionRequest = async (requestId, updates) => {\r\n  try {\r\n    // Skip API call for now since it's returning 404, go directly to localStorage\r\n    console.log('Using localStorage for updating inspection requests (API unavailable)');\r\n    \r\n    // Fallback to localStorage\r\n    const all = getStoredRequests();\r\n    let nextRecord = null;\r\n    const updated = all.map((r) => {\r\n      if (r.id === requestId) {\r\n        nextRecord = { ...r, ...updates, updatedAt: new Date().toISOString() };\r\n        return nextRecord;\r\n      }\r\n      return r;\r\n    });\r\n    if (!nextRecord) {\r\n      saveStoredRequests(all);\r\n      return false;\r\n    }\r\n    saveStoredRequests(updated);\r\n    \r\n    // Dispatch event to notify Dashboard and other components when status changes\r\n    safeWindowDispatch('viewingsUpdated', {\r\n      requestId,\r\n      updates,\r\n      action: 'updated'\r\n    });\r\n    \r\n    // Also trigger a storage event for cross-tab synchronization\r\n    safeWindowDispatch('storage', {\r\n      key: VIEWING_REQUESTS_KEY,\r\n      newValue: JSON.stringify(updated)\r\n    });\r\n    const action = deriveActionFromStatus(all.find((r) => r.id === requestId), nextRecord, updates);\r\n    if (action) {\r\n      logInspectionActivity(action, nextRecord);\r\n    }\r\n    \r\n    return true;\r\n  } catch (error) {\r\n    console.error('Error updating inspection request:', error);\r\n    // Final fallback to localStorage\r\n    const all = getStoredRequests();\r\n    let nextRecord = null;\r\n    const updated = all.map((r) => {\r\n      if (r.id === requestId) {\r\n        nextRecord = { ...r, ...updates, updatedAt: new Date().toISOString() };\r\n        return nextRecord;\r\n      }\r\n      return r;\r\n    });\r\n    if (!nextRecord) {\r\n      saveStoredRequests(all);\r\n      return false;\r\n    }\r\n    saveStoredRequests(updated);\r\n    \r\n    // Dispatch event to notify Dashboard and other components when status changes\r\n    safeWindowDispatch('viewingsUpdated', {\r\n      requestId,\r\n      updates,\r\n      action: 'updated'\r\n    });\r\n    \r\n    // Also trigger a storage event for cross-tab synchronization\r\n    safeWindowDispatch('storage', {\r\n      key: VIEWING_REQUESTS_KEY,\r\n      newValue: JSON.stringify(updated)\r\n    });\r\n    const action = deriveActionFromStatus(all.find((r) => r.id === requestId), nextRecord, updates);\r\n    if (action) {\r\n      logInspectionActivity(action, nextRecord);\r\n    }\r\n    \r\n    return true;\r\n  }\r\n};\r\n\r\nexport const syncLocalInspectionRequests = async () => {\r\n  try {\r\n    // Try to sync with API if available\r\n    const local = getStoredRequests();\r\n    console.log('Inspection requests stored locally:', local.length);\r\n    return { synced: local.length };\r\n  } catch (error) {\r\n    console.error('syncLocalInspectionRequests failed:', error);\r\n    return { synced: 0 };\r\n  }\r\n};\r\n\r\nexport default {\r\n  createInspectionRequest,\r\n  listInspectionRequestsByVendor,\r\n  listInspectionRequestsByBuyer,\r\n  updateInspectionRequest,\r\n  syncLocalInspectionRequests,\r\n  getInspectionAnalytics\r\n};","/**\r\n * Authentication Token Utility\r\n * Uses backend-issued tokens only.\r\n */\r\n\r\nconst readToken = () => {\r\n  try {\r\n    return localStorage.getItem('accessToken') || localStorage.getItem('token');\r\n  } catch (error) {\r\n    console.warn('getAuthToken: Could not read token from storage:', error);\r\n    return null;\r\n  }\r\n};\r\n\r\nexport const getAuthToken = async () => readToken();\r\n\r\nexport const getAuthHeaders = async () => {\r\n  const token = await getAuthToken();\r\n  const headers = {\r\n    'Content-Type': 'application/json'\r\n  };\r\n  if (token) {\r\n    headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  return headers;\r\n};\r\n\r\nexport const hasAuthToken = async () => {\r\n  const token = await getAuthToken();\r\n  return Boolean(token);\r\n};\r\n\r\nexport const authenticatedFetch = async (url, options = {}) => {\r\n  const headers = await getAuthHeaders();\r\n  const requestOptions = {\r\n    ...options,\r\n    headers: {\r\n      ...headers,\r\n      ...(options.headers || {})\r\n    }\r\n  };\r\n\r\n  return fetch(url, requestOptions);\r\n};\r\n\r\nexport default {\r\n  getAuthToken,\r\n  getAuthHeaders,\r\n  authenticatedFetch,\r\n  hasAuthToken\r\n};\r\n"],"names":["_ref","items","pathnames","useLocation","pathname","split","filter","x","breadcrumbItems","label","path","map","name","index","routeTo","concat","slice","join","word","charAt","toUpperCase","_jsx","className","children","item","isLast","length","_jsxs","FaHome","_Fragment","Link","to","FaChevronRight","count","skeletons","Array","from","_","i","isOpen","onClose","amount","propertyTitle","onPaymentSuccess","onPaymentError","paymentStep","setPaymentStep","useState","isProcessing","setIsProcessing","paymentComplete","setPaymentComplete","paymentMethod","setPaymentMethod","formData","setFormData","email","cardNumber","expiry","cvv","cardName","accountName","bankName","transferReference","useEffect","formatCardNumber","value","replace","match","formatExpiry","cleaned","handleInputChange","e","target","prev","_objectSpread","handleClose","window","confirm","onClick","FaTimes","size","onSubmit","async","preventDefault","alert","setTimeout","paymentRef","Date","now","reference","method","status","timestamp","toISOString","toLocaleString","type","FaCreditCard","onChange","placeholder","required","maxLength","FaLock","FaCheckCircle","_paymentData$amount","property","onSuccess","user","useAuth","loading","setLoading","error","setError","successMessage","setSuccessMessage","showPaymentModal","setShowPaymentModal","paymentData","setPaymentData","submitting","setSubmitting","config","setConfig","configLoading","setConfigLoading","formValues","setFormValues","propertyName","propertyUrl","propertyLocation","message","preferredBadgeColor","derivedLocation","location","address","city","state","Boolean","generatePropertyUrl","shareUrl","listingUrl","baseUrl","propertyId","id","_id","title","slug","toLowerCase","response","fetch","getApiUrl","data","json","ok","success","Error","_data$data","verificationBadgeColor","err","console","warn","verificationFee","currency","supportedDocuments","processingTime","fetchConfig","useMemo","badgePreviewColor","FaSpinner","FaShieldAlt","token","localStorage","getItem","JSON","parse","log","hasToken","tokenLength","userEmail","userId","uid","applicationData","paymentReference","paymentAmount","paymentStatus","authenticatedFetch","headers","body","stringify","errorData","catch","result","_result$data","verificationStatus","requestedAt","applicationId","setItem","FaExclamationTriangle","readOnly","rows","style","backgroundColor","disabled","SimplePaymentModal","getVerificationStatus","isVerificationRequested","isVerificationApproved","VendorInspectionRequests","requests","setRequests","analytics","setAnalytics","showResponseModal","setShowResponseModal","selectedRequest","setSelectedRequest","responseType","setResponseType","proposedDate","setProposedDate","proposedTime","setProposedTime","vendorMessage","setVendorMessage","loadInspectionRequests","getInspectionAnalytics","role","vendorId","vendorEmail","handleAnalyticsUpdate","event","detail","addEventListener","removeEventListener","listInspectionRequestsByVendor","toast","handleRespondToRequest","request","initialType","arguments","undefined","preferredDate","preferredTime","getStatusBadge","badges","color","text","badge","formatDateTime","date","time","dateObj","toLocaleDateString","toLocaleTimeString","hour","minute","_unused","pendingResponses","confirmed","buyerReschedules","cancelledByBuyer","FaCalendar","projectName","FaMapMarkerAlt","projectLocation","FaUser","buyerName","userName","confirmedDate","confirmedTime","FaCalendarAlt","buyerMessage","FaPhone","buyerPhone","FaEnvelope","buyerEmail","updateInspectionRequest","handleAcceptBuyerReschedule","cancelledAt","handleVendorCancel","checked","updates","NotificationDropdown","notifications","unreadCount","markAsRead","markAllAsRead","archiveNotification","deleteNotification","refreshNotifications","useNotifications","navigate","useNavigate","setIsOpen","actionLoading","setActionLoading","dropdownRef","useRef","showRatingModal","setShowRatingModal","ratingTarget","setRatingTarget","ratingStars","setRatingStars","ratingComment","setRatingComment","handleClickOutside","current","contains","document","handleOpenInspection","notification","_notification$data3","_notification$data4","_notification$data","_notification$data$re","_notification$data2","_user$roles","recipientRoles","roles","includes","getInspectionTargetPath","params","URLSearchParams","requestId","set","toString","getNotificationIcon","priority","iconClass","FaTimesCircle","FaInfoCircle","getPriorityColor","formatTimeAgo","dateString","diffInSeconds","Math","floor","ref","handleBellClick","FaBell","FaCheck","_notification$type","_notification$data5","createdAt","startsWith","buyerId","payload","starterId","initialMessage","res","chatId","handleSendMessage","FaComments","rateeId","roleOfRatee","transactionId","handleRate","FaStar","notificationId","handleMarkAsRead","handleArchive","FaArchive","handleDelete","FaTrash","star","raterId","stars","comment","ChartJS","register","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","properties","labels","p","datasets","views","borderColor","borderWidth","tension","pointRadius","pointBackgroundColor","Line","options","responsive","maintainAspectRatio","plugins","legend","display","tooltip","callbacks","context","parsed","y","scales","beginAtZero","ticks","precision","BarElement","inquiries","toFixed","Bar","max","callback","val","VendorDashboard","_user$vendorData","_user$vendorData2","_user$vendorData3","_analytics$totalViews","_user$vendorData4","_user$vendorData5","_user$vendorData6","_user$vendorData7","deleteProperty","useProperty","activeTab","setActiveTab","isAgent","vendorData","vendorCategory","setProperties","propertiesLoading","setPropertiesLoading","totalProperties","activeListings","pendingListings","soldProperties","totalViews","totalInquiries","totalRevenue","averagePrice","conversionRate","monthlyViews","monthlyInquiries","setInquiries","viewingRequests","setViewingRequests","showProposalModal","setShowProposalModal","proposalDate","setProposalDate","proposalTime","setProposalTime","selectedRequestId","setSelectedRequestId","showVerificationModal","setShowVerificationModal","selectedProperty","setSelectedProperty","verificationRequests","setVerificationRequests","verificationRequestsLoading","setVerificationRequestsLoading","fetchVendorProperties","useCallback","allProps","userLocalProps","prop","matchesId","ownerId","matchesEmail","ownerEmail","source","apiProps","isArray","forEach","existingIndex","findIndex","push","sort","a","b","dateA","normalizedProps","_images$find","_images$","_property$updatedAt","_property$updatedAt$t","_property$updatedAt$t2","_property$updatedAt$t3","_property$updatedAt$t4","details","images","primaryImage","find","img","isPrimary","url","displayStatus","approvalStatus","image","bedrooms","bathrooms","area","sqft","inquiriesCount","favorites","favoritesCount","dateListed","lastUpdated","updatedAt","toDate","call","fetchVerificationRequests","summary","_summary$totalPropert","_summary$activeListin","_summary$pendingListi","_summary$soldProperti","_summary$totalViews","_summary$totalInquiri","_summary$totalRevenue","_summary$conversionRa","fetchVendorAnalytics","stored","getStatusColor","verificationStatusByProperty","statusMap","_ref2","_request$propertyId","_request$property","_request$property2","_request$property3","propertyKey","propertyRef","isVerified","candidateKeys","numericId","referenceCode","key","badgeClass","show","photoURL","avatar","src","alt","displayName","n","firstName","lastName","trim","marginTop","agentLocation","vendorCode","navigator","clipboard","writeText","scrollTo","top","behavior","FaEye","FaChartLine","icon","tab","FaHeart","businessName","experience","phone","FaPlus","PropertyCardSkeleton","_property$details","_property$details2","_property$details3","buttonText","buttonClass","getVerificationButtonClass","isDisabled","savedToFirestore","propertyToEdit","FaEdit","handleDeleteProperty","price","FaBed","FaBath","FaRulerCombined","handleVerificationCtaClick","inquiry","req","vendorProposalDate","vendorProposalTime","updated","r","VendorViewsChart","VendorConversionChart","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","PropertyVerification","reload","VIEWING_REQUESTS_KEY","INSPECTION_ACTIVITY_KEY","defaultAnalytics","totalRequests","vendorProposals","cancelledByVendor","timeline","safeWindowDispatch","eventName","dispatchEvent","CustomEvent","StorageEvent","getStoredRequests","_unused2","saveStoredRequests","getActivityLog","_unused3","formatDateTimeLabel","logInspectionActivity","action","buildActivityPayload","projectTitle","unshift","pop","saveActivityLog","buildInspectionNotificationEntries","entries","vendorName","vendor","owner","preferredLabel","confirmedLabel","proposedLabel","pushForVendor","recipientId","recipientEmail","metadata","pushForBuyer","payloads","entry","_entry$metadata","notificationService","createInspectionNotifications","then","persistInspectionNotifications","deriveActionFromStatus","previous","next","matchesVendor","relevant","matchesBuyer","pendingStatuses","lastSevenDays","idx","setDate","getDate","dateKey","dailyCount","activityFilter","isoDate","createInspectionRequest","existing","newRequest","requestData","viewingRequest","newValue","filtered","all","nextRecord","getAuthToken","readToken","getAuthHeaders","Authorization","hasAuthToken","requestOptions"],"sourceRoot":""}