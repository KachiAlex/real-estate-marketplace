{"version":3,"file":"static/js/897.9ca910a7.chunk.js","mappings":"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","sources":["components/InvestmentChart.js","pages/Investment.js","services/inspectionService.js"],"sourcesContent":["import React from 'react';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n} from 'chart.js';\nimport { Bar } from 'react-chartjs-2';\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend\n);\n\nconst InvestmentChart = ({ data, title = \"Projected Returns\" }) => {\n  // Default chart data if none provided\n  const defaultData = [\n    { quarter: 'Q1 2024', value: 15, amount: 2.1 },\n    { quarter: 'Q2 2024', value: 18, amount: 2.8 },\n    { quarter: 'Q3 2024', value: 22, amount: 3.2 },\n    { quarter: 'Q4 2024', value: 25, amount: 3.8 },\n    { quarter: 'Q1 2025', value: 28, amount: 4.1 },\n    { quarter: 'Q2 2025', value: 30, amount: 4.5 },\n    { quarter: 'Q3 2025', value: 32, amount: 4.8 },\n    { quarter: 'Q4 2025', value: 35, amount: 5.2 }\n  ];\n\n  const chartData = data || defaultData;\n\n  const chartConfig = {\n    labels: chartData.map(item => item.quarter),\n    datasets: [\n      {\n        label: 'Return %',\n        data: chartData.map(item => item.value),\n        backgroundColor: [\n          'rgba(59, 130, 246, 0.8)',   // Blue\n          'rgba(16, 185, 129, 0.8)',   // Green\n          'rgba(245, 158, 11, 0.8)',   // Yellow\n          'rgba(239, 68, 68, 0.8)',    // Red\n          'rgba(139, 92, 246, 0.8)',   // Purple\n          'rgba(236, 72, 153, 0.8)',   // Pink\n          'rgba(14, 165, 233, 0.8)',   // Sky Blue\n          'rgba(34, 197, 94, 0.8)',    // Emerald\n        ],\n        borderColor: [\n          'rgba(59, 130, 246, 1)',\n          'rgba(16, 185, 129, 1)',\n          'rgba(245, 158, 11, 1)',\n          'rgba(239, 68, 68, 1)',\n          'rgba(139, 92, 246, 1)',\n          'rgba(236, 72, 153, 1)',\n          'rgba(14, 165, 233, 1)',\n          'rgba(34, 197, 94, 1)',\n        ],\n        borderWidth: 2,\n        borderRadius: 8,\n        borderSkipped: false,\n      },\n      {\n        label: 'Amount (M)',\n        data: chartData.map(item => item.amount),\n        backgroundColor: 'rgba(156, 163, 175, 0.3)',\n        borderColor: 'rgba(156, 163, 175, 0.8)',\n        borderWidth: 1,\n        borderRadius: 4,\n        borderSkipped: false,\n        yAxisID: 'y1',\n      }\n    ],\n  };\n\n  const options = {\n    responsive: true,\n    maintainAspectRatio: false,\n    plugins: {\n      legend: {\n        position: 'top',\n        labels: {\n          usePointStyle: true,\n          padding: 20,\n          font: {\n            size: 12,\n            weight: '500'\n          }\n        }\n      },\n      title: {\n        display: true,\n        text: title,\n        font: {\n          size: 18,\n          weight: 'bold'\n        },\n        padding: {\n          top: 10,\n          bottom: 30\n        }\n      },\n      tooltip: {\n        backgroundColor: 'rgba(0, 0, 0, 0.8)',\n        titleColor: 'white',\n        bodyColor: 'white',\n        borderColor: 'rgba(255, 255, 255, 0.2)',\n        borderWidth: 1,\n        cornerRadius: 8,\n        displayColors: true,\n        callbacks: {\n          title: function(context) {\n            return context[0].label;\n          },\n          label: function(context) {\n            if (context.datasetIndex === 0) {\n              return `Return: ${context.parsed.y}%`;\n            } else {\n              return `Amount: ${context.parsed.y}M`;\n            }\n          }\n        }\n      }\n    },\n    scales: {\n      y: {\n        type: 'linear',\n        display: true,\n        position: 'left',\n        title: {\n          display: true,\n          text: 'Return %',\n          font: {\n            size: 12,\n            weight: 'bold'\n          }\n        },\n        grid: {\n          color: 'rgba(0, 0, 0, 0.1)',\n        },\n        ticks: {\n          color: 'rgba(0, 0, 0, 0.7)',\n          font: {\n            size: 11\n          }\n        }\n      },\n      y1: {\n        type: 'linear',\n        display: true,\n        position: 'right',\n        title: {\n          display: true,\n          text: 'Amount (M)',\n          font: {\n            size: 12,\n            weight: 'bold'\n          }\n        },\n        grid: {\n          drawOnChartArea: false,\n        },\n        ticks: {\n          color: 'rgba(0, 0, 0, 0.7)',\n          font: {\n            size: 11\n          }\n        }\n      },\n      x: {\n        title: {\n          display: true,\n          text: 'Quarter',\n          font: {\n            size: 12,\n            weight: 'bold'\n          }\n        },\n        grid: {\n          color: 'rgba(0, 0, 0, 0.1)',\n        },\n        ticks: {\n          color: 'rgba(0, 0, 0, 0.7)',\n          font: {\n            size: 11\n          }\n        }\n      }\n    },\n    interaction: {\n      mode: 'index',\n      intersect: false,\n    },\n    animation: {\n      duration: 2000,\n      easing: 'easeInOutQuart',\n    }\n  };\n\n  return (\n    <div className=\"w-full\">\n      <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n        <div className=\"mb-4\">\n          <p className=\"text-gray-600 text-sm\">\n            Based on historical performance and project timeline\n          </p>\n        </div>\n        \n        <div className=\"relative h-80 w-full\">\n          <Bar data={chartConfig} options={options} />\n        </div>\n        \n        <div className=\"mt-4 flex justify-between text-xs text-gray-500\">\n          <span>Q1 2024</span>\n          <span className=\"text-center font-medium\">Investment Growth Timeline</span>\n          <span>Q4 2025</span>\n        </div>\n        \n        <div className=\"mt-4 p-4 bg-blue-50 rounded-lg\">\n          <div className=\"flex items-center space-x-2 text-blue-800\">\n            <div className=\"w-3 h-3 bg-blue-500 rounded-full\"></div>\n            <span className=\"text-sm font-medium\">Projected Growth</span>\n          </div>\n          <p className=\"text-xs text-blue-600 mt-1\">\n            Expected returns based on market analysis and development milestones\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default InvestmentChart;\n","import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useInvestment } from '../contexts/InvestmentContext';\nimport { useEscrow } from '../contexts/EscrowContext';\nimport { FaChartLine, FaDownload, FaBookmark, FaCheck, FaMapMarkerAlt, FaUsers, FaCalendar, FaArrowUp, FaEye, FaShieldAlt, FaFileContract, FaLock, FaBuilding, FaExclamationTriangle, FaClock, FaPhone, FaEnvelope, FaGlobe, FaChevronDown, FaQuestionCircle, FaDollarSign } from 'react-icons/fa';\nimport toast from 'react-hot-toast';\nimport { createInspectionRequest } from '../services/inspectionService';\nimport InvestmentChart from '../components/InvestmentChart';\n\nconst Investment = () => {\n  const navigate = useNavigate();\n  const { user, setAuthRedirect } = useAuth();\n  const { investments, userInvestments, investInOpportunity } = useInvestment();\n  const { createEscrowTransaction } = useEscrow();\n  const [activeTab, setActiveTab] = useState('overview');\n  const [selectedProject, setSelectedProject] = useState(null);\n  const [filterType, setFilterType] = useState('all');\n  const [investmentAmount, setInvestmentAmount] = useState(500000);\n  const [showInvestmentModal, setShowInvestmentModal] = useState(false);\n  const [showDocumentModal, setShowDocumentModal] = useState(false);\n  const [selectedInvestment, setSelectedInvestment] = useState(null);\n  // Payment flow state (modal-based)\n  const [paymentMethod, setPaymentMethod] = useState('flutterwave');\n  const [acceptInvestmentTerms, setAcceptInvestmentTerms] = useState(false);\n  const [isProcessingPayment, setIsProcessingPayment] = useState(false);\n  const [paymentSuccess, setPaymentSuccess] = useState(false);\n  const [paymentReference, setPaymentReference] = useState('');\n  const [createdEscrow, setCreatedEscrow] = useState(null);\n  const [currentStep, setCurrentStep] = useState(1); // 1: Amount, 2: Method & Terms, 3: Review & Pay\n  const [isOpeningModal] = useState(false);\n\n  // Viewing schedule state\n  const [showScheduleModal, setShowScheduleModal] = useState(false);\n  const [scheduleProject, setScheduleProject] = useState(null);\n  const [scheduleDate, setScheduleDate] = useState('');\n  const [scheduleTime, setScheduleTime] = useState('');\n  const [scheduleNote, setScheduleNote] = useState('');\n  const [isSubmittingSchedule, setIsSubmittingSchedule] = useState(false);\n\n  // Vendor inspection requests state\n  const [inspectionRequests, setInspectionRequests] = useState([]);\n  const [isLoadingRequests, setIsLoadingRequests] = useState(false);\n  const [showProposeModal, setShowProposeModal] = useState(false);\n  const [requestToRespond, setRequestToRespond] = useState(null);\n  const [proposalDate, setProposalDate] = useState('');\n  const [proposalTime, setProposalTime] = useState('');\n\n  const resetInvestmentModal = () => {\n    setCurrentStep(1);\n    setPaymentSuccess(false);\n    setIsProcessingPayment(false);\n    setAcceptInvestmentTerms(false);\n    setPaymentMethod('flutterwave');\n    setPaymentReference('');\n    setCreatedEscrow(null);\n    setInvestmentAmount(500000);\n  };\n\n  const handleCloseInvestmentModal = () => {\n    setShowInvestmentModal(false);\n    resetInvestmentModal();\n  };\n\n  // Calculate real investment data from context\n  const calculateInvestmentData = () => {\n    const totalInvested = userInvestments?.reduce((sum, inv) => sum + inv.amount, 0) || 0;\n    const totalEarnings = userInvestments?.reduce((sum, inv) => sum + (inv.currentValue - inv.amount), 0) || 0;\n    const activeInvestments = userInvestments?.filter(inv => inv.status === 'active').length || 0;\n    const projectedReturns = userInvestments?.reduce((sum, inv) => {\n      const opportunity = investments?.find(opp => opp.id === inv.investmentId);\n      return sum + (inv.amount * (opportunity?.expectedReturn || 0) / 100);\n    }, 0) || 0;\n\n    return {\n      totalInvested,\n      totalEarnings,\n      activeInvestments,\n      projectedReturns,\n    portfolio: {\n        investedCapital: totalInvested,\n        currentValue: totalInvested + totalEarnings,\n        totalProjects: activeInvestments,\n        availableForWithdrawal: totalEarnings * 0.1 // 10% of earnings available for withdrawal\n      }\n    };\n  };\n\n  const investmentData = calculateInvestmentData();\n\n  const [wishlistItems, setWishlistItems] = useState([]);\n  const [projects, setProjects] = useState([\n    {\n      id: 1,\n      name: \"Azure Heights Complex\",\n      location: \"Lekki, Lagos\",\n      type: \"Development\",\n      description: \"Luxury apartment complex\",\n      minInvestment: 100000,\n      expectedROI: 18.5,\n      lockPeriod: 24,\n      investors: 142,\n      image: \"https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=400&h=300&fit=crop\",\n      status: \"verified\",\n      progress: \"Construction\",\n      completionDate: \"Dec 2027\"\n    },\n    {\n      id: 2,\n      name: \"Green Valley Estate\",\n      location: \"Abuja, FCT\",\n      type: \"Land\",\n      description: \"Premium land plots\",\n      minInvestment: 250000,\n      expectedROI: 22,\n      lockPeriod: 12,\n      investors: 86,\n      image: \"https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=400&h=300&fit=crop\",\n      status: \"verified\",\n      progress: \"Development\",\n      completionDate: \"Jun 2026\"\n    },\n    {\n      id: 3,\n      name: \"Riverside Commercial Hub\",\n      location: \"Port Harcourt\",\n      type: \"Development\",\n      description: \"Mixed-use commercial complex\",\n      minInvestment: 500000,\n      expectedROI: 20.5,\n      lockPeriod: 36,\n      investors: 211,\n      image: \"https://images.unsplash.com/photo-1600566753190-17f0baa2a6c3?w=400&h=300&fit=crop\",\n      status: \"verified\",\n      progress: \"Construction\",\n      completionDate: \"Mar 2028\"\n    },\n    {\n      id: 4,\n      name: \"Seaside Haven Plots\",\n      location: \"Calabar\",\n      type: \"Land\",\n      description: \"Premium beachfront land plots\",\n      minInvestment: 150000,\n      expectedROI: 24,\n      lockPeriod: 18,\n      investors: 68,\n      image: \"https://images.unsplash.com/photo-1613490493576-7fde63acd811?w=400&h=300&fit=crop\",\n      status: \"verified\",\n      progress: \"Start\",\n      completionDate: \"Sep 2026\"\n    },\n    {\n      id: 5,\n      name: \"Tranquil Gardens Estate\",\n      location: \"Ibadan\",\n      type: \"Development\",\n      description: \"Planned residential community\",\n      minInvestment: 200000,\n      expectedROI: 17,\n      lockPeriod: 30,\n      investors: 95,\n      image: \"https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=400&h=300&fit=crop\",\n      status: \"verified\",\n      progress: \"Construction\",\n      completionDate: \"Aug 2027\"\n    },\n    {\n      id: 6,\n      name: \"Green Harvest Farms\",\n      location: \"Kaduna\",\n      type: \"Land\",\n      description: \"Agricultural land\",\n      minInvestment: 100000,\n      expectedROI: 16,\n      lockPeriod: 12,\n      investors: 124,\n      image: \"https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=400&h=300&fit=crop\",\n      status: \"verified\",\n      progress: \"Start\",\n      completionDate: \"Dec 2025\"\n    }\n  ]);\n\n  // Set default selected project\n  useEffect(() => {\n    if (projects.length > 0 && !selectedProject) {\n      setSelectedProject(projects[0]);\n    }\n  }, [projects, selectedProject]);\n\n  // Set 'Investment Details' as default active tab when project is selected\n  useEffect(() => {\n    if (selectedProject && activeTab === 'overview') {\n      setActiveTab('investmentdetails');\n    }\n  }, [selectedProject, activeTab]);\n\n  // Load wishlist items when user changes\n  useEffect(() => {\n    if (user) {\n      const wishlistKey = `investment_wishlist_${user.id}`;\n      const existingWishlist = JSON.parse(localStorage.getItem(wishlistKey) || '[]');\n      setWishlistItems(existingWishlist);\n    } else {\n      setWishlistItems([]);\n    }\n  }, [user]);\n\n  // Check if a project is in wishlist\n  const isInWishlist = (projectId) => {\n    return wishlistItems.some(item => item.id === projectId);\n  };\n\n  const filteredProjects = projects.filter(project => {\n    if (filterType === 'all') return true;\n    if (filterType === 'land') return project.type === 'Land';\n    if (filterType === 'development') return project.type === 'Development';\n    if (filterType === 'highest-roi') return project.expectedROI >= 20;\n    return true;\n  });\n\n  const calculateOwnership = (amount) => {\n    // Mock calculation - in real app this would be based on project valuation\n    return (amount / 80000000 * 100).toFixed(3);\n  };\n\n  const handleInvestNow = (project) => {\n    console.log('Invest Now clicked, project:', project, 'user:', user);\n    \n    if (!user) {\n      setAuthRedirect('/investment');\n      toast.error('Please login to invest');\n      navigate('/');\n      return;\n    }\n    \n    // Ensure we have a project to work with\n    const projectToUse = project || selectedProject || projects[0];\n    if (!projectToUse) {\n      toast.error('No investment project available');\n      return;\n    }\n\n    // Store project data temporarily for EscrowPaymentFlow to use\n    // This is needed because mock projects aren't in the investment context\n    localStorage.setItem('pendingInvestmentProject', JSON.stringify(projectToUse));\n\n    // Navigate to escrow payment flow for investment\n    const redirectUrl = `/escrow/create?investmentId=${projectToUse.id}&type=investment`;\n    navigate(redirectUrl);\n  };\n\n  const handleConfirmInvestment = async () => {\n    if (!selectedProject || !investmentAmount) {\n      toast.error('Please enter a valid investment amount');\n      return;\n    }\n\n    if (investmentAmount < selectedProject.minInvestment) {\n      toast.error(`Minimum investment is ${selectedProject.minInvestment.toLocaleString()}`);\n      return;\n    }\n\n    if (!acceptInvestmentTerms) {\n      toast.error('Please accept the investment terms to proceed');\n      return;\n    }\n\n    try {\n      setIsProcessingPayment(true);\n\n      // Create investment escrow transaction using EscrowContext\n      const vendorId = selectedProject.sponsorId || selectedProject.vendorId || null;\n      const escrowResult = await createEscrowTransaction(\n        selectedProject.id,\n        investmentAmount,\n        user.uid || user.id,\n        vendorId,\n        {\n          type: 'investment',\n          investmentData: {\n            ...selectedProject,\n            title: selectedProject.name || selectedProject.title,\n            investmentTitle: selectedProject.name || selectedProject.title,\n            expectedROI: selectedProject.expectedROI || selectedProject.expectedReturn || 0,\n            expectedReturn: selectedProject.expectedReturn || selectedProject.expectedROI || 0,\n            lockPeriod: selectedProject.lockPeriod || selectedProject.termMonths || selectedProject.duration || 0,\n            termMonths: selectedProject.termMonths || selectedProject.duration || selectedProject.lockPeriod || 0,\n            duration: selectedProject.duration || selectedProject.termMonths || selectedProject.lockPeriod || 0,\n            vendorId: vendorId,\n            sponsorId: vendorId,\n            sponsor: selectedProject.sponsor,\n            vendor: selectedProject.vendor || selectedProject.sponsor,\n            propertyLocation: selectedProject.location || selectedProject.propertyLocation || 'N/A'\n          }\n        }\n      );\n\n      if (!escrowResult.success) {\n        toast.error(escrowResult.error || 'Failed to create escrow transaction');\n        setIsProcessingPayment(false);\n        return;\n      }\n\n      const escrowId = escrowResult.id || escrowResult.data?.id;\n      if (!escrowId) {\n        toast.error('Failed to get escrow transaction ID');\n        setIsProcessingPayment(false);\n        return;\n      }\n\n      // Simulate payment processing\n      const reference = `FLW-${Math.floor(100000 + Math.random()*900000)}`;\n      await new Promise(resolve => setTimeout(resolve, 1500));\n\n      // Update escrow status to payment_received\n      const existingEscrows = JSON.parse(localStorage.getItem('escrowTransactions') || '[]');\n      const updatedEscrows = existingEscrows.map(t => \n        t.id === escrowId \n          ? { \n              ...t, \n              status: 'payment_received',\n              payment: {\n                method: paymentMethod,\n                reference,\n                paidAt: new Date().toISOString()\n              },\n              fundedAt: new Date().toISOString()\n            }\n          : t\n      );\n      localStorage.setItem('escrowTransactions', JSON.stringify(updatedEscrows));\n\n      // Record user investment in context (mock)\n      await investInOpportunity(selectedProject.id, investmentAmount);\n\n      setPaymentReference(reference);\n      setCreatedEscrow(escrowResult.data);\n      setPaymentSuccess(true);\n      toast.success('Payment successful! Funds held in escrow pending vendor document submission.');\n      \n      // Navigate to escrow transaction page after a delay\n      setTimeout(() => {\n        setShowInvestmentModal(false);\n        resetInvestmentModal();\n        setSelectedProject(null);\n        navigate(`/escrow/${escrowId}`);\n      }, 2000);\n    } catch (error) {\n      console.error('Investment error:', error);\n      toast.error('Failed to process investment');\n    } finally {\n      setIsProcessingPayment(false);\n    }\n  };\n\n  const handleViewDocuments = (investment) => {\n    setSelectedInvestment(investment);\n    setShowDocumentModal(true);\n  };\n\n  const handleAddToWishlist = (project) => {\n    if (!user) {\n      setAuthRedirect('/investment');\n      toast.error('Please login to add to wishlist');\n      navigate('/');\n      return;\n    }\n\n    if (!project) {\n      toast.error('No project selected');\n      return;\n    }\n\n    try {\n      // Store investment-specific data in localStorage for display purposes\n      const wishlistKey = `investment_wishlist_${user.id}`;\n      const existingWishlist = JSON.parse(localStorage.getItem(wishlistKey) || '[]');\n      \n      // Check if already in wishlist\n      const isAlreadyWishlisted = existingWishlist.some(item => item.id === project.id);\n      \n      if (isAlreadyWishlisted) {\n        // Remove from wishlist\n        const updatedWishlist = existingWishlist.filter(item => item.id !== project.id);\n        localStorage.setItem(wishlistKey, JSON.stringify(updatedWishlist));\n        setWishlistItems(updatedWishlist);\n        toast.success(`Removed \"${project.name}\" from your wishlist`);\n      } else {\n        // Add to wishlist\n        const wishlistItem = {\n          id: project.id,\n          name: project.name,\n          location: project.location,\n          expectedROI: project.expectedROI,\n          minInvestment: project.minInvestment,\n          lockPeriod: project.lockPeriod,\n          image: project.image,\n          addedAt: new Date().toISOString()\n        };\n        \n        existingWishlist.push(wishlistItem);\n        localStorage.setItem(wishlistKey, JSON.stringify(existingWishlist));\n        setWishlistItems(existingWishlist);\n        toast.success(`Added \"${project.name}\" to your wishlist!`);\n      }\n    } catch (error) {\n      console.error('Error updating wishlist:', error);\n      toast.error('Failed to update wishlist');\n    }\n  };\n\n  const handleConfirmSchedule = async () => {\n    if (!scheduleDate || !scheduleTime) {\n      toast.error('Please select a preferred date and time');\n      return;\n    }\n\n    const projectToUse = selectedProject || projects[0];\n    if (!projectToUse) {\n      toast.error('No project selected');\n      return;\n    }\n\n    const viewingRequest = {\n      id: `viewing-${Date.now()}`,\n      projectId: projectToUse.id,\n      projectName: projectToUse.name,\n      projectLocation: projectToUse.location,\n      userId: user.id,\n      userName: `${user.firstName} ${user.lastName}`,\n      userEmail: user.email,\n      status: 'pending_vendor',\n      requestedAt: new Date().toISOString(),\n      preferredDate: scheduleDate,\n      preferredTime: scheduleTime,\n      message: scheduleNote || '',\n      // Map to inspection request fields expected by vendor screen\n      vendor: projectToUse.sponsor?.name || 'Investment Sponsor',\n      vendorId: projectToUse.sponsor?.id || projectToUse.vendorId || 'mock-vendor-id',\n      vendorEmail: projectToUse.sponsor?.email || projectToUse.vendorEmail || user?.email,\n      buyerId: user.id,\n      buyerName: `${user.firstName} ${user.lastName}`,\n      buyerEmail: user.email,\n    };\n    try {\n      await createInspectionRequest(viewingRequest);\n      setShowScheduleModal(false);\n      setScheduleDate('');\n      setScheduleTime('');\n      setScheduleNote('');\n      toast.success('Viewing scheduled! The vendor has been notified.');\n    } catch (e) {\n      toast.error('Failed to create request');\n    }\n  };\n\n  // Load vendor inspection requests for the selected project\n  const loadInspectionRequests = () => {\n    try {\n      setIsLoadingRequests(true);\n      const all = JSON.parse(localStorage.getItem('viewingRequests') || '[]');\n      const filtered = all.filter((r) => {\n        const matchesProject = selectedProject ? r.projectId === selectedProject.id : true;\n        const matchesVendor = true; // In real app, filter by vendor account\n        return matchesProject && matchesVendor;\n      });\n      // Sort newest first\n      filtered.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\n      setInspectionRequests(filtered);\n    } catch (e) {\n      console.error('Failed to load inspection requests', e);\n    } finally {\n      setIsLoadingRequests(false);\n    }\n  };\n\n  useEffect(() => {\n    // Refresh when switching tabs or project changes\n    loadInspectionRequests();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedProject]);\n\n  const updateRequestsStorage = (updatedList) => {\n    localStorage.setItem('viewingRequests', JSON.stringify(updatedList));\n    setInspectionRequests(updatedList.filter((r) => (selectedProject ? r.projectId === selectedProject.id : true))\n      .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt)));\n  };\n\n  const acceptViewingRequest = (request) => {\n    const all = JSON.parse(localStorage.getItem('viewingRequests') || '[]');\n    const updated = all.map((r) => {\n      if (r.id === request.id) {\n        const acceptedAt = new Date().toISOString();\n        return {\n          ...r,\n          status: 'accepted',\n          acceptedAt,\n          confirmedDate: r.preferredDate,\n          confirmedTime: r.preferredTime,\n          history: [...(r.history || []), { action: 'accepted', at: acceptedAt }]\n        };\n      }\n      return r;\n    });\n    updateRequestsStorage(updated);\n    toast.success('Viewing request accepted');\n  };\n\n  const declineViewingRequest = (request) => {\n    const all = JSON.parse(localStorage.getItem('viewingRequests') || '[]');\n    const updated = all.map((r) => {\n      if (r.id === request.id) {\n        const declinedAt = new Date().toISOString();\n        return {\n          ...r,\n          status: 'declined',\n          declinedAt,\n          history: [...(r.history || []), { action: 'declined', at: declinedAt }]\n        };\n      }\n      return r;\n    });\n    updateRequestsStorage(updated);\n    toast.success('Viewing request declined');\n  };\n\n  const openProposeTime = (request) => {\n    setRequestToRespond(request);\n    setProposalDate('');\n    setProposalTime('');\n    setShowProposeModal(true);\n  };\n\n  const submitProposedTime = () => {\n    if (!proposalDate || !proposalTime || !requestToRespond) {\n      toast.error('Provide a proposed date and time');\n      return;\n    }\n    const all = JSON.parse(localStorage.getItem('viewingRequests') || '[]');\n    const updated = all.map((r) => {\n      if (r.id === requestToRespond.id) {\n        const proposedAt = new Date().toISOString();\n        return {\n          ...r,\n          status: 'proposed_new_time',\n          proposedDate: proposalDate,\n          proposedTime: proposalTime,\n          history: [...(r.history || []), { action: 'proposed_new_time', at: proposedAt, date: proposalDate, time: proposalTime }]\n        };\n      }\n      return r;\n    });\n    updateRequestsStorage(updated);\n    setShowProposeModal(false);\n    setRequestToRespond(null);\n    toast.success('Proposed a new time to the buyer');\n  };\n\n  const handleDownloadDocument = (docType, investment = selectedInvestment) => {\n    // Generate and download investment documents\n    const docContent = generateInvestmentDocument(docType, investment);\n    downloadDocument(docContent, `${docType}-${investment?.id || 'investment'}.html`);\n    toast.success(`${docType} document downloaded successfully!`);\n  };\n\n  const generateInvestmentDocument = (docType, investment) => {\n    const templates = {\n      'Investment Agreement': `\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <title>Investment Agreement - ${investment?.investmentTitle}</title>\n          <style>\n            body { font-family: Arial, sans-serif; line-height: 1.6; margin: 40px; }\n            .header { text-align: center; border-bottom: 2px solid #f97316; padding-bottom: 20px; margin-bottom: 30px; }\n            .section { margin-bottom: 25px; }\n            .highlight { background: #fef3c7; padding: 10px; border-left: 4px solid #f59e0b; }\n          </style>\n        </head>\n        <body>\n          <div class=\"header\">\n            <h1>PropertyArk</h1>\n            <h2>INVESTMENT AGREEMENT</h2>\n            <p>Agreement ID: ${investment?.id}</p>\n          </div>\n          \n          <div class=\"section\">\n            <h3>1. INVESTMENT DETAILS</h3>\n            <p><strong>Investment Project:</strong> ${investment?.investmentTitle}</p>\n            <p><strong>Investment Amount:</strong> ${investment?.amount?.toLocaleString()}</p>\n            <p><strong>Expected ROI:</strong> ${investment?.expectedROI}% per annum</p>\n            <p><strong>Lock Period:</strong> ${investment?.lockPeriod} months</p>\n            <p><strong>Investor:</strong> ${investment?.investor}</p>\n            <p><strong>Vendor/Sponsor:</strong> ${investment?.vendor}</p>\n          </div>\n\n          <div class=\"section\">\n            <h3>2. ESCROW PROTECTION</h3>\n            <div class=\"highlight\">\n              <p><strong>FUND SECURITY:</strong> Your investment of ${investment?.amount?.toLocaleString()} is held in escrow until the vendor provides original property documents and deed as collateral.</p>\n            </div>\n            <p><strong>Collateral Property:</strong> ${investment?.collateralProperty}</p>\n            <p><strong>Document Status:</strong> ${investment?.documentStatus}</p>\n          </div>\n\n          <div class=\"section\">\n            <h3>3. VENDOR OBLIGATIONS</h3>\n            <ul>\n              <li>Provide original property title documents</li>\n              <li>Submit property deed as investment collateral</li>\n              <li>Maintain property insurance and legal compliance</li>\n              <li>Provide quarterly investment reports</li>\n              <li>Ensure timely dividend payments</li>\n            </ul>\n          </div>\n\n          <div class=\"section\">\n            <h3>4. INVESTOR RIGHTS</h3>\n            <ul>\n              <li>Funds protected in escrow until document verification</li>\n              <li>Legal claim on collateral property if vendor defaults</li>\n              <li>Quarterly dividend payments as per agreed ROI</li>\n              <li>Access to investment performance reports</li>\n              <li>Right to withdraw after lock period</li>\n            </ul>\n          </div>\n\n          <div class=\"section\">\n            <h3>5. TERMS & CONDITIONS</h3>\n            <p>This agreement is governed by Nigerian law. Investment funds are held in escrow pending vendor document submission. Release of funds occurs only after verification of original property documents byPropertyArklegal team.</p>\n          </div>\n\n          <div class=\"section\">\n            <p><strong>Date:</strong> ${new Date().toLocaleDateString()}</p>\n            <p><strong>Digital Signature:</strong> Electronically signed viaPropertyArkplatform</p>\n          </div>\n        </body>\n        </html>\n      `,\n      'Escrow Terms': `\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <title>Escrow Terms - ${investment?.investmentTitle}</title>\n          <style>\n            body { font-family: Arial, sans-serif; line-height: 1.6; margin: 40px; }\n            .header { text-align: center; border-bottom: 2px solid #f97316; padding-bottom: 20px; margin-bottom: 30px; }\n            .section { margin-bottom: 25px; }\n            .warning { background: #fef2f2; padding: 15px; border-left: 4px solid #ef4444; color: #991b1b; }\n          </style>\n        </head>\n        <body>\n          <div class=\"header\">\n            <h1>ESCROW TERMS & CONDITIONS</h1>\n            <p>Investment Escrow ID: ${investment?.id}</p>\n          </div>\n\n          <div class=\"section\">\n            <h3>ESCROW FUND PROTECTION</h3>\n            <p>Your investment amount of <strong>${investment?.amount?.toLocaleString()}</strong> is held in a secure escrow account managed byPropertyArkuntil all conditions are met.</p>\n          </div>\n\n          <div class=\"section\">\n            <h3>DOCUMENT VERIFICATION PROCESS</h3>\n            <ol>\n              <li><strong>Vendor Document Submission:</strong> Vendor must provide original property title documents</li>\n              <li><strong>Legal Verification:</strong> Our legal team verifies document authenticity</li>\n              <li><strong>Collateral Registration:</strong> Property deed registered as investment collateral</li>\n              <li><strong>Fund Release:</strong> Investment funds released to vendor after verification</li>\n            </ol>\n          </div>\n\n          <div class=\"warning\">\n            <h4> IMPORTANT PROTECTION NOTICE</h4>\n            <p>Funds will NOT be released to the vendor until:</p>\n            <ul>\n              <li> Original property documents are submitted</li>\n              <li> Legal verification is completed</li>\n              <li> Property deed is registered as collateral</li>\n              <li> All terms and conditions are met</li>\n            </ul>\n          </div>\n\n          <div class=\"section\">\n            <h3>INVESTOR PROTECTION</h3>\n            <p>In case of vendor default or non-performance, investors have legal claim on the collateral property equal to their investment value.</p>\n          </div>\n        </body>\n        </html>\n      `,\n      'Risk Disclosure': `\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <title>Investment Risk Disclosure</title>\n          <style>\n            body { font-family: Arial, sans-serif; line-height: 1.6; margin: 40px; }\n            .header { text-align: center; border-bottom: 2px solid #f97316; padding-bottom: 20px; margin-bottom: 30px; }\n            .risk { background: #fef2f2; padding: 15px; border: 1px solid #fecaca; border-radius: 8px; margin: 15px 0; }\n          </style>\n        </head>\n        <body>\n          <div class=\"header\">\n            <h1> INVESTMENT RISK DISCLOSURE</h1>\n            <p>Please read carefully before investing</p>\n          </div>\n\n          <div class=\"risk\">\n            <h3>MARKET RISKS</h3>\n            <p>Real estate investments are subject to market fluctuations, economic conditions, and property value changes.</p>\n          </div>\n\n          <div class=\"risk\">\n            <h3>LIQUIDITY RISK</h3>\n            <p>Investments have lock periods. Early withdrawal may not be possible or may incur penalties.</p>\n          </div>\n\n          <div class=\"risk\">\n            <h3>VENDOR RISK</h3>\n            <p>Investment performance depends on vendor execution. Collateral property provides security but does not guarantee returns.</p>\n          </div>\n\n          <div class=\"risk\">\n            <h3>REGULATORY RISK</h3>\n            <p>Changes in real estate regulations or tax laws may affect investment returns.</p>\n          </div>\n\n          <div class=\"section\">\n            <h3>INVESTOR ACKNOWLEDGMENT</h3>\n            <p>By investing, you acknowledge that you understand these risks and that past performance does not guarantee future results.</p>\n          </div>\n        </body>\n        </html>\n      `\n    };\n\n    return templates[docType] || '';\n  };\n\n  const downloadDocument = (content, filename) => {\n    const blob = new Blob([content], { type: 'text/html' });\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = filename;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    window.URL.revokeObjectURL(url);\n  };\n\n  const calculateReturns = (amount, roi) => {\n    return (amount * roi / 100).toFixed(0);\n  };\n\n  if (selectedProject) {\n    return (\n      <div className=\"p-6\">\n        {/* Breadcrumb */}\n        <div className=\"mb-6\">\n          <nav className=\"text-sm\">\n            <span className=\"text-gray-500\">Investment</span>\n            <span className=\"mx-2 text-gray-400\">|</span>\n            <span className=\"text-gray-900 font-medium\">{selectedProject.name}</span>\n          </nav>\n        </div>\n\n        {/* Project Header */}\n        <div className=\"bg-white rounded-lg shadow p-6 mb-6\">\n          <div className=\"flex items-start justify-between mb-4\">\n            <div className=\"flex-1\">\n              <div className=\"flex items-center space-x-3 mb-2\">\n                <span className=\"px-3 py-1 bg-purple-100 text-purple-800 text-sm font-medium rounded-full\">\n                  {selectedProject.type}\n                </span>\n                <span className=\"px-3 py-1 bg-green-100 text-green-800 text-sm font-medium rounded-full\">\n                  Verified\n                </span>\n              </div>\n              <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">{selectedProject.name}</h1>\n              <div className=\"flex items-center text-gray-600 mb-4\">\n                <FaMapMarkerAlt className=\"mr-2\" />\n                <span>{selectedProject.location}</span>\n              </div>\n              <p className=\"text-gray-700 mb-6\">{selectedProject.description}</p>\n              \n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                <div>\n                  <p className=\"text-sm text-gray-600\">Expected ROI</p>\n                  <p className=\"text-xl font-bold text-green-600\">{selectedProject.expectedROI}% p.a</p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-gray-600\">Lock Period</p>\n                  <p className=\"text-xl font-bold text-gray-900\">{selectedProject.lockPeriod} months</p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-gray-600\">Current Investors</p>\n                  <p className=\"text-xl font-bold text-gray-900\">{selectedProject.investors}</p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-gray-600\">Completion Date</p>\n                  <p className=\"text-xl font-bold text-gray-900\">{selectedProject.completionDate}</p>\n                </div>\n              </div>\n            </div>\n            <img\n              src={selectedProject.image}\n              alt={selectedProject.name}\n              className=\"w-64 h-48 object-cover rounded-lg\"\n            />\n          </div>\n        </div>\n\n        {/* Tabs */}\n        <div className=\"bg-white rounded-lg shadow mb-6\">\n          <div className=\"border-b border-gray-200\">\n            <nav className=\"flex space-x-8 px-6\">\n              {[ 'Investment Details', 'Documents', 'Project Updates', 'Developer Info', 'FAQs', ...(user?.role === 'vendor' ? ['Inspection Requests'] : [])].map((tab) => {\n                const tabKey = tab.toLowerCase().replace(/\\s+/g, '');\n                return (\n                  <button\n                    key={tab}\n                    onClick={() => setActiveTab(tabKey)}\n                    className={`py-4 px-1 border-b-2 font-medium text-sm ${\n                      activeTab === tabKey\n                        ? 'border-brand-blue text-brand-blue'\n                        : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                    }`}\n                  >\n                    {tab}\n                  </button>\n                );\n              })}\n            </nav>\n          </div>\n\n          <div className=\"p-6\">\n            {activeTab === 'investmentdetails' && (\n              <div className=\"space-y-8\">\n                {/* Investment Calculator */}\n                <div>\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Investment Calculator</h3>\n                  <p className=\"text-gray-600 mb-4\">Adjust your investment amount to see potential returns and ownership percentage</p>\n                  \n                  <div className=\"bg-gray-50 rounded-lg p-6\">\n                    <div className=\"mb-6\">\n                      <div className=\"flex justify-between text-sm text-gray-600 mb-2\">\n                        <span>100K</span>\n                        <span>500K</span>\n                        <span>1M</span>\n                        <span>1.5M</span>\n                        <span>2M</span>\n                      </div>\n                      <input\n                        type=\"range\"\n                        min=\"100000\"\n                        max=\"2000000\"\n                        step=\"50000\"\n                        value={investmentAmount}\n                        onChange={(e) => setInvestmentAmount(parseInt(e.target.value))}\n                        className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer\"\n                      />\n                    </div>\n                    \n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">Your investment</label>\n                        <input\n                          type=\"text\"\n                          value={`${investmentAmount.toLocaleString()}`}\n                          readOnly\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50\"\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">Your ownership percentage</label>\n                        <div className=\"text-2xl font-bold text-brand-blue\">\n                          {calculateOwnership(investmentAmount)}%\n                        </div>\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">Estimated annual returns</label>\n                        <div className=\"text-2xl font-bold text-brand-blue\">\n                          {calculateReturns(investmentAmount, selectedProject.expectedROI)}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Projected Returns Chart */}\n                <InvestmentChart \n                  title=\"Projected Returns\"\n                  data={[\n                    { quarter: 'Q1 2024', value: 15, amount: 2.1 },\n                    { quarter: 'Q2 2024', value: 18, amount: 2.8 },\n                    { quarter: 'Q3 2024', value: 22, amount: 3.2 },\n                    { quarter: 'Q4 2024', value: 25, amount: 3.8 },\n                    { quarter: 'Q1 2025', value: 28, amount: 4.1 },\n                    { quarter: 'Q2 2025', value: 30, amount: 4.5 },\n                    { quarter: 'Q3 2025', value: 32, amount: 4.8 },\n                    { quarter: 'Q4 2025', value: 35, amount: 5.2 }\n                  ]}\n                />\n\n                {/* Action Buttons */}\n                <div className=\"flex space-x-4\">\n                  <button\n                    onClick={() => handleInvestNow(selectedProject || projects[0])}\n                    className=\"bg-gradient-to-r from-green-600 to-blue-600 text-white px-8 py-4 rounded-xl hover:from-green-700 hover:to-blue-700 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none\"\n                    disabled={!projects.length}\n                  >\n                    <FaCheck />\n                    <span>Invest Now</span>\n                  </button>\n                  <button \n                    onClick={(e) => {\n                      e.stopPropagation();\n                      handleAddToWishlist(selectedProject || projects[0]);\n                    }}\n                    className={`btn-outline flex items-center space-x-2 ${isInWishlist(selectedProject?.id || projects[0]?.id) ? 'bg-orange-50 border-orange-300 text-orange-700' : ''}`}\n                    title={isInWishlist(selectedProject?.id || projects[0]?.id) ? 'Remove from wishlist' : 'Add this investment to your wishlist'}\n                    disabled={!projects.length || !selectedProject}\n                  >\n                    <FaBookmark className={isInWishlist(selectedProject?.id || projects[0]?.id) ? 'fill-current' : ''} />\n                    <span>{isInWishlist(selectedProject?.id || projects[0]?.id) ? 'Remove from Wishlist' : 'Add to Wishlist'}</span>\n                  </button>\n                  <button \n                    onClick={() => {\n                      const dummyInvestment = {\n                        id: 'SAMPLE-001',\n                        investmentTitle: selectedProject?.name || 'Sample Investment',\n                        amount: 500000,\n                        expectedROI: selectedProject?.expectedROI || 18,\n                        lockPeriod: selectedProject?.lockPeriod || 24,\n                        investor: user ? `${user.firstName} ${user.lastName}` : 'Sample Investor',\n                        vendor: selectedProject?.sponsor?.name || 'Sample Vendor',\n                        documentStatus: 'sample_document',\n                        collateralProperty: 'Sample Property Collateral'\n                      };\n                      handleDownloadDocument('Investment Agreement', dummyInvestment);\n                    }}\n                    className=\"btn-outline flex items-center space-x-2\"\n                  >\n                    <FaDownload />\n                    <span>Download Prospectus</span>\n                  </button>\n                </div>\n              </div>\n            )}\n\n            {/* Documents Tab */}\n            {activeTab === 'documents' && (\n              <div className=\"space-y-6\">\n                <div className=\"text-center py-8\">\n                  <FaFileContract className=\"mx-auto text-4xl text-gray-400 mb-4\" />\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Investment Documents</h3>\n                  <p className=\"text-gray-600 mb-6\">Access all legal documents and agreements for your investments</p>\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <div className=\"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow\">\n                    <div className=\"flex items-center justify-between mb-4\">\n                      <div className=\"flex items-center\">\n                        <FaFileContract className=\"text-orange-600 mr-3\" />\n                        <h4 className=\"font-semibold\">Investment Agreement</h4>\n                      </div>\n                      <button\n                        onClick={() => handleDownloadDocument('Investment Agreement')}\n                        className=\"text-orange-600 hover:text-orange-700\"\n                      >\n                        <FaDownload />\n                      </button>\n                    </div>\n                    <p className=\"text-sm text-gray-600 mb-3\">Complete investment terms and conditions</p>\n                    <div className=\"flex items-center text-xs text-gray-500\">\n                      <span>PDF  2.3 MB</span>\n                    </div>\n                  </div>\n\n                  <div className=\"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow\">\n                    <div className=\"flex items-center justify-between mb-4\">\n                      <div className=\"flex items-center\">\n                        <FaShieldAlt className=\"text-green-600 mr-3\" />\n                        <h4 className=\"font-semibold\">Escrow Terms</h4>\n                      </div>\n                      <button\n                        onClick={() => handleDownloadDocument('Escrow Terms')}\n                        className=\"text-green-600 hover:text-green-700\"\n                      >\n                        <FaDownload />\n                      </button>\n                    </div>\n                    <p className=\"text-sm text-gray-600 mb-3\">Fund protection and release conditions</p>\n                    <div className=\"flex items-center text-xs text-gray-500\">\n                      <span>PDF  1.8 MB</span>\n                    </div>\n                  </div>\n\n                  <div className=\"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow\">\n                    <div className=\"flex items-center justify-between mb-4\">\n                      <div className=\"flex items-center\">\n                        <FaExclamationTriangle className=\"text-red-600 mr-3\" />\n                        <h4 className=\"font-semibold\">Risk Disclosure</h4>\n                      </div>\n                      <button\n                        onClick={() => handleDownloadDocument('Risk Disclosure')}\n                        className=\"text-red-600 hover:text-red-700\"\n                      >\n                        <FaDownload />\n                      </button>\n                    </div>\n                    <p className=\"text-sm text-gray-600 mb-3\">Investment risks and considerations</p>\n                    <div className=\"flex items-center text-xs text-gray-500\">\n                      <span>PDF  1.2 MB</span>\n                    </div>\n                  </div>\n\n                  <div className=\"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow\">\n                    <div className=\"flex items-center justify-between mb-4\">\n                      <div className=\"flex items-center\">\n                        <FaBuilding className=\"text-blue-600 mr-3\" />\n                        <h4 className=\"font-semibold\">Property Documents</h4>\n                      </div>\n                      <button\n                        onClick={() => toast.info('Property documents will be available after vendor submission')}\n                        className=\"text-blue-600 hover:text-blue-700\"\n                      >\n                        <FaEye />\n                      </button>\n                    </div>\n                    <p className=\"text-sm text-gray-600 mb-3\">C of O, deed, and survey plans</p>\n                    <div className=\"flex items-center text-xs text-yellow-600\">\n                      <FaClock className=\"mr-1\" />\n                      <span>Pending vendor submission</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Project Updates Tab */}\n            {activeTab === 'projectupdates' && (\n              <div className=\"space-y-6\">\n                <div className=\"text-center py-8\">\n                  <FaChartLine className=\"mx-auto text-4xl text-gray-400 mb-4\" />\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Project Updates</h3>\n                  <p className=\"text-gray-600 mb-6\">Stay informed about your investment progress</p>\n                </div>\n\n                <div className=\"space-y-6\">\n                  <div className=\"border-l-4 border-green-500 bg-green-50 p-6 rounded-r-lg\">\n                    <div className=\"flex items-start justify-between\">\n                      <div>\n                        <h4 className=\"font-semibold text-green-900 mb-2\">Phase 1 Construction Complete</h4>\n                        <p className=\"text-green-800 mb-3\">Foundation and structural work completed ahead of schedule. Quality inspections passed with excellent ratings.</p>\n                        <div className=\"flex items-center text-sm text-green-700\">\n                          <FaCalendar className=\"mr-2\" />\n                          <span>December 15, 2024</span>\n                        </div>\n                      </div>\n                      <span className=\"bg-green-500 text-white px-2 py-1 rounded-full text-xs\">Completed</span>\n                    </div>\n                  </div>\n\n                  <div className=\"border-l-4 border-blue-500 bg-blue-50 p-6 rounded-r-lg\">\n                    <div className=\"flex items-start justify-between\">\n                      <div>\n                        <h4 className=\"font-semibold text-blue-900 mb-2\">Phase 2 Development Started</h4>\n                        <p className=\"text-blue-800 mb-3\">Interior work and finishing has begun. Expected completion: Q2 2025. Progress: 35% complete.</p>\n                        <div className=\"flex items-center text-sm text-blue-700 mb-3\">\n                          <FaCalendar className=\"mr-2\" />\n                          <span>January 8, 2025</span>\n                        </div>\n                        <div className=\"w-full bg-blue-200 rounded-full h-2\">\n                          <div className=\"bg-blue-500 h-2 rounded-full\" style={{width: '35%'}}></div>\n                        </div>\n                      </div>\n                      <span className=\"bg-blue-500 text-white px-2 py-1 rounded-full text-xs\">In Progress</span>\n                    </div>\n                  </div>\n\n                  <div className=\"border-l-4 border-orange-500 bg-orange-50 p-6 rounded-r-lg\">\n                    <div className=\"flex items-start justify-between\">\n                      <div>\n                        <h4 className=\"font-semibold text-orange-900 mb-2\">Market Valuation Update</h4>\n                        <p className=\"text-orange-800 mb-3\">Independent property valuation shows 18% appreciation since investment. Current market value: 95M (up from 80M).</p>\n                        <div className=\"flex items-center text-sm text-orange-700\">\n                          <FaCalendar className=\"mr-2\" />\n                          <span>January 3, 2025</span>\n                        </div>\n                      </div>\n                      <span className=\"bg-orange-500 text-white px-2 py-1 rounded-full text-xs\">Update</span>\n                    </div>\n                  </div>\n\n                  <div className=\"border-l-4 border-purple-500 bg-purple-50 p-6 rounded-r-lg\">\n                    <div className=\"flex items-start justify-between\">\n                      <div>\n                        <h4 className=\"font-semibold text-purple-900 mb-2\">Regulatory Approval Received</h4>\n                        <p className=\"text-purple-800 mb-3\">All necessary permits and approvals have been obtained. Project is fully compliant with local regulations.</p>\n                        <div className=\"flex items-center text-sm text-purple-700\">\n                          <FaCalendar className=\"mr-2\" />\n                          <span>December 22, 2024</span>\n                        </div>\n                      </div>\n                      <span className=\"bg-purple-500 text-white px-2 py-1 rounded-full text-xs\">Approved</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Inspection Requests (Vendor) */}\n            {activeTab === 'inspectionrequests' && (\n              <div className=\"space-y-6\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <h3 className=\"text-lg font-semibold text-gray-900\">Inspection Requests</h3>\n                    <p className=\"text-sm text-gray-600\">Manage buyers' viewing requests for this project</p>\n                  </div>\n                  <button onClick={loadInspectionRequests} className=\"btn-outline text-sm\">Refresh</button>\n                </div>\n\n                <div className=\"bg-white border border-gray-200 rounded-lg\">\n                  <div className=\"p-4 border-b border-gray-200 flex text-sm text-gray-600\">\n                    <div className=\"w-1/5\">Buyer</div>\n                    <div className=\"w-1/5\">Preferred Date/Time</div>\n                    <div className=\"w-1/5\">Status</div>\n                    <div className=\"w-2/5\">Actions</div>\n                  </div>\n                  <div className=\"divide-y\">\n                    {isLoadingRequests && (\n                      <div className=\"p-4 text-sm text-gray-600\">Loading requests...</div>\n                    )}\n                    {!isLoadingRequests && inspectionRequests.length === 0 && (\n                      <div className=\"p-4 text-sm text-gray-600\">No inspection requests yet.</div>\n                    )}\n                    {!isLoadingRequests && inspectionRequests.map((req) => (\n                      <div key={req.id} className=\"p-4 flex items-center text-sm\">\n                        <div className=\"w-1/5\">\n                          <div className=\"font-medium text-gray-900\">{req.buyerName || 'Unknown'}</div>\n                          <div className=\"text-gray-600\">{req.buyerEmail || ''}</div>\n                        </div>\n                        <div className=\"w-1/5\">\n                          <div>{req.preferredDate} {req.preferredTime}</div>\n                          {req.proposedDate && req.proposedTime && (\n                            <div className=\"text-xs text-gray-600\">Proposed: {req.proposedDate} {req.proposedTime}</div>\n                          )}\n                        </div>\n                        <div className=\"w-1/5\">\n                          <span className={`px-2 py-1 rounded-full text-xs ${\n                            req.status === 'pending_vendor' ? 'bg-yellow-100 text-yellow-800' :\n                            req.status === 'accepted' ? 'bg-green-100 text-green-800' :\n                            req.status === 'proposed_new_time' ? 'bg-blue-100 text-blue-800' :\n                            'bg-red-100 text-red-800'\n                          }`}>\n                            {req.status.replaceAll('_',' ')}\n                          </span>\n                        </div>\n                        <div className=\"w-2/5 flex flex-wrap gap-2\">\n                          {req.status !== 'accepted' && (\n                            <button onClick={() => acceptViewingRequest(req)} className=\"px-3 py-1 bg-green-600 text-white rounded\">Accept</button>\n                          )}\n                          <button onClick={() => openProposeTime(req)} className=\"px-3 py-1 bg-blue-600 text-white rounded\">Propose Time</button>\n                          {req.status !== 'declined' && (\n                            <button onClick={() => declineViewingRequest(req)} className=\"px-3 py-1 bg-red-600 text-white rounded\">Decline</button>\n                          )}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Developer Info Tab */}\n            {activeTab === 'developerinfo' && (\n              <div className=\"space-y-6\">\n                <div className=\"text-center py-8\">\n                  <FaBuilding className=\"mx-auto text-4xl text-gray-400 mb-4\" />\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Developer Information</h3>\n                  <p className=\"text-gray-600 mb-6\">Learn about the project developer and their track record</p>\n                </div>\n\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n                  <div className=\"space-y-6\">\n                    <div className=\"bg-white border border-gray-200 rounded-lg p-6\">\n                      <h4 className=\"font-semibold text-gray-900 mb-4\">Company Overview</h4>\n                      <div className=\"space-y-3\">\n                        <div>\n                          <span className=\"font-medium text-gray-700\">Company Name:</span>\n                          <span className=\"ml-2 text-gray-900\">Luxury Developments Nigeria Ltd.</span>\n                        </div>\n                        <div>\n                          <span className=\"font-medium text-gray-700\">Established:</span>\n                          <span className=\"ml-2 text-gray-900\">2018</span>\n                        </div>\n                        <div>\n                          <span className=\"font-medium text-gray-700\">Experience:</span>\n                          <span className=\"ml-2 text-gray-900\">7+ years in real estate development</span>\n                        </div>\n                        <div>\n                          <span className=\"font-medium text-gray-700\">Projects Completed:</span>\n                          <span className=\"ml-2 text-gray-900\">12 luxury developments</span>\n                        </div>\n                        <div>\n                          <span className=\"font-medium text-gray-700\">Total Value Delivered:</span>\n                          <span className=\"ml-2 text-gray-900\">2.5B+ in property value</span>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"bg-white border border-gray-200 rounded-lg p-6\">\n                      <h4 className=\"font-semibold text-gray-900 mb-4\">Contact Information</h4>\n                      <div className=\"space-y-3\">\n                        <div className=\"flex items-center\">\n                          <FaMapMarkerAlt className=\"text-gray-400 mr-3\" />\n                          <span>123 Victoria Island, Lagos, Nigeria</span>\n                        </div>\n                        <div className=\"flex items-center\">\n                          <FaPhone className=\"text-gray-400 mr-3\" />\n                          <span>+234-XXX-XXXX</span>\n                        </div>\n                        <div className=\"flex items-center\">\n                          <FaEnvelope className=\"text-gray-400 mr-3\" />\n                          <span>info@luxurydevelopments.ng</span>\n                        </div>\n                        <div className=\"flex items-center\">\n                          <FaGlobe className=\"text-gray-400 mr-3\" />\n                          <span>www.luxurydevelopments.ng</span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"space-y-6\">\n                    <div className=\"bg-white border border-gray-200 rounded-lg p-6\">\n                      <h4 className=\"font-semibold text-gray-900 mb-4\">Track Record</h4>\n                      <div className=\"space-y-4\">\n                        <div className=\"flex items-center justify-between\">\n                          <span className=\"text-gray-700\">Project Delivery Rate</span>\n                          <span className=\"font-semibold text-green-600\">100%</span>\n                        </div>\n                        <div className=\"flex items-center justify-between\">\n                          <span className=\"text-gray-700\">On-Time Delivery</span>\n                          <span className=\"font-semibold text-green-600\">92%</span>\n                        </div>\n                        <div className=\"flex items-center justify-between\">\n                          <span className=\"text-gray-700\">Average ROI Delivered</span>\n                          <span className=\"font-semibold text-green-600\">22%</span>\n                        </div>\n                        <div className=\"flex items-center justify-between\">\n                          <span className=\"text-gray-700\">Investor Satisfaction</span>\n                          <span className=\"font-semibold text-green-600\">4.8/5</span>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"bg-white border border-gray-200 rounded-lg p-6\">\n                      <h4 className=\"font-semibold text-gray-900 mb-4\">Recent Projects</h4>\n                      <div className=\"space-y-3\">\n                        <div className=\"border-b border-gray-100 pb-2\">\n                          <div className=\"font-medium text-gray-900\">Lagos Luxury Towers</div>\n                          <div className=\"text-sm text-gray-600\">Completed 2023  450M project</div>\n                        </div>\n                        <div className=\"border-b border-gray-100 pb-2\">\n                          <div className=\"font-medium text-gray-900\">Victoria Gardens</div>\n                          <div className=\"text-sm text-gray-600\">Completed 2022  320M project</div>\n                        </div>\n                        <div className=\"border-b border-gray-100 pb-2\">\n                          <div className=\"font-medium text-gray-900\">Ikoyi Heights</div>\n                          <div className=\"text-sm text-gray-600\">Completed 2021  280M project</div>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"bg-white border border-gray-200 rounded-lg p-6\">\n                      <h4 className=\"font-semibold text-gray-900 mb-4\">Certifications</h4>\n                      <div className=\"space-y-2\">\n                        <div className=\"flex items-center\">\n                          <FaCheck className=\"text-green-600 mr-2\" />\n                          <span className=\"text-sm\">Nigerian Real Estate Developers Association</span>\n                        </div>\n                        <div className=\"flex items-center\">\n                          <FaCheck className=\"text-green-600 mr-2\" />\n                          <span className=\"text-sm\">Lagos State Property Development Authority</span>\n                        </div>\n                        <div className=\"flex items-center\">\n                          <FaCheck className=\"text-green-600 mr-2\" />\n                          <span className=\"text-sm\">ISO 9001:2015 Quality Management</span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* FAQs Tab */}\n            {activeTab === 'faqs' && (\n              <div className=\"space-y-6\">\n                <div className=\"text-center py-8\">\n                  <FaQuestionCircle className=\"mx-auto text-4xl text-gray-400 mb-4\" />\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Frequently Asked Questions</h3>\n                  <p className=\"text-gray-600 mb-6\">Find answers to common investment questions</p>\n                </div>\n\n                <div className=\"space-y-4\">\n                  <div className=\"bg-white border border-gray-200 rounded-lg\">\n                    <button className=\"w-full px-6 py-4 text-left flex items-center justify-between hover:bg-gray-50\">\n                      <span className=\"font-medium text-gray-900\">How does the escrow protection work?</span>\n                      <FaChevronDown className=\"text-gray-400\" />\n                    </button>\n                    <div className=\"px-6 pb-4\">\n                      <p className=\"text-gray-600\">Your investment funds are held in a secure escrow account until the vendor provides all required property documents (C of O, deed, survey plan). Once verified by our legal team, the documents serve as collateral equal to your investment value. Funds are only released after this verification process is complete.</p>\n                    </div>\n                  </div>\n\n                  <div className=\"bg-white border border-gray-200 rounded-lg\">\n                    <button className=\"w-full px-6 py-4 text-left flex items-center justify-between hover:bg-gray-50\">\n                      <span className=\"font-medium text-gray-900\">What is the minimum investment amount?</span>\n                      <FaChevronDown className=\"text-gray-400\" />\n                    </button>\n                    <div className=\"px-6 pb-4\">\n                      <p className=\"text-gray-600\">The minimum investment varies by project, typically ranging from 100,000 to 500,000. Each project listing clearly shows the minimum investment requirement. This ensures that property investments are accessible to a wide range of investors while maintaining project viability.</p>\n                    </div>\n                  </div>\n\n                  <div className=\"bg-white border border-gray-200 rounded-lg\">\n                    <button className=\"w-full px-6 py-4 text-left flex items-center justify-between hover:bg-gray-50\">\n                      <span className=\"font-medium text-gray-900\">How are returns calculated and paid?</span>\n                      <FaChevronDown className=\"text-gray-400\" />\n                    </button>\n                    <div className=\"px-6 pb-4\">\n                      <p className=\"text-gray-600\">Returns are calculated based on the project's performance and market appreciation. Returns are typically paid quarterly or annually, depending on the project structure. All returns are distributed proportionally based on your ownership percentage in the project.</p>\n                    </div>\n                  </div>\n\n                  <div className=\"bg-white border border-gray-200 rounded-lg\">\n                    <button className=\"w-full px-6 py-4 text-left flex items-center justify-between hover:bg-gray-50\">\n                      <span className=\"font-medium text-gray-900\">What happens if the project is delayed?</span>\n                      <FaChevronDown className=\"text-gray-400\" />\n                    </button>\n                    <div className=\"px-6 pb-4\">\n                      <p className=\"text-gray-600\">Project delays are handled according to the terms in your investment agreement. Typically, the lock period may be extended, and investors are notified of any significant delays. Our escrow protection ensures your funds remain secure during any project timeline adjustments.</p>\n                    </div>\n                  </div>\n\n                  <div className=\"bg-white border border-gray-200 rounded-lg\">\n                    <button className=\"w-full px-6 py-4 text-left flex items-center justify-between hover:bg-gray-50\">\n                      <span className=\"font-medium text-gray-900\">Can I withdraw my investment early?</span>\n                      <FaChevronDown className=\"text-gray-400\" />\n                    </button>\n                    <div className=\"px-6 pb-4\">\n                      <p className=\"text-gray-600\">Investments are subject to the lock period specified in your agreement, typically 12-36 months. Early withdrawal may be possible under certain circumstances but may incur penalties or reduced returns. We recommend reviewing the specific terms of your investment agreement.</p>\n                    </div>\n                  </div>\n\n                  <div className=\"bg-white border border-gray-200 rounded-lg\">\n                    <button className=\"w-full px-6 py-4 text-left flex items-center justify-between hover:bg-gray-50\">\n                      <span className=\"font-medium text-gray-900\">How do I track my investment performance?</span>\n                      <FaChevronDown className=\"text-gray-400\" />\n                    </button>\n                    <div className=\"px-6 pb-4\">\n                      <p className=\"text-gray-600\">You can track your investment performance through your investor dashboard, which shows real-time updates on project progress, returns, and market valuations. You'll also receive regular email updates and can access detailed reports through the platform.</p>\n                    </div>\n                  </div>\n\n                  <div className=\"bg-white border border-gray-200 rounded-lg\">\n                    <button className=\"w-full px-6 py-4 text-left flex items-center justify-between hover:bg-gray-50\">\n                      <span className=\"font-medium text-gray-900\">What are the tax implications of my investment?</span>\n                      <FaChevronDown className=\"text-gray-400\" />\n                    </button>\n                    <div className=\"px-6 pb-4\">\n                      <p className=\"text-gray-600\">Investment returns may be subject to capital gains tax and other applicable taxes in Nigeria. We provide annual tax statements for your investments, but we recommend consulting with a tax professional for specific advice on your individual tax situation.</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6\">\n      {/* Header */}\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Investment</h1>\n        <p className=\"text-gray-600\">\n          Discover and invest in premium real estate projects across Nigeria\n        </p>\n      </div>\n\n      {/* Investment Summary Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n        <div className=\"bg-white rounded-lg shadow p-6\">\n          <div className=\"flex items-center\">\n            <div className=\"p-3 bg-blue-100 rounded-lg\">\n              <FaChartLine className=\"text-brand-blue text-xl\" />\n            </div>\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-600\">Total invested</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{investmentData.totalInvested.toLocaleString()}</p>\n              <p className=\"text-sm text-green-600\">+12.5% from last month</p>\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"bg-white rounded-lg shadow p-6\">\n          <div className=\"flex items-center\">\n            <div className=\"p-3 bg-green-100 rounded-lg\">\n              <FaArrowUp className=\"text-green-600 text-xl\" />\n            </div>\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-600\">Total Earnings</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{investmentData.totalEarnings.toLocaleString()}</p>\n              <p className=\"text-sm text-green-600\">+8.3% growth rate</p>\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"bg-white rounded-lg shadow p-6\">\n          <div className=\"flex items-center\">\n            <div className=\"p-3 bg-orange-100 rounded-lg\">\n              <FaUsers className=\"text-brand-orange text-xl\" />\n            </div>\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-600\">Active investments</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{investmentData.activeInvestments}</p>\n              <p className=\"text-sm text-green-600\">+2 new this quarter</p>\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"bg-white rounded-lg shadow p-6\">\n          <div className=\"flex items-center\">\n            <div className=\"p-3 bg-purple-100 rounded-lg\">\n              <FaCalendar className=\"text-purple-600 text-xl\" />\n            </div>\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-600\">Projected Returns</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{investmentData.projectedReturns.toLocaleString()}</p>\n              <p className=\"text-sm text-gray-600\">projected by Q3 2025</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Project Filters */}\n      <div className=\"bg-white rounded-lg shadow p-6 mb-6\">\n        <div className=\"flex flex-wrap gap-3\">\n          {['All Projects', 'Land', 'Development', '% Highest ROI', 'Price: Low to High'].map((filter) => (\n            <button\n              key={filter}\n              onClick={() => setFilterType(filter.toLowerCase().replace(' ', '').replace(':', ''))}\n              className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\n                filterType === filter.toLowerCase().replace(' ', '').replace(':', '') || \n                (filter === 'All Projects' && filterType === 'all')\n                  ? 'bg-brand-blue text-white'\n                  : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n              }`}\n            >\n              {filter}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Project Listings */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8\">\n        {filteredProjects.map((project) => (\n          <div key={project.id} className=\"bg-white rounded-lg shadow overflow-hidden\">\n            <div className=\"relative\">\n              <img\n                src={project.image}\n                alt={project.name}\n                className=\"w-full h-48 object-cover\"\n              />\n              <div className=\"absolute top-2 right-2\">\n                <span className=\"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full\">\n                  Verified\n                </span>\n              </div>\n              <div className=\"absolute top-2 left-2\">\n                <span className={`px-2 py-1 text-xs font-medium rounded-full ${\n                  project.type === 'Land' \n                    ? 'bg-yellow-100 text-yellow-800' \n                    : 'bg-purple-100 text-purple-800'\n                }`}>\n                  {project.type}\n                </span>\n              </div>\n            </div>\n            \n            <div className=\"p-6\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">{project.name}</h3>\n              <div className=\"flex items-center text-gray-600 mb-2\">\n                <FaMapMarkerAlt className=\"mr-1 text-sm\" />\n                <span className=\"text-sm\">{project.location}</span>\n              </div>\n              <p className=\"text-gray-600 text-sm mb-4\">{project.description}</p>\n              \n              <div className=\"grid grid-cols-2 gap-4 mb-4\">\n                <div>\n                  <p className=\"text-xs text-gray-500\">Min Investment</p>\n                  <p className=\"font-semibold\">{project.minInvestment.toLocaleString()}</p>\n                </div>\n                <div>\n                  <p className=\"text-xs text-gray-500\">Expected ROI</p>\n                  <p className=\"font-semibold text-green-600\">{project.expectedROI}% p.a</p>\n                </div>\n                <div>\n                  <p className=\"text-xs text-gray-500\">Lock Period</p>\n                  <p className=\"font-semibold\">{project.lockPeriod} months</p>\n                </div>\n                <div>\n                  <p className=\"text-xs text-gray-500\">Investors</p>\n                  <p className=\"font-semibold\">{project.investors}</p>\n                </div>\n              </div>\n              \n              <div className=\"mb-4\">\n                <div className=\"flex justify-between text-xs text-gray-500 mb-1\">\n                  <span>Start</span>\n                  <span>Construction</span>\n                  <span>Completion</span>\n                </div>\n                <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                  <div className={`h-2 rounded-full ${\n                    project.progress === 'Start' ? 'w-1/3 bg-yellow-500' :\n                    project.progress === 'Construction' ? 'w-2/3 bg-blue-500' :\n                    'w-full bg-green-500'\n                  }`}></div>\n                </div>\n              </div>\n              \n              <button\n                onClick={() => handleInvestNow(project)}\n                className=\"w-full bg-gradient-to-r from-green-600 to-blue-600 text-white px-6 py-3 rounded-xl hover:from-green-700 hover:to-blue-700 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 flex items-center justify-center space-x-2\"\n              >\n                <FaDollarSign className=\"text-sm\" />\n                <span>Invest Now</span>\n              </button>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* Portfolio Section */}\n      <div className=\"bg-white rounded-lg shadow\">\n        <div className=\"p-6 border-b border-gray-200\">\n          <h2 className=\"text-xl font-semibold text-gray-900\">Your Investment Portfolio</h2>\n        </div>\n        \n        <div className=\"p-6\">\n          <div className=\"flex space-x-8 mb-6\">\n            {['Overview', 'Active investments', 'Returns History', 'Available for Liquidation'].map((tab) => (\n              <button\n                key={tab}\n                className={`pb-2 border-b-2 font-medium text-sm ${\n                  tab === 'Overview'\n                    ? 'border-brand-blue text-brand-blue'\n                    : 'border-transparent text-gray-500 hover:text-gray-700'\n                }`}\n              >\n                {tab}\n              </button>\n            ))}\n          </div>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n            <div className=\"text-center\">\n              <p className=\"text-sm text-gray-600 mb-1\">Your invested Capital</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{investmentData.portfolio.investedCapital.toLocaleString()}</p>\n              <p className=\"text-sm text-green-600\">+350,000 this quarter</p>\n            </div>\n            <div className=\"text-center\">\n              <p className=\"text-sm text-gray-600 mb-1\">Current Portfolio Value</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{investmentData.portfolio.currentValue.toLocaleString()}</p>\n              <p className=\"text-sm text-green-600\">20.8% growth</p>\n            </div>\n            <div className=\"text-center\">\n              <p className=\"text-sm text-gray-600 mb-1\">Total Projects</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{investmentData.portfolio.totalProjects} Active</p>\n              <p className=\"text-sm text-gray-600\">2 completed projects</p>\n            </div>\n            <div className=\"text-center\">\n              <p className=\"text-sm text-gray-600 mb-1\">Available for Withdrawal</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{investmentData.portfolio.availableForWithdrawal.toLocaleString()}</p>\n              <p className=\"text-sm text-gray-600\">320,000 unlocking in 30 days</p>\n            </div>\n          </div>\n          \n          <div className=\"mt-6 text-center\">\n            <button className=\"btn-primary\">\n              View Detailed ROI Dashboard\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Investment Modal (Simplified, robust) */}\n      {showInvestmentModal && selectedProject && (\n        <div\n          className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\"\n          role=\"dialog\" aria-modal=\"true\" aria-label={`Invest in ${selectedProject.name}`}\n          onKeyDown={(e) => { if (e.key === 'Escape') handleCloseInvestmentModal(); }}\n        >\n          <div className=\"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6\">\n            {/* Header */}\n            <div className=\"flex items-start justify-between mb-4\">\n              <h3 className=\"text-2xl font-bold text-gray-900\">Invest in {selectedProject.name}</h3>\n              <button\n                onClick={handleCloseInvestmentModal}\n                className=\"text-gray-500 hover:text-gray-700\"\n                aria-label=\"Close\"\n              >\n                \n              </button>\n            </div>\n            {/* Project Summary */}\n            <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4\">\n              <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                <div>\n                  <p className=\"text-gray-600\">Project</p>\n                  <p className=\"font-semibold\">{selectedProject.name}</p>\n                </div>\n                <div>\n                  <p className=\"text-gray-600\">Location</p>\n                  <p className=\"font-semibold\">{selectedProject.location}</p>\n                </div>\n                <div>\n                  <p className=\"text-gray-600\">Expected ROI</p>\n                  <p className=\"font-semibold text-green-600\">{selectedProject.expectedROI}% per annum</p>\n                </div>\n                <div>\n                  <p className=\"text-gray-600\">Lock Period</p>\n                  <p className=\"font-semibold\">{selectedProject.lockPeriod} months</p>\n                </div>\n              </div>\n            </div>\n\n            {/* Single-step form */}\n            {!paymentSuccess && (\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">Investment Amount ()</label>\n                <input\n                  type=\"number\"\n                  value={Number.isFinite(investmentAmount) ? investmentAmount : ''}\n                  onChange={(e) => setInvestmentAmount(parseInt(e.target.value) || 0)}\n                  min={selectedProject.minInvestment}\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500\"\n                  placeholder={`Minimum: ${selectedProject.minInvestment.toLocaleString()}`}\n                />\n                <p className=\"text-sm text-gray-600 mt-1\">Minimum investment: {selectedProject.minInvestment.toLocaleString()}</p>\n\n                {investmentAmount >= selectedProject.minInvestment && (\n                  <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4\">\n                    <h4 className=\"font-semibold text-blue-900 mb-3\">Investment Projection</h4>\n                    <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                      <div>\n                        <p className=\"text-gray-600\">Your Investment</p>\n                        <p className=\"font-bold text-lg\">{investmentAmount.toLocaleString()}</p>\n                      </div>\n                      <div>\n                        <p className=\"text-gray-600\">Projected Annual Return</p>\n                        <p className=\"font-bold text-lg text-green-600\">{calculateReturns(investmentAmount, selectedProject.expectedROI)}</p>\n                      </div>\n                      <div>\n                        <p className=\"text-gray-600\">Ownership Percentage</p>\n                        <p className=\"font-bold\">{calculateOwnership(investmentAmount)}%</p>\n                      </div>\n                      <div>\n                        <p className=\"text-gray-600\">Escrow Fee (0.5%)</p>\n                        <p className=\"font-bold\">{Math.round(investmentAmount * 0.005).toLocaleString()}</p>\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Payment Method</label>\n                    <select\n                      value={paymentMethod}\n                      onChange={(e) => setPaymentMethod(e.target.value)}\n                      className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500\"\n                    >\n                      <option value=\"flutterwave\">Flutterwave (Card/Bank/USSD)</option>\n                      <option value=\"bank_transfer\">Bank Transfer</option>\n                    </select>\n                  </div>\n                  <div className=\"bg-orange-50 border border-orange-200 rounded-lg p-3 text-sm text-orange-900\">\n                    <p className=\"font-semibold mb-1\">Escrow Protection</p>\n                    <p>Funds are held in escrow pending original document submission and verification.</p>\n                  </div>\n                </div>\n\n                <label className=\"flex items-start mt-4 text-sm text-gray-700\">\n                  <input\n                    type=\"checkbox\"\n                    className=\"mr-2 mt-1\"\n                    checked={acceptInvestmentTerms}\n                    onChange={(e) => setAcceptInvestmentTerms(e.target.checked)}\n                  />\n                  I accept the escrow terms and investment risk disclosure.\n                </label>\n\n                <div className=\"flex justify-between mt-6\">\n                  <button onClick={handleCloseInvestmentModal} className=\"px-5 py-2 border rounded-lg\">Cancel</button>\n                  <button\n                    onClick={handleConfirmInvestment}\n                    disabled={isProcessingPayment || !investmentAmount || investmentAmount < selectedProject.minInvestment || !acceptInvestmentTerms}\n                    className=\"px-5 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50\"\n                  >\n                    {isProcessingPayment ? 'Processing...' : 'Pay Now (via Escrow)'}\n                  </button>\n                </div>\n              </div>\n            )}\n\n            {/* Success State */}\n            {paymentSuccess && createdEscrow && (\n              <div className=\"mt-6\">\n                <div className=\"bg-green-50 border border-green-200 rounded-lg p-4 mb-4\">\n                  <h4 className=\"font-semibold text-green-900 mb-2\">Payment Successful</h4>\n                  <p className=\"text-green-800 text-sm\">Your funds are now held in escrow pending vendor document submission and verification.</p>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm mt-3\">\n                    <div>\n                      <p><strong>Reference:</strong> {paymentReference}</p>\n                      <p><strong>Amount:</strong> {createdEscrow.amount.toLocaleString()}</p>\n                      <p><strong>Escrow Fee:</strong> {createdEscrow.escrowFee.toLocaleString()}</p>\n                    </div>\n                    <div>\n                      <p><strong>Project:</strong> {createdEscrow.investmentTitle}</p>\n                      <p><strong>Status:</strong> {createdEscrow.status.replaceAll('_',' ')}</p>\n                      <p><strong>Vendor:</strong> {createdEscrow.vendor}</p>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"flex space-x-3\">\n                  <button\n                    onClick={() => {\n                      const receiptHtml = `<!DOCTYPE html><html><body><h2>Investment Receipt</h2><p>Ref: ${paymentReference}</p><p>Project: ${createdEscrow.investmentTitle}</p><p>Amount: ${createdEscrow.amount.toLocaleString()}</p><p>Escrow Fee: ${createdEscrow.escrowFee.toLocaleString()}</p><p>Total: ${createdEscrow.totalAmount.toLocaleString()}</p><p>Status: ${createdEscrow.status.replaceAll('_',' ')}</p><p>Date: ${new Date(createdEscrow.createdAt).toLocaleString()}</p></body></html>`;\n                      const blob = new Blob([receiptHtml], { type: 'text/html' });\n                      const url = window.URL.createObjectURL(blob);\n                      const a = document.createElement('a');\n                      a.href = url;\n                      a.download = `receipt-${paymentReference}.html`;\n                      document.body.appendChild(a);\n                      a.click();\n                      document.body.removeChild(a);\n                      window.URL.revokeObjectURL(url);\n                    }}\n                    className=\"flex-1 px-4 py-2 bg-white text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\n                  >\n                    Download Receipt\n                  </button>\n                  <button\n                    onClick={() => window.location.assign('/escrow')}\n                    className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n                  >\n                    Go to Escrow\n                  </button>\n                  <button\n                    onClick={() => { setPaymentSuccess(false); setShowInvestmentModal(false); }}\n                    className=\"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors\"\n                  >\n                    Done\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Document Modal */}\n      {showDocumentModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white rounded-lg max-w-md w-full p-6\">\n            <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Investment Documents</h3>\n            \n            <div className=\"space-y-3\">\n              <button\n                onClick={() => handleDownloadDocument('Investment Agreement')}\n                className=\"w-full flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors\"\n              >\n                <div className=\"flex items-center\">\n                  <FaFileContract className=\"text-orange-600 mr-3\" />\n                  <span>Investment Agreement</span>\n                </div>\n                <FaDownload className=\"text-gray-400\" />\n              </button>\n\n              <button\n                onClick={() => handleDownloadDocument('Escrow Terms')}\n                className=\"w-full flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors\"\n              >\n                <div className=\"flex items-center\">\n                  <FaLock className=\"text-blue-600 mr-3\" />\n                  <span>Escrow Terms & Conditions</span>\n                </div>\n                <FaDownload className=\"text-gray-400\" />\n              </button>\n\n              <button\n                onClick={() => handleDownloadDocument('Risk Disclosure')}\n                className=\"w-full flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors\"\n              >\n                <div className=\"flex items-center\">\n                  <FaShieldAlt className=\"text-red-600 mr-3\" />\n                  <span>Risk Disclosure Statement</span>\n                </div>\n                <FaDownload className=\"text-gray-400\" />\n              </button>\n            </div>\n\n            <div className=\"mt-6\">\n              <button\n                onClick={() => setShowDocumentModal(false)}\n                className=\"w-full px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors\"\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Schedule Viewing Modal */}\n      {/* Schedule Viewing Modal */}\n      {showScheduleModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white rounded-lg max-w-md w-full p-6\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">Schedule Viewing</h3>\n              <button\n                onClick={() => setShowScheduleModal(false)}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Preferred Date</label>\n                <input\n                  type=\"date\"\n                  value={scheduleDate}\n                  onChange={(e) => setScheduleDate(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Preferred Time</label>\n                <input\n                  type=\"time\"\n                  value={scheduleTime}\n                  onChange={(e) => setScheduleTime(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                />\n              </div>\n\n              <div className=\"flex gap-3 pt-2\">\n                <button\n                  onClick={() => setShowScheduleModal(false)}\n                  className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleConfirmSchedule}\n                  className=\"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors\"\n                >\n                  Confirm\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Propose New Time Modal (Vendor) */}\n      {showProposeModal && requestToRespond && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white rounded-lg max-w-md w-full p-6\">\n            <div className=\"flex items-start justify-between mb-4\">\n              <h3 className=\"text-lg font-bold text-gray-900\">Propose New Time</h3>\n              <button\n                onClick={() => setShowProposeModal(false)}\n                className=\"text-gray-500 hover:text-gray-700\"\n                aria-label=\"Close\"\n              >\n                \n              </button>\n            </div>\n\n            <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4 text-sm\">\n              <p className=\"font-semibold\">{requestToRespond.projectName}</p>\n              <p className=\"text-gray-600\">Buyer: {requestToRespond.buyerName || 'Unknown'}</p>\n              <p className=\"text-gray-600\">Preferred: {requestToRespond.preferredDate} {requestToRespond.preferredTime}</p>\n            </div>\n\n            <div className=\"grid grid-cols-1 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">New date</label>\n                <input\n                  type=\"date\"\n                  value={proposalDate}\n                  onChange={(e) => setProposalDate(e.target.value)}\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">New time</label>\n                <input\n                  type=\"time\"\n                  value={proposalTime}\n                  onChange={(e) => setProposalTime(e.target.value)}\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500\"\n                />\n              </div>\n            </div>\n\n            <div className=\"flex justify-between mt-6\">\n              <button onClick={() => setShowProposeModal(false)} className=\"px-5 py-2 border rounded-lg\">Cancel</button>\n              <button\n                onClick={submitProposedTime}\n                disabled={!proposalDate || !proposalTime}\n                className=\"px-5 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50\"\n              >\n                Send Proposal\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Investment;\n\n\n\n","import notificationService from './notificationService';\r\n\r\nconst COLLECTION = 'inspectionRequests';\r\nconst VIEWING_REQUESTS_KEY = 'viewingRequests';\r\nconst INSPECTION_ACTIVITY_KEY = 'inspectionActivityLog';\r\nconst ANALYTICS_EVENT = 'inspectionAnalyticsUpdated';\r\nconst ACTIVITY_EVENT = 'inspectionActivity';\r\n\r\nconst defaultAnalytics = {\r\n  totalRequests: 0,\r\n  pendingResponses: 0,\r\n  confirmed: 0,\r\n  vendorProposals: 0,\r\n  buyerReschedules: 0,\r\n  cancelledByBuyer: 0,\r\n  cancelledByVendor: 0,\r\n  timeline: []\r\n};\r\n\r\nconst safeWindowDispatch = (eventName, detail) => {\r\n  if (typeof window === 'undefined') return;\r\n  if (eventName === 'storage') {\r\n    try {\r\n      window.dispatchEvent(new StorageEvent('storage', detail));\r\n    } catch {\r\n      window.dispatchEvent(new CustomEvent('storage', { detail }));\r\n    }\r\n    return;\r\n  }\r\n  if (typeof window.dispatchEvent === 'function') {\r\n    window.dispatchEvent(new CustomEvent(eventName, { detail }));\r\n  }\r\n};\r\n\r\nconst getStoredRequests = () => {\r\n  try {\r\n    return JSON.parse(localStorage.getItem(VIEWING_REQUESTS_KEY) || '[]');\r\n  } catch {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst saveStoredRequests = (requests) => {\r\n  localStorage.setItem(VIEWING_REQUESTS_KEY, JSON.stringify(requests));\r\n};\r\n\r\nconst getActivityLog = () => {\r\n  try {\r\n    return JSON.parse(localStorage.getItem(INSPECTION_ACTIVITY_KEY) || '[]');\r\n  } catch {\r\n    return [];\r\n  }\r\n};\r\n\r\nconst saveActivityLog = (log) => {\r\n  localStorage.setItem(INSPECTION_ACTIVITY_KEY, JSON.stringify(log));\r\n};\r\n\r\nconst buildActivityPayload = (action, request) => ({\r\n  action,\r\n  requestId: request.id,\r\n  propertyTitle: request.propertyTitle || request.projectTitle || request.projectName || request.title || 'Property',\r\n  buyerId: request.buyerId || request.userId,\r\n  vendorId: request.vendorId,\r\n  vendorEmail: request.vendorEmail,\r\n  status: request.status,\r\n  timestamp: new Date().toISOString()\r\n});\r\n\r\nconst formatDateTimeLabel = (date, time) => {\r\n  if (!date && !time) return '';\r\n  if (!time) return date;\r\n  if (!date) return time;\r\n  return `${date} ${time}`;\r\n};\r\n\r\nconst buildInspectionNotificationEntries = (action, request, payload) => {\r\n  const entries = [];\r\n  const propertyTitle = payload.propertyTitle;\r\n  const buyerName = request.buyerName || request.userName || 'Buyer';\r\n  const vendorName = request.vendorName || request.vendor || request.owner || 'Vendor';\r\n  const preferredLabel = formatDateTimeLabel(request.preferredDate, request.preferredTime);\r\n  const confirmedLabel = formatDateTimeLabel(request.confirmedDate, request.confirmedTime);\r\n  const proposedLabel = formatDateTimeLabel(request.proposedDate, request.proposedTime);\r\n\r\n  const pushForVendor = (title, message) => {\r\n    if (request.vendorId || request.vendorEmail) {\r\n      entries.push({\r\n        recipientId: request.vendorId,\r\n        recipientEmail: request.vendorEmail,\r\n        roles: ['vendor'],\r\n        type: action,\r\n        title,\r\n        message,\r\n        priority: 'medium',\r\n        metadata: { requestId: request.id, propertyTitle, buyerName, vendorName }\r\n      });\r\n    }\r\n  };\r\n\r\n  const pushForBuyer = (title, message) => {\r\n    if (request.buyerId || request.userId || request.buyerEmail || request.userEmail) {\r\n      entries.push({\r\n        recipientId: request.buyerId || request.userId,\r\n        recipientEmail: request.buyerEmail || request.userEmail,\r\n        roles: ['buyer'],\r\n        type: action,\r\n        title,\r\n        message,\r\n        priority: 'medium',\r\n        metadata: { requestId: request.id, propertyTitle, buyerName, vendorName }\r\n      });\r\n    }\r\n  };\r\n\r\n  switch (action) {\r\n    case 'inspection_requested':\r\n      pushForVendor('New inspection request', `${buyerName} requested to view ${propertyTitle} ${preferredLabel ? `on ${preferredLabel}` : ''}`.trim());\r\n      break;\r\n    case 'inspection_confirmed':\r\n      pushForBuyer('Inspection confirmed', `${vendorName} confirmed ${propertyTitle} ${confirmedLabel ? `for ${confirmedLabel}` : ''}`.trim());\r\n      break;\r\n    case 'vendor_proposed_new_time':\r\n      pushForBuyer('Vendor proposed new time', `${vendorName} suggested ${proposedLabel || 'another slot'} for ${propertyTitle}`);\r\n      break;\r\n    case 'buyer_rescheduled':\r\n      pushForVendor('Buyer requested new time', `${buyerName} rescheduled ${propertyTitle} ${preferredLabel ? `to ${preferredLabel}` : ''}`.trim());\r\n      break;\r\n    case 'inspection_cancelled_by_buyer':\r\n      pushForVendor('Inspection cancelled by buyer', `${buyerName} cancelled ${propertyTitle}`);\r\n      break;\r\n    case 'inspection_cancelled_by_vendor':\r\n      pushForBuyer('Inspection cancelled by vendor', `${vendorName} cancelled ${propertyTitle}`);\r\n      break;\r\n    case 'inspection_declined':\r\n      pushForBuyer('Inspection declined', `${vendorName} declined the request for ${propertyTitle}`);\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n\r\n  return entries;\r\n};\r\n\r\nconst persistInspectionNotifications = (entries = []) => {\r\n  if (!entries.length || typeof window === 'undefined') return;\r\n  const payloads = entries\r\n    .filter((entry) => entry.recipientId)\r\n    .map((entry) => ({\r\n      recipientId: entry.recipientId,\r\n      type: entry.type,\r\n      title: entry.title,\r\n      message: entry.message,\r\n      priority: entry.priority || 'medium',\r\n      metadata: {\r\n        ...(entry.metadata || {}),\r\n        source: entry.metadata?.source || 'inspection_client_sync'\r\n      },\r\n      data: entry.metadata || {}\r\n    }));\r\n\r\n  if (!payloads.length) return;\r\n\r\n  notificationService.createInspectionNotifications(payloads)\r\n    .then((result) => {\r\n      if (!result?.success) {\r\n        console.warn('Failed to persist inspection notifications', result);\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error persisting inspection notifications:', error);\r\n    });\r\n};\r\n\r\nconst logInspectionActivity = (action, request) => {\r\n  if (!action || !request) return;\r\n  const payload = buildActivityPayload(action, request);\r\n  const log = getActivityLog();\r\n  log.unshift(payload);\r\n  if (log.length > 200) {\r\n    log.pop();\r\n  }\r\n  saveActivityLog(log);\r\n  safeWindowDispatch(ACTIVITY_EVENT, payload);\r\n  safeWindowDispatch(ANALYTICS_EVENT, payload);\r\n  const notifications = buildInspectionNotificationEntries(action, request, payload);\r\n  if (notifications.length) {\r\n    safeWindowDispatch('inspectionNotification', { action, payload, notifications, request });\r\n    persistInspectionNotifications(notifications);\r\n  }\r\n};\r\n\r\nconst deriveActionFromStatus = (previous, next, updates = {}) => {\r\n  const status = (next?.status || updates.status || '').toLowerCase();\r\n  if (!status && (updates.proposedDate || updates.proposedTime)) {\r\n    return 'vendor_proposed_new_time';\r\n  }\r\n  switch (status) {\r\n    case 'accepted':\r\n    case 'confirmed':\r\n      return 'inspection_confirmed';\r\n    case 'proposed_new_time':\r\n      return 'vendor_proposed_new_time';\r\n    case 'buyer_rescheduled':\r\n      return 'buyer_rescheduled';\r\n    case 'cancelled_by_buyer':\r\n      return 'inspection_cancelled_by_buyer';\r\n    case 'cancelled_by_vendor':\r\n      return 'inspection_cancelled_by_vendor';\r\n    case 'declined':\r\n      return 'inspection_declined';\r\n    default:\r\n      if (previous && previous.status !== next?.status) {\r\n        return `inspection_status_${next?.status || 'updated'}`;\r\n      }\r\n      return null;\r\n  }\r\n};\r\n\r\nconst getDateKey = (isoDate) => {\r\n  const date = isoDate ? new Date(isoDate) : new Date();\r\n  return date.toISOString().slice(0, 10);\r\n};\r\n\r\nconst matchesBuyer = (request, buyerId) => {\r\n  if (!buyerId) return false;\r\n  return request?.buyerId === buyerId || request?.userId === buyerId;\r\n};\r\n\r\nconst matchesVendor = (request, vendorId, vendorEmail) => {\r\n  if (!vendorId && !vendorEmail) return false;\r\n  return (vendorId && request?.vendorId === vendorId) || (vendorEmail && request?.vendorEmail === vendorEmail);\r\n};\r\n\r\nexport const getInspectionAnalytics = ({ role = 'buyer', userId, vendorId, vendorEmail } = {}) => {\r\n  if (typeof window === 'undefined') return { ...defaultAnalytics };\r\n  if (role === 'buyer' && !userId) return { ...defaultAnalytics };\r\n  if (role === 'vendor' && !vendorId && !vendorEmail) return { ...defaultAnalytics };\r\n\r\n  const requests = getStoredRequests();\r\n  const relevant = requests.filter((req) =>\r\n    role === 'buyer' ? matchesBuyer(req, userId) : matchesVendor(req, vendorId || req.vendorId, vendorEmail)\r\n  );\r\n\r\n  const analytics = {\r\n    totalRequests: relevant.length,\r\n    pendingResponses: 0,\r\n    confirmed: 0,\r\n    vendorProposals: 0,\r\n    buyerReschedules: 0,\r\n    cancelledByBuyer: 0,\r\n    cancelledByVendor: 0,\r\n    timeline: []\r\n  };\r\n\r\n  const pendingStatuses = ['pending', 'pending_vendor', 'pending_vendor_confirmation'];\r\n  const log = getActivityLog();\r\n  const activityFilter = (entry) =>\r\n    role === 'buyer' ? entry?.buyerId === userId : matchesVendor(entry, vendorId, vendorEmail);\r\n\r\n  relevant.forEach((req) => {\r\n    const status = (req.status || '').toLowerCase();\r\n    if (pendingStatuses.includes(status)) {\r\n      analytics.pendingResponses += 1;\r\n    }\r\n    if (['accepted', 'confirmed'].includes(status)) {\r\n      analytics.confirmed += 1;\r\n    }\r\n    if (status === 'proposed_new_time') {\r\n      analytics.vendorProposals += 1;\r\n    }\r\n    if (status === 'buyer_rescheduled') {\r\n      analytics.buyerReschedules += 1;\r\n    }\r\n    if (status === 'cancelled_by_buyer') {\r\n      analytics.cancelledByBuyer += 1;\r\n    }\r\n    if (['cancelled_by_vendor', 'declined'].includes(status)) {\r\n      analytics.cancelledByVendor += 1;\r\n    }\r\n  });\r\n\r\n  const lastSevenDays = Array.from({ length: 7 }).map((_, idx) => {\r\n    const date = new Date();\r\n    date.setDate(date.getDate() - (6 - idx));\r\n    const dateKey = date.toISOString().slice(0, 10);\r\n    const dailyCount = log.filter((entry) => activityFilter(entry) && getDateKey(entry.timestamp) === dateKey).length;\r\n    return { date: dateKey, count: dailyCount };\r\n  });\r\n\r\n  analytics.timeline = lastSevenDays;\r\n  return analytics;\r\n};\r\n\r\nexport const createInspectionRequest = async (requestData) => {\r\n  try {\r\n    // Skip API call for now since it's returning 404, go directly to localStorage\r\n    console.log('Using localStorage for creating inspection requests (API unavailable)');\r\n    \r\n    // Fallback to localStorage\r\n    const existing = getStoredRequests();\r\n    const newRequest = {\r\n      id: `viewing-${Date.now()}`,\r\n      ...requestData,\r\n      createdAt: new Date().toISOString(),\r\n      status: 'pending'\r\n    };\r\n    existing.push(newRequest);\r\n    saveStoredRequests(existing);\r\n    \r\n    // Dispatch event to notify Dashboard and other components\r\n    safeWindowDispatch('viewingsUpdated', {\r\n      viewingRequest: newRequest,\r\n      action: 'created'\r\n    });\r\n    \r\n    // Also trigger a storage event for cross-tab synchronization\r\n    safeWindowDispatch('storage', {\r\n      key: VIEWING_REQUESTS_KEY,\r\n      newValue: JSON.stringify(existing)\r\n    });\r\n    logInspectionActivity('inspection_requested', newRequest);\r\n    \r\n    return newRequest;\r\n  } catch (error) {\r\n    console.error('Error creating inspection request:', error);\r\n    // Final fallback to localStorage\r\n    const existing = getStoredRequests();\r\n    const newRequest = {\r\n      id: `viewing-${Date.now()}`,\r\n      ...requestData,\r\n      createdAt: new Date().toISOString(),\r\n      status: 'pending'\r\n    };\r\n    existing.push(newRequest);\r\n    saveStoredRequests(existing);\r\n    \r\n    // Dispatch event to notify Dashboard and other components\r\n    safeWindowDispatch('viewingsUpdated', {\r\n      viewingRequest: newRequest,\r\n      action: 'created'\r\n    });\r\n    \r\n    // Also trigger a storage event for cross-tab synchronization\r\n    safeWindowDispatch('storage', {\r\n      key: VIEWING_REQUESTS_KEY,\r\n      newValue: JSON.stringify(existing)\r\n    });\r\n    logInspectionActivity('inspection_requested', newRequest);\r\n    \r\n    return newRequest;\r\n  }\r\n};\r\n\r\nexport const listInspectionRequestsByVendor = async (vendorId, vendorEmail) => {\r\n  try {\r\n    // Skip API call for now since it's returning 404, go directly to localStorage\r\n    console.log('Using localStorage for inspection requests (API unavailable)');\r\n    \r\n    // Fallback to localStorage\r\n    const local = getStoredRequests();\r\n    \r\n    // Filter by vendorId or vendorEmail\r\n    const filtered = local.filter((r) => \r\n      (vendorId && r.vendorId === vendorId) || \r\n      (vendorEmail && r.vendorEmail === vendorEmail)\r\n    );\r\n    \r\n    // Sort newest first\r\n    filtered.sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));\r\n    \r\n    return filtered;\r\n  } catch (error) {\r\n    console.error('Error listing inspection requests:', error);\r\n    // Final fallback to localStorage\r\n    const local = getStoredRequests();\r\n    const filtered = local.filter((r) => \r\n      (vendorId && r.vendorId === vendorId) || \r\n      (vendorEmail && r.vendorEmail === vendorEmail)\r\n    );\r\n    return filtered.sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));\r\n  }\r\n};\r\n\r\nexport const listInspectionRequestsByBuyer = async (buyerId) => {\r\n  try {\r\n    // Skip API call for now since it's returning 404, go directly to localStorage\r\n    console.log('Using localStorage for buyer inspection requests (API unavailable)');\r\n    \r\n    // Fallback to localStorage\r\n    const local = getStoredRequests();\r\n    const filtered = local.filter((r) => r.buyerId === buyerId);\r\n    return filtered.sort((a, b) => new Date(b.createdAt || 0) - new Date(a.createdAt || 0));\r\n  } catch (error) {\r\n    console.error('Error listing buyer inspection requests:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\nexport const updateInspectionRequest = async (requestId, updates) => {\r\n  try {\r\n    // Skip API call for now since it's returning 404, go directly to localStorage\r\n    console.log('Using localStorage for updating inspection requests (API unavailable)');\r\n    \r\n    // Fallback to localStorage\r\n    const all = getStoredRequests();\r\n    let nextRecord = null;\r\n    const updated = all.map((r) => {\r\n      if (r.id === requestId) {\r\n        nextRecord = { ...r, ...updates, updatedAt: new Date().toISOString() };\r\n        return nextRecord;\r\n      }\r\n      return r;\r\n    });\r\n    if (!nextRecord) {\r\n      saveStoredRequests(all);\r\n      return false;\r\n    }\r\n    saveStoredRequests(updated);\r\n    \r\n    // Dispatch event to notify Dashboard and other components when status changes\r\n    safeWindowDispatch('viewingsUpdated', {\r\n      requestId,\r\n      updates,\r\n      action: 'updated'\r\n    });\r\n    \r\n    // Also trigger a storage event for cross-tab synchronization\r\n    safeWindowDispatch('storage', {\r\n      key: VIEWING_REQUESTS_KEY,\r\n      newValue: JSON.stringify(updated)\r\n    });\r\n    const action = deriveActionFromStatus(all.find((r) => r.id === requestId), nextRecord, updates);\r\n    if (action) {\r\n      logInspectionActivity(action, nextRecord);\r\n    }\r\n    \r\n    return true;\r\n  } catch (error) {\r\n    console.error('Error updating inspection request:', error);\r\n    // Final fallback to localStorage\r\n    const all = getStoredRequests();\r\n    let nextRecord = null;\r\n    const updated = all.map((r) => {\r\n      if (r.id === requestId) {\r\n        nextRecord = { ...r, ...updates, updatedAt: new Date().toISOString() };\r\n        return nextRecord;\r\n      }\r\n      return r;\r\n    });\r\n    if (!nextRecord) {\r\n      saveStoredRequests(all);\r\n      return false;\r\n    }\r\n    saveStoredRequests(updated);\r\n    \r\n    // Dispatch event to notify Dashboard and other components when status changes\r\n    safeWindowDispatch('viewingsUpdated', {\r\n      requestId,\r\n      updates,\r\n      action: 'updated'\r\n    });\r\n    \r\n    // Also trigger a storage event for cross-tab synchronization\r\n    safeWindowDispatch('storage', {\r\n      key: VIEWING_REQUESTS_KEY,\r\n      newValue: JSON.stringify(updated)\r\n    });\r\n    const action = deriveActionFromStatus(all.find((r) => r.id === requestId), nextRecord, updates);\r\n    if (action) {\r\n      logInspectionActivity(action, nextRecord);\r\n    }\r\n    \r\n    return true;\r\n  }\r\n};\r\n\r\nexport const syncLocalInspectionRequests = async () => {\r\n  try {\r\n    // Try to sync with API if available\r\n    const local = getStoredRequests();\r\n    console.log('Inspection requests stored locally:', local.length);\r\n    return { synced: local.length };\r\n  } catch (error) {\r\n    console.error('syncLocalInspectionRequests failed:', error);\r\n    return { synced: 0 };\r\n  }\r\n};\r\n\r\nexport default {\r\n  createInspectionRequest,\r\n  listInspectionRequestsByVendor,\r\n  listInspectionRequestsByBuyer,\r\n  updateInspectionRequest,\r\n  syncLocalInspectionRequests,\r\n  getInspectionAnalytics\r\n};"],"names":["ChartJS","register","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","_ref","data","title","chartData","quarter","value","amount","chartConfig","labels","map","item","datasets","label","backgroundColor","borderColor","borderWidth","borderRadius","borderSkipped","yAxisID","options","responsive","maintainAspectRatio","plugins","legend","position","usePointStyle","padding","font","size","weight","display","text","top","bottom","tooltip","titleColor","bodyColor","cornerRadius","displayColors","callbacks","context","datasetIndex","concat","parsed","y","scales","type","grid","color","ticks","y1","drawOnChartArea","x","interaction","mode","intersect","animation","duration","easing","_jsx","className","children","_jsxs","Bar","Investment","navigate","useNavigate","user","setAuthRedirect","useAuth","investments","userInvestments","investInOpportunity","useInvestment","createEscrowTransaction","useEscrow","activeTab","setActiveTab","useState","selectedProject","setSelectedProject","filterType","setFilterType","investmentAmount","setInvestmentAmount","showInvestmentModal","setShowInvestmentModal","showDocumentModal","setShowDocumentModal","selectedInvestment","setSelectedInvestment","paymentMethod","setPaymentMethod","acceptInvestmentTerms","setAcceptInvestmentTerms","isProcessingPayment","setIsProcessingPayment","paymentSuccess","setPaymentSuccess","paymentReference","setPaymentReference","createdEscrow","setCreatedEscrow","currentStep","setCurrentStep","isOpeningModal","showScheduleModal","setShowScheduleModal","scheduleProject","setScheduleProject","scheduleDate","setScheduleDate","scheduleTime","setScheduleTime","scheduleNote","setScheduleNote","isSubmittingSchedule","setIsSubmittingSchedule","inspectionRequests","setInspectionRequests","isLoadingRequests","setIsLoadingRequests","showProposeModal","setShowProposeModal","requestToRespond","setRequestToRespond","proposalDate","setProposalDate","proposalTime","setProposalTime","resetInvestmentModal","handleCloseInvestmentModal","investmentData","calculateInvestmentData","totalInvested","reduce","sum","inv","totalEarnings","currentValue","activeInvestments","filter","status","length","projectedReturns","opportunity","find","opp","id","investmentId","expectedReturn","portfolio","investedCapital","totalProjects","availableForWithdrawal","wishlistItems","setWishlistItems","projects","setProjects","name","location","description","minInvestment","expectedROI","lockPeriod","investors","image","progress","completionDate","useEffect","wishlistKey","existingWishlist","JSON","parse","localStorage","getItem","isInWishlist","projectId","some","filteredProjects","project","calculateOwnership","toFixed","handleInvestNow","console","log","toast","error","projectToUse","setItem","stringify","redirectUrl","loadInspectionRequests","filtered","r","sort","a","b","Date","createdAt","e","updateRequestsStorage","updatedList","handleDownloadDocument","docType","investment","arguments","undefined","docContent","generateInvestmentDocument","downloadDocument","success","_investment$amount","_investment$amount2","_investment$amount3","investmentTitle","toLocaleString","investor","vendor","collateralProperty","documentStatus","toLocaleDateString","content","filename","blob","Blob","url","window","URL","createObjectURL","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","calculateReturns","roi","_projects$","_projects$2","_projects$3","_projects$4","FaMapMarkerAlt","src","alt","role","tab","tabKey","toLowerCase","replace","onClick","min","max","step","onChange","parseInt","target","readOnly","InvestmentChart","disabled","FaCheck","stopPropagation","updatedWishlist","wishlistItem","addedAt","toISOString","push","handleAddToWishlist","FaBookmark","_selectedProject$spon","dummyInvestment","firstName","lastName","sponsor","FaDownload","FaFileContract","FaShieldAlt","FaExclamationTriangle","FaBuilding","info","FaEye","FaClock","FaChartLine","FaCalendar","style","width","req","buyerName","buyerEmail","preferredDate","preferredTime","proposedDate","proposedTime","replaceAll","request","updated","acceptedAt","_objectSpread","confirmedDate","confirmedTime","history","action","at","acceptViewingRequest","declinedAt","declineViewingRequest","FaPhone","FaEnvelope","FaGlobe","FaQuestionCircle","FaChevronDown","FaArrowUp","FaUsers","FaDollarSign","onKeyDown","key","Number","isFinite","placeholder","Math","round","checked","async","_escrowResult$data","vendorId","sponsorId","escrowResult","uid","termMonths","propertyLocation","escrowId","reference","floor","random","Promise","resolve","setTimeout","updatedEscrows","t","payment","method","paidAt","fundedAt","escrowFee","receiptHtml","totalAmount","assign","FaLock","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","_projectToUse$sponsor","_projectToUse$sponsor2","_projectToUse$sponsor3","viewingRequest","now","projectName","projectLocation","userId","userName","userEmail","email","requestedAt","message","vendorEmail","buyerId","createInspectionRequest","submitProposedTime","proposedAt","date","time","VIEWING_REQUESTS_KEY","INSPECTION_ACTIVITY_KEY","defaultAnalytics","totalRequests","pendingResponses","confirmed","vendorProposals","buyerReschedules","cancelledByBuyer","cancelledByVendor","timeline","safeWindowDispatch","eventName","detail","dispatchEvent","CustomEvent","StorageEvent","_unused","getStoredRequests","_unused2","saveStoredRequests","requests","getActivityLog","_unused3","formatDateTimeLabel","logInspectionActivity","payload","buildActivityPayload","requestId","propertyTitle","projectTitle","timestamp","unshift","pop","saveActivityLog","notifications","buildInspectionNotificationEntries","entries","vendorName","owner","preferredLabel","confirmedLabel","proposedLabel","pushForVendor","recipientId","recipientEmail","roles","priority","metadata","pushForBuyer","trim","payloads","entry","_entry$metadata","source","notificationService","createInspectionNotifications","then","result","warn","catch","persistInspectionNotifications","deriveActionFromStatus","previous","next","updates","matchesVendor","getInspectionAnalytics","relevant","matchesBuyer","analytics","pendingStatuses","forEach","includes","lastSevenDays","Array","from","_","idx","setDate","getDate","dateKey","slice","dailyCount","activityFilter","isoDate","count","existing","newRequest","requestData","newValue","listInspectionRequestsByVendor","updateInspectionRequest","all","nextRecord","updatedAt"],"sourceRoot":""}