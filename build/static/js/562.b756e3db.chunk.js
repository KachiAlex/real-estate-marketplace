"use strict";(self.webpackChunkreal_estate_marketplace=self.webpackChunkreal_estate_marketplace||[]).push([[562],{2407(e,t,r){r.d(t,{A:()=>i});r(5043);var s=r(5475),o=r(3216),a=r(5369),l=r(579);const i=e=>{let{items:t}=e;const r=(0,o.zy)().pathname.split("/").filter(e=>e),i=t||[{label:"Home",path:"/"},...r.map((e,t)=>{const s="/".concat(r.slice(0,t+1).join("/"));return{label:e.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),path:s}})];return(0,l.jsx)("nav",{className:"flex items-center space-x-2 text-sm text-gray-600 mb-4","aria-label":"Breadcrumb",children:(0,l.jsx)("ol",{className:"flex items-center space-x-2",children:i.map((e,t)=>{const r=t===i.length-1;return(0,l.jsxs)("li",{className:"flex items-center",children:[0===t&&(0,l.jsx)(a.rQ8,{className:"h-4 w-4 text-gray-400 mr-2","aria-hidden":"true"}),r?(0,l.jsx)("span",{className:"text-gray-900 font-medium","aria-current":"page",children:e.label}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.N_,{to:e.path,className:"hover:text-blue-600 transition-colors","aria-label":"Navigate to ".concat(e.label),children:e.label}),(0,l.jsx)(a.X6T,{className:"h-3 w-3 text-gray-400 mx-2","aria-hidden":"true"})]})]},e.path||t)})})})}},8329(e,t,r){r.d(t,{A:()=>o});r(5043);var s=r(579);const o=e=>{let{count:t=1}=e;const r=Array.from({length:t},(e,t)=>(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden animate-pulse",children:[(0,s.jsx)("div",{className:"w-full h-48 bg-gray-300"}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("div",{className:"h-8 w-32 bg-gray-300 rounded mb-3"}),(0,s.jsx)("div",{className:"h-6 w-full bg-gray-300 rounded mb-2"}),(0,s.jsx)("div",{className:"h-6 w-3/4 bg-gray-300 rounded mb-4"}),(0,s.jsx)("div",{className:"h-4 w-2/3 bg-gray-300 rounded mb-4"}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,s.jsx)("div",{className:"h-4 w-16 bg-gray-300 rounded"}),(0,s.jsx)("div",{className:"h-4 w-16 bg-gray-300 rounded"}),(0,s.jsx)("div",{className:"h-4 w-16 bg-gray-300 rounded"})]}),(0,s.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,s.jsx)("div",{className:"h-4 w-full bg-gray-300 rounded"}),(0,s.jsx)("div",{className:"h-4 w-5/6 bg-gray-300 rounded"})]}),(0,s.jsx)("div",{className:"h-10 w-full bg-gray-300 rounded"})]})]},t));return(0,s.jsx)(s.Fragment,{children:r})}},4562(e,t,r){r.r(t),r.d(t,{default:()=>x});var s=r(9379),o=r(5043),a=r(5475),l=r(3216),i=r(4345),n=r(5016),c=r(5369),d=r(2339),u=r(8329),m=(r(2407),r(579));const x=()=>{const e=(0,l.Zp)(),[t]=(0,a.ok)(),{properties:r=[],filters:x={},setFilters:p,fetchProperties:g,toggleFavorite:h,saveSearch:v,loading:b}=(0,i.NC)(),{user:f,setAuthRedirect:y}=(0,n.As)(),w=(0,o.useMemo)(()=>Array.isArray(r)?r:[],[r]),[j,N]=(0,o.useState)(!1),[S,C]=(0,o.useState)(""),[A,P]=(0,o.useState)(""),[k,L]=(0,o.useState)(""),[F,I]=(0,o.useState)({min:"",max:""}),[M,T]=(0,o.useState)(""),[E,R]=(0,o.useState)(""),[B,V]=(0,o.useState)(""),[X,D]=(0,o.useState)(""),[_,q]=(0,o.useState)(""),[z,O]=(0,o.useState)({min:"",max:""}),[H,U]=(0,o.useState)(""),[J,G]=(0,o.useState)(1),[W]=(0,o.useState)(12),[Q,Z]=(0,o.useState)(new Set),[Y,K]=(0,o.useState)(""),[$,ee]=(0,o.useState)(!1),[te,re]=(0,o.useState)(""),[se,oe]=(0,o.useState)(!1),[ae,le]=(0,o.useState)("mostRecent"),ie=(0,o.useCallback)(()=>{if(f){const e="favorites_".concat(f.id),t=JSON.parse(localStorage.getItem(e)||"[]").map(e=>String(e));return Z(new Set(t)),t.length}return Z(new Set),0},[f]);(0,o.useEffect)(()=>{ie()},[f,ie]);const ne=o.useRef(!1);(0,o.useEffect)(()=>{if(!f)return;const e=e=>{ne.current||setTimeout(()=>{ie()},150)},t=e=>{e.key!=="favorites_".concat(f.id)||ne.current||setTimeout(()=>{ie()},150)};return window.addEventListener("favoritesUpdated",e),window.addEventListener("storage",t),()=>{window.removeEventListener("favoritesUpdated",e),window.removeEventListener("storage",t)}},[f,ie]);const ce=e=>{if(!e)return e;return{"port harcourt":"Rivers","port-harcourt":"Rivers",ph:"Rivers",fct:"Abuja","abuja fct":"Abuja"}[e.toLowerCase().trim()]||e},de=e=>({buy:"For Sale",rent:"For Rent","short-let":"Shortlet",sale:"For Sale",lease:"For Lease"}[null===e||void 0===e?void 0:e.toLowerCase()]||e),ue=e=>({buy:"For Sale",rent:"For Rent","short-let":"Shortlet",sale:"For Sale",lease:"For Lease",shortlet:"Shortlet"}[null===e||void 0===e?void 0:e.toLowerCase()]||e),me=(0,o.useMemo)(()=>{let e=[...w];if(B){const t=ce(B).toLowerCase().trim();e=e.filter(e=>{var r,s,o,a;const l=(null===e||void 0===e||null===(r=e.city)||void 0===r?void 0:r.toLowerCase())||(null!==e&&void 0!==e&&null!==(s=e.location)&&void 0!==s&&s.city&&"object"===typeof e.location?e.location.city.toLowerCase():"")||"";if(ce(l)===t||l===t)return!0;const i=(null===e||void 0===e||null===(o=e.state)||void 0===o?void 0:o.toLowerCase())||(null!==e&&void 0!==e&&null!==(a=e.location)&&void 0!==a&&a.state&&"object"===typeof e.location?e.location.state.toLowerCase():"")||"";if(ce(i)===t||i===t)return!0;if(null!==e&&void 0!==e&&e.location&&"string"===typeof e.location){const r=e.location.toLowerCase();if(r.split(",").map(e=>ce(e.trim())).includes(t))return!0;if(r.endsWith(t)||r.endsWith(", ".concat(t)))return!0;const s=r.split(",").map(e=>e.trim());for(const e of s)if(ce(e)===t)return!0}if(null!==e&&void 0!==e&&e.location&&"object"===typeof e.location){var n,c;const r=(null===(n=e.location.city)||void 0===n?void 0:n.toLowerCase())||"",s=(null===(c=e.location.state)||void 0===c?void 0:c.toLowerCase())||"";if(ce(r)===t||ce(s)===t||r===t||s===t)return!0}return!1})}if(E.trim()){const t=E.toLowerCase();e=e.filter(e=>{var r,s,o,a,l,i;return(null===(r=e.title)||void 0===r?void 0:r.toLowerCase().includes(t))||(null===(s=e.description)||void 0===s?void 0:s.toLowerCase().includes(t))||(null===(o=e.location)||void 0===o?void 0:o.toLowerCase().includes(t))||(null===(a=e.address)||void 0===a?void 0:a.toLowerCase().includes(t))||e.city&&e.city.toLowerCase().includes(t)||e.state&&e.state.toLowerCase().includes(t)||(null===(l=e.location)||void 0===l?void 0:l.city)&&"object"===typeof e.location&&e.location.city.toLowerCase().includes(t)||(null===(i=e.location)||void 0===i?void 0:i.state)&&"object"===typeof e.location&&e.location.state.toLowerCase().includes(t)})}if(X&&(e=e.filter(e=>e.type===X)),_&&(e=e.filter(e=>e.status===_||e.listingType===_||e.label===_)),z.min&&(e=e.filter(e=>e.price>=parseFloat(z.min))),z.max&&(e=e.filter(e=>e.price<=parseFloat(z.max))),H){const t=H.toLowerCase().trim();console.log("Properties: Filtering by vendor search term:",t),e=e.filter(e=>{var r,s,o,a,l;const i=((null===e||void 0===e?void 0:e.vendorName)||(null===e||void 0===e||null===(r=e.agent)||void 0===r?void 0:r.name)||(null!==e&&void 0!==e&&e.owner?"".concat(e.owner.firstName||""," ").concat(e.owner.lastName||"").trim():"")||(null===e||void 0===e||null===(s=e.owner)||void 0===s?void 0:s.name)||"").toLowerCase(),n=((null===e||void 0===e?void 0:e.vendorId)||(null===e||void 0===e?void 0:e.ownerId)||(null===e||void 0===e||null===(o=e.owner)||void 0===o?void 0:o.id)||"").toLowerCase(),c=((null===e||void 0===e?void 0:e.vendorCode)||(null===e||void 0===e||null===(a=e.owner)||void 0===a?void 0:a.vendorCode)||"").toLowerCase(),d=((null===e||void 0===e?void 0:e.vendorEmail)||(null===e||void 0===e?void 0:e.ownerEmail)||(null===e||void 0===e||null===(l=e.owner)||void 0===l?void 0:l.email)||"").toLowerCase();let u=!1;if(c){const e=c.toLowerCase().trim(),r=t.toLowerCase().trim(),s=e.replace(/^vnd-/,""),o=r.replace(/^vnd-/,"");u=e===r||s===o||s.includes(o)||e.includes(r)}const m=i.includes(t)||n.includes(t)||u||d.includes(t);var x,p;if(m)console.log("Properties: Match found - Property:",e.title,"vendorCode:",(null===e||void 0===e?void 0:e.vendorCode)||(null===e||void 0===e||null===(x=e.owner)||void 0===x?void 0:x.vendorCode)||"MISSING","vendorName:",(null===e||void 0===e?void 0:e.vendorName)||i||"MISSING","vendorEmail:",d||"MISSING","ownerId:",(null===e||void 0===e?void 0:e.ownerId)||(null===e||void 0===e||null===(p=e.owner)||void 0===p?void 0:p.id)||"MISSING","searchTerm:",t);else if(H.toLowerCase().includes("vnd-")){var g;console.log("Properties: VendorCode search failed - Property:",e.title,"vendorCode:",(null===e||void 0===e?void 0:e.vendorCode)||(null===e||void 0===e||null===(g=e.owner)||void 0===g?void 0:g.vendorCode)||"UNDEFINED","searchTerm:",t)}return m}),console.log("Properties: Filtered to",e.length,"properties for vendor search:",t)}let t=[...e];switch(ae){case"priceLow":t.sort((e,t)=>parseFloat((null===e||void 0===e?void 0:e.price)||0)-parseFloat((null===t||void 0===t?void 0:t.price)||0));break;case"priceHigh":t.sort((e,t)=>{const r=parseFloat((null===e||void 0===e?void 0:e.price)||0);return parseFloat((null===t||void 0===t?void 0:t.price)||0)-r});break;case"mostRecent":t.sort((e,t)=>{const r=null!==e&&void 0!==e&&e.createdAt?new Date(e.createdAt).getTime():0;return(null!==t&&void 0!==t&&t.createdAt?new Date(t.createdAt).getTime():0)-r});break;case"mostPopular":t.sort((e,t)=>{const r=parseInt((null===e||void 0===e?void 0:e.views)||0),s=parseInt((null===t||void 0===t?void 0:t.views)||0),o=parseInt((null===e||void 0===e?void 0:e.favorites)||0);return s+2*parseInt((null===t||void 0===t?void 0:t.favorites)||0)-(r+2*o)})}return t},[w,E,B,X,_,z,H,ae]),xe=(0,o.useMemo)(()=>{const e=Array.from(new Set(w.map(e=>e.type).filter(Boolean))),t=Array.from(new Set(w.map(e=>e.status||e.listingType).filter(Boolean))),r=Array.from(new Set(w.map(e=>{var t;return(null===(t=e.location)||void 0===t?void 0:t.city)||e.location}).filter(Boolean)));return{types:e.length?e:["apartment","house","villa","condo","duplex"],statuses:t.length?t:["for-sale","for-rent","for-lease"],locations:r}},[w]),pe=(0,o.useMemo)(()=>{const e=new Map;return w.forEach(t=>{var r,s,o;const a=(null===t||void 0===t||null===(r=t.agent)||void 0===r?void 0:r.name)||(null!==t&&void 0!==t&&t.owner?"".concat(t.owner.firstName||""," ").concat(t.owner.lastName||"").trim():""),l=(null===t||void 0===t?void 0:t.ownerId)||(null===t||void 0===t||null===(s=t.owner)||void 0===s?void 0:s.id)||"",i=(null===t||void 0===t?void 0:t.vendorCode)||(null===t||void 0===t||null===(o=t.owner)||void 0===o?void 0:o.vendorCode)||"";a&&!e.has(l)&&e.set(l,{name:a,code:i})}),Array.from(e.entries()).map(e=>{let[t,r]=e;return{id:t,name:r.name,code:r.code}})},[w]),ge=Math.ceil(me.length/W),he=(J-1)*W,ve=he+W,be=me.slice(he,ve);(0,o.useEffect)(()=>{g({}).catch(e=>{console.warn("Error fetching properties on mount:",e)})},[g]),(0,o.useEffect)(()=>{const e=t.get("fromAlert"),r=t.get("alertName"),o=t.get("search"),a=t.get("location"),l=t.get("type"),i=t.get("status"),n=t.get("minPrice"),c=t.get("maxPrice"),u=t.get("minBedrooms"),m=t.get("maxBedrooms"),x=t.get("minBathrooms"),g=t.get("maxBathrooms"),h=t.get("minArea"),v=t.get("maxArea"),b=t.get("features");if(o&&(C(o),R(o)),a){const e=ce(a);V(e),o||C(e)}else o||V("");if(l){const e=de(l);["buy","rent","short-let","sale","lease"].includes(l.toLowerCase())?(q(e),L(e)):(D(e),P(e))}if(i){const e=ue(i);q(e),L(e)}if((n||c)&&(I(e=>(0,s.A)((0,s.A)({},e),{},{min:n||e.min,max:c||e.max})),O({min:n||"",max:c||""})),e&&r){console.log("Loading properties from alert:",r),re(r);const e={location:a||"",type:l||"",minPrice:n?parseInt(n):"",maxPrice:c?parseInt(c):"",minBedrooms:u?parseInt(u):"",maxBedrooms:m?parseInt(m):"",minBathrooms:x?parseInt(x):"",maxBathrooms:g?parseInt(g):"",minArea:h?parseInt(h):"",maxArea:v?parseInt(v):"",features:b?b.split(","):[]};p(e),d.Ay.success('Showing properties matching "'.concat(r,'" alert criteria'))}else(a||l||i)&&d.Ay.success("Filtering properties".concat(a?" in ".concat(a):"").concat(l?" - ".concat(de(l)):"").concat(i?" - ".concat(ue(i)):""))},[t,p]);const fe=t=>{e("/property/".concat(t))},[ye,we]=(0,o.useState)(!1),[je,Ne]=(0,o.useState)(null),[Se,Ce]=(0,o.useState)(""),[Ae,Pe]=(0,o.useState)(""),[ke,Le]=(0,o.useState)(""),Fe=e=>{const t="".concat(window.location.origin,"/property/").concat(e.id);navigator.clipboard.writeText(t).then(()=>{d.Ay.success("Property link copied to clipboard!")}).catch(()=>{d.Ay.error("Failed to copy link")})},Ie=()=>{P(""),L(""),I({min:"",max:""}),p({}),G(1),d.Ay.success("Filters cleared")},Me=e=>{G(e),window.scrollTo({top:0,behavior:"smooth"})};return(0,m.jsxs)("div",{className:"p-6",children:[(0,m.jsxs)("div",{className:"mb-6",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,m.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Properties"}),te&&(0,m.jsxs)("div",{className:"flex items-center space-x-2 bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",children:[(0,m.jsx)(c.jNV,{className:"text-xs"}),(0,m.jsxs)("span",{children:["From Alert: ",te]})]})]}),(0,m.jsx)("p",{className:"text-gray-600",children:te?'Properties matching your "'.concat(te,'" alert criteria'):"Browse and filter properties to find your perfect match"})]}),(x.type||x.status||x.minPrice||x.maxPrice)&&(0,m.jsx)("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,m.jsx)("span",{className:"text-sm font-medium text-blue-900",children:"Active Filters:"}),x.type&&(0,m.jsxs)("span",{className:"px-2 py-1 bg-blue-200 text-blue-800 rounded text-xs",children:["Type: ",x.type]}),x.status&&(0,m.jsxs)("span",{className:"px-2 py-1 bg-blue-200 text-blue-800 rounded text-xs",children:["Status: ",x.status]}),(x.minPrice||x.maxPrice)&&(0,m.jsxs)("span",{className:"px-2 py-1 bg-blue-200 text-blue-800 rounded text-xs",children:["Price: \u20a6",x.minPrice||"0"," - \u20a6",x.maxPrice||"\u221e"]})]}),(0,m.jsx)("button",{onClick:()=>{f?ee(!0):d.Ay.error("Please login to save searches")},className:"bg-orange-500 text-white px-3 py-1 rounded text-xs flex items-center",children:"Save Search"})]})}),(0,m.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,m.jsxs)("div",{className:"w-full lg:w-80 bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,m.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Filters"}),(0,m.jsxs)("div",{className:"mb-6",children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Properties"}),(0,m.jsx)("input",{type:"text",placeholder:"Search by title, location, or description...",value:S,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,m.jsxs)("div",{className:"mb-6",children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price Range"}),(0,m.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,m.jsx)("input",{type:"number",placeholder:"Min Price",value:F.min,onChange:e=>I(t=>(0,s.A)((0,s.A)({},t),{},{min:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,m.jsx)("input",{type:"number",placeholder:"Max Price",value:F.max,onChange:e=>I(t=>(0,s.A)((0,s.A)({},t),{},{max:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,m.jsxs)("div",{className:"mb-6",children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Type"}),(0,m.jsxs)("select",{value:A,onChange:e=>P(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,m.jsx)("option",{value:"",children:"All Types"}),xe.types.map(e=>(0,m.jsx)("option",{value:e,children:e},e))]})]}),(0,m.jsxs)("div",{className:"mb-6",children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,m.jsxs)("select",{value:k,onChange:e=>L(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,m.jsx)("option",{value:"",children:"All Status"}),xe.statuses.map(e=>(0,m.jsx)("option",{value:e,children:e},e))]})]}),(0,m.jsxs)("div",{className:"mb-6",children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search by Vendor"}),(0,m.jsx)("input",{type:"text",value:M,onChange:e=>T(e.target.value),placeholder:"Name, email, or Vendor ID (VND-XXXXX)...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),pe.length>0&&M&&(0,m.jsx)("div",{className:"mt-2 max-h-40 overflow-y-auto border border-gray-200 rounded-lg bg-white shadow-lg",children:pe.filter(e=>e.name.toLowerCase().includes(M.toLowerCase())||e.code&&e.code.toLowerCase().includes(M.toLowerCase())).slice(0,5).map((e,t)=>(0,m.jsxs)("button",{onClick:()=>T(e.code||e.name),className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-blue-50 rounded transition-colors",children:[(0,m.jsx)("span",{children:e.name||"Unknown Vendor"}),e.code&&(0,m.jsxs)("span",{className:"ml-2 text-xs text-blue-600 font-mono",children:["(",e.code,")"]})]},e.code||e.name||"vendor-".concat(t)))})]}),(0,m.jsxs)("div",{className:"space-y-3",children:[(0,m.jsx)("button",{onClick:async()=>{oe(!0);try{R(S),D(A),q(k),O((0,s.A)({},F)),U(M);const e=(0,s.A)((0,s.A)({},x),{},{type:A,status:k,minPrice:F.min,maxPrice:F.max,search:S});p(e),await g(e,1),G(1),d.Ay.success("Filters applied successfully!")}catch(e){console.error("Error applying filters:",e),d.Ay.error("Failed to apply filters")}finally{oe(!1)}},disabled:se||b,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:se||b?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,m.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,m.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Applying Filters..."]}):"Apply Filters"}),(0,m.jsx)("button",{onClick:()=>{P(""),L(""),I({min:"",max:""}),C(""),T(""),D(""),q(""),O({min:"",max:""}),R(""),U(""),p({}),g({},1),G(1)},disabled:se||b,className:"w-full bg-red-500 text-white py-2 px-4 rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear All Filters"}),(0,m.jsx)("button",{onClick:Ie,disabled:se||b,className:"w-full text-gray-600 py-2 px-4 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Reset"})]})]}),(0,m.jsxs)("div",{className:"w-full lg:flex-1",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,m.jsxs)("div",{children:[(0,m.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:[me.length," Properties Found"]}),(0,m.jsxs)("p",{className:"text-sm text-gray-600",children:["Showing ",he+1,"-",Math.min(ve,me.length)," of ",me.length," properties",me.length!==w.length&&(0,m.jsxs)("span",{className:"text-blue-600 ml-2",children:["(filtered from ",w.length," total)"]})]})]}),(0,m.jsxs)("select",{value:ae,onChange:e=>le(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,m.jsx)("option",{value:"mostRecent",children:"Sort by: Most Recent"}),(0,m.jsx)("option",{value:"priceLow",children:"Price: Low to High"}),(0,m.jsx)("option",{value:"priceHigh",children:"Price: High to Low"}),(0,m.jsx)("option",{value:"mostPopular",children:"Most Popular"})]})]}),(0,m.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b?(0,m.jsx)(u.A,{count:12}):be.length>0?be.map(e=>{var t,r,s,o;return(0,m.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)("div",{onClick:()=>fe(e.id),className:"cursor-pointer",children:(0,m.jsx)("img",{src:e.image||"https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=400&h=300&fit=crop",alt:e.title,className:"w-full h-48 object-cover"})}),e.tag&&(0,m.jsx)("div",{className:"absolute top-2 left-2 ".concat(e.tagColor||"bg-orange-500"," text-white px-2 py-1 rounded text-xs font-medium"),children:e.tag}),(0,m.jsxs)("div",{className:"absolute top-2 right-2 flex space-x-2 z-10",children:[(0,m.jsx)("button",{onClick:t=>{t.stopPropagation(),(async e=>{if(!f)return void d.Ay.error("Please login to save properties to favorites");const t=String(e),r=Q.has(t);ne.current=!0;const s=new Set(Q);r?s.delete(t):s.add(t),Z(s);try{const r=w.find(r=>{const s=r.id||r.propertyId||r._id;return String(s)===t||s===e})||me.find(r=>{const s=r.id||r.propertyId||r._id;return String(s)===t||s===e}),s=await h(t,r);if(!s||!s.success)throw new Error((null===s||void 0===s?void 0:s.error)||"Failed to toggle favorite");const o="favorites_".concat(f.id);JSON.parse(localStorage.getItem(o)||"[]").map(e=>String(e)).includes(t)!==s.favorited&&console.warn("Properties: Favorite state mismatch detected, reloading..."),setTimeout(()=>{ie(),ne.current=!1},200)}catch(o){console.error("Properties: Error toggling favorite:",o),ne.current=!1;const e=new Set(Q);r?e.add(t):e.delete(t),Z(e),d.Ay.error(o.message||"Failed to update saved properties. Please try again.")}})(e.id)},className:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-opacity-75 transition-all ".concat(Q.has(String(e.id))?"bg-red-500 bg-opacity-90":"bg-black bg-opacity-50"),title:Q.has(String(e.id))?"Remove from favorites":"Add to favorites",children:(0,m.jsx)(c.Mbv,{className:"text-lg transition-all ".concat(Q.has(String(e.id))?"text-red-500 fill-red-500":"text-white")})}),(0,m.jsx)("button",{onClick:t=>{t.stopPropagation(),(async e=>{if(navigator.share)try{await navigator.share({title:e.title,text:e.description,url:"".concat(window.location.origin,"/property/").concat(e.id)})}catch(t){console.log("Error sharing:",t),Fe(e)}else Fe(e)})(e)},className:"w-8 h-8 bg-black bg-opacity-50 rounded-full flex items-center justify-center hover:bg-opacity-75 transition-colors",children:(0,m.jsx)(c.Zzu,{className:"text-white text-sm"})})]})]}),(0,m.jsxs)("div",{onClick:()=>fe(e.id),className:"p-4 cursor-pointer",children:[(0,m.jsxs)("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:["\u20a6",(null===(t=e.price)||void 0===t?void 0:t.toLocaleString())||"0"]}),(0,m.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:e.title}),(0,m.jsx)("p",{className:"text-gray-600 text-sm mb-3",children:e.location}),(0,m.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-3",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,m.jsx)(c.TiC,{}),(0,m.jsxs)("span",{children:[e.bedrooms||(null===(r=e.details)||void 0===r?void 0:r.bedrooms)||0," Bedrooms"]})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,m.jsx)(c.F6e,{}),(0,m.jsxs)("span",{children:[e.bathrooms||(null===(s=e.details)||void 0===s?void 0:s.bathrooms)||0," Bathrooms"]})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,m.jsx)(c.VlX,{}),(0,m.jsxs)("span",{children:[e.area||(null===(o=e.details)||void 0===o?void 0:o.sqft)||0,"m\xb2 Area"]})]})]}),(0,m.jsxs)("div",{className:"space-y-2",children:[(0,m.jsx)("div",{onClick:t=>{t.stopPropagation(),fe(e.id)},className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center cursor-pointer",children:"View Details \u2192"}),(0,m.jsxs)("button",{onClick:t=>{t.stopPropagation(),(e=>{f?(Ne(e),we(!0)):d.Ay.error("Please login to schedule viewings")})(e)},className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center",title:"Schedule a viewing for ".concat(e.title),children:[(0,m.jsx)(c.itz,{className:"mr-2"}),"Schedule Viewing"]})]})]})]},e.id)}):(0,m.jsxs)("div",{className:"col-span-full text-center py-12",children:[(0,m.jsx)("p",{className:"text-gray-500 text-lg",children:"No properties found matching your criteria."}),(0,m.jsx)("button",{onClick:Ie,className:"mt-4 text-blue-600 hover:text-blue-800",children:"Clear all filters"})]})}),ge>1&&(0,m.jsx)("div",{className:"flex justify-center mt-8",children:(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,m.jsx)("button",{onClick:()=>{J>1&&(G(J-1),window.scrollTo({top:0,behavior:"smooth"}))},disabled:1===J,"aria-label":"Previous page",className:"px-3 py-2 border border-gray-300 rounded text-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"\u2039"}),Array.from({length:Math.min(5,ge)},(e,t)=>{let r;return r=ge<=5||J<=3?t+1:J>=ge-2?ge-4+t:J-2+t,(0,m.jsx)("button",{onClick:()=>Me(r),className:"px-3 py-2 border rounded text-sm ".concat(J===r?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50"),children:r},r)}),ge>5&&J<ge-2&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{className:"px-2 text-gray-500",children:"..."}),(0,m.jsx)("button",{onClick:()=>Me(ge),className:"px-3 py-2 border border-gray-300 rounded text-sm hover:bg-gray-50",children:ge})]}),(0,m.jsx)("button",{onClick:()=>{J<ge&&(G(J+1),window.scrollTo({top:0,behavior:"smooth"}))},disabled:J===ge,"aria-label":"Next page",className:"px-3 py-2 border border-gray-300 rounded text-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"\u203a"})]})})]})]}),$&&(0,m.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,m.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[(0,m.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Save Search"}),(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Name"}),(0,m.jsx)("input",{type:"text",value:Y,onChange:e=>K(e.target.value),placeholder:"e.g., 3-bedroom apartments in Lagos",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),(0,m.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:[(0,m.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Search Criteria:"}),(0,m.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[A&&(0,m.jsxs)("p",{children:["\u2022 Type: ",A]}),k&&(0,m.jsxs)("p",{children:["\u2022 Status: ",k]}),F.min&&(0,m.jsxs)("p",{children:["\u2022 Min Price: \u20a6",parseInt(F.min).toLocaleString()]}),F.max&&(0,m.jsxs)("p",{children:["\u2022 Max Price: \u20a6",parseInt(F.max).toLocaleString()]}),S&&(0,m.jsxs)("p",{children:['\u2022 Search: "',S,'"']}),!A&&!k&&!F.min&&!F.max&&!S&&(0,m.jsx)("p",{className:"text-gray-500",children:"No specific filters applied"})]})]}),(0,m.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,m.jsx)("p",{className:"text-sm text-blue-800",children:"\ud83d\udca1 You'll receive notifications when new properties matching these criteria become available."})})]}),(0,m.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,m.jsx)("button",{onClick:()=>{ee(!1),K("")},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,m.jsx)("button",{onClick:async()=>{if(Y.trim())try{const e={type:A,status:k,priceRange:F,searchQuery:S,location:x.location,bedrooms:x.bedrooms,bathrooms:x.bathrooms};await v(Y,e),d.Ay.success('Search "'.concat(Y,'" saved successfully!')),ee(!1),K("")}catch(e){console.error("Error saving search:",e),d.Ay.error("Failed to save search")}else d.Ay.error("Please enter a name for your search")},disabled:!Y.trim(),className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Save Search"})]})]})}),ye&&je&&(0,m.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,m.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[(0,m.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Schedule Property Viewing"}),(0,m.jsx)("p",{className:"text-gray-600 mb-4",children:je.title}),(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Date"}),(0,m.jsx)("input",{type:"date",value:Se,onChange:e=>Ce(e.target.value),min:(new Date).toISOString().split("T")[0],className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Time"}),(0,m.jsxs)("select",{value:Ae,onChange:e=>Pe(e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,m.jsx)("option",{value:"",children:"Select Time"}),(0,m.jsx)("option",{value:"09:00",children:"9:00 AM"}),(0,m.jsx)("option",{value:"10:00",children:"10:00 AM"}),(0,m.jsx)("option",{value:"11:00",children:"11:00 AM"}),(0,m.jsx)("option",{value:"12:00",children:"12:00 PM"}),(0,m.jsx)("option",{value:"13:00",children:"1:00 PM"}),(0,m.jsx)("option",{value:"14:00",children:"2:00 PM"}),(0,m.jsx)("option",{value:"15:00",children:"3:00 PM"}),(0,m.jsx)("option",{value:"16:00",children:"4:00 PM"}),(0,m.jsx)("option",{value:"17:00",children:"5:00 PM"})]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Message (Optional)"}),(0,m.jsx)("textarea",{value:ke,onChange:e=>Le(e.target.value),placeholder:"Any specific requirements or questions...",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]})]}),(0,m.jsxs)("div",{className:"flex space-x-3 mt-6",children:[(0,m.jsx)("button",{onClick:()=>{we(!1),Ne(null),Ce(""),Pe(""),Le("")},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,m.jsx)("button",{onClick:()=>{if(!Se||!Ae)return void d.Ay.error("Please select both date and time");const e={id:"viewing-".concat(Date.now()),propertyId:je.id,propertyTitle:je.title,propertyLocation:je.location,userId:f.id,userName:"".concat(f.firstName," ").concat(f.lastName),userEmail:f.email,status:"pending_vendor_confirmation",requestedAt:(new Date).toISOString(),preferredDate:Se,preferredTime:Ae,message:ke,agentContact:je.agent||{name:"Property Agent",phone:"+234-XXX-XXXX",email:"agent@example.com"},vendorResponse:null,confirmedDate:null,confirmedTime:null},t=JSON.parse(localStorage.getItem("viewingRequests")||"[]");t.push(e),localStorage.setItem("viewingRequests",JSON.stringify(t)),window.dispatchEvent(new CustomEvent("viewingsUpdated",{detail:{viewingRequest:e,action:"created"}})),window.dispatchEvent(new StorageEvent("storage",{key:"viewingRequests",newValue:JSON.stringify(t)})),d.Ay.success('Viewing request sent for "'.concat(je.title,'"! The vendor will confirm or suggest an alternative time.')),we(!1),Ne(null),Ce(""),Pe(""),Le("")},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Request Viewing"})]})]})})]})}}}]);
//# sourceMappingURL=562.b756e3db.chunk.js.map