"use strict";(self.webpackChunkreal_estate_marketplace=self.webpackChunkreal_estate_marketplace||[]).push([[69],{2069(e,s,t){t.r(s),t.d(s,{default:()=>k});var n=t(9379),l=t(5043),i=t(3216),a=t(4063),r=t(3519),d=t(7636),c=t(4282),o=t(1072),m=t(8602),u=t(45),x=t(8139),h=t.n(x),v=t(5173),p=t.n(v),j=t(7852),b=t(579);const N=["bsPrefix","className","fluid","rounded","roundedCircle","thumbnail"],g=(p().string,p().bool,p().bool,p().bool,p().bool,l.forwardRef((e,s)=>{let{bsPrefix:t,className:l,fluid:i=!1,rounded:a=!1,roundedCircle:r=!1,thumbnail:d=!1}=e,c=(0,u.A)(e,N);return t=(0,j.oU)(t,"img"),(0,b.jsx)("img",(0,n.A)((0,n.A)({ref:s},c),{},{className:h()(l,i&&"".concat(t,"-fluid"),a&&"rounded",r&&"rounded-circle",d&&"".concat(t,"-thumbnail"))}))}));g.displayName="Image";const y=g;var f=t(9620),A=t(8258),w=t(2083),I=t(9853),S=t(2825),R=t(3823),L=t(5016);const k=()=>{var e,s,t,u,x,h,v,p,j,N,g,k,F,C,M,T,O,$,D,B,P,E,H,V,_,z,G;const{id:U}=(0,i.g)(),Y=(0,i.Zp)(),{user:Z}=(0,L.As)(),{getInvestmentById:q}=(0,S.H)(),{createEscrowTransaction:J,getEscrowTransaction:K}=(0,R.N)(),[Q,W]=(0,l.useState)(null),[X,ee]=(0,l.useState)(null),[se,te]=(0,l.useState)(!0),[ne,le]=(0,l.useState)(null),[ie,ae]=(0,l.useState)(!1),[re,de]=(0,l.useState)(""),[ce,oe]=(0,l.useState)(null),[me,ue]=(0,l.useState)(!1);(0,l.useEffect)(()=>{xe()},[U]);const xe=async()=>{try{te(!0);const s=await q(U);if(!s)return le("Investment not found"),void te(!1);W(s);(null===s||void 0===s?void 0:s.vendorId)||(null===s||void 0===s||s.sponsorId);if(s.sponsor&&ee(s.sponsor),Z&&"buyer"===Z.role)try{const e=await K(U);oe(e)}catch(e){}}catch(e){le(e.message)}finally{te(!1)}};if(se)return(0,b.jsx)(r.A,{className:"py-5",children:(0,b.jsx)("div",{className:"text-center",children:(0,b.jsx)("div",{className:"spinner-border",role:"status",children:(0,b.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})});if(ne||!Q)return(0,b.jsxs)(r.A,{className:"py-5",children:[(0,b.jsx)(d.A,{variant:"danger",children:ne||"Investment not found"}),(0,b.jsx)(c.A,{variant:"outline-primary",onClick:()=>Y("/investments"),children:"Back to Investments"})]});const he=(0,n.A)((0,n.A)({},Q),{},{currentFunding:Number(null!==(e=null!==(s=Q.currentFunding)&&void 0!==s?s:Q.raisedAmount)&&void 0!==e?e:0)||0,targetAmount:Number(null!==(t=null!==(u=Q.targetAmount)&&void 0!==u?u:Q.totalAmount)&&void 0!==t?t:0)||0,minInvestment:Number(null!==(x=null!==(h=Q.minInvestment)&&void 0!==h?h:Q.minimumInvestment)&&void 0!==x?x:0)||0,maxInvestment:Number(null!==(v=null!==(p=Q.maxInvestment)&&void 0!==p?p:Q.totalAmount)&&void 0!==v?v:0)||0,expectedROI:Number(null!==(j=null!==(N=Q.expectedROI)&&void 0!==N?N:Q.expectedReturn)&&void 0!==j?j:0)||0,termMonths:Number(null!==(g=null!==(k=Q.termMonths)&&void 0!==k?k:Q.duration)&&void 0!==g?g:0)||0,riskScore:Number(null!==(F=Q.riskScore)&&void 0!==F?F:Q.expectedReturn&&Q.expectedReturn>20?7:Q.expectedReturn&&Q.expectedReturn>15?5:3)||5,propertyType:null!==(C=null!==(M=Q.propertyType)&&void 0!==M?M:Q.type)&&void 0!==C?C:"N/A",propertyLocation:null!==(T=Q.propertyLocation)&&void 0!==T?T:null!==(O=Q.location)&&void 0!==O&&O.address?"".concat(Q.location.address,", ").concat(Q.location.city):"N/A",propertyValue:Number(null!==($=null!==(D=Q.propertyValue)&&void 0!==D?D:Q.totalAmount)&&void 0!==$?$:0)||0,propertyDescription:null!==(B=null!==(P=Q.propertyDescription)&&void 0!==P?P:Q.description)&&void 0!==B?B:"",paymentSchedule:null!==(E=Q.paymentSchedule)&&void 0!==E?E:"Monthly",exitStrategy:null!==(H=Q.exitStrategy)&&void 0!==H?H:"End of term",vendorId:null!==(V=null!==(_=Q.vendorId)&&void 0!==_?_:Q.sponsorId)&&void 0!==V?V:null}),ve=(pe=null!==(z=he.riskScore)&&void 0!==z?z:5)<=3?{level:"Low",color:"success"}:pe<=6?{level:"Medium",color:"warning"}:{level:"High",color:"danger"};var pe;const je=he.targetAmount>0?he.currentFunding/he.targetAmount*100:0;return(0,b.jsxs)(r.A,{fluid:!0,className:"px-0",children:[(0,b.jsx)("div",{className:"position-relative mb-4",style:{backgroundColor:"#f8f9fa"},children:(0,b.jsxs)(o.A,{className:"g-0",children:[Q.images&&Q.images.length>0&&(0,b.jsx)(m.A,{lg:8,children:(0,b.jsx)("div",{style:{height:"500px",overflow:"hidden"},children:(0,b.jsx)(y,{src:Q.images[0],alt:Q.title,fluid:!0,style:{width:"100%",height:"100%",objectFit:"cover"}})})}),(0,b.jsx)(m.A,{lg:Q.images&&Q.images.length>0?4:12,children:(0,b.jsxs)("div",{className:"p-4 h-100 d-flex flex-column justify-content-between",style:{minHeight:Q.images&&Q.images.length>0?"500px":"auto",backgroundColor:"#fff"},children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"d-flex justify-content-between align-items-start mb-3",children:[(0,b.jsxs)("div",{className:"flex-grow-1",children:[(0,b.jsx)("h1",{className:"h2 mb-2 fw-bold",children:Q.title}),(0,b.jsx)("p",{className:"text-muted mb-3",children:Q.subtitle||"Investment Opportunity"})]}),(0,b.jsx)("div",{className:"ms-3",children:(e=>{const s={active:{variant:"success",text:"Active"},funded:{variant:"info",text:"Fully Funded"},completed:{variant:"secondary",text:"Completed"},cancelled:{variant:"danger",text:"Cancelled"}}[e]||{variant:"secondary",text:e};return(0,b.jsx)(a.A,{bg:s.variant,children:s.text})})(Q.status)})]}),(0,b.jsxs)(o.A,{className:"g-3 mb-4",children:[(0,b.jsx)(m.A,{xs:6,sm:4,children:(0,b.jsxs)("div",{className:"text-center p-3 bg-light rounded",children:[(0,b.jsx)("div",{className:"text-muted small mb-1",children:"ROI"}),(0,b.jsxs)("div",{className:"h4 text-success mb-0 fw-bold",children:[he.expectedROI||0,"%"]})]})}),(0,b.jsx)(m.A,{xs:6,sm:4,children:(0,b.jsxs)("div",{className:"text-center p-3 bg-light rounded",children:[(0,b.jsx)("div",{className:"text-muted small mb-1",children:"Term"}),(0,b.jsxs)("div",{className:"h4 mb-0 fw-bold",children:[he.termMonths||0,"m"]})]})}),(0,b.jsx)(m.A,{xs:12,sm:4,children:(0,b.jsxs)("div",{className:"text-center p-3 bg-light rounded",children:[(0,b.jsx)("div",{className:"text-muted small mb-1",children:"Risk"}),(0,b.jsx)(a.A,{bg:ve.color,className:"fs-6 px-3 py-2",children:ve.level})]})})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,b.jsx)("span",{className:"text-muted small",children:"Funding Progress"}),(0,b.jsxs)("span",{className:"fw-bold text-primary",children:[je.toFixed(1),"%"]})]}),(0,b.jsx)(f.A,{now:je,variant:"success",style:{height:"12px",borderRadius:"6px"},className:"mb-2"}),(0,b.jsxs)(o.A,{className:"g-2 text-center",children:[(0,b.jsx)(m.A,{xs:6,children:(0,b.jsxs)("div",{className:"p-2 bg-light rounded",children:[(0,b.jsx)("div",{className:"text-muted small",children:"Raised"}),(0,b.jsxs)("div",{className:"fw-bold text-success",children:["$",(Number(he.currentFunding)||0).toLocaleString()]})]})}),(0,b.jsx)(m.A,{xs:6,children:(0,b.jsxs)("div",{className:"p-2 bg-light rounded",children:[(0,b.jsx)("div",{className:"text-muted small",children:"Target"}),(0,b.jsxs)("div",{className:"fw-bold",children:["$",(Number(he.targetAmount)||0).toLocaleString()]})]})})]})]})]}),"active"===Q.status&&"buyer"===(null===Z||void 0===Z?void 0:Z.role)&&(0,b.jsx)("div",{className:"mt-auto",children:ce?(0,b.jsx)(d.A,{variant:"info",className:"mb-0",children:(0,b.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("strong",{children:"Investment in Progress"}),(0,b.jsx)("div",{className:"small",children:"Active escrow transaction"})]}),(0,b.jsx)(c.A,{variant:"primary",size:"sm",onClick:()=>Y("/escrow/".concat(ce.id)),children:"View"})]})}):(0,b.jsx)(c.A,{variant:"success",size:"lg",className:"w-100 fw-bold",onClick:()=>ae(!0),children:"Invest Now"})})]})})]})}),(0,b.jsx)(r.A,{children:(0,b.jsxs)(o.A,{children:[(0,b.jsxs)(m.A,{lg:8,children:[(0,b.jsx)(A.A,{className:"mb-4 border-0 shadow-sm",children:(0,b.jsxs)(A.A.Body,{className:"p-4",children:[(0,b.jsx)("h4",{className:"mb-3 fw-bold",children:"About This Investment"}),(0,b.jsx)("p",{className:"lead mb-0",style:{lineHeight:"1.8"},children:Q.description})]})}),(0,b.jsxs)(o.A,{className:"g-4 mb-4",children:[(0,b.jsx)(m.A,{md:6,children:(0,b.jsx)(A.A,{className:"h-100 border-0 shadow-sm",children:(0,b.jsxs)(A.A.Body,{className:"p-4",children:[(0,b.jsx)("h5",{className:"mb-3 fw-bold",children:"Property Collateral"}),(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("div",{className:"text-muted small mb-1",children:"Property Type"}),(0,b.jsx)("div",{className:"fw-semibold",children:he.propertyType||"N/A"})]}),(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("div",{className:"text-muted small mb-1",children:"Location"}),(0,b.jsx)("div",{className:"fw-semibold",children:he.propertyLocation||"N/A"})]}),(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("div",{className:"text-muted small mb-1",children:"Estimated Value"}),(0,b.jsxs)("div",{className:"h5 text-primary mb-0 fw-bold",children:["$",(Number(he.propertyValue)||0).toLocaleString()]})]}),he.propertyDescription&&(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-muted small mb-1",children:"Details"}),(0,b.jsx)("div",{className:"text-muted small",children:he.propertyDescription})]})]})})}),(0,b.jsx)(m.A,{md:6,children:(0,b.jsx)(A.A,{className:"h-100 border-0 shadow-sm",children:(0,b.jsxs)(A.A.Body,{className:"p-4",children:[(0,b.jsx)("h5",{className:"mb-3 fw-bold",children:"Investment Terms"}),(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsxs)("div",{className:"d-flex justify-content-between align-items-center py-2 border-bottom",children:[(0,b.jsx)("span",{className:"text-muted",children:"Minimum Investment"}),(0,b.jsxs)("span",{className:"fw-bold",children:["$",(Number(he.minInvestment)||0).toLocaleString()]})]}),(0,b.jsxs)("div",{className:"d-flex justify-content-between align-items-center py-2 border-bottom",children:[(0,b.jsx)("span",{className:"text-muted",children:"Maximum Investment"}),(0,b.jsxs)("span",{className:"fw-bold",children:["$",(Number(he.maxInvestment)||0).toLocaleString()]})]}),(0,b.jsxs)("div",{className:"d-flex justify-content-between align-items-center py-2 border-bottom",children:[(0,b.jsx)("span",{className:"text-muted",children:"Payment Schedule"}),(0,b.jsx)("span",{className:"fw-bold",children:he.paymentSchedule||"N/A"})]}),(0,b.jsxs)("div",{className:"d-flex justify-content-between align-items-center py-2",children:[(0,b.jsx)("span",{className:"text-muted",children:"Exit Strategy"}),(0,b.jsx)("span",{className:"fw-bold",children:he.exitStrategy||"N/A"})]})]})]})})})]}),Q.legalDocuments&&Q.legalDocuments.length>0&&(0,b.jsx)(A.A,{className:"mb-4 border-0 shadow-sm",children:(0,b.jsxs)(A.A.Body,{className:"p-4",children:[(0,b.jsx)("h5",{className:"mb-3 fw-bold",children:"Legal Documents"}),(0,b.jsx)("div",{className:"d-flex flex-column gap-2",children:Q.legalDocuments.map((e,s)=>(0,b.jsxs)("div",{className:"d-flex justify-content-between align-items-center p-3 bg-light rounded",children:[(0,b.jsx)("span",{className:"fw-semibold",children:e.name}),(0,b.jsx)(c.A,{variant:"outline-primary",size:"sm",href:e.url,target:"_blank",children:"View"})]},s))})]})})]}),(0,b.jsx)(m.A,{lg:4,children:(0,b.jsx)("div",{className:"sticky-top",style:{top:"20px"},children:(0,b.jsxs)(A.A,{className:"border-0 shadow-sm",children:[(0,b.jsx)(A.A.Header,{className:"bg-primary text-white py-3",children:(0,b.jsx)("h5",{className:"mb-0 fw-bold",children:"Investment Summary"})}),(0,b.jsxs)(A.A.Body,{className:"p-4",children:[(0,b.jsxs)("div",{className:"text-center mb-4 p-4 bg-light rounded",children:[(0,b.jsx)("div",{className:"text-muted small mb-2",children:"Expected Return"}),(0,b.jsxs)("h2",{className:"text-success mb-2 fw-bold",children:["$",(parseFloat(re||he.minInvestment||0)*((he.expectedROI||0)/100)||0).toLocaleString()]}),(0,b.jsxs)("div",{className:"text-muted small",children:["Based on ",he.expectedROI||0,"% ROI"]})]}),(0,b.jsxs)("div",{className:"mb-3 pb-3 border-bottom",children:[(0,b.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,b.jsx)("span",{className:"text-muted",children:"Investment Term"}),(0,b.jsxs)("strong",{children:[he.termMonths||0," months"]})]}),(0,b.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,b.jsx)("span",{className:"text-muted",children:"Risk Level"}),(0,b.jsx)(a.A,{bg:ve.color,children:ve.level})]})]}),(X||Q.sponsor)&&(0,b.jsxs)("div",{className:"mb-3 pb-3 border-bottom",children:[(0,b.jsx)("div",{className:"text-muted small mb-2",children:"Investment Company"}),(0,b.jsx)("div",{className:"fw-bold mb-1",children:(null===X||void 0===X?void 0:X.companyName)||(null===(G=Q.sponsor)||void 0===G?void 0:G.name)||"N/A"}),(0,b.jsx)("div",{className:"text-muted small",children:(null===X||void 0===X?void 0:X.email)||"N/A"})]}),"funded"===Q.status&&(0,b.jsx)(d.A,{variant:"info",className:"mb-0",children:"This investment opportunity is fully funded."})]})]})})})]})}),(0,b.jsxs)(w.A,{show:ie,onHide:()=>ae(!1),children:[(0,b.jsx)(w.A.Header,{closeButton:!0,children:(0,b.jsxs)(w.A.Title,{children:["Invest in ",Q.title]})}),(0,b.jsxs)(w.A.Body,{children:[ne&&(0,b.jsx)(d.A,{variant:"danger",children:ne}),(0,b.jsxs)(I.A,{children:[(0,b.jsxs)(I.A.Group,{className:"mb-3",children:[(0,b.jsx)(I.A.Label,{children:"Investment Amount"}),(0,b.jsx)(I.A.Control,{type:"number",value:re,onChange:e=>de(e.target.value),min:he.minInvestment,max:he.maxInvestment,placeholder:"Minimum: $".concat((Number(he.minInvestment)||0).toLocaleString())}),(0,b.jsxs)(I.A.Text,{className:"text-muted",children:["Minimum: $",(Number(he.minInvestment)||0).toLocaleString()," | Maximum: $",(Number(he.maxInvestment)||0).toLocaleString()]})]}),(0,b.jsxs)(d.A,{variant:"info",children:[(0,b.jsx)("h6",{children:"Investment Summary"}),(0,b.jsxs)("p",{className:"mb-1",children:[(0,b.jsx)("strong",{children:"Amount:"})," $",(parseFloat(re||0)||0).toLocaleString()]}),(0,b.jsxs)("p",{className:"mb-1",children:[(0,b.jsx)("strong",{children:"Expected Return:"})," $",(parseFloat(re||0)*((he.expectedROI||0)/100)||0).toLocaleString()]}),(0,b.jsxs)("p",{className:"mb-0",children:[(0,b.jsx)("strong",{children:"Term:"})," ",he.termMonths||0," months"]})]}),(0,b.jsxs)(d.A,{variant:"warning",children:[(0,b.jsx)("h6",{children:"Important Notice"}),(0,b.jsx)("p",{className:"mb-0",children:"Your investment will be secured by the property collateral. The investment company must provide original property documents before funds are released."})]})]})]}),(0,b.jsxs)(w.A.Footer,{children:[(0,b.jsx)(c.A,{variant:"secondary",onClick:()=>ae(!1),children:"Cancel"}),(0,b.jsx)(c.A,{variant:"success",onClick:async()=>{var e,s,t,l,i,a,r,d,c,o,m,u,x,h;if(!re||parseFloat(re)<=0)return void le("Please enter a valid investment amount");if(!Q)return void le("Investment data not loaded");const v=(0,n.A)((0,n.A)({},Q),{},{currentFunding:Number(null!==(e=null!==(s=Q.currentFunding)&&void 0!==s?s:Q.raisedAmount)&&void 0!==e?e:0)||0,targetAmount:Number(null!==(t=null!==(l=Q.targetAmount)&&void 0!==l?l:Q.totalAmount)&&void 0!==t?t:0)||0,minInvestment:Number(null!==(i=null!==(a=Q.minInvestment)&&void 0!==a?a:Q.minimumInvestment)&&void 0!==i?i:0)||0,maxInvestment:Number(null!==(r=null!==(d=Q.maxInvestment)&&void 0!==d?d:Q.totalAmount)&&void 0!==r?r:0)||0,expectedROI:Number(null!==(c=null!==(o=Q.expectedROI)&&void 0!==o?o:Q.expectedReturn)&&void 0!==c?c:0)||0,termMonths:Number(null!==(m=null!==(u=Q.termMonths)&&void 0!==u?u:Q.duration)&&void 0!==m?m:0)||0,propertyLocation:null!==(x=Q.propertyLocation)&&void 0!==x?x:null!==(h=Q.location)&&void 0!==h&&h.address?"".concat(Q.location.address,", ").concat(Q.location.city):"N/A"}),p=v.minInvestment;if(parseFloat(re)<p)le("Minimum investment amount is $".concat((Number(p)||0).toLocaleString()));else try{var j,b,N;ue(!0),le(null);const e=null!==(j=null!==(b=Q.vendorId)&&void 0!==b?b:Q.sponsorId)&&void 0!==j?j:null,s=await J(U,parseFloat(re),Z.uid||Z.id,e,{type:"investment",investmentData:(0,n.A)((0,n.A)({},Q),{},{title:Q.title,investmentTitle:Q.title,expectedROI:v.expectedROI,expectedReturn:v.expectedROI,lockPeriod:v.termMonths,termMonths:v.termMonths,duration:v.termMonths,vendorId:e,sponsorId:e,sponsor:Q.sponsor||X,vendor:Q.vendor||Q.sponsor,propertyLocation:v.propertyLocation})});if(!s.success)return void le(s.error||"Failed to create escrow transaction");const t=s.id||(null===(N=s.data)||void 0===N?void 0:N.id);if(!t)return void le("Failed to get escrow transaction ID");ae(!1),Y("/escrow/".concat(t))}catch(g){console.error("Investment error:",g),le(g.message||"An error occurred while processing your investment")}finally{ue(!1)}},disabled:me||!re,children:me?"Processing...":"Confirm Investment"})]})]})]})}}}]);
//# sourceMappingURL=69.760647ff.chunk.js.map