"use strict";(self.webpackChunkreal_estate_marketplace=self.webpackChunkreal_estate_marketplace||[]).push([[365],{8852(e,t,s){s.d(t,{A:()=>n});var a=s(9379),r=s(5043),l=s(5369),o=s(579);const n=e=>{let{value:t,onChange:s,placeholder:n="",className:i="",error:c=!1,fieldKey:d,type:m="text",min:u,max:p,step:x,multiline:g=!1,rows:h=4}=e;const[b,y]=(0,r.useState)(!1),f=(0,r.useMemo)(()=>"memory_".concat(d),[d]),v=(0,r.useCallback)(()=>{try{const e=localStorage.getItem(f);return e?JSON.parse(e):[]}catch(e){return[]}},[f]),j=(0,r.useMemo)(()=>{const e=v();if(!t||t.toString().length<1)return e.slice(0,8);const s=t.toString().toLowerCase();return e.filter(e=>{var t;return null===e||void 0===e||null===(t=e.v)||void 0===t?void 0:t.toString().toLowerCase().includes(s)}).slice(0,8)},[t,v]),N=(0,r.useCallback)(e=>{const t=(null!==e&&void 0!==e?e:"").toString().trim();if(t)try{const e=v(),s=[{v:t,t:Date.now()},...e.filter(e=>(null===e||void 0===e?void 0:e.v)!==t)].slice(0,12);localStorage.setItem(f,JSON.stringify(s))}catch(s){}},[v,f]),A=(0,r.useCallback)(()=>{N(t),setTimeout(()=>y(!1),200)},[N,t]),w=(0,r.useCallback)(()=>{v().length>0&&y(!0)},[v]),S=(0,r.useCallback)(e=>{s(e.v),y(!1)},[s]),C=(0,r.useCallback)(()=>{localStorage.removeItem(f),y(!1)},[f]),P={value:t||"",onChange:e=>s(e.target.value),onBlur:A,onFocus:w,placeholder:n,className:"w-full px-4 py-3 border-2 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300 ".concat(c?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-blue-500"," ").concat(i)};return(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsxs)("div",{className:"relative",children:[g?(0,o.jsx)("textarea",(0,a.A)({rows:h},P)):(0,o.jsx)("input",(0,a.A)({type:m,min:u,max:p,step:x},P)),v().length>0&&(0,o.jsx)("button",{type:"button",onClick:C,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-red-500",title:"Clear history",children:(0,o.jsx)(l.QCr,{className:"h-4 w-4"})})]}),b&&j.length>0&&(0,o.jsxs)("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-b-xl shadow-lg z-50 max-h-60 overflow-y-auto",children:[(0,o.jsxs)("div",{className:"px-4 py-2 bg-blue-50 border-b border-blue-200 flex items-center text-xs text-blue-700 uppercase tracking-wide font-semibold",children:[(0,o.jsx)(l.OKX,{className:"mr-2"})," Recent entries (",j.length,")"]}),j.map((e,t)=>(0,o.jsxs)("button",{type:"button",onClick:()=>S(e),className:"w-full px-4 py-3 text-left hover:bg-blue-50 border-b border-gray-100 last:border-b-0 transition-colors text-sm",children:[(0,o.jsx)("span",{className:"font-medium",children:e.v}),(0,o.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:new Date(e.t).toLocaleDateString()})]},"".concat(f,"-").concat(t)))]})]})}},365(e,t,s){s.r(t),s.d(t,{default:()=>_});var a=s(9379),r=s(5043),l=s(3216),o=s(4345),n=s(5016),i=s(6896),c=s(5369),d=s(325),m=s(2339),u=s(579);const p=e=>{let{propertyId:t,onFilesChange:s,initialFiles:l=[],maxFiles:o=10,maxSize:i=10485760,allowedTypes:p=[],type:x="image",disabled:g=!1,className:h=""}=e;const[b,y]=(0,r.useState)(l),[f,v]=(0,r.useState)(new Map),[j,N]=(0,r.useState)(!1),[A,w]=(0,r.useState)(null),{user:S}=(0,n.As)(),C=(()=>{const e={image:{icon:c.HVe,accept:"image/jpeg,image/png,image/webp,image/gif",allowedTypes:["image/jpeg","image/png","image/webp","image/gif"],maxSize:10485760,placeholder:"Click to upload or drag and drop images",subtext:"PNG, JPG, WEBP, GIF up to 10MB each"},video:{icon:c.gSK,accept:"video/mp4,video/webm,video/ogg,video/quicktime",allowedTypes:["video/mp4","video/webm","video/ogg","video/quicktime"],maxSize:104857600,placeholder:"Click to upload or drag and drop videos",subtext:"MP4, WEBM, OGG, MOV up to 100MB each"},document:{icon:c.Gp9,accept:".pdf,.doc,.docx,.txt,.rtf,.odt",allowedTypes:["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","application/rtf","application/vnd.oasis.opendocument.text"],maxSize:26214400,placeholder:"Click to upload or drag and drop documents",subtext:"PDF, DOC, DOCX, TXT, RTF up to 25MB each"}};return e[x]||e.image})(),P=p.length>0?p:C.allowedTypes,k=i||C.maxSize,_=(0,r.useCallback)(async e=>{if(!S||g)return;const r=Array.from(e);if(b.length+r.length>o)return void m.Ay.error("Maximum ".concat(o," ").concat(x,"s allowed"));const l=[],n=[];if(r.forEach(e=>{const t=d.A.validateFile(e,P,k);t.valid?l.push(e):n.push({file:e,errors:t.errors})}),n.length>0&&n.forEach(e=>{let{file:t,errors:s}=e;s.forEach(e=>{m.Ay.error("".concat(t.name,": ").concat(e))})}),0!==l.length)for(const o of l){const e="".concat(Date.now(),"_").concat(Math.random());v(t=>new Map(t).set(e,{file:o,progress:0,status:"uploading"}));try{const r=await E(o,t||"temp",S.uid,e);if(!r.success)throw new Error(r.error||"Upload failed");{const t={id:Date.now()+Math.random(),url:r.url,name:r.name,size:r.size,path:r.path,type:r.type,isUploaded:!r.isLocal};y(e=>[...e,t]),s&&s([...b,t]),v(t=>{const s=new Map(t);return s.set(e,(0,a.A)((0,a.A)({},s.get(e)),{},{progress:100,status:"completed"})),s}),setTimeout(()=>{v(t=>{const s=new Map(t);return s.delete(e),s})},2e3),m.Ay.success("".concat(o.name," uploaded successfully!"))}}catch(i){console.error("File upload error:",i),v(t=>{const s=new Map(t);return s.set(e,(0,a.A)((0,a.A)({},s.get(e)),{},{status:"error"})),s}),m.Ay.error("Failed to upload ".concat(o.name)),setTimeout(()=>{v(t=>{const s=new Map(t);return s.delete(e),s})},3e3)}}},[S,g,b,o,x,P,k,t,s]),E=async(e,t,s,r)=>{try{const t=await d.A.uploadFile(e,s);if(t.success)return v(e=>{const t=new Map(e);return t.set(r,(0,a.A)((0,a.A)({},t.get(r)),{},{progress:100})),t}),{success:!0,url:t.url||t.path,path:t.path,name:e.name,size:e.size,type:e.type,isLocal:!1};{const t=URL.createObjectURL(e);return console.warn("Falling back to local ".concat(x," storage for:"),e.name),{success:!0,url:t,path:"local-files/".concat(r),name:e.name,size:e.size,type:e.type,isLocal:!0}}}catch(l){if(console.error("Error uploading file:",l),"image"===x||"document"===x||"video"===x){const t=URL.createObjectURL(e);console.warn("Falling back to local ".concat(x," storage for:"),e.name);let s="local-files";return"document"===x&&(s="local-documents"),"video"===x&&(s="local-videos"),"image"===x&&(s="local-images"),{success:!0,url:t,path:"".concat(s,"/").concat(r),name:e.name,size:e.size,type:e.type,isLocal:!0}}return{success:!1,error:l.message}}},I=(e,t)=>"image"===x?(0,u.jsx)("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:(0,u.jsx)("img",{src:e.url,alt:"".concat(x," ").concat(t+1),className:"w-full h-full object-cover"})}):"video"===x?(0,u.jsxs)("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden relative",children:[(0,u.jsx)("video",{src:e.url,className:"w-full h-full object-cover",controls:!1}),(0,u.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-30",children:(0,u.jsx)(c.gSK,{className:"text-white text-2xl"})})]}):(0,u.jsx)("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden flex items-center justify-center",children:(0,u.jsx)(c.Gp9,{className:"text-gray-400 text-3xl"})});return(0,u.jsxs)("div",{className:"enhanced-file-upload ".concat(h),children:[(0,u.jsxs)("div",{className:"\n          border-2 border-dashed rounded-lg p-6 text-center transition-all duration-200\n          ".concat(g?"border-gray-200 bg-gray-50 cursor-not-allowed":j?"border-brand-blue bg-blue-50":"border-gray-300 hover:border-brand-blue cursor-pointer","\n        "),onDragOver:e=>{e.preventDefault(),N(!0)},onDragLeave:e=>{e.preventDefault(),N(!1)},onDrop:e=>{e.preventDefault(),N(!1);const t=e.dataTransfer.files;t.length>0&&_(t)},onClick:()=>!g&&document.getElementById("".concat(x,"-upload")).click(),children:[(0,u.jsx)("input",{id:"".concat(x,"-upload"),type:"file",multiple:!0,accept:C.accept,onChange:e=>{const t=e.target.files;t.length>0&&_(t),e.target.value=""},className:"hidden",disabled:g}),(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)(C.icon,{className:"mx-auto text-3xl ".concat(g?"text-gray-300":"text-gray-400")}),(0,u.jsxs)("div",{className:"space-y-1",children:[(0,u.jsx)("p",{className:"text-sm font-medium text-gray-700",children:g?"".concat(x," upload disabled"):C.placeholder}),(0,u.jsx)("p",{className:"text-xs text-gray-500",children:C.subtext}),(0,u.jsxs)("p",{className:"text-xs text-gray-500",children:[b.length,"/",o," ",x,"s uploaded"]})]})]})]}),(()=>{const e=Array.from(f.values());return 0===e.length?null:(0,u.jsxs)("div",{className:"mt-4",children:[(0,u.jsxs)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:["Uploading (",e.length,")"]}),(0,u.jsx)("div",{className:"space-y-3",children:e.map((e,t)=>(0,u.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,u.jsx)("div",{className:"flex-shrink-0",children:"completed"===e.status?(0,u.jsx)(c.CMH,{className:"text-green-500"}):"error"===e.status?(0,u.jsx)(c.BS8,{className:"text-red-500"}):(0,u.jsx)(C.icon,{className:"text-blue-500"})}),(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.file.name}),(0,u.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:(0,u.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat("completed"===e.status?"bg-green-500":"error"===e.status?"bg-red-500":"bg-blue-500"),style:{width:"".concat(e.progress,"%")}})}),(0,u.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"completed"===e.status?"Upload complete":"error"===e.status?"Upload failed":"".concat(Math.round(e.progress),"% uploaded")})]})]},"uploading_".concat(t)))})]})})(),b.length>0&&(0,u.jsxs)("div",{className:"mt-6",children:[(0,u.jsxs)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:[x.charAt(0).toUpperCase()+x.slice(1),"s (",b.length,")"]}),(0,u.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:b.map((e,t)=>(0,u.jsxs)("div",{className:"relative group",children:[I(e,t),(0,u.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 rounded-lg flex items-center justify-center",children:(0,u.jsxs)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex space-x-2",children:[(0,u.jsx)("button",{onClick:()=>w(t),className:"p-2 bg-white bg-opacity-90 rounded-full hover:bg-opacity-100 transition-all",title:"Preview",children:(0,u.jsx)(c.Ny1,{className:"text-gray-700 text-sm"})}),!g&&(0,u.jsx)("button",{onClick:()=>(async e=>{if(g)return;const t=b[e];if(t.isUploaded&&t.path)try{await d.A.deleteFile(t.path)}catch(r){console.error("Error deleting file from storage:",r)}const a=b.filter((t,s)=>s!==e);y(a),s&&s(a),m.Ay.success("File removed successfully")})(t),className:"p-2 bg-red-500 bg-opacity-90 rounded-full hover:bg-opacity-100 transition-all",title:"Remove",children:(0,u.jsx)(c.QCr,{className:"text-white text-sm"})})]})}),(0,u.jsxs)("div",{className:"mt-1",children:[(0,u.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.name}),(0,u.jsx)("p",{className:"text-xs text-gray-400",children:d.A.formatFileSize(e.size)})]})]},e.id||t))})]}),(()=>{if(null===A)return null;const e=b[A];return e?(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,u.jsxs)("div",{className:"relative max-w-4xl max-h-full",children:[(0,u.jsx)("button",{onClick:()=>w(null),className:"absolute top-4 right-4 p-2 bg-white bg-opacity-90 rounded-full hover:bg-opacity-100 transition-all z-10",children:(0,u.jsx)(c.QCr,{className:"text-gray-700"})}),"image"===x?(0,u.jsx)("img",{src:e.url,alt:"".concat(x," ").concat(A+1),className:"max-w-full max-h-full object-contain rounded-lg"}):"video"===x?(0,u.jsx)("video",{src:e.url,controls:!0,className:"max-w-full max-h-full rounded-lg"}):(0,u.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-md",children:[(0,u.jsx)(c.Gp9,{className:"text-gray-400 text-6xl mx-auto mb-4"}),(0,u.jsx)("h3",{className:"text-lg font-medium text-gray-900 text-center",children:e.name}),(0,u.jsx)("p",{className:"text-sm text-gray-500 text-center mt-2",children:d.A.formatFileSize(e.size)}),(0,u.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"block mt-4 text-center text-blue-600 hover:text-blue-800",children:"Download File"})]}),(0,u.jsx)("div",{className:"absolute bottom-4 left-4 right-4 bg-black bg-opacity-50 text-white p-3 rounded-lg",children:(0,u.jsxs)("p",{className:"text-sm",children:[e.name," (",d.A.formatFileSize(e.size),")"]})})]})}):null})()]})},x=e=>{let{propertyId:t,onImagesChange:s,initialImages:a=[],maxImages:l=10,disabled:o=!1,className:n=""}=e;const[i,d]=(0,r.useState)(""),x=()=>{if(o||!i.trim())return;const e=i.trim();try{if(!(e.startsWith("http://")||e.startsWith("https://")))return void m.Ay.error("Please enter a valid http(s) URL");const t={id:Date.now()+Math.random(),url:e,name:e,size:0,path:null,isUploaded:!1},r=a||[];if(r.length>=l)return void m.Ay.error("Maximum ".concat(l," images allowed"));const o=[...r,t];s&&s(o),d(""),m.Ay.success("Image URL added")}catch(t){m.Ay.error("Failed to add image URL")}};return(0,u.jsxs)("div",{className:"property-image-upload ".concat(n),children:[(0,u.jsx)(p,{propertyId:t,onFilesChange:s,initialFiles:a,maxFiles:l,maxSize:10485760,allowedTypes:["image/jpeg","image/png","image/webp","image/gif"],type:"image",disabled:o}),!o&&(0,u.jsxs)("div",{className:"mt-4",children:[(0,u.jsxs)("div",{className:"flex gap-3",children:[(0,u.jsx)("input",{type:"url",value:i,onChange:e=>d(e.target.value),placeholder:"Paste image URL (https://...)",className:"flex-1 px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",onKeyPress:e=>"Enter"===e.key&&x()}),(0,u.jsxs)("button",{type:"button",onClick:x,className:"px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",disabled:!i.trim(),children:[(0,u.jsx)(c.OiG,{className:"text-sm"}),"Add URL"]})]}),(0,u.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"You can add images by uploading files or pasting image URLs"})]})]})},g=e=>{let{propertyId:t,onVideosChange:s,initialVideos:a=[],maxVideos:r=5,disabled:l=!1,className:o=""}=e;return(0,u.jsx)(p,{propertyId:t,onFilesChange:s,initialFiles:a,maxFiles:r,maxSize:104857600,allowedTypes:["video/mp4","video/webm","video/ogg","video/quicktime"],type:"video",disabled:l,className:o})},h=e=>{let{propertyId:t,onDocumentsChange:s,initialDocuments:a=[],maxDocuments:r=10,disabled:l=!1,className:o=""}=e;return(0,u.jsx)(p,{propertyId:t,onFilesChange:s,initialFiles:a,maxFiles:r,maxSize:26214400,allowedTypes:["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","application/rtf","application/vnd.oasis.opendocument.text"],type:"document",disabled:l,className:o})},b=e=>{let{isOpen:t,onClose:s,onSubmit:l}=e;const[o,n]=(0,r.useState)({title:"",roiPercent:"",durationUnit:"monthly",durationValue:"",minAmount:"",payoutSchedule:"monthly",riskLevel:"medium",redemptionTerms:"",startDate:"",maturityDate:"",summary:""}),[i,d]=(0,r.useState)([]),[m,p]=(0,r.useState)({});if(!t)return null;const x=e=>{const{name:t,value:s}=e.target;n(e=>(0,a.A)((0,a.A)({},e),{},{[t]:s})),m[t]&&p(e=>(0,a.A)((0,a.A)({},e),{},{[t]:""}))};return(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,u.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-lg max-h-[90vh] flex flex-col relative",children:[(0,u.jsxs)("div",{className:"p-6 pb-4 border-b border-gray-100 flex-shrink-0",children:[(0,u.jsx)("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",children:(0,u.jsx)(c.QCr,{})}),(0,u.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Investment Details"}),(0,u.jsx)("p",{className:"text-sm text-gray-600",children:"Provide investment information for this collateralized property."})]}),(0,u.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Investment Title"}),(0,u.jsx)("input",{name:"title",value:o.title,onChange:x,className:"w-full px-4 py-3 border-2 rounded-xl ".concat(m.title?"border-red-300":"border-gray-200"),placeholder:"e.g., Greenwood Estate Fixed Income"}),m.title&&(0,u.jsx)("p",{className:"text-sm text-red-600 mt-1",children:m.title})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ROI (%)"}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("input",{type:"number",name:"roiPercent",value:o.roiPercent,onChange:x,className:"w-full pl-10 pr-4 py-3 border-2 rounded-xl ".concat(m.roiPercent?"border-red-300":"border-gray-200"),placeholder:"12"}),(0,u.jsx)(c.lWC,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"})]}),m.roiPercent&&(0,u.jsx)("p",{className:"text-sm text-red-600 mt-1",children:m.roiPercent})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Duration"}),(0,u.jsxs)("div",{className:"flex gap-2",children:[(0,u.jsx)("input",{type:"number",name:"durationValue",value:o.durationValue,onChange:x,className:"flex-1 px-4 py-3 border-2 rounded-xl ".concat(m.durationValue?"border-red-300":"border-gray-200"),placeholder:"12"}),(0,u.jsxs)("select",{name:"durationUnit",value:o.durationUnit,onChange:x,className:"px-4 py-3 border-2 border-gray-200 rounded-xl min-w-[120px]",children:[(0,u.jsx)("option",{value:"monthly",children:"Monthly"}),(0,u.jsx)("option",{value:"annually",children:"Annually"})]})]}),m.durationValue&&(0,u.jsx)("p",{className:"text-sm text-red-600 mt-1",children:m.durationValue})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Minimum Amount"}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("input",{type:"number",name:"minAmount",value:o.minAmount,onChange:x,className:"w-full pl-10 pr-4 py-3 border-2 rounded-xl ".concat(m.minAmount?"border-red-300":"border-gray-200"),placeholder:"500000"}),(0,u.jsx)(c.Tsk,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"})]}),m.minAmount&&(0,u.jsx)("p",{className:"text-sm text-red-600 mt-1",children:m.minAmount})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Payout Schedule"}),(0,u.jsxs)("select",{name:"payoutSchedule",value:o.payoutSchedule,onChange:x,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl",children:[(0,u.jsx)("option",{value:"monthly",children:"Monthly"}),(0,u.jsx)("option",{value:"quarterly",children:"Quarterly"}),(0,u.jsx)("option",{value:"annually",children:"Annually"}),(0,u.jsx)("option",{value:"end-of-term",children:"End of Term"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Risk Level"}),(0,u.jsxs)("select",{name:"riskLevel",value:o.riskLevel,onChange:x,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl",children:[(0,u.jsx)("option",{value:"low",children:"Low"}),(0,u.jsx)("option",{value:"medium",children:"Medium"}),(0,u.jsx)("option",{value:"high",children:"High"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Start Date (optional)"}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("input",{type:"date",name:"startDate",value:o.startDate,onChange:x,className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl"}),(0,u.jsx)(c.bfZ,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Maturity Date (optional)"}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("input",{type:"date",name:"maturityDate",value:o.maturityDate,onChange:x,className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl"}),(0,u.jsx)(c.bfZ,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"})]})]})]}),(0,u.jsxs)("div",{className:"mt-4",children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Investment Summary"}),(0,u.jsx)("textarea",{name:"summary",value:o.summary,onChange:x,rows:4,className:"w-full px-4 py-3 border-2 rounded-xl ".concat(m.summary?"border-red-300":"border-gray-200"),placeholder:"Briefly explain the investment, collateral structure, and terms."}),m.summary&&(0,u.jsx)("p",{className:"text-sm text-red-600 mt-1",children:m.summary})]}),(0,u.jsxs)("div",{className:"mt-6",children:[(0,u.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[(0,u.jsx)(c.t69,{className:"mr-2 text-green-600"})," Investment Documents"]}),(0,u.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-blue-400 transition-colors",children:[(0,u.jsx)("input",{type:"file",multiple:!0,accept:".pdf,.doc,.docx",id:"investment-docs",className:"hidden",onChange:e=>{const t=Array.from(e.target.files).map((e,t)=>({url:URL.createObjectURL(e),name:e.name,size:e.size,type:e.type}));d(e=>[...e,...t])}}),(0,u.jsxs)("label",{htmlFor:"investment-docs",className:"cursor-pointer",children:[(0,u.jsx)(c.HVe,{className:"mx-auto text-3xl text-gray-400 mb-2"}),(0,u.jsx)("p",{className:"text-sm text-gray-600",children:"Click to upload investment documents"})]})]}),i.length>0&&(0,u.jsx)("div",{className:"mt-3 space-y-2",children:i.map((e,t)=>(0,u.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[(0,u.jsx)("span",{className:"text-sm text-gray-700 truncate",children:e.name}),(0,u.jsx)("button",{type:"button",onClick:()=>(e=>{d(t=>t.filter((t,s)=>s!==e))})(t),className:"text-red-500 hover:text-red-700",children:(0,u.jsx)(c.QCr,{})})]},t))})]})]}),(0,u.jsxs)("div",{className:"p-6 pt-4 border-t border-gray-100 flex justify-end gap-3 flex-shrink-0",children:[(0,u.jsx)("button",{onClick:s,className:"px-6 py-3 border-2 border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,u.jsx)("button",{onClick:()=>{const e=(()=>{const e={};return o.title||(e.title="Investment title is required"),o.roiPercent||(e.roiPercent="ROI is required"),o.durationValue||(e.durationValue="Duration is required"),o.minAmount||(e.minAmount="Minimum amount is required"),o.summary||(e.summary="Summary is required"),e})();Object.keys(e).length?p(e):l({investment:{title:o.title,roiPercent:Number(o.roiPercent),durationUnit:o.durationUnit,durationValue:Number(o.durationValue),minAmount:Number(o.minAmount),payoutSchedule:o.payoutSchedule,riskLevel:o.riskLevel,redemptionTerms:o.redemptionTerms,startDate:o.startDate||null,maturityDate:o.maturityDate||null,summary:o.summary},investmentDocuments:i})},className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all",children:"Save & Publish"})]})]})})},y=e=>{let{isAgent:t,isPropertyOwner:s,isListingAsAgent:a,setIsListingAsAgent:l,attestationLetter:o,setAttestationLetter:n,documentStatus:i,onAttestationUpload:d,errors:m}=e;const[p,x]=(0,r.useState)(!1),g=e=>{e&&"application/pdf"===e.type?(n(e),d(e)):alert("Please upload a PDF file for the attestation letter.")},h=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?x(!0):"dragleave"===e.type&&x(!1)};return(0,u.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[(0,u.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,u.jsx)(c.x$1,{className:"mr-2"}),"Property Listing Type"]}),(0,u.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,u.jsx)("div",{className:"flex items-center space-x-4",children:(0,u.jsxs)("label",{className:"flex items-center",children:[(0,u.jsx)("input",{type:"radio",name:"listingType",value:"owner",checked:!a,onChange:()=>l(!1),className:"mr-2"}),(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)(c.ymh,{className:"mr-2 text-blue-500"}),(0,u.jsx)("span",{className:"font-medium",children:"I am the property owner"})]})]})}),(0,u.jsx)("div",{className:"flex items-center space-x-4",children:(0,u.jsxs)("label",{className:"flex items-center",children:[(0,u.jsx)("input",{type:"radio",name:"listingType",value:"agent",checked:a,onChange:()=>l(!0),className:"mr-2"}),(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)(c.x$1,{className:"mr-2 text-orange-500"}),(0,u.jsx)("span",{className:"font-medium",children:"I am an agent listing for a client"})]})]})})]}),a&&(0,u.jsxs)("div",{className:"border-t pt-6",children:[(0,u.jsxs)("div",{className:"mb-4",children:[(0,u.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-2",children:"Agent Requirements"}),(0,u.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"As an agent, you must upload a letter of attestation from the property owner authorizing you to list this property. This document will be verified by our admin team before the property is published."})]}),(0,u.jsx)("div",{className:"p-4 rounded-lg border ".concat((()=>{if(null===i||void 0===i||!i.hasAttestationLetter)return"text-red-600 bg-red-50 border-red-200";switch(i.attestationStatus){case"verified":return"text-green-600 bg-green-50 border-green-200";case"pending":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"rejected":return"text-red-600 bg-red-50 border-red-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}})()," mb-4"),children:(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex items-center",children:[(()=>{if(null===i||void 0===i||!i.hasAttestationLetter)return(0,u.jsx)(c.BS8,{className:"text-red-500"});switch(i.attestationStatus){case"verified":return(0,u.jsx)(c.CMH,{className:"text-green-500"});case"pending":return(0,u.jsx)(c.BS8,{className:"text-yellow-500"});case"rejected":return(0,u.jsx)(c.BS8,{className:"text-red-500"});default:return(0,u.jsx)(c.BS8,{className:"text-gray-500"})}})(),(0,u.jsx)("span",{className:"ml-2 font-medium",children:(()=>{if(null===i||void 0===i||!i.hasAttestationLetter)return"No attestation letter uploaded";switch(i.attestationStatus){case"verified":return"Attestation letter verified";case"pending":return"Attestation letter pending review";case"rejected":return"Attestation letter rejected - please upload a new one";default:return"Attestation letter status unknown"}})()})]}),"verified"===(null===i||void 0===i?void 0:i.attestationStatus)&&(0,u.jsx)("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Ready to list"})]})}),(0,u.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-6 text-center transition-colors ".concat(p?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400"),onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:e=>{e.preventDefault(),e.stopPropagation(),x(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&g(e.dataTransfer.files[0])},children:[(0,u.jsx)(c.l1U,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,u.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:(0,u.jsx)("span",{className:"font-medium",children:"Upload Attestation Letter"})}),(0,u.jsx)("p",{className:"text-xs text-gray-500 mb-4",children:"Drag and drop your PDF file here, or click to browse"}),(0,u.jsx)("input",{type:"file",accept:".pdf",onChange:e=>{e.target.files&&e.target.files[0]&&g(e.target.files[0])},className:"hidden",id:"attestation-upload"}),(0,u.jsx)("label",{htmlFor:"attestation-upload",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 cursor-pointer",children:"Choose File"}),o&&(0,u.jsx)("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)(c.CMH,{className:"text-green-500 mr-2"}),(0,u.jsx)("span",{className:"text-sm text-green-700",children:o.name})]})})]}),m.attestationLetter&&(0,u.jsx)("p",{className:"mt-2 text-sm text-red-600",children:m.attestationLetter}),(0,u.jsx)("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,u.jsxs)("div",{className:"flex",children:[(0,u.jsx)(c.BS8,{className:"text-yellow-500 mr-2 mt-0.5"}),(0,u.jsxs)("div",{className:"text-sm text-yellow-800",children:[(0,u.jsx)("p",{className:"font-medium",children:"Important Notice:"}),(0,u.jsx)("p",{className:"mt-1",children:"Properties listed by agents without verified attestation letters will not be published until the document is reviewed and approved by our admin team. This process typically takes 1-2 business days."})]})]})})]}),!a&&(0,u.jsx)("div",{className:"border-t pt-6",children:(0,u.jsx)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,u.jsxs)("div",{className:"flex",children:[(0,u.jsx)(c.ymh,{className:"text-blue-500 mr-2 mt-0.5"}),(0,u.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,u.jsx)("p",{className:"font-medium",children:"Property Owner Listing:"}),(0,u.jsx)("p",{className:"mt-1",children:"As the property owner, you can list your property immediately without additional documentation requirements. Your property will be published after basic verification."})]})]})})})]})};let f=!1,v=!1,j=null,N=!1;(()=>{const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:5000",REACT_APP_FLUTTERWAVE_ENCRYPTION_KEY:"FLWSECK_TESTf2e459954fd8",REACT_APP_FLUTTERWAVE_PUBLIC_KEY:"FLWPUBK_TEST-04fa9716ef05b43e581444120c688399-X",REACT_APP_FLUTTERWAVE_SECRET_KEY:"FLWSECK_TEST-c913279c55318b1715de93539229f706-X"}.REACT_APP_GOOGLE_MAPS_API_KEY;!e||"YOUR_GOOGLE_MAPS_API_KEY"===e||f||v||A(e)})();const A=e=>f?Promise.resolve():(v||(v=!0,j=new Promise((t,s)=>{if(window.google&&window.google.maps)return f=!0,v=!1,void t();const a=document.createElement("script");a.src="https://maps.googleapis.com/maps/api/js?key=".concat(e,"&libraries=places&v=weekly&loading=async"),a.async=!0,a.defer=!0;const r=document.createElement("link");r.rel="preconnect",r.href="https://maps.googleapis.com",document.head.appendChild(r);const l=document.createElement("link");l.rel="dns-prefetch",l.href="https://maps.googleapis.com",document.head.appendChild(l),a.onload=()=>{f=!0,v=!1,t()},a.onerror=()=>{v=!1,s(new Error("Failed to load Google Maps API. Please check your API key and ensure the required APIs are enabled."))},document.head.appendChild(a)})),j),w=()=>!!(f&&window.google&&window.google.maps),S=e=>{let{value:t,onChange:s,onPlaceSelect:a,placeholder:l="Enter address...",className:o="",error:n=!1}=e;const[i,d]=(0,r.useState)([]),[m,p]=(0,r.useState)(!1),[x,g]=(0,r.useState)(!1),[h,b]=(0,r.useState)(!0),[y,f]=(0,r.useState)([]),v=(0,r.useRef)(null),j=(0,r.useRef)(null),S=(0,r.useRef)(null),C=(0,r.useRef)(null),P=(0,r.useRef)(null),k=(0,r.useRef)(0),_=(0,r.useRef)(new Map),E=()=>{try{const e=localStorage.getItem("addressMemory");return e?JSON.parse(e):[]}catch(n){return console.error("Error loading address memory:",n),[]}},I=(0,r.useCallback)(e=>{try{const t=E(),s=[{address:e,timestamp:Date.now()},...t.filter(t=>t.address!==e)].slice(0,10);return localStorage.setItem("addressMemory",JSON.stringify(s)),s}catch(n){return console.error("Error saving address to memory:",n),[]}},[]),T=(0,r.useCallback)(e=>{if(!e||e.length<2)return[];return E().filter(t=>t.address.toLowerCase().includes(e.toLowerCase())).slice(0,5)},[]);(0,r.useEffect)(()=>{const e=()=>{if(window.google&&window.google.maps&&(!N&&w()?(N=!0,1):N))if(window.google.maps.places){if(window.google.maps.places.AutocompleteSuggestion)try{S.current=new window.google.maps.places.AutocompleteSuggestion}catch(n){console.log("AutocompleteSuggestion not available, using AutocompleteService"),S.current=new window.google.maps.places.AutocompleteService}else S.current=new window.google.maps.places.AutocompleteService;if(window.google.maps.places.Place)try{C.current=new window.google.maps.places.Place}catch(n){console.log("Place API not available, using PlacesService"),C.current=new window.google.maps.places.PlacesService(document.createElement("div"))}else C.current=new window.google.maps.places.PlacesService(document.createElement("div"))}else console.error("Google Maps Places API not available")};if(w())e();else{const t={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:5000",REACT_APP_FLUTTERWAVE_ENCRYPTION_KEY:"FLWSECK_TESTf2e459954fd8",REACT_APP_FLUTTERWAVE_PUBLIC_KEY:"FLWPUBK_TEST-04fa9716ef05b43e581444120c688399-X",REACT_APP_FLUTTERWAVE_SECRET_KEY:"FLWSECK_TEST-c913279c55318b1715de93539229f706-X"}.REACT_APP_GOOGLE_MAPS_API_KEY||"YOUR_GOOGLE_MAPS_API_KEY";t&&"YOUR_GOOGLE_MAPS_API_KEY"!==t?A(t).then(e).catch(e=>{console.error("Failed to load Google Maps API:",e),S.current=null,C.current=null,b(!1)}):(S.current=null,C.current=null,b(!1))}},[]);const D=(0,r.useCallback)(e=>{var t,s;const a=++k.current,r=T(e);f(r);const l=e.toLowerCase().trim();if(_.current.has(l)){const e=_.current.get(l);return d(e),p(!0),void g(!1)}if(!S.current||null===(t=window.google)||void 0===t||null===(s=t.maps)||void 0===s||!s.places)return g(!1),d([]),void p(r.length>0);const o={input:e,types:["address"],componentRestrictions:{country:"ng"}};S.current.getPlacePredictions?S.current.getPlacePredictions(o,(e,t)=>{if(a===k.current)if(g(!1),t===window.google.maps.places.PlacesServiceStatus.OK&&e){if(_.current.size>=50){const e=_.current.keys().next().value;_.current.delete(e)}_.current.set(l,e),d(e),p(!0)}else d([]),p(!1)}):S.current.getSuggestions&&S.current.getSuggestions(o).then(e=>{if(a===k.current)if(g(!1),e&&e.length>0){if(_.current.size>=50){const e=_.current.keys().next().value;_.current.delete(e)}_.current.set(l,e),d(e),p(!0)}else d([]),p(!1)}).catch(e=>{console.error("Autocomplete error:",e),g(!1),d([]),p(!1)})},[]),M=(0,r.useCallback)(e=>{const t=e.target.value;s(t),P.current&&clearTimeout(P.current),t.length>2?(g(!0),P.current=setTimeout(()=>{D(t)},300)):(d([]),p(!1),g(!1))},[s,D]),F=(0,r.useCallback)(e=>{const t=e.target.value.trim();t.length>5&&I(t),setTimeout(()=>{var e;null!==(e=j.current)&&void 0!==e&&e.contains(document.activeElement)||p(!1)},200)},[]),L=(0,r.useCallback)(e=>{var t,r;if(!C.current||null===(t=window.google)||void 0===t||null===(r=t.maps)||void 0===r||!r.places)return void console.warn("Google Maps places service not available");P.current&&clearTimeout(P.current);const l={placeId:e.place_id,fields:["formatted_address","geometry","address_components","url"]};C.current.getDetails?C.current.getDetails(l,(t,r)=>{if(r===window.google.maps.places.PlacesServiceStatus.OK&&t){var l,o,n,i,c,m,u;const r=t.address_components||[],x=(null===(l=r.find(e=>e.types.includes("locality")))||void 0===l?void 0:l.long_name)||"",g=(null===(o=r.find(e=>e.types.includes("administrative_area_level_1")))||void 0===o?void 0:o.long_name)||"",h=(null===(n=r.find(e=>e.types.includes("postal_code")))||void 0===n?void 0:n.long_name)||"";a({address:t.formatted_address,city:x,state:g,zipCode:h,coordinates:{latitude:null===(i=t.geometry)||void 0===i||null===(c=i.location)||void 0===c?void 0:c.lat(),longitude:null===(m=t.geometry)||void 0===m||null===(u=m.location)||void 0===u?void 0:u.lng()},googleMapsUrl:t.url||"https://www.google.com/maps/place/?q=place_id:".concat(e.place_id)}),I(t.formatted_address),s(t.formatted_address),p(!1),d([])}}):C.current.fetchFields&&C.current.fetchFields(l).then(t=>{if(t){var r,l,o,n,i,c,m;const u=t.address_components||[],x=(null===(r=u.find(e=>e.types.includes("locality")))||void 0===r?void 0:r.long_name)||"",g=(null===(l=u.find(e=>e.types.includes("administrative_area_level_1")))||void 0===l?void 0:l.long_name)||"",h=(null===(o=u.find(e=>e.types.includes("postal_code")))||void 0===o?void 0:o.long_name)||"";a({address:t.formatted_address,city:x,state:g,zipCode:h,coordinates:{latitude:null===(n=t.geometry)||void 0===n||null===(i=n.location)||void 0===i?void 0:i.lat(),longitude:null===(c=t.geometry)||void 0===c||null===(m=c.location)||void 0===m?void 0:m.lng()},googleMapsUrl:t.url||"https://www.google.com/maps/place/?q=place_id:".concat(e.place_id)}),I(t.formatted_address),s(t.formatted_address),p(!1),d([])}}).catch(e=>{console.error("Place details error:",e)})},[a,s]),R=(0,r.useCallback)(e=>{P.current&&clearTimeout(P.current),s(e.address),a({address:e.address,city:"",state:"",zipCode:"",coordinates:{latitude:null,longitude:null},googleMapsUrl:""}),p(!1),d([]),f([])},[s,a]),U=(0,r.useCallback)(()=>{var e;P.current&&clearTimeout(P.current),s(""),d([]),p(!1),g(!1),null===(e=v.current)||void 0===e||e.focus()},[s]),O=((0,r.useCallback)(e=>{setTimeout(()=>{var e;null!==(e=j.current)&&void 0!==e&&e.contains(document.activeElement)||p(!1)},200)},[]),(0,r.useCallback)(()=>{i.length>0&&p(!0)},[i.length]));return(0,r.useEffect)(()=>()=>{P.current&&clearTimeout(P.current)},[]),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("input",{ref:v,type:"text",value:t,onChange:M,onBlur:F,onFocus:O,className:"w-full pl-12 pr-12 py-4 border-2 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300 ".concat(n?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-blue-500"),placeholder:h?l:"Enter address manually (autocomplete disabled)"}),(0,u.jsx)(c.vq8,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-lg"}),t&&(0,u.jsx)("button",{type:"button",onClick:U,className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:(0,u.jsx)(c.QCr,{className:"text-sm"})})]}),x&&(0,u.jsx)("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-b-xl shadow-lg z-50",children:(0,u.jsxs)("div",{className:"p-4 text-center",children:[(0,u.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mx-auto"}),(0,u.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Searching addresses..."})]})}),!h&&(0,u.jsx)("div",{className:"mt-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,u.jsxs)("p",{className:"text-sm text-yellow-700",children:[(0,u.jsx)(c.BS8,{className:"inline mr-1"}),"Google Maps autocomplete is disabled. Please enter the address manually."]})}),m&&(i.length>0||y.length>0)&&(0,u.jsxs)("div",{ref:j,className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-b-xl shadow-lg z-50 max-h-60 overflow-y-auto",children:[y.length>0&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-200",children:(0,u.jsx)("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Recent Addresses"})}),y.map((e,t)=>(0,u.jsx)("button",{type:"button",onClick:()=>R(e),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 transition-colors focus:outline-none focus:bg-gray-50",children:(0,u.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,u.jsx)(c.vq8,{className:"text-green-500 text-sm mt-1 flex-shrink-0"}),(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.address}),(0,u.jsx)("p",{className:"text-xs text-gray-500",children:"Previously used"})]})]})},"memory-".concat(t))),i.length>0&&(0,u.jsx)("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-200",children:(0,u.jsx)("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Google Maps Suggestions"})})]}),i.slice(0,8).map(e=>{var t,s;return(0,u.jsx)("button",{type:"button",onClick:()=>L(e),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 transition-colors focus:outline-none focus:bg-gray-50",children:(0,u.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,u.jsx)(c.vq8,{className:"text-blue-500 text-sm mt-1 flex-shrink-0"}),(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:(null===(t=e.structured_formatting)||void 0===t?void 0:t.main_text)||e.description}),(null===(s=e.structured_formatting)||void 0===s?void 0:s.secondary_text)&&(0,u.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.structured_formatting.secondary_text})]})]})},e.place_id)})]})]})},C=e=>{let{value:t,onChange:s,placeholder:a="Enter address...",className:l="",error:o=!1,fieldType:n="address"}=e;const[i,d]=(0,r.useState)([]),[m,p]=(0,r.useState)(!1),[x,g]=(0,r.useState)(null),h=(0,r.useCallback)(()=>{try{const e=localStorage.getItem("addressMemory_".concat(n));return e?JSON.parse(e):[]}catch(o){return console.error("Error loading address memory for ".concat(n,":"),o),[]}},[n]),b=(0,r.useCallback)(e=>{if(e&&!(e.trim().length<3))try{const t=h(),s=[{address:e.trim(),timestamp:Date.now()},...t.filter(t=>t.address!==e.trim())].slice(0,10);return localStorage.setItem("addressMemory_".concat(n),JSON.stringify(s)),s}catch(o){return console.error("Error saving address to memory for ".concat(n,":"),o),[]}},[n,h]),y=(0,r.useCallback)(e=>{if(!e||e.length<2)return[];return h().filter(t=>t.address.toLowerCase().includes(e.toLowerCase())).slice(0,5)},[h]),f=(0,r.useCallback)(e=>{const t=e.target.value;s(t);const a=y(t);d(a),p(a.length>0)},[s,y]),v=(0,r.useCallback)(e=>{s(e.address),p(!1),d([])},[s]),j=(0,r.useCallback)(e=>{const t=e.target.value.trim();t.length>2&&b(t),setTimeout(()=>{p(!1)},200)},[b]),N=(0,r.useCallback)(()=>{i.length>0&&p(!0)},[i.length]),A=(0,r.useCallback)(()=>{try{localStorage.removeItem("addressMemory_".concat(n)),d([]),p(!1)}catch(o){console.error("Error clearing memory for ".concat(n,":"),o)}},[n]);return(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("input",{ref:g,type:"text",value:t,onChange:f,onBlur:j,onFocus:N,className:"w-full pl-12 pr-10 py-3 border-2 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300 ".concat(o?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-blue-500"," ").concat(l),placeholder:a,"aria-invalid":o?"true":"false","aria-describedby":o?"".concat(n,"-error"):void 0}),(0,u.jsx)(c.vq8,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-lg"}),h().length>0&&(0,u.jsx)("button",{type:"button",onClick:A,className:"absolute right-10 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-red-500 transition-colors",title:"Clear address history",children:(0,u.jsx)(c.QCr,{className:"h-4 w-4"})})]}),m&&i.length>0&&(0,u.jsxs)("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-b-xl shadow-lg z-50 max-h-60 overflow-y-auto",children:[(0,u.jsx)("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-200",children:(0,u.jsxs)("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide flex items-center",children:[(0,u.jsx)(c.OKX,{className:"mr-1"}),"Recent ",n," entries"]})}),i.map((e,t)=>(0,u.jsx)("button",{type:"button",onClick:()=>v(e),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 transition-colors focus:outline-none focus:bg-gray-50",children:(0,u.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,u.jsx)(c.vq8,{className:"text-green-500 text-sm mt-1 flex-shrink-0"}),(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.address}),(0,u.jsx)("p",{className:"text-xs text-gray-500",children:"Previously used"})]})]})},"memory-".concat(t)))]})]})};var P=s(8852);const k=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;const a=(0,r.useRef)(null),l=(0,r.useRef)(!0);(0,r.useEffect)(()=>{if(!l.current)return a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(s){console.error("Error auto-saving form data:",s)}},s),()=>{a.current&&clearTimeout(a.current)};l.current=!1},[t,e,s]);return{clearSavedData:()=>{try{localStorage.removeItem(e)}catch(t){console.error("Error clearing saved data:",t)}},loadSavedData:()=>{try{const t=localStorage.getItem(e);if(t)return JSON.parse(t)}catch(t){console.error("Error loading saved data:",t)}return null}}},_=()=>{const e=(0,l.Zp)(),t=(0,l.zy)(),{createProperty:s,updateProperty:p}=(0,o.NC)(),{user:f}=(0,n.As)(),{isAgent:v,isPropertyOwner:j,checkDocumentStatus:N,uploadAgentDocument:A}=(0,i.U)(),[w,_]=(0,r.useState)({title:"",description:"",price:"",type:"",status:"",location:{address:"",city:"",state:"",zipCode:"",coordinates:{latitude:"",longitude:""},nearestBusStop:{name:"",distance:"",coordinates:{latitude:"",longitude:""}},googleMapsUrl:""},details:{bedrooms:"",bathrooms:"",sqft:"",yearBuilt:"",lotSize:"",parking:"",heating:"",cooling:""},amenities:[],images:[],videos:[],documentation:[],mortgageDetails:{}}),[E,I]=(0,r.useState)({}),[T,D]=(0,r.useState)(!1),[M,F]=(0,r.useState)(0),[L,R]=(0,r.useState)(""),[U,O]=(0,r.useState)(""),[z,B]=(0,r.useState)(!1),[q,K]=(0,r.useState)(null),[G,V]=(0,r.useState)(!1),[W,H]=(0,r.useState)(null),[J,Y]=(0,r.useState)(null),[Q,X]=(0,r.useState)({mortgageProvider:"",minDownPaymentPercent:"",tenorMonths:"",interestRate:"",monthlyIncomeRequirement:""}),Z="addPropertyForm_".concat((null===f||void 0===f?void 0:f.id)||"guest"),{clearSavedData:$}=k(Z,{},2e3);(0,r.useEffect)(()=>{var e;if(!(null===(e=t.state)||void 0===e?void 0:e.propertyToEdit))try{const e=localStorage.getItem(Z);if(e){var s;const t=JSON.parse(e);(t.title||null!==(s=t.location)&&void 0!==s&&s.address)&&(_(e=>(0,a.A)((0,a.A)((0,a.A)({},e),t),{},{images:e.images,videos:e.videos,documentation:e.documentation})),m.Ay.success("Draft restored from previous session",{duration:3e3}))}}catch(r){console.error("Error loading saved form data:",r)}},[]),(0,r.useEffect)(()=>{const e=setTimeout(()=>{const e=(0,a.A)((0,a.A)({},w),{},{images:[],videos:[],documentation:[]});try{localStorage.setItem(Z,JSON.stringify(e))}catch(t){console.error("Error auto-saving form data:",t)}},2e3);return()=>clearTimeout(e)},[w,Z]),(0,r.useEffect)(()=>{if(v){const e=N();Y(e)}},[v,N]);const ee=e=>{const{name:t,value:s}=e.target;if(t.includes(".")){const[e,r]=t.split(".");if("location"===e&&"address"===r)_(e=>(0,a.A)((0,a.A)({},e),{},{location:(0,a.A)((0,a.A)({},e.location),{},{address:s})}));else if("location"===e&&"city"===r)_(e=>(0,a.A)((0,a.A)({},e),{},{location:(0,a.A)((0,a.A)({},e.location),{},{city:s})}));else if("location"===e&&"state"===r)_(e=>(0,a.A)((0,a.A)({},e),{},{location:(0,a.A)((0,a.A)({},e.location),{},{state:s})}));else if("location"===e&&"zipCode"===r)_(e=>(0,a.A)((0,a.A)({},e),{},{location:(0,a.A)((0,a.A)({},e.location),{},{zipCode:s})}));else if("location"===e&&"googleMapsUrl"===r)_(e=>(0,a.A)((0,a.A)({},e),{},{location:(0,a.A)((0,a.A)({},e.location),{},{googleMapsUrl:s})}));else if(t.includes("coordinates.")){const e=t.split(".")[1];_(t=>(0,a.A)((0,a.A)({},t),{},{location:(0,a.A)((0,a.A)({},t.location),{},{coordinates:(0,a.A)((0,a.A)({},t.location.coordinates),{},{[e]:parseFloat(s)||""})})}))}else if(t.includes("busStop.")){const e=t.split(".")[1];_(t=>(0,a.A)((0,a.A)({},t),{},{location:(0,a.A)((0,a.A)({},t.location),{},{nearestBusStop:(0,a.A)((0,a.A)({},t.location.nearestBusStop),{},{[e]:s})})}))}else if(t.includes("busStopCoordinates.")){const e=t.split(".")[1];_(t=>(0,a.A)((0,a.A)({},t),{},{location:(0,a.A)((0,a.A)({},t.location),{},{nearestBusStop:(0,a.A)((0,a.A)({},t.location.nearestBusStop),{},{coordinates:(0,a.A)((0,a.A)({},t.location.nearestBusStop.coordinates),{},{[e]:parseFloat(s)||""})})})}))}else if(t.includes("details.")){const e=t.split(".")[1];_(t=>(0,a.A)((0,a.A)({},t),{},{details:(0,a.A)((0,a.A)({},t.details),{},{[e]:s})}))}}else _(e=>(0,a.A)((0,a.A)({},e),{},{[t]:s}));E[t]&&I(e=>(0,a.A)((0,a.A)({},e),{},{[t]:""}))},te=()=>{U.trim()&&!w.amenities.includes(U.trim())&&(_(e=>(0,a.A)((0,a.A)({},e),{},{amenities:[...e.amenities,U.trim()]})),O(""))},se=async r=>{r.preventDefault();const l=(()=>{const e={};w.title||(e.title="Title is required"),w.description||(e.description="Description is required"),w.price||(e.price="Price is required"),w.type||(e.type="Property type is required"),w.status||(e.status="Property status is required"),w.location.address||(e["location.address"]="Address is required"),w.location.city||(e["location.city"]="City is required"),w.location.state||(e["location.state"]="State is required"),w.details.bedrooms||(e["details.bedrooms"]="Number of bedrooms is required"),w.details.bathrooms||(e["details.bathrooms"]="Number of bathrooms is required"),w.details.sqft||(e["details.sqft"]="Square footage is required");const t=Boolean(w.location.coordinates.latitude)&&Boolean(w.location.coordinates.longitude);return w.location.googleMapsUrl||t||(e["location.googleMapsUrl"]="Provide Google Maps link or both latitude and longitude"),G&&v&&(null!==J&&void 0!==J&&J.hasAttestationLetter?"verified"!==J.attestationStatus&&(e.attestationLetter="Attestation letter must be verified by admin before listing properties"):e.attestationLetter="Attestation letter is required for agents"),"for-mortgage"===w.status&&(Q.mortgageProvider||(e.mortgageProvider="Mortgage provider is required"),Q.minDownPaymentPercent||(e.minDownPaymentPercent="Minimum down payment is required"),Q.tenorMonths||(e.tenorMonths="Tenor (months) is required"),Q.interestRate||(e.interestRate="Interest rate is required"),Q.monthlyIncomeRequirement||(e.monthlyIncomeRequirement="Monthly income requirement is required")),e})();if(Object.keys(l).length>0)I(l);else if("for-investment"!==w.status||q){D(!0),F(10),R("Validating and creating property...");try{const l=(0,a.A)((0,a.A)((0,a.A)({},w),{},{price:parseFloat(w.price),vendorId:(null===f||void 0===f?void 0:f.id)||(null===f||void 0===f?void 0:f.uid),vendorName:(null===f||void 0===f?void 0:f.displayName)||(null===f||void 0===f?void 0:f.firstName)+" "+(null===f||void 0===f?void 0:f.lastName)||(null===f||void 0===f?void 0:f.email),isAgentListing:G,agentId:G?(null===f||void 0===f?void 0:f.id)||(null===f||void 0===f?void 0:f.uid):null,createdAt:new Date,listingType:w.status,moderationStatus:G?"pending_verification":"pending",details:(0,a.A)((0,a.A)({},w.details),{},{bedrooms:parseInt(w.details.bedrooms),bathrooms:parseInt(w.details.bathrooms),sqft:parseInt(w.details.sqft),yearBuilt:w.details.yearBuilt?parseInt(w.details.yearBuilt):null}),images:w.images&&w.images.length>0?w.images:[],videos:[],documentation:[]},q?{investment:q.investment,investmentDocuments:q.investmentDocuments}:{}),{},{mortgageDetails:"for-mortgage"===w.status?{mortgageProvider:Q.mortgageProvider,minDownPaymentPercent:Number(Q.minDownPaymentPercent),tenorMonths:Number(Q.tenorMonths),interestRate:Number(Q.interestRate),monthlyIncomeRequirement:Number(Q.monthlyIncomeRequirement)}:void 0}),b=await s(l);if(b.success){const s=b.id;m.Ay.success("Property created successfully!"),F(35),R("Finalizing images...");let y=[...w.images||[]];try{const e=y.filter(e=>e.path&&e.path.includes("/temp"));if(e.length>0){const t=await Promise.all(e.map(async e=>{const t=e.path.split("/").pop(),r="properties/".concat(s,"/images/").concat(t),l=await d.A.moveFile(e.path,r);return l.success?(0,a.A)((0,a.A)({},e),{},{url:l.url,path:l.path}):e}));y=y.map(e=>{const s=t.find(t=>t.name&&t.name===e.name||t.path&&t.path===e.path);return s||e})}}catch(r){m.Ay.error("Some images could not be finalized.")}try{F(55),R("Uploading videos and documents...");const[e,t]=await Promise.all([Promise.resolve({success:!0,successful:[]}),Promise.resolve({success:!0,successful:[]})]),a=(e.successful||[]).map((e,t)=>({url:e.url,isPrimary:0===t,caption:e.name})),r=(t.successful||[]).map((e,t)=>({url:e.url,isPrimary:0===t,caption:e.name}));await p(s,{images:y,videos:a,documentation:r}),m.Ay.success("Media uploaded successfully"),F(100),R("Done")}catch(r){m.Ay.error("Property saved, but media upload failed.")}try{const e=f?"vendor_properties_".concat(f.id||f.uid):null;if(e){var o,n,i,c,u,x,g;const t=JSON.parse(localStorage.getItem(e)||"[]"),a={id:s,title:l.title,price:Number(l.price)||0,location:(null===(o=l.location)||void 0===o?void 0:o.address)||(null===(n=l.location)||void 0===n?void 0:n.city)||(null===(i=l.location)||void 0===i?void 0:i.googleMapsUrl)||"Location not specified",bedrooms:Number(null===(c=l.details)||void 0===c?void 0:c.bedrooms)||0,bathrooms:Number(null===(u=l.details)||void 0===u?void 0:u.bathrooms)||0,area:Number(null===(x=l.details)||void 0===x?void 0:x.sqft)||0,image:l.images&&(null===(g=l.images[0])||void 0===g?void 0:g.url)||"https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=400&h=300&fit=crop",status:"pending",views:0,inquiries:0,favorites:0,dateListed:(new Date).toISOString(),lastUpdated:(new Date).toISOString()};localStorage.setItem(e,JSON.stringify([a,...t]))}}catch(h){}$(),t.pathname.includes("/vendor/")?e("/vendor/properties"):e("/dashboard")}else I({general:b.message}),m.Ay.error(b.message||"Failed to create property")}catch(b){I({general:b.message})}finally{D(!1),setTimeout(()=>{F(0),R("")},500)}}else B(!0)};return(0,u.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 py-12",children:[(0,u.jsxs)("div",{className:"max-w-6xl mx-auto px-6",children:[(0,u.jsxs)("div",{className:"text-center mb-12",children:[(0,u.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-600 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg",children:(0,u.jsx)(c.rQ8,{className:"text-white text-3xl"})}),(0,u.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Add New Property"}),(0,u.jsx)("p",{className:"text-xl text-gray-600",children:"List your property with comprehensive details"})]}),(0,u.jsx)("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-8",children:(0,u.jsxs)("form",{onSubmit:se,className:"space-y-8",children:[E.general&&(0,u.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-600 px-6 py-4 rounded-xl",children:(0,u.jsx)("p",{className:"font-medium",children:E.general})}),(0,u.jsx)(y,{isAgent:v,isPropertyOwner:j,isListingAsAgent:G,setIsListingAsAgent:V,attestationLetter:W,setAttestationLetter:H,documentStatus:J,onAttestationUpload:async e=>{try{const t=await A({type:"attestation_letter",file:e,propertyId:null,description:"Letter of attestation for property listing"});if(t.success){const e=N();Y(e)}return t}catch(t){return console.error("Error uploading attestation letter:",t),{success:!1,error:t.message}}},errors:E}),(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,u.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,u.jsx)(c.ymh,{className:"text-white text-lg"})}),(0,u.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Basic Information"})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Property Title"}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)(P.A,{fieldKey:"title",value:w.title,onChange:e=>_(t=>(0,a.A)((0,a.A)({},t),{},{title:e})),placeholder:"e.g., Beautiful 3-bedroom house",className:"pl-12"}),(0,u.jsx)(c.rQ8,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-lg pointer-events-none"})]}),E.title&&(0,u.jsx)("p",{className:"mt-2 text-sm text-red-600",children:E.title})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Property Type"}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsxs)("select",{name:"type",value:w.type,onChange:ee,className:"w-full pl-12 pr-4 py-4 border-2 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300 ".concat(E.type?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-blue-500"),children:[(0,u.jsx)("option",{value:"",children:"Select type"}),["house","apartment","condo","townhouse","land","commercial"].map(e=>(0,u.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]}),(0,u.jsx)(c.ymh,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-lg pointer-events-none"})]}),E.type&&(0,u.jsx)("p",{className:"mt-2 text-sm text-red-600",children:E.type})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Property Status"}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsxs)("select",{name:"status",value:w.status,onChange:ee,className:"w-full pl-12 pr-4 py-4 border-2 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300 ".concat(E.status?"border-red-300 focus:border-red-500":"border-gray-200 focus:border-blue-500"),children:[(0,u.jsx)("option",{value:"",children:"Select status"}),["for-sale","for-rent","for-lease","for-mortgage","for-investment"].map(e=>(0,u.jsx)("option",{value:e,children:"for-sale"===e?"For Sale":"for-rent"===e?"For Rent":"for-lease"===e?"For Lease":"for-mortgage"===e?"For Mortgage":"For Investment"},e))]}),(0,u.jsx)(c.CMH,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-lg pointer-events-none"})]}),E.status&&(0,u.jsx)("p",{className:"mt-2 text-sm text-red-600",children:E.status})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Price (\u20a6)"}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)(P.A,{type:"number",fieldKey:"price",value:w.price,onChange:e=>_(t=>(0,a.A)((0,a.A)({},t),{},{price:e})),placeholder:"50000000",className:"pl-12"}),(0,u.jsx)("span",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-lg font-bold",children:"\u20a6"})]}),E.price&&(0,u.jsx)("p",{className:"mt-2 text-sm text-red-600",children:E.price})]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Description"}),(0,u.jsx)(P.A,{fieldKey:"description",value:w.description,onChange:e=>_(t=>(0,a.A)((0,a.A)({},t),{},{description:e})),multiline:!0,rows:4,placeholder:"Describe your property in detail..."}),E.description&&(0,u.jsx)("p",{className:"mt-2 text-sm text-red-600",children:E.description})]})]}),(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,u.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-teal-600 rounded-lg flex items-center justify-center",children:(0,u.jsx)(c.vq8,{className:"text-white text-lg"})}),(0,u.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Location Information"})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Address"}),(0,u.jsx)(S,{value:w.location.address,onChange:e=>{_(t=>(0,a.A)((0,a.A)({},t),{},{location:(0,a.A)((0,a.A)({},t.location),{},{address:e})}))},onPlaceSelect:e=>{_(t=>(0,a.A)((0,a.A)({},t),{},{location:(0,a.A)((0,a.A)({},t.location),{},{address:e.address,city:e.city,state:e.state,zipCode:e.zipCode,coordinates:e.coordinates,googleMapsUrl:e.googleMapsUrl})}))},placeholder:"Start typing your address...",error:!!E["location.address"]}),E["location.address"]&&(0,u.jsx)("p",{className:"mt-2 text-sm text-red-600",children:E["location.address"]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"City"}),(0,u.jsx)(C,{value:w.location.city,onChange:e=>{_(t=>(0,a.A)((0,a.A)({},t),{},{location:(0,a.A)((0,a.A)({},t.location),{},{city:e})}))},placeholder:"Enter city...",fieldType:"city",error:!!E["location.city"]}),E["location.city"]&&(0,u.jsx)("p",{className:"mt-2 text-sm text-red-600",children:E["location.city"]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"State"}),(0,u.jsx)(C,{value:w.location.state,onChange:e=>{_(t=>(0,a.A)((0,a.A)({},t),{},{location:(0,a.A)((0,a.A)({},t.location),{},{state:e})}))},placeholder:"Enter state...",fieldType:"state",error:!!E["location.state"]}),E["location.state"]&&(0,u.jsx)("p",{className:"mt-2 text-sm text-red-600",children:E["location.state"]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"ZIP Code"}),(0,u.jsx)(C,{value:w.location.zipCode,onChange:e=>{_(t=>(0,a.A)((0,a.A)({},t),{},{location:(0,a.A)((0,a.A)({},t.location),{},{zipCode:e})}))},placeholder:"Enter ZIP code...",fieldType:"zipCode",error:!!E["location.zipCode"]}),E["location.zipCode"]&&(0,u.jsx)("p",{className:"mt-2 text-sm text-red-600",children:E["location.zipCode"]})]})]}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("h4",{className:"text-lg font-semibold text-gray-700 flex items-center",children:[(0,u.jsx)(c.jHd,{className:"mr-2 text-blue-600"}),"Geographic Coordinates"]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Latitude (optional)"}),(0,u.jsx)(P.A,{type:"number",fieldKey:"coordinates.latitude",value:w.location.coordinates.latitude,onChange:e=>_(t=>(0,a.A)((0,a.A)({},t),{},{location:(0,a.A)((0,a.A)({},t.location),{},{coordinates:(0,a.A)((0,a.A)({},t.location.coordinates),{},{latitude:e})})})),placeholder:"40.7128"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Longitude (optional)"}),(0,u.jsx)(P.A,{type:"number",fieldKey:"coordinates.longitude",value:w.location.coordinates.longitude,onChange:e=>_(t=>(0,a.A)((0,a.A)({},t),{},{location:(0,a.A)((0,a.A)({},t.location),{},{coordinates:(0,a.A)((0,a.A)({},t.location.coordinates),{},{longitude:e})})})),placeholder:"-74.0060"})]})]}),(0,u.jsxs)("div",{className:"mt-4 p-4 bg-blue-50 rounded-xl border border-blue-200",children:[(0,u.jsx)("div",{className:"flex items-center justify-between",children:(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsx)("h5",{className:"text-sm font-semibold text-blue-800 mb-2",children:"Google Maps Link"}),w.location.googleMapsUrl?(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)("p",{className:"text-xs text-green-600 font-medium",children:"\u2713 Auto-populated from address selection"}),(0,u.jsx)(P.A,{fieldKey:"location.googleMapsUrl",value:w.location.googleMapsUrl,onChange:e=>_(t=>(0,a.A)((0,a.A)({},t),{},{location:(0,a.A)((0,a.A)({},t.location),{},{googleMapsUrl:e})})),placeholder:"https://www.google.com/maps/..."})]}):(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)("p",{className:"text-xs text-gray-600",children:"Select an address above to auto-populate this field"}),(0,u.jsx)(P.A,{fieldKey:"location.googleMapsUrl",value:w.location.googleMapsUrl,onChange:e=>_(t=>(0,a.A)((0,a.A)({},t),{},{location:(0,a.A)((0,a.A)({},t.location),{},{googleMapsUrl:e})})),placeholder:"https://www.google.com/maps/..."})]})]})}),E["location.googleMapsUrl"]&&(0,u.jsx)("p",{className:"mt-2 text-sm text-red-600",children:E["location.googleMapsUrl"]}),(w.location.googleMapsUrl||w.location.coordinates.latitude&&w.location.coordinates.longitude)&&(0,u.jsx)("div",{className:"mt-4 rounded-lg overflow-hidden border border-blue-200 bg-white",children:(0,u.jsx)("iframe",{title:"Property location preview",src:w.location.googleMapsUrl?"https://www.google.com/maps?q=".concat(encodeURIComponent(w.location.googleMapsUrl),"&output=embed"):"https://www.google.com/maps?q=".concat(encodeURIComponent(w.location.coordinates.latitude+","+w.location.coordinates.longitude),"&output=embed"),width:"100%",height:"300",style:{border:0},loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})})]})]}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("h4",{className:"text-lg font-semibold text-gray-700 flex items-center",children:[(0,u.jsx)(c.K9k,{className:"mr-2 text-green-600"}),"Nearest Bus Stop"]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Bus Stop Name"}),(0,u.jsx)(C,{value:w.location.nearestBusStop.name,onChange:e=>{_(t=>(0,a.A)((0,a.A)({},t),{},{location:(0,a.A)((0,a.A)({},t.location),{},{nearestBusStop:(0,a.A)((0,a.A)({},t.location.nearestBusStop),{},{name:e})})}))},placeholder:"Enter bus stop name...",fieldType:"busStop"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Distance"}),(0,u.jsx)(P.A,{fieldKey:"busStop.distance",value:w.location.nearestBusStop.distance,onChange:e=>_(t=>(0,a.A)((0,a.A)({},t),{},{location:(0,a.A)((0,a.A)({},t.location),{},{nearestBusStop:(0,a.A)((0,a.A)({},t.location.nearestBusStop),{},{distance:e})})})),placeholder:"0.2 miles"})]})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Bus Stop Latitude (optional)"}),(0,u.jsx)(P.A,{type:"number",fieldKey:"busStopCoordinates.latitude",value:w.location.nearestBusStop.coordinates.latitude,onChange:e=>_(t=>(0,a.A)((0,a.A)({},t),{},{location:(0,a.A)((0,a.A)({},t.location),{},{nearestBusStop:(0,a.A)((0,a.A)({},t.location.nearestBusStop),{},{coordinates:(0,a.A)((0,a.A)({},t.location.nearestBusStop.coordinates),{},{latitude:e})})})})),placeholder:"40.7132"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Bus Stop Longitude (optional)"}),(0,u.jsx)(P.A,{type:"number",fieldKey:"busStopCoordinates.longitude",value:w.location.nearestBusStop.coordinates.longitude,onChange:e=>_(t=>(0,a.A)((0,a.A)({},t),{},{location:(0,a.A)((0,a.A)({},t.location),{},{nearestBusStop:(0,a.A)((0,a.A)({},t.location.nearestBusStop),{},{coordinates:(0,a.A)((0,a.A)({},t.location.nearestBusStop.coordinates),{},{longitude:e})})})})),placeholder:"-74.0059"})]})]})]})]}),(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,u.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-500 to-red-600 rounded-lg flex items-center justify-center",children:(0,u.jsx)(c.VlX,{className:"text-white text-lg"})}),(0,u.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Property Details"})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Bedrooms"}),(0,u.jsx)(P.A,{type:"number",fieldKey:"bedrooms",value:w.details.bedrooms,onChange:e=>_(t=>(0,a.A)((0,a.A)({},t),{},{details:(0,a.A)((0,a.A)({},t.details),{},{bedrooms:e})})),placeholder:"3"}),E["details.bedrooms"]&&(0,u.jsx)("p",{className:"mt-2 text-sm text-red-600",children:E["details.bedrooms"]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Bathrooms"}),(0,u.jsx)(P.A,{type:"number",fieldKey:"bathrooms",value:w.details.bathrooms,onChange:e=>_(t=>(0,a.A)((0,a.A)({},t),{},{details:(0,a.A)((0,a.A)({},t.details),{},{bathrooms:e})})),placeholder:"2"}),E["details.bathrooms"]&&(0,u.jsx)("p",{className:"mt-2 text-sm text-red-600",children:E["details.bathrooms"]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Square Feet"}),(0,u.jsx)(P.A,{type:"number",fieldKey:"sqft",value:w.details.sqft,onChange:e=>_(t=>(0,a.A)((0,a.A)({},t),{},{details:(0,a.A)((0,a.A)({},t.details),{},{sqft:e})})),placeholder:"2000"}),E["details.sqft"]&&(0,u.jsx)("p",{className:"mt-2 text-sm text-red-600",children:E["details.sqft"]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Year Built"}),(0,u.jsx)(P.A,{type:"number",fieldKey:"yearBuilt",value:w.details.yearBuilt,onChange:e=>_(t=>(0,a.A)((0,a.A)({},t),{},{details:(0,a.A)((0,a.A)({},t.details),{},{yearBuilt:e})})),placeholder:"2015"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Lot Size"}),(0,u.jsx)(P.A,{fieldKey:"details.lotSize",value:w.details.lotSize,onChange:e=>_(t=>(0,a.A)((0,a.A)({},t),{},{details:(0,a.A)((0,a.A)({},t.details),{},{lotSize:e})})),placeholder:"0.25 acres"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Parking"}),(0,u.jsx)(P.A,{fieldKey:"details.parking",value:w.details.parking,onChange:e=>_(t=>(0,a.A)((0,a.A)({},t),{},{details:(0,a.A)((0,a.A)({},t.details),{},{parking:e})})),placeholder:"2-car garage"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Heating"}),(0,u.jsx)(P.A,{fieldKey:"details.heating",value:w.details.heating,onChange:e=>_(t=>(0,a.A)((0,a.A)({},t),{},{details:(0,a.A)((0,a.A)({},t.details),{},{heating:e})})),placeholder:"Central"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Cooling"}),(0,u.jsx)(P.A,{fieldKey:"details.cooling",value:w.details.cooling,onChange:e=>_(t=>(0,a.A)((0,a.A)({},t),{},{details:(0,a.A)((0,a.A)({},t.details),{},{cooling:e})})),placeholder:"Central AC"})]})]})]}),(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,u.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-600 rounded-lg flex items-center justify-center",children:(0,u.jsx)(c.HVe,{className:"text-white text-lg"})}),(0,u.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Media & Documents"})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("h4",{className:"text-lg font-semibold text-gray-700 flex items-center",children:[(0,u.jsx)(c.dkL,{className:"mr-2 text-blue-600"}),"Property Images"]}),(0,u.jsx)(x,{propertyId:w.id||"temp",onImagesChange:e=>_(t=>(0,a.A)((0,a.A)({},t),{},{images:e})),initialImages:w.images||[],maxImages:10})]}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("h4",{className:"text-lg font-semibold text-gray-700 flex items-center",children:[(0,u.jsx)(c.HiP,{className:"mr-2 text-red-600"}),"Property Videos"]}),(0,u.jsx)(g,{propertyId:w.id||"temp",onVideosChange:e=>_(t=>(0,a.A)((0,a.A)({},t),{},{videos:e})),initialVideos:w.videos||[],maxVideos:5})]}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("h4",{className:"text-lg font-semibold text-gray-700 flex items-center",children:[(0,u.jsx)(c.t69,{className:"mr-2 text-green-600"}),"Documents"]}),(0,u.jsx)(h,{propertyId:w.id||"temp",onDocumentsChange:e=>_(t=>(0,a.A)((0,a.A)({},t),{},{documentation:e})),initialDocuments:w.documentation||[],maxDocuments:10})]})]})]}),(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,u.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-600 rounded-lg flex items-center justify-center",children:(0,u.jsx)(c.CMH,{className:"text-white text-lg"})}),(0,u.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Amenities"})]}),(0,u.jsxs)("div",{className:"space-y-4",children:[(0,u.jsxs)("div",{className:"flex gap-3",children:[(0,u.jsxs)("div",{className:"flex-1 relative",children:[(0,u.jsx)("input",{type:"text",value:U,onChange:e=>O(e.target.value),className:"w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300",placeholder:"Add custom amenity",onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),te())}),(0,u.jsx)(c.OiG,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-lg"})]}),(0,u.jsx)("button",{type:"button",onClick:te,className:"px-6 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all duration-300 transform hover:-translate-y-1 shadow-lg",children:"Add"})]}),(0,u.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:["Parking","Garden","Balcony","Pool","Gym","Security","Air Conditioning","Heating","Hardwood Floors","Fireplace","Walk-in Closet","Patio","High-Speed Internet"].map(e=>(0,u.jsx)("button",{type:"button",onClick:()=>{w.amenities.includes(e)||_(t=>(0,a.A)((0,a.A)({},t),{},{amenities:[...t.amenities,e]}))},className:"px-4 py-3 text-sm rounded-xl border-2 transition-all duration-300 ".concat(w.amenities.includes(e)?"bg-blue-50 border-blue-300 text-blue-700 shadow-md":"bg-gray-50 border-gray-200 text-gray-700 hover:bg-gray-100 hover:border-gray-300"),children:e},e))})]}),w.amenities.length>0&&(0,u.jsxs)("div",{className:"space-y-3",children:[(0,u.jsx)("h4",{className:"text-lg font-semibold text-gray-700",children:"Selected Amenities:"}),(0,u.jsx)("div",{className:"flex flex-wrap gap-3",children:w.amenities.map((e,t)=>(0,u.jsxs)("span",{className:"inline-flex items-center px-4 py-2 rounded-xl text-sm bg-gradient-to-r from-blue-100 to-purple-100 text-blue-800 border border-blue-200 shadow-sm",children:[e,(0,u.jsx)("button",{type:"button",onClick:()=>(e=>{_(t=>(0,a.A)((0,a.A)({},t),{},{amenities:t.amenities.filter(t=>t!==e)}))})(e),className:"ml-3 text-blue-600 hover:text-blue-800 transition-colors",children:(0,u.jsx)(c.QCr,{className:"text-sm"})})]},t))})]})]}),"for-mortgage"===w.status&&(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,u.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-yellow-500 to-orange-600 rounded-lg flex items-center justify-center",children:(0,u.jsx)(c.Tsk,{className:"text-white text-lg"})}),(0,u.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Mortgage Details"})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Mortgage Provider"}),(0,u.jsx)(P.A,{fieldKey:"mortgageDetails.mortgageProvider",value:Q.mortgageProvider,onChange:e=>X(t=>(0,a.A)((0,a.A)({},t),{},{mortgageProvider:e})),placeholder:"Bank of America"}),E.mortgageProvider&&(0,u.jsx)("p",{className:"mt-2 text-sm text-red-600",children:E.mortgageProvider})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Minimum Down Payment (%)"}),(0,u.jsx)(P.A,{type:"number",fieldKey:"mortgageDetails.minDownPaymentPercent",value:Q.minDownPaymentPercent,onChange:e=>X(t=>(0,a.A)((0,a.A)({},t),{},{minDownPaymentPercent:e})),placeholder:"20"}),E.minDownPaymentPercent&&(0,u.jsx)("p",{className:"mt-2 text-sm text-red-600",children:E.minDownPaymentPercent})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Tenor (Months)"}),(0,u.jsx)(P.A,{type:"number",fieldKey:"mortgageDetails.tenorMonths",value:Q.tenorMonths,onChange:e=>X(t=>(0,a.A)((0,a.A)({},t),{},{tenorMonths:e})),placeholder:"300"}),E.tenorMonths&&(0,u.jsx)("p",{className:"mt-2 text-sm text-red-600",children:E.tenorMonths})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Interest Rate (%)"}),(0,u.jsx)(P.A,{type:"number",fieldKey:"mortgageDetails.interestRate",value:Q.interestRate,onChange:e=>X(t=>(0,a.A)((0,a.A)({},t),{},{interestRate:e})),placeholder:"3.5"}),E.interestRate&&(0,u.jsx)("p",{className:"mt-2 text-sm text-red-600",children:E.interestRate})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Monthly Income Requirement (\u20a6)"}),(0,u.jsx)(P.A,{type:"number",fieldKey:"mortgageDetails.monthlyIncomeRequirement",value:Q.monthlyIncomeRequirement,onChange:e=>X(t=>(0,a.A)((0,a.A)({},t),{},{monthlyIncomeRequirement:e})),placeholder:"300000"}),E.monthlyIncomeRequirement&&(0,u.jsx)("p",{className:"mt-2 text-sm text-red-600",children:E.monthlyIncomeRequirement})]})]})]}),(0,u.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end gap-4 pt-6",children:[T&&(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsx)("div",{className:"w-full bg-gray-100 rounded-full h-2 mb-2",children:(0,u.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:"".concat(M,"%")}})}),(0,u.jsx)("p",{className:"text-xs text-gray-500",children:L})]}),(0,u.jsx)("button",{type:"button",onClick:()=>e("/dashboard"),className:"px-8 py-4 border-2 border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition-all duration-300 font-semibold",children:"Cancel"}),(0,u.jsx)("button",{type:"submit",disabled:T,className:"px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:-translate-y-1 shadow-lg font-semibold",children:T?(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),"Adding Property..."]}):"Add Property"})]})]})})]}),z&&(0,u.jsx)(b,{isOpen:z,onClose:()=>{B(!1),K(null)},onSubmit:e=>{K(e),B(!1),setTimeout(()=>{se({preventDefault:()=>{}})},0)}})]})}},325(e,t,s){s.d(t,{A:()=>l});var a=s(9379);const r=new class{async uploadFile(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{var r,l,o,n,i;const c=new FormData;c.append("file",e),c.append("uploadType","generic"),c.append("metadata",JSON.stringify((0,a.A)({path:t},s)));const d=await fetch("/api/upload",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")||"")},body:c}),m=await d.json();if(!d.ok||null===m||void 0===m||!m.success)throw new Error((null===m||void 0===m?void 0:m.message)||"Upload failed");return{success:!0,url:null===(r=m.data)||void 0===r?void 0:r.url,path:(null===(l=m.data)||void 0===l?void 0:l.publicId)||t,name:(null===(o=m.data)||void 0===o?void 0:o.originalName)||e.name,size:(null===(n=m.data)||void 0===n?void 0:n.size)||e.size,type:(null===(i=m.data)||void 0===i?void 0:i.format)||e.type}}catch(c){return console.error("Error uploading file:",c),{success:!1,error:c.message||"Upload failed"}}}async uploadMultipleFiles(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{var r,l,o;const n=new FormData;e.forEach(e=>n.append("files",e)),n.append("uploadType","multiple"),n.append("metadata",JSON.stringify((0,a.A)({basePath:t},s)));const i=await fetch("/api/upload/multiple",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")||"")},body:n}),c=await i.json();if(!i.ok||null===c||void 0===c||!c.success)throw new Error((null===c||void 0===c?void 0:c.message)||"Upload failed");return{success:!0,successful:(null===(r=c.data)||void 0===r?void 0:r.successful)||[],failed:(null===(l=c.data)||void 0===l?void 0:l.failed)||[],total:(null===(o=c.data)||void 0===o?void 0:o.total)||e.length}}catch(n){return console.error("Error uploading multiple files:",n),{success:!1,error:n.message||"Upload failed"}}}async moveFile(e,t){return{success:!0,url:null,path:t||e,name:(t||e||"").split("/").pop()}}async uploadPropertyImages(e,t,s){try{var a,r,l;const o=new FormData;e.forEach(e=>{o.append("files",e)}),o.append("uploadType","property_images"),o.append("metadata",JSON.stringify({propertyId:t,userId:s}));const n=await fetch("/api/upload/multiple",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")||"")},body:o}),i=await n.json();if(!n.ok||null===i||void 0===i||!i.success)throw new Error((null===i||void 0===i?void 0:i.message)||"Upload failed");return{success:!0,successful:(null===(a=i.data)||void 0===a?void 0:a.successful)||[],failed:(null===(r=i.data)||void 0===r?void 0:r.failed)||[],total:(null===(l=i.data)||void 0===l?void 0:l.total)||e.length}}catch(o){return console.error("Error uploading property images:",o),{success:!1,error:o.message||"Upload failed"}}}async uploadUserAvatar(e,t){if(!t)return{success:!1,error:"User ID is required"};const s=Date.now(),a=e.name.split(".").pop(),r="avatar_".concat(t,"_").concat(s,".").concat(a),l="users/".concat(t,"/avatar/").concat(r),o=this.validateFile(e,["image/jpeg","image/jpg","image/png","image/gif","image/webp"],5242880);if(!o.valid)return{success:!1,error:o.errors.join(", ")};const n=await this.uploadFile(e,l,{userId:t});if(n.success){const e={userId:t,avatarUrl:n.url,uploadDate:(new Date).toISOString(),fileName:n.name};localStorage.setItem("user_avatar_".concat(t),JSON.stringify(e))}return n}getFallbackAvatar(e){const t="https://ui-avatars.com/api/?name=".concat(encodeURIComponent(e),"&background=random&size=200"),s={userId:e,avatarUrl:t,uploadDate:(new Date).toISOString(),fileName:"fallback_avatar",isFallback:!0};return localStorage.setItem("user_avatar_".concat(e),JSON.stringify(s)),{success:!0,url:t,path:"users/".concat(e,"/avatar/fallback_").concat(Date.now()),name:"fallback_avatar",size:0,type:"image/png",isFallback:!0}}async uploadEscrowDocument(e,t,s,a){try{var r,l,o,n,i;const c=new FormData;c.append("file",e),c.append("uploadType","escrow_document"),c.append("metadata",JSON.stringify({escrowId:t,documentType:s,userId:a}));const d=await fetch("/api/upload",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")||"")},body:c}),m=await d.json();if(!d.ok||null===m||void 0===m||!m.success)throw new Error((null===m||void 0===m?void 0:m.message)||"Upload failed");return{success:!0,url:null===(r=m.data)||void 0===r?void 0:r.url,path:null===(l=m.data)||void 0===l?void 0:l.publicId,name:null===(o=m.data)||void 0===o?void 0:o.originalName,size:null===(n=m.data)||void 0===n?void 0:n.size,type:null===(i=m.data)||void 0===i?void 0:i.format}}catch(c){return console.error("Error uploading escrow document:",c),{success:!1,error:c.message||"Upload failed"}}}async deleteFile(){return{success:!1,error:"Delete is not supported in this build."}}async getFileMetadata(){return{success:!1,error:"Metadata lookup is not supported in this build."}}async listFiles(){return{success:!1,error:"Listing files is not supported in this build."}}async getPropertyImages(){return{success:!1,error:"Listing images is not supported in this build."}}async getEscrowDocuments(){return{success:!1,error:"Listing documents is not supported in this build."}}validateFile(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5242880;const a=[];return t.length>0&&!t.includes(e.type)&&a.push("File type ".concat(e.type," is not allowed. Allowed types: ").concat(t.join(", "))),e.size>s&&a.push("File size ".concat((e.size/1024/1024).toFixed(2),"MB exceeds maximum allowed size of ").concat((s/1024/1024).toFixed(2),"MB")),{valid:0===a.length,errors:a}}formatFileSize(e){if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]}},l=r}}]);
//# sourceMappingURL=365.d17be4a3.chunk.js.map